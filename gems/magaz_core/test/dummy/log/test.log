[SKYLIGHT] [0.9.4] authentication token required; disabling Skylight agent
[SKYLIGHT] [0.9.4] authentication token required; disabling Skylight agent
  [1m[36m (1.0ms)[0m  [1mCREATE TABLE "articles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "content" text, "blog_id" integer, "created_at" datetime, "updated_at" datetime, "handle" varchar, "page_title" varchar, "meta_description" varchar, "slug" varchar, "publish_on" datetime, "published_at" datetime) [0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "assets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "theme_id" integer, "content_type" varchar, "key" varchar, "public_url" varchar, "size" integer, "src" varchar, "value" varchar, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "blogs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime, "handle" varchar, "page_title" varchar, "meta_description" varchar, "slug" varchar) [0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "checkouts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "note" text, "status" varchar, "financial_status" varchar, "fulfillment_status" varchar, "currency" varchar, "email" varchar, "created_at" datetime, "updated_at" datetime, "customer_id" integer) 
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "collections" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" text, "shop_id" integer, "created_at" datetime, "updated_at" datetime, "handle" varchar, "page_title" varchar, "meta_description" varchar, "slug" varchar, "publish_on" datetime, "published_at" datetime) [0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "collections_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "collection_id" integer, "product_id" integer) 
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "comments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "author" varchar, "body" text, "email" varchar, "blog_id" integer, "created_at" datetime, "updated_at" datetime, "article_id" integer) [0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "customers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "accepts_marketing" boolean, "email" varchar, "first_name" varchar, "last_name" varchar, "shop_id" integer) 
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "email_templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "title" varchar, "body" text, "created_at" datetime, "updated_at" datetime, "shop_id" integer, "template_type" varchar, "description" varchar) [0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "arguments" varchar DEFAULT '--- []
', "body" varchar, "message" varchar, "subject_id" integer, "subject_type" varchar, "verb" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  CREATE  INDEX "index_events_on_subject_id" ON "events" ("subject_id")
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "files" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "file" varchar, "name" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime, "file_size" integer) [0m
  [1m[35m (0.9ms)[0m  CREATE TABLE "friendly_id_slugs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "slug" varchar NOT NULL, "sluggable_id" integer NOT NULL, "sluggable_type" varchar(50), "scope" varchar, "created_at" datetime) 
  [1m[36m (0.8ms)[0m  [1mCREATE UNIQUE INDEX "index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope" ON "friendly_id_slugs" ("slug", "sluggable_type", "scope")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope' AND type='index'

  [1m[36m (0.7ms)[0m  [1mCREATE  INDEX "index_friendly_id_slugs_on_slug_and_sluggable_type" ON "friendly_id_slugs" ("slug", "sluggable_type")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  CREATE  INDEX "index_friendly_id_slugs_on_sluggable_id" ON "friendly_id_slugs" ("sluggable_id")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_sluggable_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_sluggable_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  CREATE  INDEX "index_friendly_id_slugs_on_sluggable_type" ON "friendly_id_slugs" ("sluggable_type")
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "line_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "checkout_id" integer, "product_id" integer, "name" varchar, "description" text, "price" decimal(38,2), "quantity" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "link_lists" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "shop_id" integer, "handle" varchar, "slug" varchar) 
  [1m[36m (0.7ms)[0m  [1mCREATE UNIQUE INDEX "index_link_lists_on_slug" ON "link_lists" ("slug")[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "links" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "link_type" varchar, "position" integer, "subject" varchar, "subject_params" varchar, "subject_id" integer, "link_list_id" integer) 
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "order_subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "notification_method" varchar, "subscription_address" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "pages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "content" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime, "handle" varchar, "page_title" varchar, "meta_description" varchar, "slug" varchar, "publish_on" datetime, "published_at" datetime) 
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "product_images" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime, "image" varchar, "product_id" integer) [0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" text, "created_at" datetime, "updated_at" datetime, "shop_id" integer, "price" decimal(38,2), "handle" varchar, "page_title" varchar, "meta_description" varchar, "slug" varchar, "publish_on" datetime, "published_at" datetime) 
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "shipping_countries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "tax" varchar, "shop_id" integer) [0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "shipping_rates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "criteria" varchar, "price_from" float, "price_to" float, "weight_from" float, "weight_to" float, "shipping_price" float, "shipping_country_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime, "updated_at" datetime, "password_salt" varchar, "subdomain" varchar, "address" varchar, "business_name" varchar, "city" varchar, "country" varchar, "currency" varchar, "customer_email" varchar, "phone" varchar, "province" varchar, "timezone" varchar, "unit_system" varchar, "zip" integer, "handle" varchar, "page_title" varchar, "meta_description" varchar, "account_type_choice" varchar, "billing_address_is_shipping_too" boolean, "abandoned_checkout_time_delay" varchar, "email_marketing_choice" varchar, "after_order_paid" varchar, "after_order_fulfilled_and_paid" boolean, "checkout_language" varchar, "checkout_refund_policy" text, "checkout_privacy_policy" text, "checkout_term_of_service" text, "enable_multipass_login" boolean, "notify_customers_of_their_shipment" boolean, "automatically_fulfill_all_orders" boolean, "authorization_settings" varchar, "all_taxes_are_included" boolean, "charge_taxes_on_shipping_rates" boolean, "eu_digital_goods_collection_id" integer) [0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "tax_overrides" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "rate" float, "is_shipping" boolean DEFAULT 'f', "collection_id" integer, "shipping_country_id" integer) 
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "themes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime, "updated_at" datetime, "shop_id" integer, "source_theme_id" integer, "role" varchar) [0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "email" varchar, "password_digest" varchar, "phone" varchar, "homepage" varchar, "bio" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime, "user_type" varchar, "password_salt" varchar, "account_owner" boolean DEFAULT 'f', "permissions" varchar DEFAULT '--- []
', "invite_token" varchar) 
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "webhooks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "address" varchar, "fields" varchar DEFAULT '--- []
', "format" varchar, "metafield_namespaces" varchar DEFAULT '--- []
', "topic" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.8ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar NOT NULL) 
  [1m[36m (0.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150603104850')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
[SKYLIGHT] [0.9.4] authentication token required; disabling Skylight agent
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateShops (20130718032357)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar, "password_digest" varchar, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.0ms)[0m  rollback transaction
[SKYLIGHT] [0.9.4] authentication token required; disabling Skylight agent
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateShops (20130718032357)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar, "password_digest" varchar, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.0ms)[0m  rollback transaction
[SKYLIGHT] [0.9.4] authentication token required; disabling Skylight agent
  [1m[36m (3.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.8ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateShops (20130718032357)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar, "password_digest" varchar, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20130718032357"]]
  [1m[35m (1.0ms)[0m  commit transaction
Migrating to AddPasswordSaltToShop (20130730203558)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "password_salt" varchar
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20130730203558"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to CreateProducts (20130817093137)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" text, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20130817093137"]]
  [1m[35m (0.5ms)[0m  commit transaction
Migrating to AddShopIdToProduct (20130817124105)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "products" ADD "shop_id" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20130817124105"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to CreateCollections (20130826114821)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "collections" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" text, "shop_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20130826114821"]]
  [1m[35m (0.8ms)[0m  commit transaction
Migrating to CreateCollectionsProductsTable (20130826143517)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "collections_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "collection_id" integer, "product_id" integer) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20130826143517"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to AddSubdomainToShop (20130910113625)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "subdomain" varchar
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20130910113625"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to AddFieldsToProducts (20131024105917)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "products" ADD "product_type" varchar
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "products" ADD "sku" varchar[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "products" ADD "price" decimal(38,2)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20131024105917"]]
  [1m[35m (0.8ms)[0m  commit transaction
Migrating to RemoveFieldsFromProducts (20131101032033)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TEMPORARY TABLE "aproducts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" text, "created_at" datetime, "updated_at" datetime, "shop_id" integer, "product_type" varchar, "sku" varchar, "price" decimal(38,2)) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "products"[0m
  [1m[35m (0.2ms)[0m  DROP TABLE "products"
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" text, "created_at" datetime, "updated_at" datetime, "shop_id" integer, "product_type" varchar, "price" decimal(38,2)) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "aproducts"
  [1m[36m (0.2ms)[0m  [1mDROP TABLE "aproducts"[0m
  [1m[35m (0.1ms)[0m  CREATE TEMPORARY TABLE "aproducts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" text, "created_at" datetime, "updated_at" datetime, "shop_id" integer, "product_type" varchar, "price" decimal(38,2)) 
  [1m[36m (0.0ms)[0m  [1mSELECT * FROM "products"[0m
  [1m[35m (0.2ms)[0m  DROP TABLE "products"
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" text, "created_at" datetime, "updated_at" datetime, "shop_id" integer, "price" decimal(38,2)) [0m
  [1m[35m (0.2ms)[0m  SELECT * FROM "aproducts"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "aproducts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20131101032033"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
Migrating to CreatePages (20131107193139)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "pages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20131107193139"]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
Migrating to CreateBlogs (20131109231213)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "blogs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20131109231213"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Migrating to CreateArticles (20131110003619)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mCREATE TABLE "articles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "content" text, "blog_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20131110003619"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
Migrating to CreateComments (20131112013250)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "comments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "author" varchar, "body" text, "email" varchar, "blog_id" integer, "articles_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20131112013250"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Migrating to FixPagesColumnNames (20131206104529)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mCREATE TEMPORARY TABLE "apages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "description" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "pages"
  [1m[36m (0.2ms)[0m  [1mDROP TABLE "pages"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "pages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "description" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.0ms)[0m  [1mSELECT * FROM "apages"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "apages"
  [1m[36m (0.1ms)[0m  [1mCREATE TEMPORARY TABLE "apages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "content" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "pages"
  [1m[36m (0.3ms)[0m  [1mDROP TABLE "pages"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "pages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "content" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "apages"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "apages"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20131206104529"]]
  [1m[35m (0.8ms)[0m  commit transaction
Migrating to FixCommentArticleReferences (20131217022948)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  CREATE TEMPORARY TABLE "acomments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "author" varchar, "body" text, "email" varchar, "blog_id" integer, "articles_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "comments"[0m
  [1m[35m (0.5ms)[0m  DROP TABLE "comments"
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "comments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "author" varchar, "body" text, "email" varchar, "blog_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "acomments"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "acomments"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "comments" ADD "article_id" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20131217022948"]]
  [1m[35m (0.8ms)[0m  commit transaction
Migrating to CreateOrders (20131229191029)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "orders" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "shop_id" integer, "note" text, "status" varchar, "financial_status" varchar, "fulfillment_status" varchar, "currency" varchar, "email" varchar, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20131229191029"]]
  [1m[35m (0.9ms)[0m  commit transaction
Migrating to CreateLineItems (20131229193117)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "line_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer, "product_id" integer, "name" varchar, "description" text, "price" decimal(38,2), "quantity" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20131229193117"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to CreatePictures (20140121145515)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "pictures" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140121145515"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to AddImageToPictures (20140121145602)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "pictures" ADD "image" varchar
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140121145602"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to CreateProductsPicturesTable (20140121151109)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "products_pictures" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "product_id" integer, "picture_id" integer) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140121151109"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to RenamePicturesToProductImages (20140204172441)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "pictures" RENAME TO "product_images"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140204172441"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to RemoveProductsPicturesTable (20140205115646)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  DROP TABLE "products_pictures"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140205115646"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to AddReferencesToProductImages (20140205121139)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "product_images" ADD "product_id" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140205121139"]]
  [1m[35m (0.5ms)[0m  commit transaction
Migrating to AddSeoFieldsToProducts (20140228003322)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "products" ADD "handle" varchar
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "products" ADD "page_title" varchar[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "products" ADD "meta_description" varchar
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140228003322"]]
  [1m[35m (0.7ms)[0m  commit transaction
Migrating to AddSeoFieldsToCollection (20140228005513)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "collections" ADD "handle" varchar
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "collections" ADD "page_title" varchar[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "collections" ADD "meta_description" varchar
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140228005513"]]
  [1m[35m (0.7ms)[0m  commit transaction
Migrating to AddSeoFieldsToPagesBlogsArticles (20140228010254)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "pages" ADD "handle" varchar
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "pages" ADD "page_title" varchar[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "pages" ADD "meta_description" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "blogs" ADD "handle" varchar[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "blogs" ADD "page_title" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "blogs" ADD "meta_description" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "articles" ADD "handle" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "articles" ADD "page_title" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "articles" ADD "meta_description" varchar
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140228010254"]]
  [1m[35m (0.8ms)[0m  commit transaction
Migrating to CreateFriendlyIdSlugs (20140317162247)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "friendly_id_slugs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "slug" varchar NOT NULL, "sluggable_id" integer NOT NULL, "sluggable_type" varchar(50), "scope" varchar, "created_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_friendly_id_slugs_on_sluggable_id" ON "friendly_id_slugs" ("sluggable_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_sluggable_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_sluggable_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_friendly_id_slugs_on_slug_and_sluggable_type" ON "friendly_id_slugs" ("slug", "sluggable_type")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_sluggable_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_sluggable_id' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  CREATE UNIQUE INDEX "index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope" ON "friendly_id_slugs" ("slug", "sluggable_type", "scope")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_sluggable_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_sluggable_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_friendly_id_slugs_on_sluggable_type" ON "friendly_id_slugs" ("sluggable_type")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140317162247"]]
  [1m[35m (1.1ms)[0m  commit transaction
Migrating to AddIndexesToProducts (20140324105433)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "products" ADD "slug" varchar
  [1m[36m (0.3ms)[0m  [1mCREATE UNIQUE INDEX "index_products_on_slug" ON "products" ("slug")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20140324105433"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
Migrating to AddIndexesToPages (20140324233312)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "pages" ADD "slug" varchar[0m
  [1m[35m (0.4ms)[0m  CREATE UNIQUE INDEX "index_pages_on_slug" ON "pages" ("slug")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140324233312"]]
  [1m[35m (0.9ms)[0m  commit transaction
Migrating to AddIndexesToBlogs (20140324233327)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "blogs" ADD "slug" varchar
  [1m[36m (0.4ms)[0m  [1mCREATE UNIQUE INDEX "index_blogs_on_slug" ON "blogs" ("slug")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20140324233327"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
Migrating to AddIndexesToArticles (20140324233339)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "articles" ADD "slug" varchar[0m
  [1m[35m (0.4ms)[0m  CREATE UNIQUE INDEX "index_articles_on_slug" ON "articles" ("slug")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140324233339"]]
  [1m[35m (0.8ms)[0m  commit transaction
Migrating to AddIndexesToCollections (20140324233430)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  ALTER TABLE "collections" ADD "slug" varchar
  [1m[36m (0.4ms)[0m  [1mCREATE UNIQUE INDEX "index_collections_on_slug" ON "collections" ("slug")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20140324233430"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
Migrating to RenameOrdersToCheckouts (20140407142157)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "orders" RENAME TO "checkouts"[0m
  [1m[35m (0.2ms)[0m  CREATE TEMPORARY TABLE "aline_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "checkout_id" integer, "product_id" integer, "name" varchar, "description" text, "price" decimal(38,2), "quantity" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  DROP TABLE "line_items"
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "line_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "checkout_id" integer, "product_id" integer, "name" varchar, "description" text, "price" decimal(38,2), "quantity" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "aline_items"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "aline_items"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20140407142157"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
Migrating to RemoveIndexesFromProducts (20140411152202)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_slug' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_slug' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  DROP INDEX "index_products_on_slug"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140411152202"]]
  [1m[35m (0.9ms)[0m  commit transaction
Migrating to CreateCustomers (20140412124729)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "customers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "accepts_marketing" boolean, "email" varchar, "first_name" varchar, "last_name" varchar, "shop_id" integer) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140412124729"]]
  [1m[35m (0.7ms)[0m  commit transaction
Migrating to AddCustomerToCheckouts (20140412131300)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  CREATE TEMPORARY TABLE "acheckouts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "shop_id" integer, "note" text, "status" varchar, "financial_status" varchar, "fulfillment_status" varchar, "currency" varchar, "email" varchar, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM "checkouts"[0m
  [1m[35m (0.2ms)[0m  DROP TABLE "checkouts"
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "checkouts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "note" text, "status" varchar, "financial_status" varchar, "fulfillment_status" varchar, "currency" varchar, "email" varchar, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "acheckouts"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "acheckouts"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "checkouts" ADD "customer_id" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140412131300"]]
  [1m[35m (0.7ms)[0m  commit transaction
Migrating to RemoveSlugIndexes (20140412230645)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_pages_on_slug' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_pages_on_slug' AND type='index'

  [1m[36m (0.2ms)[0m  [1mDROP INDEX "index_pages_on_slug"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_blogs_on_slug' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_blogs_on_slug' AND type='index'

  [1m[36m (0.3ms)[0m  [1mDROP INDEX "index_blogs_on_slug"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_articles_on_slug' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_articles_on_slug' AND type='index'

  [1m[36m (0.1ms)[0m  [1mDROP INDEX "index_articles_on_slug"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_collections_on_slug' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_collections_on_slug' AND type='index'

  [1m[36m (0.1ms)[0m  [1mDROP INDEX "index_collections_on_slug"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20140412230645"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
Migrating to CreateThemes (20140415133234)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "themes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20140415133234"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Migrating to AddFieldsToThemes (20140415151706)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "themes" ADD "shop_id" integer[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "themes" ADD "source_theme_id" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140415151706"]]
  [1m[35m (0.5ms)[0m  commit transaction
Migrating to AddRoleToThemes (20140416115243)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "themes" ADD "role" varchar
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140416115243"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to CreateAssets (20140416153636)
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "assets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "theme_id" integer, "content_type" varchar, "key" varchar, "public_url" varchar, "size" integer, "src" varchar, "value" varchar, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140416153636"]]
  [1m[35m (0.8ms)[0m  commit transaction
Migrating to AddVisibilityFieldsToArticleCollectionPageProduct (20140527160314)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "articles" ADD "publish_on" datetime
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "articles" ADD "published_at" datetime[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "collections" ADD "publish_on" datetime
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "collections" ADD "published_at" datetime[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "pages" ADD "publish_on" datetime
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "pages" ADD "published_at" datetime[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "products" ADD "publish_on" datetime
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "products" ADD "published_at" datetime[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20140527160314"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
Migrating to AddFieldsToShops (20140610115405)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "shops" ADD "address" varchar[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "shops" ADD "business_name" varchar
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "shops" ADD "city" varchar[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "shops" ADD "country" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "currency" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "customer_email" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "phone" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "province" varchar
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "shops" ADD "timezone" varchar[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "shops" ADD "unit_system" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "zip" integer[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "shops" ADD "handle" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "page_title" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "meta_description" varchar
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140610115405"]]
  [1m[35m (0.7ms)[0m  commit transaction
Migrating to CreateLinkLists (20140715001745)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "link_lists" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "shop_id" integer, "handle" varchar) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140715001745"]]
  [1m[35m (0.7ms)[0m  commit transaction
Migrating to CreateLinks (20140715153558)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "links" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "link_type" varchar, "position" integer, "subject" varchar, "subject_params" varchar, "subject_id" integer, "link_list_id" integer) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20140715153558"]]
  [1m[35m (0.8ms)[0m  commit transaction
Migrating to AddIndexesToLinkLists (20140801222550)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "link_lists" ADD "slug" varchar
  [1m[36m (0.4ms)[0m  [1mCREATE UNIQUE INDEX "index_link_lists_on_slug" ON "link_lists" ("slug")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20140801222550"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
Migrating to CreateFiles (20140907235144)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "files" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "file" varchar, "name" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20140907235144"]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
Migrating to CreateUsers (20140915223009)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "email" varchar, "password_digest" varchar, "phone" varchar, "homepage" varchar, "bio" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20140915223009"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Migrating to EditUsers (20141002230806)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "users" ADD "permissions" text DEFAULT '--- []
'[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "users" ADD "user_type" varchar
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20141002230806"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to AddFile (20141213120723)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "files" ADD "file_size" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20141213120723"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to AddCostumerAccountsChoice (20141215221200)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "account_type_choice" varchar
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20141215221200"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to AddToSettingsCheckoutsOrderProcessing (20141215223522)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "shops" ADD "bulling_adress_is_shipping_too" boolean
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "abandoned_checkout_time_delay" varchar[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "shops" ADD "email_marketing_choice" varchar
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "shops" ADD "after_order_paid" varchar[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "shops" ADD "after_order_fulfilled_and_paid" boolean
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20141215223522"]]
  [1m[35m (0.7ms)[0m  commit transaction
Migrating to AddToSettingsCheckoutsLanguage (20141215223926)
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "shops" ADD "checkout_language" varchar
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20141215223926"]]
  [1m[35m (0.7ms)[0m  commit transaction
Migrating to AddToSettingsCheckoutsPolicyAndTos (20141215224058)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "checkout_refound_policy" text
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "checkout_privacy_policy" text[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "checkout_term_of_service" text
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20141215224058"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to AddHiddenFieldsToCheckoutsSettings (20141219123957)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "shops" ADD "enable_multipass_login" boolean
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "notify_customers_of_their_shipment" boolean[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "automatically_fulfill_all_orders" boolean
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20141219123957"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to AddPaymentsAuthorizationSettings (20141225152826)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "authoriz_settings" varchar
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20141225152826"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to RenamePaymentsAuthorizationSettings (20150108215147)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  CREATE TEMPORARY TABLE "ashops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar, "password_digest" varchar, "created_at" datetime, "updated_at" datetime, "password_salt" varchar, "subdomain" varchar, "address" varchar, "business_name" varchar, "city" varchar, "country" varchar, "currency" varchar, "customer_email" varchar, "phone" varchar, "province" varchar, "timezone" varchar, "unit_system" varchar, "zip" integer, "handle" varchar, "page_title" varchar, "meta_description" varchar, "account_type_choice" varchar, "bulling_adress_is_shipping_too" boolean, "abandoned_checkout_time_delay" varchar, "email_marketing_choice" varchar, "after_order_paid" varchar, "after_order_fulfilled_and_paid" boolean, "checkout_language" varchar, "checkout_refound_policy" text, "checkout_privacy_policy" text, "checkout_term_of_service" text, "enable_multipass_login" boolean, "notify_customers_of_their_shipment" boolean, "automatically_fulfill_all_orders" boolean, "authorization_settings" varchar) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "shops"[0m
  [1m[35m (0.5ms)[0m  DROP TABLE "shops"
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar, "password_digest" varchar, "created_at" datetime, "updated_at" datetime, "password_salt" varchar, "subdomain" varchar, "address" varchar, "business_name" varchar, "city" varchar, "country" varchar, "currency" varchar, "customer_email" varchar, "phone" varchar, "province" varchar, "timezone" varchar, "unit_system" varchar, "zip" integer, "handle" varchar, "page_title" varchar, "meta_description" varchar, "account_type_choice" varchar, "bulling_adress_is_shipping_too" boolean, "abandoned_checkout_time_delay" varchar, "email_marketing_choice" varchar, "after_order_paid" varchar, "after_order_fulfilled_and_paid" boolean, "checkout_language" varchar, "checkout_refound_policy" text, "checkout_privacy_policy" text, "checkout_term_of_service" text, "enable_multipass_login" boolean, "notify_customers_of_their_shipment" boolean, "automatically_fulfill_all_orders" boolean, "authorization_settings" varchar) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "ashops"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "ashops"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150108215147"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Migrating to RenameSettingsCheckoutsOrderProcessing (20150112100948)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mCREATE TEMPORARY TABLE "ashops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar, "password_digest" varchar, "created_at" datetime, "updated_at" datetime, "password_salt" varchar, "subdomain" varchar, "address" varchar, "business_name" varchar, "city" varchar, "country" varchar, "currency" varchar, "customer_email" varchar, "phone" varchar, "province" varchar, "timezone" varchar, "unit_system" varchar, "zip" integer, "handle" varchar, "page_title" varchar, "meta_description" varchar, "account_type_choice" varchar, "billing_address_is_shipping_too" boolean, "abandoned_checkout_time_delay" varchar, "email_marketing_choice" varchar, "after_order_paid" varchar, "after_order_fulfilled_and_paid" boolean, "checkout_language" varchar, "checkout_refound_policy" text, "checkout_privacy_policy" text, "checkout_term_of_service" text, "enable_multipass_login" boolean, "notify_customers_of_their_shipment" boolean, "automatically_fulfill_all_orders" boolean, "authorization_settings" varchar) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "shops"
  [1m[36m (0.2ms)[0m  [1mDROP TABLE "shops"[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar, "password_digest" varchar, "created_at" datetime, "updated_at" datetime, "password_salt" varchar, "subdomain" varchar, "address" varchar, "business_name" varchar, "city" varchar, "country" varchar, "currency" varchar, "customer_email" varchar, "phone" varchar, "province" varchar, "timezone" varchar, "unit_system" varchar, "zip" integer, "handle" varchar, "page_title" varchar, "meta_description" varchar, "account_type_choice" varchar, "billing_address_is_shipping_too" boolean, "abandoned_checkout_time_delay" varchar, "email_marketing_choice" varchar, "after_order_paid" varchar, "after_order_fulfilled_and_paid" boolean, "checkout_language" varchar, "checkout_refound_policy" text, "checkout_privacy_policy" text, "checkout_term_of_service" text, "enable_multipass_login" boolean, "notify_customers_of_their_shipment" boolean, "automatically_fulfill_all_orders" boolean, "authorization_settings" varchar) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "ashops"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "ashops"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150112100948"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to CountriesDataMigration (20150112132214)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "countries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(50), "code" varchar(2)) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "AF"], ["name", "AFGHANISTAN"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "AL"], ["name", "ALBANIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "DZ"], ["name", "ALGERIA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "AS"], ["name", "AMERICAN SAMOA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "AD"], ["name", "ANDORRA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "AO"], ["name", "ANGOLA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "AI"], ["name", "ANGUILLA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "AG"], ["name", "ANTIGUA AND BARBUDA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "AR"], ["name", "ARGENTINA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "AM"], ["name", "ARMENIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "AW"], ["name", "ARUBA"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "AU"], ["name", "AUSTRALIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "AT"], ["name", "AUSTRIA"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "AZ"], ["name", "AZERBAIJAN"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "BS"], ["name", "BAHAMAS"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "BH"], ["name", "BAHRAIN"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "BD"], ["name", "BANGLADESH"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "BB"], ["name", "BARBADOS"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "BY"], ["name", "BELARUS"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "BE"], ["name", "BELGIUM"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "BZ"], ["name", "BELIZE"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "BJ"], ["name", "BENIN"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "BM"], ["name", "BERMUDA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "BT"], ["name", "BHUTAN"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "BO"], ["name", "BOLIVIA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "BA"], ["name", "BOSNIA AND HERZEGOVINA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "BW"], ["name", "BOTSWANA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "BR"], ["name", "BRAZIL"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "BN"], ["name", "BRUNEI DARUSSALAM"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "BG"], ["name", "BULGARIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "BF"], ["name", "BURKINA FASO"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "BI"], ["name", "BURUNDI"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "KH"], ["name", "CAMBODIA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "CM"], ["name", "CAMEROON"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "CA"], ["name", "CANADA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "CV"], ["name", "CAPE VERDE"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "KY"], ["name", "CAYMAN ISLANDS"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "CF"], ["name", "CENTRAL AFRICAN REPUBLIC"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "TD"], ["name", "CHAD"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "CL"], ["name", "CHILE"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "CN"], ["name", "CHINA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "CO"], ["name", "COLOMBIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "KM"], ["name", "COMOROS"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "CG"], ["name", "CONGO"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "CD"], ["name", "CONGO, THE DEMOCRATIC REPUBLIC OF THE"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "CK"], ["name", "COOK ISLANDS"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "CR"], ["name", "COSTA RICA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "CI"], ["name", "COTE D'IVOIRE"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "HR"], ["name", "CROATIA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "CU"], ["name", "CUBA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "CY"], ["name", "CYPRUS"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "CZ"], ["name", "CZECH REPUBLIC"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "DK"], ["name", "DENMARK"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "DJ"], ["name", "DJIBOUTI"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "DM"], ["name", "DOMINICA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "DO"], ["name", "DOMINICAN REPUBLIC"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "EC"], ["name", "ECUADOR"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "EG"], ["name", "EGYPT"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "SV"], ["name", "EL SALVADOR"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "GQ"], ["name", "EQUATORIAL GUINEA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "ER"], ["name", "ERITREA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "EE"], ["name", "ESTONIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "ET"], ["name", "ETHIOPIA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "FK"], ["name", "FALKLAND ISLANDS (MALVINAS)"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "FO"], ["name", "FAROE ISLANDS"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "FJ"], ["name", "FIJI"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "FI"], ["name", "FINLAND"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "FR"], ["name", "FRANCE"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "GF"], ["name", "FRENCH GUIANA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "PF"], ["name", "FRENCH POLYNESIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "GA"], ["name", "GABON"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "GM"], ["name", "GAMBIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "GE"], ["name", "GEORGIA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "DE"], ["name", "GERMANY"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "GH"], ["name", "GHANA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "GI"], ["name", "GIBRALTAR"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "GR"], ["name", "GREECE"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "GL"], ["name", "GREENLAND"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "GD"], ["name", "GRENADA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "GP"], ["name", "GUADELOUPE"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "GU"], ["name", "GUAM"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "GT"], ["name", "GUATEMALA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "GN"], ["name", "GUINEA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "GW"], ["name", "GUINEA-BISSAU"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "GY"], ["name", "GUYANA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "HT"], ["name", "HAITI"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "VA"], ["name", "HOLY SEE (VATICAN CITY STATE)"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "HN"], ["name", "HONDURAS"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "HK"], ["name", "HONG KONG"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "HU"], ["name", "HUNGARY"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "IS"], ["name", "ICELAND"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "IN"], ["name", "INDIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "ID"], ["name", "INDONESIA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "IR"], ["name", "IRAN, ISLAMIC REPUBLIC OF"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "IQ"], ["name", "IRAQ"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "IE"], ["name", "IRELAND"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "IL"], ["name", "ISRAEL"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "IT"], ["name", "ITALY"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "JM"], ["name", "JAMAICA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "JP"], ["name", "JAPAN"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "JO"], ["name", "JORDAN"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "KZ"], ["name", "KAZAKHSTAN"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "KE"], ["name", "KENYA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "KI"], ["name", "KIRIBATI"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "KP"], ["name", "KOREA, DEMOCRATIC PEOPLE'S REPUBLIC OF"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "KR"], ["name", "KOREA, REPUBLIC OF"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "KW"], ["name", "KUWAIT"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "KG"], ["name", "KYRGYZSTAN"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "LA"], ["name", "LAO PEOPLE'S DEMOCRATIC REPUBLIC"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "LV"], ["name", "LATVIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "LB"], ["name", "LEBANON"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "LS"], ["name", "LESOTHO"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "LR"], ["name", "LIBERIA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "LY"], ["name", "LIBYAN ARAB JAMAHIRIYA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "LI"], ["name", "LIECHTENSTEIN"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "LT"], ["name", "LITHUANIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "LU"], ["name", "LUXEMBOURG"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "MO"], ["name", "MACAO"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "MK"], ["name", "MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "MG"], ["name", "MADAGASCAR"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "MW"], ["name", "MALAWI"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "MY"], ["name", "MALAYSIA"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "MV"], ["name", "MALDIVES"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "ML"], ["name", "MALI"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "MT"], ["name", "MALTA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "MH"], ["name", "MARSHALL ISLANDS"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "MQ"], ["name", "MARTINIQUE"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "MR"], ["name", "MAURITANIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "MU"], ["name", "MAURITIUS"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "MX"], ["name", "MEXICO"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "FM"], ["name", "MICRONESIA, FEDERATED STATES OF"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "MD"], ["name", "MOLDOVA, REPUBLIC OF"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "MC"], ["name", "MONACO"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "MN"], ["name", "MONGOLIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "MS"], ["name", "MONTSERRAT"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "MA"], ["name", "MOROCCO"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "MZ"], ["name", "MOZAMBIQUE"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "MM"], ["name", "MYANMAR"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "NA"], ["name", "NAMIBIA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "NR"], ["name", "NAURU"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "NP"], ["name", "NEPAL"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "NL"], ["name", "NETHERLANDS"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "AN"], ["name", "NETHERLANDS ANTILLES"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "NC"], ["name", "NEW CALEDONIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "NZ"], ["name", "NEW ZEALAND"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "NI"], ["name", "NICARAGUA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "NE"], ["name", "NIGER"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "NG"], ["name", "NIGERIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "NU"], ["name", "NIUE"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "NF"], ["name", "NORFOLK ISLAND"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "MP"], ["name", "NORTHERN MARIANA ISLANDS"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "NO"], ["name", "NORWAY"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "OM"], ["name", "OMAN"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "PK"], ["name", "PAKISTAN"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "PW"], ["name", "PALAU"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "PA"], ["name", "PANAMA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "PG"], ["name", "PAPUA NEW GUINEA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "PY"], ["name", "PARAGUAY"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "PE"], ["name", "PERU"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "PH"], ["name", "PHILIPPINES"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "PN"], ["name", "PITCAIRN"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "PL"], ["name", "POLAND"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "PT"], ["name", "PORTUGAL"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "PR"], ["name", "PUERTO RICO"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "QA"], ["name", "QATAR"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "RE"], ["name", "REUNION"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "RO"], ["name", "ROMANIA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "RU"], ["name", "RUSSIAN FEDERATION"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "RW"], ["name", "RWANDA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "SH"], ["name", "SAINT HELENA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "KN"], ["name", "SAINT KITTS AND NEVIS"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "LC"], ["name", "SAINT LUCIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "PM"], ["name", "SAINT PIERRE AND MIQUELON"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "VC"], ["name", "SAINT VINCENT AND THE GRENADINES"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "WS"], ["name", "SAMOA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "SM"], ["name", "SAN MARINO"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "ST"], ["name", "SAO TOME AND PRINCIPE"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "SA"], ["name", "SAUDI ARABIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "SN"], ["name", "SENEGAL"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "SC"], ["name", "SEYCHELLES"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "SL"], ["name", "SIERRA LEONE"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "SG"], ["name", "SINGAPORE"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "SK"], ["name", "SLOVAKIA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "SI"], ["name", "SLOVENIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "SB"], ["name", "SOLOMON ISLANDS"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "SO"], ["name", "SOMALIA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "ZA"], ["name", "SOUTH AFRICA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "ES"], ["name", "SPAIN"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "LK"], ["name", "SRI LANKA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "SD"], ["name", "SUDAN"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "SR"], ["name", "SURINAME"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "SJ"], ["name", "SVALBARD AND JAN MAYEN"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "SZ"], ["name", "SWAZILAND"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "SE"], ["name", "SWEDEN"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "CH"], ["name", "SWITZERLAND"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "SY"], ["name", "SYRIAN ARAB REPUBLIC"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "TW"], ["name", "TAIWAN, PROVINCE OF CHINA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "TJ"], ["name", "TAJIKISTAN"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "TZ"], ["name", "TANZANIA, UNITED REPUBLIC OF"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "TH"], ["name", "THAILAND"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "TG"], ["name", "TOGO"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "TK"], ["name", "TOKELAU"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "TO"], ["name", "TONGA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "TT"], ["name", "TRINIDAD AND TOBAGO"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "TN"], ["name", "TUNISIA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "TR"], ["name", "TURKEY"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "TM"], ["name", "TURKMENISTAN"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "TC"], ["name", "TURKS AND CAICOS ISLANDS"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "TV"], ["name", "TUVALU"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "UG"], ["name", "UGANDA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "UA"], ["name", "UKRAINE"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "AE"], ["name", "UNITED ARAB EMIRATES"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "GB"], ["name", "UNITED KINGDOM"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "US"], ["name", "UNITED STATES"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "UY"], ["name", "URUGUAY"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "UZ"], ["name", "UZBEKISTAN"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "VU"], ["name", "VANUATU"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "VE"], ["name", "VENEZUELA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "VN"], ["name", "VIET NAM"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "VG"], ["name", "VIRGIN ISLANDS, BRITISH"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "VI"], ["name", "VIRGIN ISLANDS, U.S."]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "WF"], ["name", "WALLIS AND FUTUNA"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "EH"], ["name", "WESTERN SAHARA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "YE"], ["name", "YEMEN"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "countries" ("code", "name") VALUES (?, ?)[0m  [["code", "ZM"], ["name", "ZAMBIA"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "countries" ("code", "name") VALUES (?, ?)  [["code", "ZW"], ["name", "ZIMBABWE"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150112132214"]]
  [1m[35m (2.6ms)[0m  commit transaction
Migrating to CreateTableOrderSubscription (20150113092847)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "order_subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "notification_method" varchar, "subscription_address" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150113092847"]]
  [1m[35m (0.8ms)[0m  commit transaction
Migrating to CreateShippingCountries (20150113110650)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "shipping_countries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "tax" varchar, "shop_id" integer, "country_id" integer) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150113110650"]]
  [1m[35m (0.9ms)[0m  commit transaction
Migrating to CreateShippingRates (20150113161645)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "shipping_rates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "criteria" varchar, "price_from" float, "price_to" float, "weight_from" float, "weight_to" float, "shipping_price" float, "shipping_country_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150113161645"]]
  [1m[35m (0.8ms)[0m  commit transaction
Migrating to AddAttributessToEmailTemplates (20150123141743)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "email_templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "title" varchar, "body" text, "subscriber_notification_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150123141743"]]
  [1m[35m (0.7ms)[0m  commit transaction
Migrating to ChangeReferencesInEmailTemplates (20150123161113)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  CREATE TEMPORARY TABLE "aemail_templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "title" varchar, "body" text, "subscriber_notification_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "email_templates"[0m
  [1m[35m (0.2ms)[0m  DROP TABLE "email_templates"
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "email_templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "title" varchar, "body" text, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "aemail_templates"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "aemail_templates"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "email_templates" ADD "shop_id" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150123161113"]]
  [1m[35m (0.7ms)[0m  commit transaction
Migrating to AddTypeColumnToEmailTemplates (20150126143829)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "email_templates" ADD "type" varchar
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150126143829"]]
  [1m[35m (0.6ms)[0m  commit transaction
Migrating to RenameTypeColumnInEmailTemplates (20150126150935)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  CREATE TEMPORARY TABLE "aemail_templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "title" varchar, "body" text, "created_at" datetime, "updated_at" datetime, "shop_id" integer, "template_type" varchar) 
  [1m[36m (0.0ms)[0m  [1mSELECT * FROM "email_templates"[0m
  [1m[35m (0.2ms)[0m  DROP TABLE "email_templates"
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "email_templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "title" varchar, "body" text, "created_at" datetime, "updated_at" datetime, "shop_id" integer, "template_type" varchar) [0m
  [1m[35m (0.2ms)[0m  SELECT * FROM "aemail_templates"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "aemail_templates"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150126150935"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
Migrating to AddPasswordSaltToUsers (20150130120917)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "password_salt" varchar[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150130120917"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
Migrating to RemoveColumnsEmailPasswordFromShop (20150205162431)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mCREATE TEMPORARY TABLE "ashops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar, "password_digest" varchar, "created_at" datetime, "updated_at" datetime, "password_salt" varchar, "subdomain" varchar, "address" varchar, "business_name" varchar, "city" varchar, "country" varchar, "currency" varchar, "customer_email" varchar, "phone" varchar, "province" varchar, "timezone" varchar, "unit_system" varchar, "zip" integer, "handle" varchar, "page_title" varchar, "meta_description" varchar, "account_type_choice" varchar, "billing_address_is_shipping_too" boolean, "abandoned_checkout_time_delay" varchar, "email_marketing_choice" varchar, "after_order_paid" varchar, "after_order_fulfilled_and_paid" boolean, "checkout_language" varchar, "checkout_refound_policy" text, "checkout_privacy_policy" text, "checkout_term_of_service" text, "enable_multipass_login" boolean, "notify_customers_of_their_shipment" boolean, "automatically_fulfill_all_orders" boolean, "authorization_settings" varchar) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "shops"
  [1m[36m (0.3ms)[0m  [1mDROP TABLE "shops"[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar, "created_at" datetime, "updated_at" datetime, "password_salt" varchar, "subdomain" varchar, "address" varchar, "business_name" varchar, "city" varchar, "country" varchar, "currency" varchar, "customer_email" varchar, "phone" varchar, "province" varchar, "timezone" varchar, "unit_system" varchar, "zip" integer, "handle" varchar, "page_title" varchar, "meta_description" varchar, "account_type_choice" varchar, "billing_address_is_shipping_too" boolean, "abandoned_checkout_time_delay" varchar, "email_marketing_choice" varchar, "after_order_paid" varchar, "after_order_fulfilled_and_paid" boolean, "checkout_language" varchar, "checkout_refound_policy" text, "checkout_privacy_policy" text, "checkout_term_of_service" text, "enable_multipass_login" boolean, "notify_customers_of_their_shipment" boolean, "automatically_fulfill_all_orders" boolean, "authorization_settings" varchar) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "ashops"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "ashops"
  [1m[36m (0.2ms)[0m  [1mCREATE TEMPORARY TABLE "ashops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar, "created_at" datetime, "updated_at" datetime, "password_salt" varchar, "subdomain" varchar, "address" varchar, "business_name" varchar, "city" varchar, "country" varchar, "currency" varchar, "customer_email" varchar, "phone" varchar, "province" varchar, "timezone" varchar, "unit_system" varchar, "zip" integer, "handle" varchar, "page_title" varchar, "meta_description" varchar, "account_type_choice" varchar, "billing_address_is_shipping_too" boolean, "abandoned_checkout_time_delay" varchar, "email_marketing_choice" varchar, "after_order_paid" varchar, "after_order_fulfilled_and_paid" boolean, "checkout_language" varchar, "checkout_refound_policy" text, "checkout_privacy_policy" text, "checkout_term_of_service" text, "enable_multipass_login" boolean, "notify_customers_of_their_shipment" boolean, "automatically_fulfill_all_orders" boolean, "authorization_settings" varchar) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "shops"
  [1m[36m (0.5ms)[0m  [1mDROP TABLE "shops"[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime, "updated_at" datetime, "password_salt" varchar, "subdomain" varchar, "address" varchar, "business_name" varchar, "city" varchar, "country" varchar, "currency" varchar, "customer_email" varchar, "phone" varchar, "province" varchar, "timezone" varchar, "unit_system" varchar, "zip" integer, "handle" varchar, "page_title" varchar, "meta_description" varchar, "account_type_choice" varchar, "billing_address_is_shipping_too" boolean, "abandoned_checkout_time_delay" varchar, "email_marketing_choice" varchar, "after_order_paid" varchar, "after_order_fulfilled_and_paid" boolean, "checkout_language" varchar, "checkout_refound_policy" text, "checkout_privacy_policy" text, "checkout_term_of_service" text, "enable_multipass_login" boolean, "notify_customers_of_their_shipment" boolean, "automatically_fulfill_all_orders" boolean, "authorization_settings" varchar) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "ashops"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "ashops"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150205162431"]]
  [1m[35m (1.2ms)[0m  commit transaction
Migrating to AddColumnAccountOwnerToUser (20150206120320)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD "account_owner" boolean DEFAULT 'f'
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150206120320"]]
  [1m[35m (0.7ms)[0m  commit transaction
Migrating to FixUsersPermissionsStore (20150206135840)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  CREATE TEMPORARY TABLE "ausers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "email" varchar, "password_digest" varchar, "phone" varchar, "homepage" varchar, "bio" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime, "permissions" text DEFAULT '--- []
', "user_type" varchar, "password_salt" varchar, "account_owner" boolean DEFAULT 'f') 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "users"[0m
  [1m[35m (0.2ms)[0m  DROP TABLE "users"
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "email" varchar, "password_digest" varchar, "phone" varchar, "homepage" varchar, "bio" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime, "user_type" varchar, "password_salt" varchar, "account_owner" boolean DEFAULT 'f') [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "ausers"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "ausers"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "users" ADD "permissions" varchar DEFAULT '--- []
'
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150206135840"]]
  [1m[35m (0.8ms)[0m  commit transaction
Migrating to AddEmailConfirmationToUsers (20150209144902)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "users" ADD "email_confirmed" boolean DEFAULT 'f'
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "users" ADD "confirm_token" varchar[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150209144902"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Migrating to AddInviteTokenColumnToUsers (20150220152437)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "invite_token" varchar[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150220152437"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Migrating to RemoveEmailConfirmationFromUsers (20150220155922)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mCREATE TEMPORARY TABLE "ausers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "email" varchar, "password_digest" varchar, "phone" varchar, "homepage" varchar, "bio" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime, "user_type" varchar, "password_salt" varchar, "account_owner" boolean DEFAULT 'f', "permissions" varchar DEFAULT '--- []
', "email_confirmed" boolean DEFAULT 'f', "confirm_token" varchar, "invite_token" varchar) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "users"
  [1m[36m (0.3ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "email" varchar, "password_digest" varchar, "phone" varchar, "homepage" varchar, "bio" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime, "user_type" varchar, "password_salt" varchar, "account_owner" boolean DEFAULT 'f', "permissions" varchar DEFAULT '--- []
', "confirm_token" varchar, "invite_token" varchar) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "ausers"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "ausers"
  [1m[36m (0.1ms)[0m  [1mCREATE TEMPORARY TABLE "ausers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "email" varchar, "password_digest" varchar, "phone" varchar, "homepage" varchar, "bio" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime, "user_type" varchar, "password_salt" varchar, "account_owner" boolean DEFAULT 'f', "permissions" varchar DEFAULT '--- []
', "confirm_token" varchar, "invite_token" varchar) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "users"
  [1m[36m (0.4ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "email" varchar, "password_digest" varchar, "phone" varchar, "homepage" varchar, "bio" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime, "user_type" varchar, "password_salt" varchar, "account_owner" boolean DEFAULT 'f', "permissions" varchar DEFAULT '--- []
', "invite_token" varchar) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "ausers"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "ausers"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150220155922"]]
  [1m[35m (0.7ms)[0m  commit transaction
Migrating to AddDescriptionColumnToEmailTemplates (20150227114922)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "email_templates" ADD "description" varchar
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150227114922"]]
  [1m[35m (0.5ms)[0m  commit transaction
Migrating to AddColumnsFromTaxesToShop (20150303132914)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "all_taxes_are_included" boolean
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "charge_taxes_on_shipping_rates" boolean[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150303132914"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Migrating to CreateTableTaxesOverrides (20150305152216)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "taxes_overrides" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "rate" float, "is_shipping" boolean DEFAULT 'f', "collection_id" integer, "shipping_country_id" integer) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150305152216"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Migrating to AddColumnEuDigitalGoodsCollectionIdToShop (20150305153745)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "eu_digital_goods_collection_id" integer[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150305153745"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Migrating to RenamaTableTaxesOverridesToTaxOverrides (20150305165027)
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "taxes_overrides" RENAME TO "tax_overrides"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150305165027"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Migrating to RenameColumnCheckoutRefoundPolicyInSettings (20150324140737)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mCREATE TEMPORARY TABLE "ashops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime, "updated_at" datetime, "password_salt" varchar, "subdomain" varchar, "address" varchar, "business_name" varchar, "city" varchar, "country" varchar, "currency" varchar, "customer_email" varchar, "phone" varchar, "province" varchar, "timezone" varchar, "unit_system" varchar, "zip" integer, "handle" varchar, "page_title" varchar, "meta_description" varchar, "account_type_choice" varchar, "billing_address_is_shipping_too" boolean, "abandoned_checkout_time_delay" varchar, "email_marketing_choice" varchar, "after_order_paid" varchar, "after_order_fulfilled_and_paid" boolean, "checkout_language" varchar, "checkout_refund_policy" text, "checkout_privacy_policy" text, "checkout_term_of_service" text, "enable_multipass_login" boolean, "notify_customers_of_their_shipment" boolean, "automatically_fulfill_all_orders" boolean, "authorization_settings" varchar, "all_taxes_are_included" boolean, "charge_taxes_on_shipping_rates" boolean, "eu_digital_goods_collection_id" integer) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "shops"
  [1m[36m (0.3ms)[0m  [1mDROP TABLE "shops"[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime, "updated_at" datetime, "password_salt" varchar, "subdomain" varchar, "address" varchar, "business_name" varchar, "city" varchar, "country" varchar, "currency" varchar, "customer_email" varchar, "phone" varchar, "province" varchar, "timezone" varchar, "unit_system" varchar, "zip" integer, "handle" varchar, "page_title" varchar, "meta_description" varchar, "account_type_choice" varchar, "billing_address_is_shipping_too" boolean, "abandoned_checkout_time_delay" varchar, "email_marketing_choice" varchar, "after_order_paid" varchar, "after_order_fulfilled_and_paid" boolean, "checkout_language" varchar, "checkout_refund_policy" text, "checkout_privacy_policy" text, "checkout_term_of_service" text, "enable_multipass_login" boolean, "notify_customers_of_their_shipment" boolean, "automatically_fulfill_all_orders" boolean, "authorization_settings" varchar, "all_taxes_are_included" boolean, "charge_taxes_on_shipping_rates" boolean, "eu_digital_goods_collection_id" integer) 
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM "ashops"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "ashops"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150324140737"]]
  [1m[35m (0.8ms)[0m  commit transaction
Migrating to CreateEvents (20150428143516)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "arguments" varchar DEFAULT '--- []
', "body" varchar, "message" varchar, "subject_id" integer, "subject_type" varchar, "verb" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_events_on_subject_id" ON "events" ("subject_id")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150428143516"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Migrating to CreateWebhooksTable (20150501113306)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "webhooks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "address" varchar, "fields" varchar DEFAULT '--- []
', "format" varchar, "metafield_namespaces" varchar DEFAULT '--- []
', "topic" varchar, "shop_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150501113306"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Migrating to DeleteCountriesTable (20150528131117)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mDROP TABLE "countries"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150528131117"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
Migrating to DeleteCountryId (20150603104850)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mCREATE TEMPORARY TABLE "ashipping_countries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "tax" varchar, "shop_id" integer, "country_id" integer) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "shipping_countries"
  [1m[36m (0.2ms)[0m  [1mDROP TABLE "shipping_countries"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "shipping_countries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "tax" varchar, "shop_id" integer) 
  [1m[36m (0.0ms)[0m  [1mSELECT * FROM "ashipping_countries"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "ashipping_countries"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150603104850"]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_events_on_subject_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_events_on_subject_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_sluggable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_sluggable_type' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_slug_and_sluggable_type' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_friendly_id_slugs_on_sluggable_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendly_id_slugs_on_sluggable_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_link_lists_on_slug' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_link_lists_on_slug' AND type='index'
[0m
[SKYLIGHT] [0.9.4] authentication token required; disabling Skylight agent
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::DeleteShippingRateTest: test_should_delete_shipping_rate_with_valid_id
--------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:23.727640"], ["updated_at", "2016-05-05 14:08:23.727640"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "1"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Shipping Rate 1"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-05 14:08:23.747227"], ["updated_at", "2016-05-05 14:08:23.747227"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Shipping Rate 2"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-05 14:08:23.749509"], ["updated_at", "2016-05-05 14:08:23.749509"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_rates" WHERE "shipping_rates"."shipping_country_id" = ?  [["shipping_country_id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.1ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingRate Load (0.1ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."shipping_country_id" = ? AND "shipping_rates"."id" = ? LIMIT 1  [["shipping_country_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "shipping_rates" WHERE "shipping_rates"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ShippingRate Load (0.1ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingRate Load (0.0ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_rates" WHERE "shipping_rates"."shipping_country_id" = ?  [["shipping_country_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::DeleteShippingRateTest: test_should_not_delete_shipping_rate_with_blank_id
------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:23.775510"], ["updated_at", "2016-05-05 14:08:23.775510"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "2"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Shipping Rate 3"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-05 14:08:23.779776"], ["updated_at", "2016-05-05 14:08:23.779776"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Shipping Rate 4"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-05 14:08:23.781712"], ["updated_at", "2016-05-05 14:08:23.781712"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_rates" WHERE "shipping_rates"."shipping_country_id" = ?  [["shipping_country_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates" WHERE "shipping_rates"."shipping_country_id" = ?[0m  [["shipping_country_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::LinkList::AddLinkListTest: test_should_create_link_list_with_valid_params
---------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:23.794107"], ["updated_at", "2016-05-05 14:08:23.794107"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "Test name"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LinkList Exists (0.1ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1  [["slug", "test-handle"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Test name"], ["handle", "Test handle"], ["slug", "test-handle"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::LinkList Load (0.1ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::LinkList::AddLinkListTest: test_should_not_create_link_list_with_blank_params
-------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:23.811648"], ["updated_at", "2016-05-05 14:08:23.811648"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", ""]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", ""]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::LinkList::AddLinkListTest: test_should_not_create_link_list_with_same_params
------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:23.825525"], ["updated_at", "2016-05-05 14:08:23.825525"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", "Test name"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::LinkList Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1[0m  [["slug", "test-handle"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)  [["shop_id", 1], ["name", "Test name"], ["handle", "Test handle"], ["slug", "test-handle"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "Test name"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", "Test name"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::ChangeShippingRateTest: test_shoul_update_shipping_rate_with_some_blank_params
----------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:23.841764"], ["updated_at", "2016-05-05 14:08:23.841764"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "3"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Shipping Rate 5"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-05 14:08:23.845001"], ["updated_at", "2016-05-05 14:08:23.845001"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36mMagazCore::ShippingRate Load (0.1ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "shipping_rates" SET "name" = ?, "criteria" = ?, "shipping_price" = ?, "updated_at" = ? WHERE "shipping_rates"."id" = ?[0m  [["name", "Updated name"], ["criteria", "weight"], ["shipping_price", 5.0], ["updated_at", "2016-05-05 14:08:23.849315"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::ShippingRate Load (0.0ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingRate Load (0.1ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingRate Load (0.0ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::ChangeShippingRateTest: test_should_not_update_shipping_rate_with_blank_params
----------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:23.855261"], ["updated_at", "2016-05-05 14:08:23.855261"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "4"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Shipping Rate 6"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-05 14:08:23.858519"], ["updated_at", "2016-05-05 14:08:23.858519"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::ChangeShippingRateTest: test_should_not_update_shipping_rate_with_wrong_comparison
--------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:23.866933"], ["updated_at", "2016-05-05 14:08:23.866933"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "5"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Shipping Rate 7"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-05 14:08:23.870572"], ["updated_at", "2016-05-05 14:08:23.870572"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::ChangeShippingRateTest: test_should_not_update_shipping_rate_with_wrong_criteria
------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:23.875094"], ["updated_at", "2016-05-05 14:08:23.875094"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "6"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Shipping Rate 8"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-05 14:08:23.878545"], ["updated_at", "2016-05-05 14:08:23.878545"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::ChangeShippingRateTest: test_should_not_update_shipping_rate_with_wrong_weight
----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:23.882752"], ["updated_at", "2016-05-05 14:08:23.882752"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "7"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Shipping Rate 9"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-05 14:08:23.886422"], ["updated_at", "2016-05-05 14:08:23.886422"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::ChangeShippingRateTest: test_should_update_shipping_rate_with_valid_params
------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:23.894025"], ["updated_at", "2016-05-05 14:08:23.894025"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "8"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Shipping Rate 10"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-05 14:08:23.897875"], ["updated_at", "2016-05-05 14:08:23.897875"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35mMagazCore::ShippingRate Load (0.0ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "shipping_rates" SET "name" = ?, "price_from" = ?, "price_to" = ?, "weight_from" = ?, "weight_to" = ?, "criteria" = ?, "shipping_price" = ?, "updated_at" = ? WHERE "shipping_rates"."id" = ?  [["name", "Updated name"], ["price_from", 15.7], ["price_to", 20.5], ["weight_from", 3.1], ["weight_to", 5.5], ["criteria", "weight"], ["shipping_price", 5.0], ["updated_at", "2016-05-05 14:08:23.900072"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ShippingRate Load (0.0ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingRate Load (0.0ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingRate Load (0.0ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------
MagazCore::StoreServices::CreateEventCreateEventTest: test_create_event_with_Webhook
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example1' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example1"], ["subdomain", "example1"], ["created_at", "2016-05-05 14:08:23.905288"], ["updated_at", "2016-05-05 14:08:23.905288"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example1.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example1.com"], ["first_name", "First Name 1 "], ["last_name", "Last Name 1"], ["password_salt", "$2a$10$wILOK.yeTi..zX7MXKtQQ."], ["password_digest", "$2a$10$wILOK.yeTi..zX7MXKtQQ.bzW.JUR05jgpMLfCWfn0C3usmaJAUfO"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.070110"], ["updated_at", "2016-05-05 14:08:24.070110"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.1ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 1"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:24.080756"], ["updated_at", "2016-05-05 14:08:24.080756"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 1' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 1"], ["description", "Example 1 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.092011"], ["updated_at", "2016-05-05 14:08:24.092011"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.1ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Article 1"], ["content", "Article 1 content"], ["blog_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:24.104574"], ["updated_at", "2016-05-05 14:08:24.104574"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.1ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 1"], ["description", "Collection 1 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:24.116247"], ["updated_at", "2016-05-05 14:08:24.116247"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.127148"], ["updated_at", "2016-05-05 14:08:24.127148"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("subject_id", "subject_type", "arguments", "message", "shop_id", "verb", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["subject_id", 1], ["subject_type", "MagazCore::Webhook"], ["arguments", "[]"], ["message", "First name 1  Last name 1 created a webhook: "], ["shop_id", 1], ["verb", "create"], ["created_at", "2016-05-05 14:08:24.140899"], ["updated_at", "2016-05-05 14:08:24.140899"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------
MagazCore::StoreServices::CreateEventCreateEventTest: test_create_event_with_article
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example2' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example2"], ["subdomain", "example2"], ["created_at", "2016-05-05 14:08:24.149132"], ["updated_at", "2016-05-05 14:08:24.149132"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example2.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example2.com"], ["first_name", "First Name 2 "], ["last_name", "Last Name 2"], ["password_salt", "$2a$10$A70s8rw0BF4TAWJbtn5Wj."], ["password_digest", "$2a$10$A70s8rw0BF4TAWJbtn5Wj.MvdUe.FgbmR9H3PWZuxkN8lhisTFoD2"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.305679"], ["updated_at", "2016-05-05 14:08:24.305679"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 2"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:24.309172"], ["updated_at", "2016-05-05 14:08:24.309172"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 2' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 2"], ["description", "Example 2 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.311276"], ["updated_at", "2016-05-05 14:08:24.311276"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Article 2"], ["content", "Article 2 content"], ["blog_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:24.314858"], ["updated_at", "2016-05-05 14:08:24.314858"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 2"], ["description", "Collection 2 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:24.318434"], ["updated_at", "2016-05-05 14:08:24.318434"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.320816"], ["updated_at", "2016-05-05 14:08:24.320816"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("subject_id", "subject_type", "arguments", "message", "shop_id", "verb", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["subject_id", 1], ["subject_type", "MagazCore::Article"], ["arguments", "[\"Article 2\"]"], ["message", "First name 2  Last name 2 created a article: "], ["shop_id", 1], ["verb", "create"], ["created_at", "2016-05-05 14:08:24.324185"], ["updated_at", "2016-05-05 14:08:24.324185"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------
MagazCore::StoreServices::CreateEventCreateEventTest: test_create_event_with_collection
---------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example3' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example3"], ["subdomain", "example3"], ["created_at", "2016-05-05 14:08:24.330948"], ["updated_at", "2016-05-05 14:08:24.330948"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example3.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example3.com"], ["first_name", "First Name 3 "], ["last_name", "Last Name 3"], ["password_salt", "$2a$10$WkNi3gyig547UyOVDFhJ1e"], ["password_digest", "$2a$10$WkNi3gyig547UyOVDFhJ1eNcim7ORhjGfZf09fV/XucSvb5K258Gy"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.485151"], ["updated_at", "2016-05-05 14:08:24.485151"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 3"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:24.488462"], ["updated_at", "2016-05-05 14:08:24.488462"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 3' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 3"], ["description", "Example 3 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.490639"], ["updated_at", "2016-05-05 14:08:24.490639"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Article 3"], ["content", "Article 3 content"], ["blog_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:24.493038"], ["updated_at", "2016-05-05 14:08:24.493038"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 3"], ["description", "Collection 3 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:24.495660"], ["updated_at", "2016-05-05 14:08:24.495660"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.498022"], ["updated_at", "2016-05-05 14:08:24.498022"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("subject_id", "subject_type", "arguments", "message", "shop_id", "verb", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["subject_id", 1], ["subject_type", "MagazCore::Collection"], ["arguments", "[\"Collection 3\"]"], ["message", "First name 3  Last name 3 created a collection: "], ["shop_id", 1], ["verb", "create"], ["created_at", "2016-05-05 14:08:24.501436"], ["updated_at", "2016-05-05 14:08:24.501436"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------
MagazCore::StoreServices::CreateEventCreateEventTest: test_create_event_with_product
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example4' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example4"], ["subdomain", "example4"], ["created_at", "2016-05-05 14:08:24.508051"], ["updated_at", "2016-05-05 14:08:24.508051"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example4.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example4.com"], ["first_name", "First Name 4 "], ["last_name", "Last Name 4"], ["password_salt", "$2a$10$CilwWBMjgWW4Vl1Rugbu/O"], ["password_digest", "$2a$10$CilwWBMjgWW4Vl1Rugbu/Ou6Ge6SXpRNWzm77GtB3ve1W2qwHs7de"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.660194"], ["updated_at", "2016-05-05 14:08:24.660194"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 4"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:24.664482"], ["updated_at", "2016-05-05 14:08:24.664482"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 4' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 4"], ["description", "Example 4 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.666885"], ["updated_at", "2016-05-05 14:08:24.666885"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Article 4"], ["content", "Article 4 content"], ["blog_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:24.669539"], ["updated_at", "2016-05-05 14:08:24.669539"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.1ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 4"], ["description", "Collection 4 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:24.672770"], ["updated_at", "2016-05-05 14:08:24.672770"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.674609"], ["updated_at", "2016-05-05 14:08:24.674609"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("subject_id", "subject_type", "arguments", "message", "shop_id", "verb", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["subject_id", 1], ["subject_type", "MagazCore::Product"], ["arguments", "[\"Example 4\"]"], ["message", "First name 4  Last name 4 created a product: "], ["shop_id", 1], ["verb", "create"], ["created_at", "2016-05-05 14:08:24.677261"], ["updated_at", "2016-05-05 14:08:24.677261"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------
MagazCore::StoreServices::ShoppingCartTest: test_add_product_and_item_count
---------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example5' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example5"], ["subdomain", "example5"], ["created_at", "2016-05-05 14:08:24.684900"], ["updated_at", "2016-05-05 14:08:24.684900"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 1 "], ["last_name", "Last Name 1"], ["email", "customer1@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["customer_id", 1], ["created_at", "2016-05-05 14:08:24.715210"], ["updated_at", "2016-05-05 14:08:24.715210"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 5' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 5"], ["description", "Example 5 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.718527"], ["updated_at", "2016-05-05 14:08:24.718527"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.1ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" IS NULL LIMIT 1  [["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("shop_id") VALUES (?)  [["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Checkout Load (0.1ms)[0m  SELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."customer_id" = ? AND "checkouts"."status" IS NULL AND "checkouts"."id" IS NULL LIMIT 1  [["customer_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 2], ["created_at", "2016-05-05 14:08:24.725831"], ["updated_at", "2016-05-05 14:08:24.725831"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 6' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example 6"], ["description", "Example 6 description"], ["created_at", "2016-05-05 14:08:24.727763"], ["updated_at", "2016-05-05 14:08:24.727763"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 7' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example 7"], ["description", "Example 7 description"], ["created_at", "2016-05-05 14:08:24.729609"], ["updated_at", "2016-05-05 14:08:24.729609"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LineItem Load (0.1ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."checkout_id" = ?  [["checkout_id", 2]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "line_items" ("name", "description", "created_at", "updated_at", "product_id", "quantity", "checkout_id") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Example 6"], ["description", "Example 6 description"], ["created_at", "2016-05-05 14:08:24.727763"], ["updated_at", "2016-05-05 14:08:24.727763"], ["product_id", 2], ["quantity", 1], ["checkout_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "line_items" ("name", "description", "created_at", "updated_at", "product_id", "quantity", "checkout_id") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Example 7"], ["description", "Example 7 description"], ["created_at", "2016-05-05 14:08:24.729609"], ["updated_at", "2016-05-05 14:08:24.729609"], ["product_id", 3], ["quantity", 1], ["checkout_id", 2]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------
MagazCore::StoreServices::ShoppingCartTest: test_initialization_with_existing_stuff
-----------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example6' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example6"], ["subdomain", "example6"], ["created_at", "2016-05-05 14:08:24.749796"], ["updated_at", "2016-05-05 14:08:24.749796"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 2 "], ["last_name", "Last Name 2"], ["email", "customer2@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["customer_id", 1], ["created_at", "2016-05-05 14:08:24.753537"], ["updated_at", "2016-05-05 14:08:24.753537"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 8' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 8"], ["description", "Example 8 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.755677"], ["updated_at", "2016-05-05 14:08:24.755677"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.1ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Checkout Load (0.1ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."customer_id" = ? AND "checkouts"."status" IS NULL AND "checkouts"."id" = ? LIMIT 1[0m  [["customer_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------
MagazCore::StoreServices::ShoppingCartTest: test_initialization_with_missing_stuff
----------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example7' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example7"], ["subdomain", "example7"], ["created_at", "2016-05-05 14:08:24.761786"], ["updated_at", "2016-05-05 14:08:24.761786"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 3 "], ["last_name", "Last Name 3"], ["email", "customer3@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 1], ["created_at", "2016-05-05 14:08:24.765024"], ["updated_at", "2016-05-05 14:08:24.765024"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 9' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 9"], ["description", "Example 9 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.767765"], ["updated_at", "2016-05-05 14:08:24.767765"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Checkout Load (0.0ms)[0m  SELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."customer_id" = ? AND "checkouts"."status" IS NULL AND "checkouts"."id" = ? LIMIT 1  [["customer_id", 1], ["id", 0]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 1], ["created_at", "2016-05-05 14:08:24.771798"], ["updated_at", "2016-05-05 14:08:24.771798"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.1ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 0]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("shop_id") VALUES (?)[0m  [["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Checkout Load (0.0ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."customer_id" = ? AND "checkouts"."status" IS NULL AND "checkouts"."id" = ? LIMIT 1[0m  [["customer_id", 2], ["id", 0]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["customer_id", 2], ["created_at", "2016-05-05 14:08:24.775938"], ["updated_at", "2016-05-05 14:08:24.775938"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangeDefaultCollectionTest: test_should_not_update_shop_with_blank_params
----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:24.780173"], ["updated_at", "2016-05-05 14:08:24.780173"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 5"], ["description", "Collection 5 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.782219"], ["updated_at", "2016-05-05 14:08:24.782219"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangeDefaultCollectionTest: test_should_update_shop_with_valid_params
------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:24.792105"], ["updated_at", "2016-05-05 14:08:24.792105"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 6"], ["description", "Collection 6 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.794072"], ["updated_at", "2016-05-05 14:08:24.794072"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.1ms)[0m  [1mSELECT "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ?[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "shops" SET "eu_digital_goods_collection_id" = ?, "updated_at" = ? WHERE "shops"."id" = ?[0m  [["eu_digital_goods_collection_id", 1], ["updated_at", "2016-05-05 14:08:24.796835"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangeShopTest: test_should_update_shop_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:24.801858"], ["updated_at", "2016-05-05 14:08:24.801858"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shops" WHERE "shops"."id" = ? AND "shops"."name" = ?  [["id", 1], ["name", "Name"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "shops" SET "name" = ?, "address" = ?, "business_name" = ?, "city" = ?, "country" = ?, "meta_description" = ?, "currency" = ?, "customer_email" = ?, "phone" = ?, "timezone" = ?, "unit_system" = ?, "zip" = ?, "page_title" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["name", "Name"], ["address", "address"], ["business_name", "business_name"], ["city", "city"], ["country", "USA"], ["meta_description", "meta_description"], ["currency", "USD"], ["customer_email", "some@email.com"], ["phone", "phone"], ["timezone", "American Samoa"], ["unit_system", "metric"], ["zip", 0], ["page_title", "page_title"], ["updated_at", "2016-05-05 14:08:24.807523"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::AddCollectionTest: test_should_create_collection_with_valid_params
--------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:24.814505"], ["updated_at", "2016-05-05 14:08:24.814505"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 7"], ["description", "Collection 7 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.817214"], ["updated_at", "2016-05-05 14:08:24.817214"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?  [["shop_id", 1], ["name", "Test name"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "test-handle"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("shop_id", "name", "description", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Test name"], ["description", "Test description"], ["page_title", "Test page_title"], ["meta_description", "Test meta_description"], ["handle", "Test handle"], ["slug", "test-handle"], ["created_at", "2016-05-05 14:08:24.825262"], ["updated_at", "2016-05-05 14:08:24.825262"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.1ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::AddCollectionTest: test_should_not_create_collection_with_blank_params
------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:24.830797"], ["updated_at", "2016-05-05 14:08:24.830797"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 8"], ["description", "Collection 8 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.832762"], ["updated_at", "2016-05-05 14:08:24.832762"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?[0m  [["shop_id", 1], ["name", ""]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?[0m  [["shop_id", 1], ["name", ""]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::AddCollectionTest: test_should_not_create_collection_with_same_params
-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:24.843870"], ["updated_at", "2016-05-05 14:08:24.843870"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 9"], ["description", "Collection 9 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.845960"], ["updated_at", "2016-05-05 14:08:24.845960"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?  [["shop_id", 1], ["name", "Test name"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "test-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("shop_id", "name", "description", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Test name"], ["description", "Test description"], ["page_title", "Test page_title"], ["meta_description", "Test meta_description"], ["handle", "Test handle"], ["slug", "test-handle"], ["created_at", "2016-05-05 14:08:24.850007"], ["updated_at", "2016-05-05 14:08:24.850007"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?  [["shop_id", 1], ["name", "Test name"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?[0m  [["shop_id", 1], ["name", "Test name"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ProductImage::AddProductImageTest: test_should_add_image_with_valid_params
----------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:24.860709"], ["updated_at", "2016-05-05 14:08:24.860709"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 10' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 10"], ["description", "Example 10 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.863592"], ["updated_at", "2016-05-05 14:08:24.863592"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "product_images"
  [1m[36mMagazCore::Product Load (0.1ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "product_images" ("product_id", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["product_id", 1], ["image", "tapir.jpg"], ["created_at", "2016-05-05 14:08:24.877770"], ["updated_at", "2016-05-05 14:08:24.877770"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ProductImage Load (0.1ms)[0m  SELECT  "product_images".* FROM "product_images" WHERE "product_images"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "product_images"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ProductImage::AddProductImageTest: test_should_not_add_image_without_image
----------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:24.884641"], ["updated_at", "2016-05-05 14:08:24.884641"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 11' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 11"], ["description", "Example 11 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.887359"], ["updated_at", "2016-05-05 14:08:24.887359"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "product_images"
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.2ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "product_images"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ProductImage::AddProductImageTest: test_should_not_create_image_with_wrong_extension
--------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:24.898560"], ["updated_at", "2016-05-05 14:08:24.898560"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 12' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 12"], ["description", "Example 12 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.901141"], ["updated_at", "2016-05-05 14:08:24.901141"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "product_images"
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "product_images"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::EmailTemplate::ChangeEmailTemplateTest: test_should_not_update_email_template_with_blank_params
-------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:24.914393"], ["updated_at", "2016-05-05 14:08:24.914393"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "email_templates" ("name", "title", "body", "template_type", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Order Notification"], ["title", "New order"], ["body", "You have a new order"], ["template_type", "new_order_notification"], ["description", "some description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.923084"], ["updated_at", "2016-05-05 14:08:24.923084"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::EmailTemplate::ChangeEmailTemplateTest: test_should_update_email_template_with_valid_params
---------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:24.932957"], ["updated_at", "2016-05-05 14:08:24.932957"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "email_templates" ("name", "title", "body", "template_type", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["name", "Order Notification"], ["title", "New order"], ["body", "You have a new order"], ["template_type", "new_order_notification"], ["description", "some description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.935375"], ["updated_at", "2016-05-05 14:08:24.935375"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::EmailTemplate Load (0.1ms)[0m  SELECT  "email_templates".* FROM "email_templates" WHERE "email_templates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "email_templates" SET "title" = ?, "body" = ?, "updated_at" = ? WHERE "email_templates"."id" = ?  [["title", "Changed title"], ["body", "Changed body"], ["updated_at", "2016-05-05 14:08:24.937673"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::EmailTemplate Load (0.0ms)[0m  SELECT  "email_templates".* FROM "email_templates" WHERE "email_templates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::EmailTemplate Load (0.0ms)[0m  [1mSELECT  "email_templates".* FROM "email_templates" WHERE "email_templates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::EmailTemplate::ChangeEmailTemplateTest: test_should_update_update_email_with_some_blank_params
------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:24.942129"], ["updated_at", "2016-05-05 14:08:24.942129"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "email_templates" ("name", "title", "body", "template_type", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Order Notification"], ["title", "New order"], ["body", "You have a new order"], ["template_type", "new_order_notification"], ["description", "some description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.944803"], ["updated_at", "2016-05-05 14:08:24.944803"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::EmailTemplate Load (0.0ms)[0m  [1mSELECT  "email_templates".* FROM "email_templates" WHERE "email_templates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "email_templates" SET "title" = ?, "body" = ?, "updated_at" = ? WHERE "email_templates"."id" = ?[0m  [["title", ""], ["body", ""], ["updated_at", "2016-05-05 14:08:24.947318"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::ChangeBlogTest: test_should_not_update_blog_with_existing_handle
------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:24.952640"], ["updated_at", "2016-05-05 14:08:24.952640"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 5"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.954719"], ["updated_at", "2016-05-05 14:08:24.954719"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", "handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "Blog 6"], ["shop_id", 1], ["handle", "handle"], ["slug", "handle"], ["created_at", "2016-05-05 14:08:24.957337"], ["updated_at", "2016-05-05 14:08:24.957337"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.1ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.1ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?[0m  [["shop_id", 1], ["title", "some title"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?[0m  [["shop_id", 1], ["handle", "handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.1ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.1ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "some title"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?  [["shop_id", 1], ["handle", "handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::ChangeBlogTest: test_should_not_update_blog_with_existing_title
-----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:24.981061"], ["updated_at", "2016-05-05 14:08:24.981061"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 7"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:24.983749"], ["updated_at", "2016-05-05 14:08:24.983749"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 8"], ["shop_id", 1], ["handle", "handle"], ["slug", "handle"], ["created_at", "2016-05-05 14:08:24.986644"], ["updated_at", "2016-05-05 14:08:24.986644"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "Blog 8"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?  [["shop_id", 1], ["handle", "ChangedC handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?[0m  [["shop_id", 1], ["title", "Blog 8"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?[0m  [["shop_id", 1], ["handle", "ChangedC handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.1ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.1ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.1ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::ChangeBlogTest: test_should_update_blog_with_some_blank_params
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:25.006155"], ["updated_at", "2016-05-05 14:08:25.006155"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 9"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:25.008999"], ["updated_at", "2016-05-05 14:08:25.008999"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", "handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "Blog 10"], ["shop_id", 1], ["handle", "handle"], ["slug", "handle"], ["created_at", "2016-05-05 14:08:25.012093"], ["updated_at", "2016-05-05 14:08:25.012093"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.1ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "2"]]
  [1m[35mMagazCore::Blog Load (0.1ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 2]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "2"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 2]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.1ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "2"]]
  [1m[35mMagazCore::Blog Load (0.1ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.2ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" != ?) AND "blogs"."slug" = ? LIMIT 1  [["id", 2], ["slug", ""]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "blogs" SET "page_title" = ?, "handle" = ?, "meta_description" = ?, "slug" = ?, "updated_at" = ? WHERE "blogs"."id" = ?[0m  [["page_title", ""], ["handle", ""], ["meta_description", ""], ["slug", ""], ["updated_at", "2016-05-05 14:08:25.022292"], ["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.1ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "2"]]
  [1m[36mMagazCore::Blog Load (0.1ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 2]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "2"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::ChangeBlogTest: test_should_update_blog_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:25.032056"], ["updated_at", "2016-05-05 14:08:25.032056"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 11"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:25.035208"], ["updated_at", "2016-05-05 14:08:25.035208"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", "handle"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "Blog 12"], ["shop_id", 1], ["handle", "handle"], ["slug", "handle"], ["created_at", "2016-05-05 14:08:25.039216"], ["updated_at", "2016-05-05 14:08:25.039216"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.1ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?[0m  [["shop_id", 1], ["title", "Changed title"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?[0m  [["shop_id", 1], ["handle", "Changed handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" != ?) AND "blogs"."slug" = ? LIMIT 1  [["id", 1], ["slug", "changed-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "blogs" SET "title" = ?, "page_title" = ?, "handle" = ?, "meta_description" = ?, "slug" = ?, "updated_at" = ? WHERE "blogs"."id" = ?[0m  [["title", "Changed title"], ["page_title", "Changed page_title"], ["handle", "Changed handle"], ["meta_description", "Changed meta_description"], ["slug", "changed-handle"], ["updated_at", "2016-05-05 14:08:25.048955"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Load (0.1ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.1ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::AddUserTest: test_should_create_user_with_some_blank_params
-------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:25.055546"], ["updated_at", "2016-05-05 14:08:25.055546"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example5.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example5.com"], ["first_name", "First Name 5 "], ["last_name", "Last Name 5"], ["password_salt", "$2a$10$JX/pw/UESj7fJM3j6Wsr2."], ["password_digest", "$2a$10$JX/pw/UESj7fJM3j6Wsr2.yGIhI8tcYaM.fNaif3TYqiwNS2ARlHW"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:25.205299"], ["updated_at", "2016-05-05 14:08:25.205299"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1[0m  [["shop_id", 1], ["email", "new@email.com"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'new@email.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("shop_id", "first_name", "last_name", "email", "permissions", "account_owner", "password_salt", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["first_name", "New first_name"], ["last_name", "New last_name"], ["email", "new@email.com"], ["permissions", nil], ["account_owner", "t"], ["password_salt", "$2a$10$IQ8sNmzKY4/fIRek8KEtM."], ["password_digest", "$2a$10$IQ8sNmzKY4/fIRek8KEtM.frtlPFjhzKZdtzdGi9Fc3CU4pCrd09W"], ["created_at", "2016-05-05 14:08:25.288865"], ["updated_at", "2016-05-05 14:08:25.288865"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------
MagazCore::AdminServices::User::AddUserTest: test_should_create_user_with_valid_params
--------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:25.296542"], ["updated_at", "2016-05-05 14:08:25.296542"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example6.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example6.com"], ["first_name", "First Name 6 "], ["last_name", "Last Name 6"], ["password_salt", "$2a$10$grFL2bnfIxQT.imf4XynP."], ["password_digest", "$2a$10$grFL2bnfIxQT.imf4XynP.v6pzDzduMKj3gU7Rtq7QmAAhlGLQ5We"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:25.454287"], ["updated_at", "2016-05-05 14:08:25.454287"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1[0m  [["shop_id", 1], ["email", "new@email.com"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'new@email.com' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("shop_id", "first_name", "last_name", "email", "permissions", "account_owner", "password_salt", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["first_name", "New first_name"], ["last_name", "New last_name"], ["email", "new@email.com"], ["permissions", "[\"God\", \"Mode\"]"], ["account_owner", "t"], ["password_salt", "$2a$10$k2mekSt97.4JHPHc8FmnGu"], ["password_digest", "$2a$10$k2mekSt97.4JHPHc8FmnGu7rLhKX1c6gyBvFfULeUwrGonY24FYga"], ["created_at", "2016-05-05 14:08:25.534078"], ["updated_at", "2016-05-05 14:08:25.534078"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::AddUserTest: test_should_not_create_user_with_blank_params
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:25.541821"], ["updated_at", "2016-05-05 14:08:25.541821"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example7.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example7.com"], ["first_name", "First Name 7 "], ["last_name", "Last Name 7"], ["password_salt", "$2a$10$.di5b3/DfVALXc8t9FdGCu"], ["password_digest", "$2a$10$.di5b3/DfVALXc8t9FdGCuxb9jUmOw/RerJCAnHTCkBWhGwAVz5rO"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:25.690468"], ["updated_at", "2016-05-05 14:08:25.690468"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::AddUserTest: test_should_not_create_user_with_existing_email
--------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:25.705271"], ["updated_at", "2016-05-05 14:08:25.705271"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example8.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example8.com"], ["first_name", "First Name 8 "], ["last_name", "Last Name 8"], ["password_salt", "$2a$10$LKU11aEljuYgaSZ9ahCzae"], ["password_digest", "$2a$10$LKU11aEljuYgaSZ9ahCzaejsBwoqN3a2SI35i2ehJHdK/0kFJCeMS"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:25.859699"], ["updated_at", "2016-05-05 14:08:25.859699"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1  [["shop_id", 1], ["email", "staff_user@example8.com"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1  [["shop_id", 1], ["email", "staff_user@example8.com"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::AddUserTest: test_should_not_create_user_with_invalid_email
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:25.882083"], ["updated_at", "2016-05-05 14:08:25.882083"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example9.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example9.com"], ["first_name", "First Name 9 "], ["last_name", "Last Name 9"], ["password_salt", "$2a$10$KSrlcDDvR1k5skV/xfUfJO"], ["password_digest", "$2a$10$KSrlcDDvR1k5skV/xfUfJOIDreonbtOlNbYii1V2lkmBNKzhSEBxW"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:26.037405"], ["updated_at", "2016-05-05 14:08:26.037405"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1  [["shop_id", 1], ["email", "email"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1  [["shop_id", 1], ["email", "email"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::ChangeWebhookTest: test_should_create_webhook_with_valid_params
--------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example8' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example8"], ["subdomain", "example8"], ["created_at", "2016-05-05 14:08:26.046883"], ["updated_at", "2016-05-05 14:08:26.046883"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:26.049071"], ["updated_at", "2016-05-05 14:08:26.049071"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "webhooks"
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Webhook Load (0.1ms)[0m  SELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."shop_id" = ? AND "webhooks"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "webhooks" SET "topic" = ?, "address" = ?, "format" = ?, "metafield_namespaces" = ?, "fields" = ?, "updated_at" = ? WHERE "webhooks"."id" = ?  [["topic", "create_product_event"], ["address", "https://www.examplee.com"], ["format", "JSON"], ["metafield_namespaces", nil], ["fields", nil], ["updated_at", "2016-05-05 14:08:26.055094"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Webhook Load (0.1ms)[0m  SELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Webhook Load (0.0ms)[0m  [1mSELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::ChangeWebhookTest: test_should_not_create_webhook_with_blank_params
------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example9' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example9"], ["subdomain", "example9"], ["created_at", "2016-05-05 14:08:26.060590"], ["updated_at", "2016-05-05 14:08:26.060590"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:26.062947"], ["updated_at", "2016-05-05 14:08:26.062947"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::ChangeWebhookTest: test_should_not_create_webhook_with_invalid_address
---------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example10"], ["subdomain", "example10"], ["created_at", "2016-05-05 14:08:26.074530"], ["updated_at", "2016-05-05 14:08:26.074530"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:26.077426"], ["updated_at", "2016-05-05 14:08:26.077426"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
MagazCore::User::PasswordAuthenticableTest: test_authentic_password?
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example11' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example11"], ["subdomain", "example11"], ["created_at", "2016-05-05 14:08:26.086651"], ["updated_at", "2016-05-05 14:08:26.086651"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example10.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example10.com"], ["first_name", "First Name 10 "], ["last_name", "Last Name 10"], ["password_salt", "$2a$10$1idWyoQ5sUEndfJezGqwee"], ["password_digest", "$2a$10$1idWyoQ5sUEndfJezGqweeioVLsu0AyuPu96PaDRl6dr5iHTTW73G"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:26.245539"], ["updated_at", "2016-05-05 14:08:26.245539"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
MagazCore::User::PasswordAuthenticableTest: test_validation_email_presence
--------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------
MagazCore::User::PasswordAuthenticableTest: test_validation_email_uniqueness
----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'example@example.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("first_name", "last_name", "email", "password_salt", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "New user"], ["last_name", "number One"], ["email", "example@example.com"], ["password_salt", "$2a$10$k67FMST8WjP1CTIr6C6I/u"], ["password_digest", "$2a$10$k67FMST8WjP1CTIr6C6I/ufkMxXznV137T5c..t3srAuHQjrYXBAm"], ["created_at", "2016-05-05 14:08:26.568699"], ["updated_at", "2016-05-05 14:08:26.568699"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."email" = 'example@example.com' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'example@example.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'example@example.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------
MagazCore::User::PasswordAuthenticableTest: test_validation_password_presence
-----------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'example@example.com' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::AddBlogTest: test_should_create_blog_with_valid_params
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:26.579274"], ["updated_at", "2016-05-05 14:08:26.579274"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.1ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "some-handle"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 13"], ["shop_id", 1], ["handle", "some handle"], ["slug", "some-handle"], ["created_at", "2016-05-05 14:08:26.582517"], ["updated_at", "2016-05-05 14:08:26.582517"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "Test title"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "test-handle"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "blogs" ("shop_id", "title", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["title", "Test title"], ["page_title", "Test page_title"], ["meta_description", "Test meta_description"], ["handle", "Test handle"], ["slug", "test-handle"], ["created_at", "2016-05-05 14:08:26.589132"], ["updated_at", "2016-05-05 14:08:26.589132"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::AddBlogTest: test_should_not_create_blog_with_blank_params
------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:26.596453"], ["updated_at", "2016-05-05 14:08:26.596453"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "some-handle"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 14"], ["shop_id", 1], ["handle", "some handle"], ["slug", "some-handle"], ["created_at", "2016-05-05 14:08:26.599527"], ["updated_at", "2016-05-05 14:08:26.599527"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", ""]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", ""]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::AddBlogTest: test_should_not_create_blog_with_existing_handle
---------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:26.617274"], ["updated_at", "2016-05-05 14:08:26.617274"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", "some-handle"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "Blog 15"], ["shop_id", 1], ["handle", "some handle"], ["slug", "some-handle"], ["created_at", "2016-05-05 14:08:26.621404"], ["updated_at", "2016-05-05 14:08:26.621404"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?[0m  [["shop_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?  [["shop_id", 1], ["handle", "some handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "Test title"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?[0m  [["shop_id", 1], ["handle", "some handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::AddBlogTest: test_should_not_create_blog_with_same_params
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:26.632713"], ["updated_at", "2016-05-05 14:08:26.632713"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", "some-handle"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "Blog 16"], ["shop_id", 1], ["handle", "some handle"], ["slug", "some-handle"], ["created_at", "2016-05-05 14:08:26.635694"], ["updated_at", "2016-05-05 14:08:26.635694"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?[0m  [["shop_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", "test-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("shop_id", "title", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["title", "Test title"], ["page_title", "Test page_title"], ["meta_description", "Test meta_description"], ["handle", "Test handle"], ["slug", "test-handle"], ["created_at", "2016-05-05 14:08:26.641099"], ["updated_at", "2016-05-05 14:08:26.641099"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "Test title"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?[0m  [["shop_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::AddPageTest: test_should_create_page_with_valid_params
--------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:26.653630"], ["updated_at", "2016-05-05 14:08:26.653630"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 1"], ["content", "Content 1"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:26.665045"], ["updated_at", "2016-05-05 14:08:26.665045"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "Test title"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", "test-handle"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["title", "Test title"], ["content", "Test content"], ["page_title", "Test page_title"], ["meta_description", "Test meta_description"], ["handle", "Test handle"], ["slug", "test-handle"], ["created_at", "2016-05-05 14:08:26.674826"], ["updated_at", "2016-05-05 14:08:26.674826"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Load (0.1ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::AddPageTest: test_should_not_create_page_with_blank_params
------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:26.680738"], ["updated_at", "2016-05-05 14:08:26.680738"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 2"], ["content", "Content 2"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:26.683172"], ["updated_at", "2016-05-05 14:08:26.683172"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", ""]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", ""]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::AddPageTest: test_should_not_create_page_with_same_params
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:26.697481"], ["updated_at", "2016-05-05 14:08:26.697481"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 3"], ["content", "Content 3"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:26.699788"], ["updated_at", "2016-05-05 14:08:26.699788"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", "test-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["title", "Test title"], ["content", "Test content"], ["page_title", "Test page_title"], ["meta_description", "Test meta_description"], ["handle", "Test handle"], ["slug", "test-handle"], ["created_at", "2016-05-05 14:08:26.705437"], ["updated_at", "2016-05-05 14:08:26.705437"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", "Test title"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------
MagazCore::StoreServices::CreateTest: test_create_shop_with_valid_params
------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme1"], ["created_at", "2016-05-05 14:08:26.871073"], ["updated_at", "2016-05-05 14:08:26.871073"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.872712"], ["updated_at", "2016-05-05 14:08:26.872712"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.873871"], ["updated_at", "2016-05-05 14:08:26.873871"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.874898"], ["updated_at", "2016-05-05 14:08:26.874898"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.875853"], ["updated_at", "2016-05-05 14:08:26.875853"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.876558"], ["updated_at", "2016-05-05 14:08:26.876558"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.877521"], ["updated_at", "2016-05-05 14:08:26.877521"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.878482"], ["updated_at", "2016-05-05 14:08:26.878482"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.879311"], ["updated_at", "2016-05-05 14:08:26.879311"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.880212"], ["updated_at", "2016-05-05 14:08:26.880212"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.881119"], ["updated_at", "2016-05-05 14:08:26.881119"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.882456"], ["updated_at", "2016-05-05 14:08:26.882456"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.883525"], ["updated_at", "2016-05-05 14:08:26.883525"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.884539"], ["updated_at", "2016-05-05 14:08:26.884539"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.885506"], ["updated_at", "2016-05-05 14:08:26.885506"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.886449"], ["updated_at", "2016-05-05 14:08:26.886449"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.887350"], ["updated_at", "2016-05-05 14:08:26.887350"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.888061"], ["updated_at", "2016-05-05 14:08:26.888061"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.888969"], ["updated_at", "2016-05-05 14:08:26.888969"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.889991"], ["updated_at", "2016-05-05 14:08:26.889991"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.890891"], ["updated_at", "2016-05-05 14:08:26.890891"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.891577"], ["updated_at", "2016-05-05 14:08:26.891577"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.892425"], ["updated_at", "2016-05-05 14:08:26.892425"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.893362"], ["updated_at", "2016-05-05 14:08:26.893362"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.894182"], ["updated_at", "2016-05-05 14:08:26.894182"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.894892"], ["updated_at", "2016-05-05 14:08:26.894892"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.895684"], ["updated_at", "2016-05-05 14:08:26.895684"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.896529"], ["updated_at", "2016-05-05 14:08:26.896529"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.897185"], ["updated_at", "2016-05-05 14:08:26.897185"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.898127"], ["updated_at", "2016-05-05 14:08:26.898127"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.899079"], ["updated_at", "2016-05-05 14:08:26.899079"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.899995"], ["updated_at", "2016-05-05 14:08:26.899995"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.900899"], ["updated_at", "2016-05-05 14:08:26.900899"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.901578"], ["updated_at", "2016-05-05 14:08:26.901578"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.902517"], ["updated_at", "2016-05-05 14:08:26.902517"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.903211"], ["updated_at", "2016-05-05 14:08:26.903211"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.904115"], ["updated_at", "2016-05-05 14:08:26.904115"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.904958"], ["updated_at", "2016-05-05 14:08:26.904958"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.905673"], ["updated_at", "2016-05-05 14:08:26.905673"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.907397"], ["updated_at", "2016-05-05 14:08:26.907397"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.908186"], ["updated_at", "2016-05-05 14:08:26.908186"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.908965"], ["updated_at", "2016-05-05 14:08:26.908965"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.909725"], ["updated_at", "2016-05-05 14:08:26.909725"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.910483"], ["updated_at", "2016-05-05 14:08:26.910483"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.911246"], ["updated_at", "2016-05-05 14:08:26.911246"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.912128"], ["updated_at", "2016-05-05 14:08:26.912128"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.912805"], ["updated_at", "2016-05-05 14:08:26.912805"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.913834"], ["updated_at", "2016-05-05 14:08:26.913834"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.914880"], ["updated_at", "2016-05-05 14:08:26.914880"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.915738"], ["updated_at", "2016-05-05 14:08:26.915738"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:26.916441"], ["updated_at", "2016-05-05 14:08:26.916441"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?[0m  [["name", "example42"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example42' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "example42"], ["subdomain", "example42"], ["created_at", "2016-05-05 14:08:26.928220"], ["updated_at", "2016-05-05 14:08:26.928220"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1  [["shop_id", 1], ["email", "email@mail.com"]]
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'email@mail.com' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("shop_id", "first_name", "last_name", "email", "permissions", "account_owner", "password_salt", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["first_name", "First"], ["last_name", "Last"], ["email", "email@mail.com"], ["permissions", nil], ["account_owner", "t"], ["password_salt", "$2a$10$GsUr8PVpvQAzCezxylFmte"], ["password_digest", "$2a$10$GsUr8PVpvQAzCezxylFmtekThr8lvrF..PtVfNEPxVFiMrqZnPR0q"], ["created_at", "2016-05-05 14:08:27.002858"], ["updated_at", "2016-05-05 14:08:27.002858"]]
  [1m[36mMagazCore::Theme Load (0.3ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL  ORDER BY "themes"."id" ASC LIMIT 1[0m
  [1m[35mMagazCore::Theme Load (0.1ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL  ORDER BY "themes"."id" ASC LIMIT 1
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Asset Load (0.3ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?  [["theme_id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme1"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.062090"], ["updated_at", "2016-05-05 14:08:27.062090"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-05 14:08:26.872712"], ["updated_at", "2016-05-05 14:08:26.872712"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-05 14:08:26.873871"], ["updated_at", "2016-05-05 14:08:26.873871"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-05 14:08:26.874898"], ["updated_at", "2016-05-05 14:08:26.874898"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-05 14:08:26.875853"], ["updated_at", "2016-05-05 14:08:26.875853"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-05 14:08:26.876558"], ["updated_at", "2016-05-05 14:08:26.876558"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-05 14:08:26.877521"], ["updated_at", "2016-05-05 14:08:26.877521"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-05 14:08:26.878482"], ["updated_at", "2016-05-05 14:08:26.878482"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-05 14:08:26.879311"], ["updated_at", "2016-05-05 14:08:26.879311"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-05 14:08:26.880212"], ["updated_at", "2016-05-05 14:08:26.880212"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-05 14:08:26.881119"], ["updated_at", "2016-05-05 14:08:26.881119"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-05 14:08:26.882456"], ["updated_at", "2016-05-05 14:08:26.882456"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-05 14:08:26.883525"], ["updated_at", "2016-05-05 14:08:26.883525"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-05 14:08:26.884539"], ["updated_at", "2016-05-05 14:08:26.884539"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-05 14:08:26.885506"], ["updated_at", "2016-05-05 14:08:26.885506"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-05 14:08:26.886449"], ["updated_at", "2016-05-05 14:08:26.886449"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-05 14:08:26.887350"], ["updated_at", "2016-05-05 14:08:26.887350"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-05 14:08:26.888061"], ["updated_at", "2016-05-05 14:08:26.888061"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-05 14:08:26.888969"], ["updated_at", "2016-05-05 14:08:26.888969"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-05 14:08:26.889991"], ["updated_at", "2016-05-05 14:08:26.889991"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-05 14:08:26.890891"], ["updated_at", "2016-05-05 14:08:26.890891"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-05 14:08:26.891577"], ["updated_at", "2016-05-05 14:08:26.891577"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-05 14:08:26.892425"], ["updated_at", "2016-05-05 14:08:26.892425"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-05 14:08:26.893362"], ["updated_at", "2016-05-05 14:08:26.893362"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-05 14:08:26.894182"], ["updated_at", "2016-05-05 14:08:26.894182"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-05 14:08:26.894892"], ["updated_at", "2016-05-05 14:08:26.894892"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-05 14:08:26.895684"], ["updated_at", "2016-05-05 14:08:26.895684"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-05 14:08:26.896529"], ["updated_at", "2016-05-05 14:08:26.896529"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-05 14:08:26.897185"], ["updated_at", "2016-05-05 14:08:26.897185"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-05 14:08:26.898127"], ["updated_at", "2016-05-05 14:08:26.898127"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-05 14:08:26.899079"], ["updated_at", "2016-05-05 14:08:26.899079"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-05 14:08:26.899995"], ["updated_at", "2016-05-05 14:08:26.899995"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-05 14:08:26.900899"], ["updated_at", "2016-05-05 14:08:26.900899"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-05 14:08:26.901578"], ["updated_at", "2016-05-05 14:08:26.901578"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-05 14:08:26.902517"], ["updated_at", "2016-05-05 14:08:26.902517"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-05 14:08:26.903211"], ["updated_at", "2016-05-05 14:08:26.903211"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-05 14:08:26.904115"], ["updated_at", "2016-05-05 14:08:26.904115"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-05 14:08:26.904958"], ["updated_at", "2016-05-05 14:08:26.904958"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-05 14:08:26.905673"], ["updated_at", "2016-05-05 14:08:26.905673"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-05 14:08:26.907397"], ["updated_at", "2016-05-05 14:08:26.907397"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-05 14:08:26.908186"], ["updated_at", "2016-05-05 14:08:26.908186"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-05 14:08:26.908965"], ["updated_at", "2016-05-05 14:08:26.908965"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-05 14:08:26.909725"], ["updated_at", "2016-05-05 14:08:26.909725"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-05 14:08:26.910483"], ["updated_at", "2016-05-05 14:08:26.910483"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-05 14:08:26.911246"], ["updated_at", "2016-05-05 14:08:26.911246"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-05 14:08:26.912128"], ["updated_at", "2016-05-05 14:08:26.912128"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-05 14:08:26.912805"], ["updated_at", "2016-05-05 14:08:26.912805"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-05 14:08:26.913834"], ["updated_at", "2016-05-05 14:08:26.913834"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-05 14:08:26.914880"], ["updated_at", "2016-05-05 14:08:26.914880"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-05 14:08:26.915738"], ["updated_at", "2016-05-05 14:08:26.915738"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-05 14:08:26.916441"], ["updated_at", "2016-05-05 14:08:26.916441"], ["theme_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "News"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("shop_id", "title", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["title", "News"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-05 14:08:27.105195"], ["updated_at", "2016-05-05 14:08:27.105195"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "First Post"]]
  [1m[36mMagazCore::Blog Load (0.1ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "page_title", "handle", "meta_description", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "First Post"], ["content", "This is your store’s blog. You can use it to talk about new product launches, experiences, tips or other news you want your customers to read about."], ["page_title", ""], ["handle", ""], ["meta_description", ""], ["blog_id", 1], ["slug", ""], ["created_at", "2016-05-05 14:08:27.109965"], ["updated_at", "2016-05-05 14:08:27.109965"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?  [["shop_id", 1], ["name", "Frontpage"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("shop_id", "name", "description", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Frontpage"], ["description", "Frontpage content"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-05 14:08:27.113275"], ["updated_at", "2016-05-05 14:08:27.113275"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", "About us"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Exists (0.0ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["title", "About us"], ["content", "The About Us page of your shop is vital because it’s where users go when first trying to determine a level of trust."], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-05 14:08:27.118092"], ["updated_at", "2016-05-05 14:08:27.118092"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", "Welcome"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Exists (0.0ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["title", "Welcome"], ["content", "You made it! Congratulations on starting your own online store!"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", "-3a1f8d86-1324-42dc-b5b9-983ad62846bc"], ["created_at", "2016-05-05 14:08:27.122289"], ["updated_at", "2016-05-05 14:08:27.122289"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "Main Menu"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Exists (0.1ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Main Menu"], ["handle", ""], ["slug", ""]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Home"]]
  [1m[36mMagazCore::LinkList Load (0.1ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 1], ["name", "Home"], ["link_type", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Blog"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 1], ["name", "Blog"], ["link_type", ""]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "Footer"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Exists (0.1ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Footer"], ["handle", ""], ["slug", "-108155e6-3cc3-4d7a-b0cd-2c801b1f584e"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 2], ["name", "Search"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 2], ["name", "Search"], ["link_type", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 2], ["name", "About"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 2], ["name", "About"], ["link_type", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "abandoned_checkout_notification"], ["name", "Abandoned Checkout Notification"], ["title", "Complete your Purchase"], ["body", "Your shopping cart has been reserved and is waiting for your return!"], ["description", "Sent to a potential customer who has abandoned their checkout"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.151489"], ["updated_at", "2016-05-05 14:08:27.151489"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "contact_buyer"], ["name", "Contact Buyer"], ["title", "Order with some stuff"], ["body", "Dear moran"], ["description", "Used as a default template for Email Buyer emails"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.152956"], ["updated_at", "2016-05-05 14:08:27.152956"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "fulfillment_request"], ["name", "Fulfillment Request"], ["title", "Order Fulfillment Request"], ["body", "Please fulfill order"], ["description", "Sent to custom fulfillment provider when storeowner fulfills order items"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.154410"], ["updated_at", "2016-05-05 14:08:27.154410"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "gift_card_notification"], ["name", "Your gift card is ready!"], ["title", "New order"], ["body", "Here is your gift card"], ["description", "Sent to the customer when a gift card is created"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.155708"], ["updated_at", "2016-05-05 14:08:27.155708"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "new_order_notification"], ["name", "New Order Notification"], ["title", "Order placed"], ["body", "You have a new order"], ["description", "Sent to all subscribers of Order Confirmation Notifications"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.156983"], ["updated_at", "2016-05-05 14:08:27.156983"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "new_order_notification_mobile"], ["name", "New Order Notification (mobile)"], ["title", "Order"], ["body", "You have a new order"], ["description", "Sent to all subscribers of Order Confirmation Notifications for mobile"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.158244"], ["updated_at", "2016-05-05 14:08:27.158244"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "order_cancelled"], ["name", "Order Cancelled"], ["title", "Order cancelled"], ["body", "Your order was cancelled at your request, because we did not have enough stock to fulfill your order."], ["description", "Sent to the customer when an order is cancelled"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.159609"], ["updated_at", "2016-05-05 14:08:27.159609"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "order_confirmation"], ["name", "Order Confirmation"], ["title", "Order confirmation"], ["body", "This email is to confirm your recent order."], ["description", "Sent to the customer when an order is created"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.160926"], ["updated_at", "2016-05-05 14:08:27.160926"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "refund_notification"], ["name", "Refund Notification"], ["title", "Refund Notification"], ["body", "You have a new order"], ["description", "Sent to the customer when their order is refunded"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.162311"], ["updated_at", "2016-05-05 14:08:27.162311"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "shipping_confirmation"], ["name", "Shipping confirmation"], ["title", "Shipping confirmation"], ["body", "Shop has refunded your order"], ["description", "Sent to the customer when an order is shipped"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.163741"], ["updated_at", "2016-05-05 14:08:27.163741"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "shipping_update"], ["name", "Shipping update"], ["title", "Shipping update"], ["body", "The following shipped items from order have been updated with new shipping information:"], ["description", "Sent to the customer when an order's shipping information is updated"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.165024"], ["updated_at", "2016-05-05 14:08:27.165024"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Theme Load (0.1ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."shop_id" = ? AND "themes"."role" = ?  ORDER BY "themes"."id" ASC LIMIT 1  [["shop_id", 1], ["role", "main"]]
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT "themes".* FROM "themes" WHERE "themes"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."shop_id" = ? AND "themes"."role" = ?  ORDER BY "themes"."id" ASC LIMIT 1  [["shop_id", 1], ["role", "main"]]
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."shop_id" = ?  ORDER BY "themes"."id" ASC LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------
MagazCore::StoreServices::CreateTest: test_default_content_created
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme2"], ["created_at", "2016-05-05 14:08:27.235460"], ["updated_at", "2016-05-05 14:08:27.235460"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.236789"], ["updated_at", "2016-05-05 14:08:27.236789"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.237859"], ["updated_at", "2016-05-05 14:08:27.237859"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.238809"], ["updated_at", "2016-05-05 14:08:27.238809"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.239755"], ["updated_at", "2016-05-05 14:08:27.239755"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.240568"], ["updated_at", "2016-05-05 14:08:27.240568"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.241337"], ["updated_at", "2016-05-05 14:08:27.241337"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.242488"], ["updated_at", "2016-05-05 14:08:27.242488"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.243486"], ["updated_at", "2016-05-05 14:08:27.243486"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.244475"], ["updated_at", "2016-05-05 14:08:27.244475"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.245451"], ["updated_at", "2016-05-05 14:08:27.245451"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.246401"], ["updated_at", "2016-05-05 14:08:27.246401"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.247385"], ["updated_at", "2016-05-05 14:08:27.247385"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.248417"], ["updated_at", "2016-05-05 14:08:27.248417"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.249384"], ["updated_at", "2016-05-05 14:08:27.249384"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.250324"], ["updated_at", "2016-05-05 14:08:27.250324"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.251258"], ["updated_at", "2016-05-05 14:08:27.251258"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.252197"], ["updated_at", "2016-05-05 14:08:27.252197"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.253129"], ["updated_at", "2016-05-05 14:08:27.253129"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.254044"], ["updated_at", "2016-05-05 14:08:27.254044"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.254816"], ["updated_at", "2016-05-05 14:08:27.254816"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.255596"], ["updated_at", "2016-05-05 14:08:27.255596"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.256367"], ["updated_at", "2016-05-05 14:08:27.256367"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.257143"], ["updated_at", "2016-05-05 14:08:27.257143"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.257996"], ["updated_at", "2016-05-05 14:08:27.257996"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.258657"], ["updated_at", "2016-05-05 14:08:27.258657"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.259316"], ["updated_at", "2016-05-05 14:08:27.259316"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.259976"], ["updated_at", "2016-05-05 14:08:27.259976"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.260634"], ["updated_at", "2016-05-05 14:08:27.260634"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.261284"], ["updated_at", "2016-05-05 14:08:27.261284"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.261938"], ["updated_at", "2016-05-05 14:08:27.261938"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.262593"], ["updated_at", "2016-05-05 14:08:27.262593"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.263249"], ["updated_at", "2016-05-05 14:08:27.263249"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.263902"], ["updated_at", "2016-05-05 14:08:27.263902"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.264562"], ["updated_at", "2016-05-05 14:08:27.264562"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.265214"], ["updated_at", "2016-05-05 14:08:27.265214"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.266015"], ["updated_at", "2016-05-05 14:08:27.266015"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.266688"], ["updated_at", "2016-05-05 14:08:27.266688"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.267394"], ["updated_at", "2016-05-05 14:08:27.267394"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.268132"], ["updated_at", "2016-05-05 14:08:27.268132"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.268871"], ["updated_at", "2016-05-05 14:08:27.268871"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.269572"], ["updated_at", "2016-05-05 14:08:27.269572"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.270252"], ["updated_at", "2016-05-05 14:08:27.270252"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.270922"], ["updated_at", "2016-05-05 14:08:27.270922"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.271600"], ["updated_at", "2016-05-05 14:08:27.271600"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.272313"], ["updated_at", "2016-05-05 14:08:27.272313"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.272995"], ["updated_at", "2016-05-05 14:08:27.272995"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.273978"], ["updated_at", "2016-05-05 14:08:27.273978"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.275007"], ["updated_at", "2016-05-05 14:08:27.275007"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.275998"], ["updated_at", "2016-05-05 14:08:27.275998"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.276993"], ["updated_at", "2016-05-05 14:08:27.276993"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?  [["name", "example42"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example42' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "example42"], ["subdomain", "example42"], ["created_at", "2016-05-05 14:08:27.287917"], ["updated_at", "2016-05-05 14:08:27.287917"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1[0m  [["shop_id", 1], ["email", "email@mail.com"]]
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'email@mail.com' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("shop_id", "first_name", "last_name", "email", "permissions", "account_owner", "password_salt", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["first_name", "First"], ["last_name", "Last"], ["email", "email@mail.com"], ["permissions", nil], ["account_owner", "t"], ["password_salt", "$2a$10$NbvoW5NpJyXJaoPoiJs3I."], ["password_digest", "$2a$10$NbvoW5NpJyXJaoPoiJs3I.wmVCRZEa1pKLqLCKGDDQtX8LcsfJVxe"], ["created_at", "2016-05-05 14:08:27.365759"], ["updated_at", "2016-05-05 14:08:27.365759"]]
  [1m[35mMagazCore::Theme Load (0.1ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL  ORDER BY "themes"."id" ASC LIMIT 1
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL  ORDER BY "themes"."id" ASC LIMIT 1[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Asset Load (0.3ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Theme2"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.401113"], ["updated_at", "2016-05-05 14:08:27.401113"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-05 14:08:27.236789"], ["updated_at", "2016-05-05 14:08:27.236789"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-05 14:08:27.237859"], ["updated_at", "2016-05-05 14:08:27.237859"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-05 14:08:27.238809"], ["updated_at", "2016-05-05 14:08:27.238809"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-05 14:08:27.239755"], ["updated_at", "2016-05-05 14:08:27.239755"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-05 14:08:27.240568"], ["updated_at", "2016-05-05 14:08:27.240568"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-05 14:08:27.241337"], ["updated_at", "2016-05-05 14:08:27.241337"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["created_at", "2016-05-05 14:08:27.242488"], ["updated_at", "2016-05-05 14:08:27.242488"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["created_at", "2016-05-05 14:08:27.243486"], ["updated_at", "2016-05-05 14:08:27.243486"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["created_at", "2016-05-05 14:08:27.244475"], ["updated_at", "2016-05-05 14:08:27.244475"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["created_at", "2016-05-05 14:08:27.245451"], ["updated_at", "2016-05-05 14:08:27.245451"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["created_at", "2016-05-05 14:08:27.246401"], ["updated_at", "2016-05-05 14:08:27.246401"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["created_at", "2016-05-05 14:08:27.247385"], ["updated_at", "2016-05-05 14:08:27.247385"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["created_at", "2016-05-05 14:08:27.248417"], ["updated_at", "2016-05-05 14:08:27.248417"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-05 14:08:27.249384"], ["updated_at", "2016-05-05 14:08:27.249384"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-05 14:08:27.250324"], ["updated_at", "2016-05-05 14:08:27.250324"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-05 14:08:27.251258"], ["updated_at", "2016-05-05 14:08:27.251258"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-05 14:08:27.252197"], ["updated_at", "2016-05-05 14:08:27.252197"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-05 14:08:27.253129"], ["updated_at", "2016-05-05 14:08:27.253129"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-05 14:08:27.254044"], ["updated_at", "2016-05-05 14:08:27.254044"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-05 14:08:27.254816"], ["updated_at", "2016-05-05 14:08:27.254816"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-05 14:08:27.255596"], ["updated_at", "2016-05-05 14:08:27.255596"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-05 14:08:27.256367"], ["updated_at", "2016-05-05 14:08:27.256367"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-05 14:08:27.257143"], ["updated_at", "2016-05-05 14:08:27.257143"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-05 14:08:27.257996"], ["updated_at", "2016-05-05 14:08:27.257996"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-05 14:08:27.258657"], ["updated_at", "2016-05-05 14:08:27.258657"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-05 14:08:27.259316"], ["updated_at", "2016-05-05 14:08:27.259316"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-05 14:08:27.259976"], ["updated_at", "2016-05-05 14:08:27.259976"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-05 14:08:27.260634"], ["updated_at", "2016-05-05 14:08:27.260634"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-05 14:08:27.261284"], ["updated_at", "2016-05-05 14:08:27.261284"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-05 14:08:27.261938"], ["updated_at", "2016-05-05 14:08:27.261938"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-05 14:08:27.262593"], ["updated_at", "2016-05-05 14:08:27.262593"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["created_at", "2016-05-05 14:08:27.263249"], ["updated_at", "2016-05-05 14:08:27.263249"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["created_at", "2016-05-05 14:08:27.263902"], ["updated_at", "2016-05-05 14:08:27.263902"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["created_at", "2016-05-05 14:08:27.264562"], ["updated_at", "2016-05-05 14:08:27.264562"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["created_at", "2016-05-05 14:08:27.265214"], ["updated_at", "2016-05-05 14:08:27.265214"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["created_at", "2016-05-05 14:08:27.266015"], ["updated_at", "2016-05-05 14:08:27.266015"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-05 14:08:27.266688"], ["updated_at", "2016-05-05 14:08:27.266688"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-05 14:08:27.267394"], ["updated_at", "2016-05-05 14:08:27.267394"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-05 14:08:27.268132"], ["updated_at", "2016-05-05 14:08:27.268132"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-05 14:08:27.268871"], ["updated_at", "2016-05-05 14:08:27.268871"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-05 14:08:27.269572"], ["updated_at", "2016-05-05 14:08:27.269572"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-05 14:08:27.270252"], ["updated_at", "2016-05-05 14:08:27.270252"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-05 14:08:27.270922"], ["updated_at", "2016-05-05 14:08:27.270922"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-05 14:08:27.271600"], ["updated_at", "2016-05-05 14:08:27.271600"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["created_at", "2016-05-05 14:08:27.272313"], ["updated_at", "2016-05-05 14:08:27.272313"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-05 14:08:27.272995"], ["updated_at", "2016-05-05 14:08:27.272995"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-05 14:08:27.273978"], ["updated_at", "2016-05-05 14:08:27.273978"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["created_at", "2016-05-05 14:08:27.275007"], ["updated_at", "2016-05-05 14:08:27.275007"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["created_at", "2016-05-05 14:08:27.275998"], ["updated_at", "2016-05-05 14:08:27.275998"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["created_at", "2016-05-05 14:08:27.276993"], ["updated_at", "2016-05-05 14:08:27.276993"], ["theme_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?[0m  [["shop_id", 1], ["title", "News"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("shop_id", "title", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["title", "News"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-05 14:08:27.438870"], ["updated_at", "2016-05-05 14:08:27.438870"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 1], ["title", "First Post"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Article Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "page_title", "handle", "meta_description", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["title", "First Post"], ["content", "This is your store’s blog. You can use it to talk about new product launches, experiences, tips or other news you want your customers to read about."], ["page_title", ""], ["handle", ""], ["meta_description", ""], ["blog_id", 1], ["slug", ""], ["created_at", "2016-05-05 14:08:27.441953"], ["updated_at", "2016-05-05 14:08:27.441953"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?[0m  [["shop_id", 1], ["name", "Frontpage"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Collection Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("shop_id", "name", "description", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["name", "Frontpage"], ["description", "Frontpage content"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-05 14:08:27.454420"], ["updated_at", "2016-05-05 14:08:27.454420"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "About us"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["title", "About us"], ["content", "The About Us page of your shop is vital because it’s where users go when first trying to determine a level of trust."], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-05 14:08:27.458922"], ["updated_at", "2016-05-05 14:08:27.458922"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "Welcome"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["title", "Welcome"], ["content", "You made it! Congratulations on starting your own online store!"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", "-681b4fe5-1e7b-449c-89ad-724674dc52e7"], ["created_at", "2016-05-05 14:08:27.462194"], ["updated_at", "2016-05-05 14:08:27.462194"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", "Main Menu"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)  [["shop_id", 1], ["name", "Main Menu"], ["handle", ""], ["slug", ""]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 1], ["name", "Home"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)  [["link_list_id", 1], ["name", "Home"], ["link_type", ""]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 1], ["name", "Blog"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)  [["link_list_id", 1], ["name", "Blog"], ["link_type", ""]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", "Footer"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)  [["shop_id", 1], ["name", "Footer"], ["handle", ""], ["slug", "-cfd3e12c-96f2-4f5f-808a-491951452bac"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 2], ["name", "Search"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)  [["link_list_id", 2], ["name", "Search"], ["link_type", ""]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 2], ["name", "About"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)  [["link_list_id", 2], ["name", "About"], ["link_type", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "abandoned_checkout_notification"], ["name", "Abandoned Checkout Notification"], ["title", "Complete your Purchase"], ["body", "Your shopping cart has been reserved and is waiting for your return!"], ["description", "Sent to a potential customer who has abandoned their checkout"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.482229"], ["updated_at", "2016-05-05 14:08:27.482229"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "contact_buyer"], ["name", "Contact Buyer"], ["title", "Order with some stuff"], ["body", "Dear moran"], ["description", "Used as a default template for Email Buyer emails"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.483981"], ["updated_at", "2016-05-05 14:08:27.483981"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "fulfillment_request"], ["name", "Fulfillment Request"], ["title", "Order Fulfillment Request"], ["body", "Please fulfill order"], ["description", "Sent to custom fulfillment provider when storeowner fulfills order items"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.485369"], ["updated_at", "2016-05-05 14:08:27.485369"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "gift_card_notification"], ["name", "Your gift card is ready!"], ["title", "New order"], ["body", "Here is your gift card"], ["description", "Sent to the customer when a gift card is created"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.486726"], ["updated_at", "2016-05-05 14:08:27.486726"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "new_order_notification"], ["name", "New Order Notification"], ["title", "Order placed"], ["body", "You have a new order"], ["description", "Sent to all subscribers of Order Confirmation Notifications"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.488177"], ["updated_at", "2016-05-05 14:08:27.488177"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "new_order_notification_mobile"], ["name", "New Order Notification (mobile)"], ["title", "Order"], ["body", "You have a new order"], ["description", "Sent to all subscribers of Order Confirmation Notifications for mobile"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.489395"], ["updated_at", "2016-05-05 14:08:27.489395"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "order_cancelled"], ["name", "Order Cancelled"], ["title", "Order cancelled"], ["body", "Your order was cancelled at your request, because we did not have enough stock to fulfill your order."], ["description", "Sent to the customer when an order is cancelled"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.490610"], ["updated_at", "2016-05-05 14:08:27.490610"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "order_confirmation"], ["name", "Order Confirmation"], ["title", "Order confirmation"], ["body", "This email is to confirm your recent order."], ["description", "Sent to the customer when an order is created"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.491806"], ["updated_at", "2016-05-05 14:08:27.491806"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "refund_notification"], ["name", "Refund Notification"], ["title", "Refund Notification"], ["body", "You have a new order"], ["description", "Sent to the customer when their order is refunded"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.492961"], ["updated_at", "2016-05-05 14:08:27.492961"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "shipping_confirmation"], ["name", "Shipping confirmation"], ["title", "Shipping confirmation"], ["body", "Shop has refunded your order"], ["description", "Sent to the customer when an order is shipped"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.494702"], ["updated_at", "2016-05-05 14:08:27.494702"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "shipping_update"], ["name", "Shipping update"], ["title", "Shipping update"], ["body", "The following shipped items from order have been updated with new shipping information:"], ["description", "Sent to the customer when an order's shipping information is updated"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:27.496402"], ["updated_at", "2016-05-05 14:08:27.496402"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::EmailTemplate Load (0.2ms)[0m  [1mSELECT "email_templates".* FROM "email_templates" WHERE "email_templates"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35mMagazCore::Collection Load (0.1ms)[0m  SELECT "collections".* FROM "collections" WHERE "collections"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Blog Load (0.1ms)[0m  [1mSELECT "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT "articles".* FROM "articles" INNER JOIN "blogs" ON "articles"."blog_id" = "blogs"."id" WHERE "blogs"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT "pages".* FROM "pages" WHERE "pages"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Link Load (0.1ms)[0m  [1mSELECT "links".* FROM "links" INNER JOIN "link_lists" ON "links"."link_list_id" = "link_lists"."id" WHERE "link_lists"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------
MagazCore::StoreServices::CreateTest: test_fail_shop_creation_when_no_default_theme_in_system
---------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme3"], ["created_at", "2016-05-05 14:08:27.571715"], ["updated_at", "2016-05-05 14:08:27.571715"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.573029"], ["updated_at", "2016-05-05 14:08:27.573029"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.573984"], ["updated_at", "2016-05-05 14:08:27.573984"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.574852"], ["updated_at", "2016-05-05 14:08:27.574852"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.575527"], ["updated_at", "2016-05-05 14:08:27.575527"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.576221"], ["updated_at", "2016-05-05 14:08:27.576221"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.576901"], ["updated_at", "2016-05-05 14:08:27.576901"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.577558"], ["updated_at", "2016-05-05 14:08:27.577558"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.578228"], ["updated_at", "2016-05-05 14:08:27.578228"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.578907"], ["updated_at", "2016-05-05 14:08:27.578907"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.579599"], ["updated_at", "2016-05-05 14:08:27.579599"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.580280"], ["updated_at", "2016-05-05 14:08:27.580280"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.580943"], ["updated_at", "2016-05-05 14:08:27.580943"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.581608"], ["updated_at", "2016-05-05 14:08:27.581608"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.582276"], ["updated_at", "2016-05-05 14:08:27.582276"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.582959"], ["updated_at", "2016-05-05 14:08:27.582959"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.583638"], ["updated_at", "2016-05-05 14:08:27.583638"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.584494"], ["updated_at", "2016-05-05 14:08:27.584494"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.585232"], ["updated_at", "2016-05-05 14:08:27.585232"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.585930"], ["updated_at", "2016-05-05 14:08:27.585930"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.586669"], ["updated_at", "2016-05-05 14:08:27.586669"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.587370"], ["updated_at", "2016-05-05 14:08:27.587370"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.588062"], ["updated_at", "2016-05-05 14:08:27.588062"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.588753"], ["updated_at", "2016-05-05 14:08:27.588753"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.589401"], ["updated_at", "2016-05-05 14:08:27.589401"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.590100"], ["updated_at", "2016-05-05 14:08:27.590100"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.590783"], ["updated_at", "2016-05-05 14:08:27.590783"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.591463"], ["updated_at", "2016-05-05 14:08:27.591463"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.592134"], ["updated_at", "2016-05-05 14:08:27.592134"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.592824"], ["updated_at", "2016-05-05 14:08:27.592824"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.593501"], ["updated_at", "2016-05-05 14:08:27.593501"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.594178"], ["updated_at", "2016-05-05 14:08:27.594178"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.594866"], ["updated_at", "2016-05-05 14:08:27.594866"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.595549"], ["updated_at", "2016-05-05 14:08:27.595549"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.596232"], ["updated_at", "2016-05-05 14:08:27.596232"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.596916"], ["updated_at", "2016-05-05 14:08:27.596916"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.597587"], ["updated_at", "2016-05-05 14:08:27.597587"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.598245"], ["updated_at", "2016-05-05 14:08:27.598245"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.598926"], ["updated_at", "2016-05-05 14:08:27.598926"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.599610"], ["updated_at", "2016-05-05 14:08:27.599610"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.600279"], ["updated_at", "2016-05-05 14:08:27.600279"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.600960"], ["updated_at", "2016-05-05 14:08:27.600960"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.601626"], ["updated_at", "2016-05-05 14:08:27.601626"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.602295"], ["updated_at", "2016-05-05 14:08:27.602295"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.603068"], ["updated_at", "2016-05-05 14:08:27.603068"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.603832"], ["updated_at", "2016-05-05 14:08:27.603832"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.604584"], ["updated_at", "2016-05-05 14:08:27.604584"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.605272"], ["updated_at", "2016-05-05 14:08:27.605272"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.605973"], ["updated_at", "2016-05-05 14:08:27.605973"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.606660"], ["updated_at", "2016-05-05 14:08:27.606660"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.607357"], ["updated_at", "2016-05-05 14:08:27.607357"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "themes" WHERE "themes"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?  [["name", "example42"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example42' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "example42"], ["subdomain", "example42"], ["created_at", "2016-05-05 14:08:27.617654"], ["updated_at", "2016-05-05 14:08:27.617654"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1[0m  [["shop_id", 1], ["email", "email@mail.com"]]
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'email@mail.com' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("shop_id", "first_name", "last_name", "email", "permissions", "account_owner", "password_salt", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["first_name", "First"], ["last_name", "Last"], ["email", "email@mail.com"], ["permissions", nil], ["account_owner", "t"], ["password_salt", "$2a$10$QLSXRJIskAdUl2gEs.MxAu"], ["password_digest", "$2a$10$QLSXRJIskAdUl2gEs.MxAuyykYbMP1XMx48R9gQsWj2GGEbx6xqri"], ["created_at", "2016-05-05 14:08:27.700804"], ["updated_at", "2016-05-05 14:08:27.700804"]]
  [1m[35mMagazCore::Theme Load (0.1ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL  ORDER BY "themes"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------
MagazCore::StoreServices::CreateTest: test_fail_shop_creation_when_no_shop_params
---------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme4"], ["created_at", "2016-05-05 14:08:27.759618"], ["updated_at", "2016-05-05 14:08:27.759618"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.760789"], ["updated_at", "2016-05-05 14:08:27.760789"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.761755"], ["updated_at", "2016-05-05 14:08:27.761755"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.762598"], ["updated_at", "2016-05-05 14:08:27.762598"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.763390"], ["updated_at", "2016-05-05 14:08:27.763390"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.764156"], ["updated_at", "2016-05-05 14:08:27.764156"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.764931"], ["updated_at", "2016-05-05 14:08:27.764931"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.765740"], ["updated_at", "2016-05-05 14:08:27.765740"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.766640"], ["updated_at", "2016-05-05 14:08:27.766640"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.767425"], ["updated_at", "2016-05-05 14:08:27.767425"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.768171"], ["updated_at", "2016-05-05 14:08:27.768171"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.768956"], ["updated_at", "2016-05-05 14:08:27.768956"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.769710"], ["updated_at", "2016-05-05 14:08:27.769710"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.770580"], ["updated_at", "2016-05-05 14:08:27.770580"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.771395"], ["updated_at", "2016-05-05 14:08:27.771395"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.772154"], ["updated_at", "2016-05-05 14:08:27.772154"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.772902"], ["updated_at", "2016-05-05 14:08:27.772902"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.773631"], ["updated_at", "2016-05-05 14:08:27.773631"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.774358"], ["updated_at", "2016-05-05 14:08:27.774358"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.775095"], ["updated_at", "2016-05-05 14:08:27.775095"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.776241"], ["updated_at", "2016-05-05 14:08:27.776241"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.777021"], ["updated_at", "2016-05-05 14:08:27.777021"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.777791"], ["updated_at", "2016-05-05 14:08:27.777791"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.778548"], ["updated_at", "2016-05-05 14:08:27.778548"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.779304"], ["updated_at", "2016-05-05 14:08:27.779304"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.780087"], ["updated_at", "2016-05-05 14:08:27.780087"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.780828"], ["updated_at", "2016-05-05 14:08:27.780828"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.781545"], ["updated_at", "2016-05-05 14:08:27.781545"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.782258"], ["updated_at", "2016-05-05 14:08:27.782258"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.783042"], ["updated_at", "2016-05-05 14:08:27.783042"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.784295"], ["updated_at", "2016-05-05 14:08:27.784295"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.785322"], ["updated_at", "2016-05-05 14:08:27.785322"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.786296"], ["updated_at", "2016-05-05 14:08:27.786296"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.787412"], ["updated_at", "2016-05-05 14:08:27.787412"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.788471"], ["updated_at", "2016-05-05 14:08:27.788471"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.789509"], ["updated_at", "2016-05-05 14:08:27.789509"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.790540"], ["updated_at", "2016-05-05 14:08:27.790540"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.791548"], ["updated_at", "2016-05-05 14:08:27.791548"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.792572"], ["updated_at", "2016-05-05 14:08:27.792572"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.793603"], ["updated_at", "2016-05-05 14:08:27.793603"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.794550"], ["updated_at", "2016-05-05 14:08:27.794550"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.795389"], ["updated_at", "2016-05-05 14:08:27.795389"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.796236"], ["updated_at", "2016-05-05 14:08:27.796236"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.797107"], ["updated_at", "2016-05-05 14:08:27.797107"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.798173"], ["updated_at", "2016-05-05 14:08:27.798173"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.798939"], ["updated_at", "2016-05-05 14:08:27.798939"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.799765"], ["updated_at", "2016-05-05 14:08:27.799765"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.800506"], ["updated_at", "2016-05-05 14:08:27.800506"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.801252"], ["updated_at", "2016-05-05 14:08:27.801252"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.801966"], ["updated_at", "2016-05-05 14:08:27.801966"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.802688"], ["updated_at", "2016-05-05 14:08:27.802688"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?[0m  [["name", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?  [["name", ""]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------
MagazCore::StoreServices::CreateTest: test_fail_shop_creation_when_no_user_params
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme5"], ["created_at", "2016-05-05 14:08:27.876782"], ["updated_at", "2016-05-05 14:08:27.876782"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.877988"], ["updated_at", "2016-05-05 14:08:27.877988"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.878835"], ["updated_at", "2016-05-05 14:08:27.878835"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.879647"], ["updated_at", "2016-05-05 14:08:27.879647"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.880516"], ["updated_at", "2016-05-05 14:08:27.880516"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.881354"], ["updated_at", "2016-05-05 14:08:27.881354"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.882131"], ["updated_at", "2016-05-05 14:08:27.882131"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.882821"], ["updated_at", "2016-05-05 14:08:27.882821"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.883564"], ["updated_at", "2016-05-05 14:08:27.883564"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.884299"], ["updated_at", "2016-05-05 14:08:27.884299"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.884991"], ["updated_at", "2016-05-05 14:08:27.884991"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.885705"], ["updated_at", "2016-05-05 14:08:27.885705"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.886429"], ["updated_at", "2016-05-05 14:08:27.886429"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.887133"], ["updated_at", "2016-05-05 14:08:27.887133"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.887887"], ["updated_at", "2016-05-05 14:08:27.887887"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.888659"], ["updated_at", "2016-05-05 14:08:27.888659"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.889518"], ["updated_at", "2016-05-05 14:08:27.889518"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.890275"], ["updated_at", "2016-05-05 14:08:27.890275"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.891024"], ["updated_at", "2016-05-05 14:08:27.891024"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.891766"], ["updated_at", "2016-05-05 14:08:27.891766"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.892477"], ["updated_at", "2016-05-05 14:08:27.892477"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.893168"], ["updated_at", "2016-05-05 14:08:27.893168"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.893837"], ["updated_at", "2016-05-05 14:08:27.893837"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.894568"], ["updated_at", "2016-05-05 14:08:27.894568"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.895308"], ["updated_at", "2016-05-05 14:08:27.895308"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.896517"], ["updated_at", "2016-05-05 14:08:27.896517"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.897546"], ["updated_at", "2016-05-05 14:08:27.897546"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.898583"], ["updated_at", "2016-05-05 14:08:27.898583"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.899630"], ["updated_at", "2016-05-05 14:08:27.899630"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.900615"], ["updated_at", "2016-05-05 14:08:27.900615"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.901621"], ["updated_at", "2016-05-05 14:08:27.901621"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.902554"], ["updated_at", "2016-05-05 14:08:27.902554"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.903635"], ["updated_at", "2016-05-05 14:08:27.903635"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.904602"], ["updated_at", "2016-05-05 14:08:27.904602"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.905584"], ["updated_at", "2016-05-05 14:08:27.905584"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.906469"], ["updated_at", "2016-05-05 14:08:27.906469"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.907258"], ["updated_at", "2016-05-05 14:08:27.907258"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.908057"], ["updated_at", "2016-05-05 14:08:27.908057"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.908866"], ["updated_at", "2016-05-05 14:08:27.908866"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.909654"], ["updated_at", "2016-05-05 14:08:27.909654"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.910423"], ["updated_at", "2016-05-05 14:08:27.910423"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.911098"], ["updated_at", "2016-05-05 14:08:27.911098"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.911964"], ["updated_at", "2016-05-05 14:08:27.911964"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.912643"], ["updated_at", "2016-05-05 14:08:27.912643"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.913337"], ["updated_at", "2016-05-05 14:08:27.913337"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.914098"], ["updated_at", "2016-05-05 14:08:27.914098"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.914803"], ["updated_at", "2016-05-05 14:08:27.914803"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.915480"], ["updated_at", "2016-05-05 14:08:27.915480"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.916171"], ["updated_at", "2016-05-05 14:08:27.916171"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.916864"], ["updated_at", "2016-05-05 14:08:27.916864"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.917583"], ["updated_at", "2016-05-05 14:08:27.917583"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?  [["name", "example42"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?[0m  [["name", "example42"]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------
MagazCore::StoreServices::CreateTest: test_shop_and_user_should_have_association
--------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme6"], ["created_at", "2016-05-05 14:08:27.980832"], ["updated_at", "2016-05-05 14:08:27.980832"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.982047"], ["updated_at", "2016-05-05 14:08:27.982047"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.982834"], ["updated_at", "2016-05-05 14:08:27.982834"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.983760"], ["updated_at", "2016-05-05 14:08:27.983760"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.984518"], ["updated_at", "2016-05-05 14:08:27.984518"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.985229"], ["updated_at", "2016-05-05 14:08:27.985229"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.985958"], ["updated_at", "2016-05-05 14:08:27.985958"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.986684"], ["updated_at", "2016-05-05 14:08:27.986684"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.987419"], ["updated_at", "2016-05-05 14:08:27.987419"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.988161"], ["updated_at", "2016-05-05 14:08:27.988161"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.988858"], ["updated_at", "2016-05-05 14:08:27.988858"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.989537"], ["updated_at", "2016-05-05 14:08:27.989537"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.990213"], ["updated_at", "2016-05-05 14:08:27.990213"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.990873"], ["updated_at", "2016-05-05 14:08:27.990873"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.991894"], ["updated_at", "2016-05-05 14:08:27.991894"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.992692"], ["updated_at", "2016-05-05 14:08:27.992692"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.993422"], ["updated_at", "2016-05-05 14:08:27.993422"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.994147"], ["updated_at", "2016-05-05 14:08:27.994147"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.994870"], ["updated_at", "2016-05-05 14:08:27.994870"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.995616"], ["updated_at", "2016-05-05 14:08:27.995616"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.996344"], ["updated_at", "2016-05-05 14:08:27.996344"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.997037"], ["updated_at", "2016-05-05 14:08:27.997037"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.997728"], ["updated_at", "2016-05-05 14:08:27.997728"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.998451"], ["updated_at", "2016-05-05 14:08:27.998451"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:27.999155"], ["updated_at", "2016-05-05 14:08:27.999155"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.000217"], ["updated_at", "2016-05-05 14:08:28.000217"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.001250"], ["updated_at", "2016-05-05 14:08:28.001250"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.002294"], ["updated_at", "2016-05-05 14:08:28.002294"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.003323"], ["updated_at", "2016-05-05 14:08:28.003323"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.004315"], ["updated_at", "2016-05-05 14:08:28.004315"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.005284"], ["updated_at", "2016-05-05 14:08:28.005284"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.006343"], ["updated_at", "2016-05-05 14:08:28.006343"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.007321"], ["updated_at", "2016-05-05 14:08:28.007321"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.008311"], ["updated_at", "2016-05-05 14:08:28.008311"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.009292"], ["updated_at", "2016-05-05 14:08:28.009292"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.010216"], ["updated_at", "2016-05-05 14:08:28.010216"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.011016"], ["updated_at", "2016-05-05 14:08:28.011016"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.011799"], ["updated_at", "2016-05-05 14:08:28.011799"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.012632"], ["updated_at", "2016-05-05 14:08:28.012632"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.013494"], ["updated_at", "2016-05-05 14:08:28.013494"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.014234"], ["updated_at", "2016-05-05 14:08:28.014234"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.014911"], ["updated_at", "2016-05-05 14:08:28.014911"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.015764"], ["updated_at", "2016-05-05 14:08:28.015764"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.016534"], ["updated_at", "2016-05-05 14:08:28.016534"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.017245"], ["updated_at", "2016-05-05 14:08:28.017245"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.018038"], ["updated_at", "2016-05-05 14:08:28.018038"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.018756"], ["updated_at", "2016-05-05 14:08:28.018756"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.019498"], ["updated_at", "2016-05-05 14:08:28.019498"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.020216"], ["updated_at", "2016-05-05 14:08:28.020216"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.020919"], ["updated_at", "2016-05-05 14:08:28.020919"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.021624"], ["updated_at", "2016-05-05 14:08:28.021624"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?[0m  [["name", "example42"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example42' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "example42"], ["subdomain", "example42"], ["created_at", "2016-05-05 14:08:28.031068"], ["updated_at", "2016-05-05 14:08:28.031068"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1  [["shop_id", 1], ["email", "email@mail.com"]]
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'email@mail.com' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("shop_id", "first_name", "last_name", "email", "permissions", "account_owner", "password_salt", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["first_name", "First"], ["last_name", "Last"], ["email", "email@mail.com"], ["permissions", nil], ["account_owner", "t"], ["password_salt", "$2a$10$PQ71VZ8Q8QCAK7WRRq/k8u"], ["password_digest", "$2a$10$PQ71VZ8Q8QCAK7WRRq/k8u6NpJAonwT9oQDz/.i1d7rWkYq1OQtGa"], ["created_at", "2016-05-05 14:08:28.112185"], ["updated_at", "2016-05-05 14:08:28.112185"]]
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL  ORDER BY "themes"."id" ASC LIMIT 1[0m
  [1m[35mMagazCore::Theme Load (0.1ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL  ORDER BY "themes"."id" ASC LIMIT 1
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Theme Load (0.0ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Asset Load (0.2ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?  [["theme_id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme6"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-05 14:08:28.150479"], ["updated_at", "2016-05-05 14:08:28.150479"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-05 14:08:27.982047"], ["updated_at", "2016-05-05 14:08:27.982047"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-05 14:08:27.982834"], ["updated_at", "2016-05-05 14:08:27.982834"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-05 14:08:27.983760"], ["updated_at", "2016-05-05 14:08:27.983760"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-05 14:08:27.984518"], ["updated_at", "2016-05-05 14:08:27.984518"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-05 14:08:27.985229"], ["updated_at", "2016-05-05 14:08:27.985229"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-05 14:08:27.985958"], ["updated_at", "2016-05-05 14:08:27.985958"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-05 14:08:27.986684"], ["updated_at", "2016-05-05 14:08:27.986684"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-05 14:08:27.987419"], ["updated_at", "2016-05-05 14:08:27.987419"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-05 14:08:27.988161"], ["updated_at", "2016-05-05 14:08:27.988161"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-05 14:08:27.988858"], ["updated_at", "2016-05-05 14:08:27.988858"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-05 14:08:27.989537"], ["updated_at", "2016-05-05 14:08:27.989537"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-05 14:08:27.990213"], ["updated_at", "2016-05-05 14:08:27.990213"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-05 14:08:27.990873"], ["updated_at", "2016-05-05 14:08:27.990873"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-05 14:08:27.991894"], ["updated_at", "2016-05-05 14:08:27.991894"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-05 14:08:27.992692"], ["updated_at", "2016-05-05 14:08:27.992692"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-05 14:08:27.993422"], ["updated_at", "2016-05-05 14:08:27.993422"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-05 14:08:27.994147"], ["updated_at", "2016-05-05 14:08:27.994147"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-05 14:08:27.994870"], ["updated_at", "2016-05-05 14:08:27.994870"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-05 14:08:27.995616"], ["updated_at", "2016-05-05 14:08:27.995616"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-05 14:08:27.996344"], ["updated_at", "2016-05-05 14:08:27.996344"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-05 14:08:27.997037"], ["updated_at", "2016-05-05 14:08:27.997037"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-05 14:08:27.997728"], ["updated_at", "2016-05-05 14:08:27.997728"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-05 14:08:27.998451"], ["updated_at", "2016-05-05 14:08:27.998451"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-05 14:08:27.999155"], ["updated_at", "2016-05-05 14:08:27.999155"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-05 14:08:28.000217"], ["updated_at", "2016-05-05 14:08:28.000217"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-05 14:08:28.001250"], ["updated_at", "2016-05-05 14:08:28.001250"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-05 14:08:28.002294"], ["updated_at", "2016-05-05 14:08:28.002294"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-05 14:08:28.003323"], ["updated_at", "2016-05-05 14:08:28.003323"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-05 14:08:28.004315"], ["updated_at", "2016-05-05 14:08:28.004315"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-05 14:08:28.005284"], ["updated_at", "2016-05-05 14:08:28.005284"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-05 14:08:28.006343"], ["updated_at", "2016-05-05 14:08:28.006343"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-05 14:08:28.007321"], ["updated_at", "2016-05-05 14:08:28.007321"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-05 14:08:28.008311"], ["updated_at", "2016-05-05 14:08:28.008311"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-05 14:08:28.009292"], ["updated_at", "2016-05-05 14:08:28.009292"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-05 14:08:28.010216"], ["updated_at", "2016-05-05 14:08:28.010216"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-05 14:08:28.011016"], ["updated_at", "2016-05-05 14:08:28.011016"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-05 14:08:28.011799"], ["updated_at", "2016-05-05 14:08:28.011799"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-05 14:08:28.012632"], ["updated_at", "2016-05-05 14:08:28.012632"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-05 14:08:28.013494"], ["updated_at", "2016-05-05 14:08:28.013494"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-05 14:08:28.014234"], ["updated_at", "2016-05-05 14:08:28.014234"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-05 14:08:28.014911"], ["updated_at", "2016-05-05 14:08:28.014911"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-05 14:08:28.015764"], ["updated_at", "2016-05-05 14:08:28.015764"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-05 14:08:28.016534"], ["updated_at", "2016-05-05 14:08:28.016534"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-05 14:08:28.017245"], ["updated_at", "2016-05-05 14:08:28.017245"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-05 14:08:28.018038"], ["updated_at", "2016-05-05 14:08:28.018038"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-05 14:08:28.018756"], ["updated_at", "2016-05-05 14:08:28.018756"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-05 14:08:28.019498"], ["updated_at", "2016-05-05 14:08:28.019498"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-05 14:08:28.020216"], ["updated_at", "2016-05-05 14:08:28.020216"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-05 14:08:28.020919"], ["updated_at", "2016-05-05 14:08:28.020919"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-05 14:08:28.021624"], ["updated_at", "2016-05-05 14:08:28.021624"], ["theme_id", 2]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "News"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("shop_id", "title", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["title", "News"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-05 14:08:28.193550"], ["updated_at", "2016-05-05 14:08:28.193550"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "First Post"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "page_title", "handle", "meta_description", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "First Post"], ["content", "This is your store’s blog. You can use it to talk about new product launches, experiences, tips or other news you want your customers to read about."], ["page_title", ""], ["handle", ""], ["meta_description", ""], ["blog_id", 1], ["slug", ""], ["created_at", "2016-05-05 14:08:28.197114"], ["updated_at", "2016-05-05 14:08:28.197114"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?  [["shop_id", 1], ["name", "Frontpage"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("shop_id", "name", "description", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Frontpage"], ["description", "Frontpage content"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-05 14:08:28.200853"], ["updated_at", "2016-05-05 14:08:28.200853"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", "About us"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Exists (0.0ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["title", "About us"], ["content", "The About Us page of your shop is vital because it’s where users go when first trying to determine a level of trust."], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-05 14:08:28.203949"], ["updated_at", "2016-05-05 14:08:28.203949"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", "Welcome"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Exists (0.0ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["title", "Welcome"], ["content", "You made it! Congratulations on starting your own online store!"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", "-1ccddb48-3a96-481d-bc84-4e4a04573679"], ["created_at", "2016-05-05 14:08:28.206752"], ["updated_at", "2016-05-05 14:08:28.206752"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "Main Menu"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Exists (0.0ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Main Menu"], ["handle", ""], ["slug", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Home"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 1], ["name", "Home"], ["link_type", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Blog"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 1], ["name", "Blog"], ["link_type", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "Footer"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Exists (0.0ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Footer"], ["handle", ""], ["slug", "-b006f96e-576b-4483-ab7a-642e5fd72cd7"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 2], ["name", "Search"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 2], ["name", "Search"], ["link_type", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 2], ["name", "About"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 2], ["name", "About"], ["link_type", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "abandoned_checkout_notification"], ["name", "Abandoned Checkout Notification"], ["title", "Complete your Purchase"], ["body", "Your shopping cart has been reserved and is waiting for your return!"], ["description", "Sent to a potential customer who has abandoned their checkout"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:28.225874"], ["updated_at", "2016-05-05 14:08:28.225874"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "contact_buyer"], ["name", "Contact Buyer"], ["title", "Order with some stuff"], ["body", "Dear moran"], ["description", "Used as a default template for Email Buyer emails"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:28.227117"], ["updated_at", "2016-05-05 14:08:28.227117"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "fulfillment_request"], ["name", "Fulfillment Request"], ["title", "Order Fulfillment Request"], ["body", "Please fulfill order"], ["description", "Sent to custom fulfillment provider when storeowner fulfills order items"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:28.228211"], ["updated_at", "2016-05-05 14:08:28.228211"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "gift_card_notification"], ["name", "Your gift card is ready!"], ["title", "New order"], ["body", "Here is your gift card"], ["description", "Sent to the customer when a gift card is created"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:28.229310"], ["updated_at", "2016-05-05 14:08:28.229310"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "new_order_notification"], ["name", "New Order Notification"], ["title", "Order placed"], ["body", "You have a new order"], ["description", "Sent to all subscribers of Order Confirmation Notifications"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:28.230408"], ["updated_at", "2016-05-05 14:08:28.230408"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "new_order_notification_mobile"], ["name", "New Order Notification (mobile)"], ["title", "Order"], ["body", "You have a new order"], ["description", "Sent to all subscribers of Order Confirmation Notifications for mobile"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:28.231809"], ["updated_at", "2016-05-05 14:08:28.231809"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "order_cancelled"], ["name", "Order Cancelled"], ["title", "Order cancelled"], ["body", "Your order was cancelled at your request, because we did not have enough stock to fulfill your order."], ["description", "Sent to the customer when an order is cancelled"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:28.233602"], ["updated_at", "2016-05-05 14:08:28.233602"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "order_confirmation"], ["name", "Order Confirmation"], ["title", "Order confirmation"], ["body", "This email is to confirm your recent order."], ["description", "Sent to the customer when an order is created"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:28.235282"], ["updated_at", "2016-05-05 14:08:28.235282"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "refund_notification"], ["name", "Refund Notification"], ["title", "Refund Notification"], ["body", "You have a new order"], ["description", "Sent to the customer when their order is refunded"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:28.236906"], ["updated_at", "2016-05-05 14:08:28.236906"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "shipping_confirmation"], ["name", "Shipping confirmation"], ["title", "Shipping confirmation"], ["body", "Shop has refunded your order"], ["description", "Sent to the customer when an order is shipped"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:28.238491"], ["updated_at", "2016-05-05 14:08:28.238491"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "shipping_update"], ["name", "Shipping update"], ["title", "Shipping update"], ["body", "The following shipped items from order have been updated with new shipping information:"], ["description", "Sent to the customer when an order's shipping information is updated"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:28.240093"], ["updated_at", "2016-05-05 14:08:28.240093"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::AddLinkTest: test_should_create_link_with_valid_params
--------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:28.246878"], ["updated_at", "2016-05-05 14:08:28.246878"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 1"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 1], ["name", "Test name"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type", "position") VALUES (?, ?, ?, ?)[0m  [["link_list_id", 1], ["name", "Test name"], ["link_type", "link_type"], ["position", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Link Load (0.1ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ?  [["link_list_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::AddLinkTest: test_should_not_create_link_with_blank_params
------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:28.264080"], ["updated_at", "2016-05-05 14:08:28.264080"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)  [["name", "List 2"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", ""]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 1], ["name", ""]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ?  [["link_list_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::AddLinkTest: test_should_not_create_link_with_same_params
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:28.279187"], ["updated_at", "2016-05-05 14:08:28.279187"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)  [["name", "List 3"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Test name"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("link_list_id", "name", "link_type", "position") VALUES (?, ?, ?, ?)  [["link_list_id", 1], ["name", "Test name"], ["link_type", "link_type"], ["position", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Test name"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 1], ["name", "Test name"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ?  [["link_list_id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
MagazCore::ShippingCountryTest: test_should_return_country_info
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example12' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example12"], ["subdomain", "example12"], ["created_at", "2016-05-05 14:08:28.295598"], ["updated_at", "2016-05-05 14:08:28.295598"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "9"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------
MagazCore::CollectionTest: test_basic_visibility_functionality
--------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Collection 10"], ["description", "Collection 10 description"], ["created_at", "2016-05-05 14:08:28.300503"], ["updated_at", "2016-05-05 14:08:28.300503"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 11"], ["description", "Collection 11 description"], ["published_at", "2016-05-05 14:07:28.301554"], ["created_at", "2016-05-05 14:08:28.302145"], ["updated_at", "2016-05-05 14:08:28.302145"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 12"], ["description", "Collection 12 description"], ["published_at", "2016-05-05 14:07:28.301554"], ["created_at", "2016-05-05 14:08:28.304086"], ["updated_at", "2016-05-05 14:08:28.304086"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 13"], ["description", "Collection 13 description"], ["published_at", "2016-05-05 14:07:28.301554"], ["created_at", "2016-05-05 14:08:28.305571"], ["updated_at", "2016-05-05 14:08:28.305571"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 14"], ["description", "Collection 14 description"], ["published_at", "2016-05-05 14:07:28.301554"], ["created_at", "2016-05-05 14:08:28.306950"], ["updated_at", "2016-05-05 14:08:28.306950"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 15"], ["description", "Collection 15 description"], ["published_at", "2016-05-05 14:07:28.301554"], ["created_at", "2016-05-05 14:08:28.308297"], ["updated_at", "2016-05-05 14:08:28.308297"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 16"], ["description", "Collection 16 description"], ["published_at", "2016-05-05 14:07:28.301554"], ["created_at", "2016-05-05 14:08:28.309660"], ["updated_at", "2016-05-05 14:08:28.309660"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 17"], ["description", "Collection 17 description"], ["published_at", "2016-05-05 14:07:28.301554"], ["created_at", "2016-05-05 14:08:28.310960"], ["updated_at", "2016-05-05 14:08:28.310960"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 18"], ["description", "Collection 18 description"], ["published_at", "2016-05-05 14:07:28.301554"], ["created_at", "2016-05-05 14:08:28.312939"], ["updated_at", "2016-05-05 14:08:28.312939"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 19"], ["description", "Collection 19 description"], ["published_at", "2016-05-05 14:07:28.301554"], ["created_at", "2016-05-05 14:08:28.314916"], ["updated_at", "2016-05-05 14:08:28.314916"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 20"], ["description", "Collection 20 description"], ["published_at", "2016-05-05 14:07:28.301554"], ["created_at", "2016-05-05 14:08:28.316827"], ["updated_at", "2016-05-05 14:08:28.316827"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 21"], ["description", "Collection 21 description"], ["publish_on", "2016-05-06 14:08:28.318012"], ["created_at", "2016-05-05 14:08:28.321307"], ["updated_at", "2016-05-05 14:08:28.321307"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 22"], ["description", "Collection 22 description"], ["publish_on", "2016-05-06 14:08:28.318012"], ["created_at", "2016-05-05 14:08:28.324736"], ["updated_at", "2016-05-05 14:08:28.324736"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 23"], ["description", "Collection 23 description"], ["publish_on", "2016-05-06 14:08:28.318012"], ["created_at", "2016-05-05 14:08:28.326230"], ["updated_at", "2016-05-05 14:08:28.326230"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 24"], ["description", "Collection 24 description"], ["publish_on", "2016-05-06 14:08:28.318012"], ["created_at", "2016-05-05 14:08:28.327810"], ["updated_at", "2016-05-05 14:08:28.327810"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 25"], ["description", "Collection 25 description"], ["publish_on", "2016-05-06 14:08:28.318012"], ["created_at", "2016-05-05 14:08:28.329289"], ["updated_at", "2016-05-05 14:08:28.329289"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 26"], ["description", "Collection 26 description"], ["publish_on", "2016-05-06 14:08:28.318012"], ["created_at", "2016-05-05 14:08:28.330762"], ["updated_at", "2016-05-05 14:08:28.330762"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 27"], ["description", "Collection 27 description"], ["publish_on", "2016-05-06 14:08:28.318012"], ["created_at", "2016-05-05 14:08:28.332259"], ["updated_at", "2016-05-05 14:08:28.332259"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 28"], ["description", "Collection 28 description"], ["publish_on", "2016-05-06 14:08:28.318012"], ["created_at", "2016-05-05 14:08:28.333701"], ["updated_at", "2016-05-05 14:08:28.333701"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 29"], ["description", "Collection 29 description"], ["publish_on", "2016-05-06 14:08:28.318012"], ["created_at", "2016-05-05 14:08:28.335138"], ["updated_at", "2016-05-05 14:08:28.335138"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 30"], ["description", "Collection 30 description"], ["publish_on", "2016-05-06 14:08:28.318012"], ["created_at", "2016-05-05 14:08:28.336636"], ["updated_at", "2016-05-05 14:08:28.336636"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 31"], ["description", "Collection 31 description"], ["publish_on", "2016-05-05 14:07:28.337561"], ["created_at", "2016-05-05 14:08:28.338091"], ["updated_at", "2016-05-05 14:08:28.338091"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 32"], ["description", "Collection 32 description"], ["publish_on", "2016-05-05 14:07:28.337561"], ["created_at", "2016-05-05 14:08:28.339526"], ["updated_at", "2016-05-05 14:08:28.339526"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 33"], ["description", "Collection 33 description"], ["publish_on", "2016-05-05 14:07:28.337561"], ["created_at", "2016-05-05 14:08:28.340923"], ["updated_at", "2016-05-05 14:08:28.340923"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 34"], ["description", "Collection 34 description"], ["publish_on", "2016-05-05 14:07:28.337561"], ["created_at", "2016-05-05 14:08:28.342317"], ["updated_at", "2016-05-05 14:08:28.342317"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 35"], ["description", "Collection 35 description"], ["publish_on", "2016-05-05 14:07:28.337561"], ["created_at", "2016-05-05 14:08:28.344239"], ["updated_at", "2016-05-05 14:08:28.344239"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 36"], ["description", "Collection 36 description"], ["publish_on", "2016-05-05 14:07:28.337561"], ["created_at", "2016-05-05 14:08:28.346501"], ["updated_at", "2016-05-05 14:08:28.346501"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 37"], ["description", "Collection 37 description"], ["publish_on", "2016-05-05 14:07:28.337561"], ["created_at", "2016-05-05 14:08:28.348657"], ["updated_at", "2016-05-05 14:08:28.348657"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 38"], ["description", "Collection 38 description"], ["publish_on", "2016-05-05 14:07:28.337561"], ["created_at", "2016-05-05 14:08:28.351732"], ["updated_at", "2016-05-05 14:08:28.351732"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 39"], ["description", "Collection 39 description"], ["publish_on", "2016-05-05 14:07:28.337561"], ["created_at", "2016-05-05 14:08:28.353971"], ["updated_at", "2016-05-05 14:08:28.353971"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 40"], ["description", "Collection 40 description"], ["publish_on", "2016-05-05 14:07:28.337561"], ["created_at", "2016-05-05 14:08:28.356201"], ["updated_at", "2016-05-05 14:08:28.356201"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "collections" SET "publish_on" = ?, "updated_at" = ? WHERE "collections"."id" = ?  [["publish_on", "2016-05-07 14:08:28.358614"], ["updated_at", "2016-05-05 14:08:28.359039"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "collections" SET "publish_on" = ?, "published_at" = ?, "updated_at" = ? WHERE "collections"."id" = ?[0m  [["publish_on", nil], ["published_at", "2016-05-03 14:08:28.360303"], ["updated_at", "2016-05-05 14:08:28.360767"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------
MagazCore::CollectionTest: test_two_collections_with_same_handle_and_different_shops
------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Collection 41"], ["description", "Collection 41 description"], ["created_at", "2016-05-05 14:08:28.365255"], ["updated_at", "2016-05-05 14:08:28.365255"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 42"], ["description", "Collection 42 description"], ["published_at", "2016-05-05 14:07:28.366521"], ["created_at", "2016-05-05 14:08:28.367124"], ["updated_at", "2016-05-05 14:08:28.367124"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 43"], ["description", "Collection 43 description"], ["published_at", "2016-05-05 14:07:28.366521"], ["created_at", "2016-05-05 14:08:28.368899"], ["updated_at", "2016-05-05 14:08:28.368899"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 44"], ["description", "Collection 44 description"], ["published_at", "2016-05-05 14:07:28.366521"], ["created_at", "2016-05-05 14:08:28.370338"], ["updated_at", "2016-05-05 14:08:28.370338"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 45"], ["description", "Collection 45 description"], ["published_at", "2016-05-05 14:07:28.366521"], ["created_at", "2016-05-05 14:08:28.371750"], ["updated_at", "2016-05-05 14:08:28.371750"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 46"], ["description", "Collection 46 description"], ["published_at", "2016-05-05 14:07:28.366521"], ["created_at", "2016-05-05 14:08:28.373597"], ["updated_at", "2016-05-05 14:08:28.373597"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 47"], ["description", "Collection 47 description"], ["published_at", "2016-05-05 14:07:28.366521"], ["created_at", "2016-05-05 14:08:28.375731"], ["updated_at", "2016-05-05 14:08:28.375731"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 48"], ["description", "Collection 48 description"], ["published_at", "2016-05-05 14:07:28.366521"], ["created_at", "2016-05-05 14:08:28.377238"], ["updated_at", "2016-05-05 14:08:28.377238"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 49"], ["description", "Collection 49 description"], ["published_at", "2016-05-05 14:07:28.366521"], ["created_at", "2016-05-05 14:08:28.378651"], ["updated_at", "2016-05-05 14:08:28.378651"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 50"], ["description", "Collection 50 description"], ["published_at", "2016-05-05 14:07:28.366521"], ["created_at", "2016-05-05 14:08:28.380067"], ["updated_at", "2016-05-05 14:08:28.380067"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 51"], ["description", "Collection 51 description"], ["published_at", "2016-05-05 14:07:28.366521"], ["created_at", "2016-05-05 14:08:28.381399"], ["updated_at", "2016-05-05 14:08:28.381399"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 52"], ["description", "Collection 52 description"], ["publish_on", "2016-05-06 14:08:28.382272"], ["created_at", "2016-05-05 14:08:28.382843"], ["updated_at", "2016-05-05 14:08:28.382843"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 53"], ["description", "Collection 53 description"], ["publish_on", "2016-05-06 14:08:28.382272"], ["created_at", "2016-05-05 14:08:28.384966"], ["updated_at", "2016-05-05 14:08:28.384966"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 54"], ["description", "Collection 54 description"], ["publish_on", "2016-05-06 14:08:28.382272"], ["created_at", "2016-05-05 14:08:28.387115"], ["updated_at", "2016-05-05 14:08:28.387115"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 55"], ["description", "Collection 55 description"], ["publish_on", "2016-05-06 14:08:28.382272"], ["created_at", "2016-05-05 14:08:28.389152"], ["updated_at", "2016-05-05 14:08:28.389152"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 56"], ["description", "Collection 56 description"], ["publish_on", "2016-05-06 14:08:28.382272"], ["created_at", "2016-05-05 14:08:28.391166"], ["updated_at", "2016-05-05 14:08:28.391166"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 57"], ["description", "Collection 57 description"], ["publish_on", "2016-05-06 14:08:28.382272"], ["created_at", "2016-05-05 14:08:28.393173"], ["updated_at", "2016-05-05 14:08:28.393173"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 58"], ["description", "Collection 58 description"], ["publish_on", "2016-05-06 14:08:28.382272"], ["created_at", "2016-05-05 14:08:28.395008"], ["updated_at", "2016-05-05 14:08:28.395008"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 59"], ["description", "Collection 59 description"], ["publish_on", "2016-05-06 14:08:28.382272"], ["created_at", "2016-05-05 14:08:28.396694"], ["updated_at", "2016-05-05 14:08:28.396694"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 60"], ["description", "Collection 60 description"], ["publish_on", "2016-05-06 14:08:28.382272"], ["created_at", "2016-05-05 14:08:28.398306"], ["updated_at", "2016-05-05 14:08:28.398306"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 61"], ["description", "Collection 61 description"], ["publish_on", "2016-05-06 14:08:28.382272"], ["created_at", "2016-05-05 14:08:28.400039"], ["updated_at", "2016-05-05 14:08:28.400039"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 62"], ["description", "Collection 62 description"], ["publish_on", "2016-05-05 14:07:28.401119"], ["created_at", "2016-05-05 14:08:28.401708"], ["updated_at", "2016-05-05 14:08:28.401708"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 63"], ["description", "Collection 63 description"], ["publish_on", "2016-05-05 14:07:28.401119"], ["created_at", "2016-05-05 14:08:28.403301"], ["updated_at", "2016-05-05 14:08:28.403301"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 64"], ["description", "Collection 64 description"], ["publish_on", "2016-05-05 14:07:28.401119"], ["created_at", "2016-05-05 14:08:28.404816"], ["updated_at", "2016-05-05 14:08:28.404816"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 65"], ["description", "Collection 65 description"], ["publish_on", "2016-05-05 14:07:28.401119"], ["created_at", "2016-05-05 14:08:28.406252"], ["updated_at", "2016-05-05 14:08:28.406252"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 66"], ["description", "Collection 66 description"], ["publish_on", "2016-05-05 14:07:28.401119"], ["created_at", "2016-05-05 14:08:28.408024"], ["updated_at", "2016-05-05 14:08:28.408024"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 67"], ["description", "Collection 67 description"], ["publish_on", "2016-05-05 14:07:28.401119"], ["created_at", "2016-05-05 14:08:28.410194"], ["updated_at", "2016-05-05 14:08:28.410194"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 68"], ["description", "Collection 68 description"], ["publish_on", "2016-05-05 14:07:28.401119"], ["created_at", "2016-05-05 14:08:28.412286"], ["updated_at", "2016-05-05 14:08:28.412286"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 69"], ["description", "Collection 69 description"], ["publish_on", "2016-05-05 14:07:28.401119"], ["created_at", "2016-05-05 14:08:28.414308"], ["updated_at", "2016-05-05 14:08:28.414308"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 70"], ["description", "Collection 70 description"], ["publish_on", "2016-05-05 14:07:28.401119"], ["created_at", "2016-05-05 14:08:28.416213"], ["updated_at", "2016-05-05 14:08:28.416213"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 71"], ["description", "Collection 71 description"], ["publish_on", "2016-05-05 14:07:28.401119"], ["created_at", "2016-05-05 14:08:28.417724"], ["updated_at", "2016-05-05 14:08:28.417724"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-05 14:08:28.420083"], ["updated_at", "2016-05-05 14:08:28.420083"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop2' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop2"], ["subdomain", "shop2"], ["created_at", "2016-05-05 14:08:28.422588"], ["updated_at", "2016-05-05 14:08:28.422588"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "collection-handle"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "collection"], ["description", "Collection 72 description"], ["handle", "collection-handle"], ["shop_id", 1], ["slug", "collection-handle"], ["created_at", "2016-05-05 14:08:28.426227"], ["updated_at", "2016-05-05 14:08:28.426227"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 2 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "collection-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["name", "collection"], ["handle", "collection-handle"], ["shop_id", 2], ["slug", "collection-handle"], ["created_at", "2016-05-05 14:08:28.429770"], ["updated_at", "2016-05-05 14:08:28.429770"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------
MagazCore::CollectionTest: test_two_collections_with_same_handle_and_same_shop
------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Collection 72"], ["description", "Collection 73 description"], ["created_at", "2016-05-05 14:08:28.434768"], ["updated_at", "2016-05-05 14:08:28.434768"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 73"], ["description", "Collection 74 description"], ["published_at", "2016-05-05 14:07:28.436130"], ["created_at", "2016-05-05 14:08:28.436792"], ["updated_at", "2016-05-05 14:08:28.436792"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 74"], ["description", "Collection 75 description"], ["published_at", "2016-05-05 14:07:28.436130"], ["created_at", "2016-05-05 14:08:28.438396"], ["updated_at", "2016-05-05 14:08:28.438396"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 75"], ["description", "Collection 76 description"], ["published_at", "2016-05-05 14:07:28.436130"], ["created_at", "2016-05-05 14:08:28.439767"], ["updated_at", "2016-05-05 14:08:28.439767"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 76"], ["description", "Collection 77 description"], ["published_at", "2016-05-05 14:07:28.436130"], ["created_at", "2016-05-05 14:08:28.441371"], ["updated_at", "2016-05-05 14:08:28.441371"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 77"], ["description", "Collection 78 description"], ["published_at", "2016-05-05 14:07:28.436130"], ["created_at", "2016-05-05 14:08:28.442848"], ["updated_at", "2016-05-05 14:08:28.442848"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 78"], ["description", "Collection 79 description"], ["published_at", "2016-05-05 14:07:28.436130"], ["created_at", "2016-05-05 14:08:28.444715"], ["updated_at", "2016-05-05 14:08:28.444715"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 79"], ["description", "Collection 80 description"], ["published_at", "2016-05-05 14:07:28.436130"], ["created_at", "2016-05-05 14:08:28.446245"], ["updated_at", "2016-05-05 14:08:28.446245"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 80"], ["description", "Collection 81 description"], ["published_at", "2016-05-05 14:07:28.436130"], ["created_at", "2016-05-05 14:08:28.447684"], ["updated_at", "2016-05-05 14:08:28.447684"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 81"], ["description", "Collection 82 description"], ["published_at", "2016-05-05 14:07:28.436130"], ["created_at", "2016-05-05 14:08:28.449037"], ["updated_at", "2016-05-05 14:08:28.449037"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 82"], ["description", "Collection 83 description"], ["published_at", "2016-05-05 14:07:28.436130"], ["created_at", "2016-05-05 14:08:28.450386"], ["updated_at", "2016-05-05 14:08:28.450386"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 83"], ["description", "Collection 84 description"], ["publish_on", "2016-05-06 14:08:28.451243"], ["created_at", "2016-05-05 14:08:28.451812"], ["updated_at", "2016-05-05 14:08:28.451812"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 84"], ["description", "Collection 85 description"], ["publish_on", "2016-05-06 14:08:28.451243"], ["created_at", "2016-05-05 14:08:28.453304"], ["updated_at", "2016-05-05 14:08:28.453304"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 85"], ["description", "Collection 86 description"], ["publish_on", "2016-05-06 14:08:28.451243"], ["created_at", "2016-05-05 14:08:28.454729"], ["updated_at", "2016-05-05 14:08:28.454729"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 86"], ["description", "Collection 87 description"], ["publish_on", "2016-05-06 14:08:28.451243"], ["created_at", "2016-05-05 14:08:28.456178"], ["updated_at", "2016-05-05 14:08:28.456178"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 87"], ["description", "Collection 88 description"], ["publish_on", "2016-05-06 14:08:28.451243"], ["created_at", "2016-05-05 14:08:28.457587"], ["updated_at", "2016-05-05 14:08:28.457587"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 88"], ["description", "Collection 89 description"], ["publish_on", "2016-05-06 14:08:28.451243"], ["created_at", "2016-05-05 14:08:28.459039"], ["updated_at", "2016-05-05 14:08:28.459039"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 89"], ["description", "Collection 90 description"], ["publish_on", "2016-05-06 14:08:28.451243"], ["created_at", "2016-05-05 14:08:28.460480"], ["updated_at", "2016-05-05 14:08:28.460480"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 90"], ["description", "Collection 91 description"], ["publish_on", "2016-05-06 14:08:28.451243"], ["created_at", "2016-05-05 14:08:28.461869"], ["updated_at", "2016-05-05 14:08:28.461869"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 91"], ["description", "Collection 92 description"], ["publish_on", "2016-05-06 14:08:28.451243"], ["created_at", "2016-05-05 14:08:28.463312"], ["updated_at", "2016-05-05 14:08:28.463312"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 92"], ["description", "Collection 93 description"], ["publish_on", "2016-05-06 14:08:28.451243"], ["created_at", "2016-05-05 14:08:28.464765"], ["updated_at", "2016-05-05 14:08:28.464765"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 93"], ["description", "Collection 94 description"], ["publish_on", "2016-05-05 14:07:28.465734"], ["created_at", "2016-05-05 14:08:28.466275"], ["updated_at", "2016-05-05 14:08:28.466275"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 94"], ["description", "Collection 95 description"], ["publish_on", "2016-05-05 14:07:28.465734"], ["created_at", "2016-05-05 14:08:28.467907"], ["updated_at", "2016-05-05 14:08:28.467907"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 95"], ["description", "Collection 96 description"], ["publish_on", "2016-05-05 14:07:28.465734"], ["created_at", "2016-05-05 14:08:28.469345"], ["updated_at", "2016-05-05 14:08:28.469345"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 96"], ["description", "Collection 97 description"], ["publish_on", "2016-05-05 14:07:28.465734"], ["created_at", "2016-05-05 14:08:28.470835"], ["updated_at", "2016-05-05 14:08:28.470835"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 97"], ["description", "Collection 98 description"], ["publish_on", "2016-05-05 14:07:28.465734"], ["created_at", "2016-05-05 14:08:28.472235"], ["updated_at", "2016-05-05 14:08:28.472235"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 98"], ["description", "Collection 99 description"], ["publish_on", "2016-05-05 14:07:28.465734"], ["created_at", "2016-05-05 14:08:28.473642"], ["updated_at", "2016-05-05 14:08:28.473642"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 99"], ["description", "Collection 100 description"], ["publish_on", "2016-05-05 14:07:28.465734"], ["created_at", "2016-05-05 14:08:28.475077"], ["updated_at", "2016-05-05 14:08:28.475077"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 100"], ["description", "Collection 101 description"], ["publish_on", "2016-05-05 14:07:28.465734"], ["created_at", "2016-05-05 14:08:28.476521"], ["updated_at", "2016-05-05 14:08:28.476521"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 101"], ["description", "Collection 102 description"], ["publish_on", "2016-05-05 14:07:28.465734"], ["created_at", "2016-05-05 14:08:28.477972"], ["updated_at", "2016-05-05 14:08:28.477972"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 102"], ["description", "Collection 103 description"], ["publish_on", "2016-05-05 14:07:28.465734"], ["created_at", "2016-05-05 14:08:28.479533"], ["updated_at", "2016-05-05 14:08:28.479533"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-05 14:08:28.481890"], ["updated_at", "2016-05-05 14:08:28.481890"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "collection-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "collection1"], ["description", "Collection 104 description"], ["handle", "collection-handle"], ["shop_id", 1], ["slug", "collection-handle"], ["created_at", "2016-05-05 14:08:28.484634"], ["updated_at", "2016-05-05 14:08:28.484634"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "collection-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "collection2"], ["handle", "collection-handle"], ["shop_id", 1], ["slug", "collection-handle-c18d89e6-77ee-4a72-bc4f-0607055ce1a0"], ["created_at", "2016-05-05 14:08:28.487318"], ["updated_at", "2016-05-05 14:08:28.487318"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------
MagazCore::CollectionTest: test_validation_scenarios
----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Collection 103"], ["description", "Collection 105 description"], ["created_at", "2016-05-05 14:08:28.492881"], ["updated_at", "2016-05-05 14:08:28.492881"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 104"], ["description", "Collection 106 description"], ["published_at", "2016-05-05 14:07:28.494529"], ["created_at", "2016-05-05 14:08:28.495328"], ["updated_at", "2016-05-05 14:08:28.495328"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 105"], ["description", "Collection 107 description"], ["published_at", "2016-05-05 14:07:28.494529"], ["created_at", "2016-05-05 14:08:28.497487"], ["updated_at", "2016-05-05 14:08:28.497487"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 106"], ["description", "Collection 108 description"], ["published_at", "2016-05-05 14:07:28.494529"], ["created_at", "2016-05-05 14:08:28.499469"], ["updated_at", "2016-05-05 14:08:28.499469"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 107"], ["description", "Collection 109 description"], ["published_at", "2016-05-05 14:07:28.494529"], ["created_at", "2016-05-05 14:08:28.501834"], ["updated_at", "2016-05-05 14:08:28.501834"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 108"], ["description", "Collection 110 description"], ["published_at", "2016-05-05 14:07:28.494529"], ["created_at", "2016-05-05 14:08:28.503748"], ["updated_at", "2016-05-05 14:08:28.503748"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 109"], ["description", "Collection 111 description"], ["published_at", "2016-05-05 14:07:28.494529"], ["created_at", "2016-05-05 14:08:28.505637"], ["updated_at", "2016-05-05 14:08:28.505637"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 110"], ["description", "Collection 112 description"], ["published_at", "2016-05-05 14:07:28.494529"], ["created_at", "2016-05-05 14:08:28.507310"], ["updated_at", "2016-05-05 14:08:28.507310"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 111"], ["description", "Collection 113 description"], ["published_at", "2016-05-05 14:07:28.494529"], ["created_at", "2016-05-05 14:08:28.508915"], ["updated_at", "2016-05-05 14:08:28.508915"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 112"], ["description", "Collection 114 description"], ["published_at", "2016-05-05 14:07:28.494529"], ["created_at", "2016-05-05 14:08:28.510468"], ["updated_at", "2016-05-05 14:08:28.510468"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 113"], ["description", "Collection 115 description"], ["published_at", "2016-05-05 14:07:28.494529"], ["created_at", "2016-05-05 14:08:28.511859"], ["updated_at", "2016-05-05 14:08:28.511859"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 114"], ["description", "Collection 116 description"], ["publish_on", "2016-05-06 14:08:28.512744"], ["created_at", "2016-05-05 14:08:28.513339"], ["updated_at", "2016-05-05 14:08:28.513339"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 115"], ["description", "Collection 117 description"], ["publish_on", "2016-05-06 14:08:28.512744"], ["created_at", "2016-05-05 14:08:28.514885"], ["updated_at", "2016-05-05 14:08:28.514885"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 116"], ["description", "Collection 118 description"], ["publish_on", "2016-05-06 14:08:28.512744"], ["created_at", "2016-05-05 14:08:28.516328"], ["updated_at", "2016-05-05 14:08:28.516328"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 117"], ["description", "Collection 119 description"], ["publish_on", "2016-05-06 14:08:28.512744"], ["created_at", "2016-05-05 14:08:28.518048"], ["updated_at", "2016-05-05 14:08:28.518048"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 118"], ["description", "Collection 120 description"], ["publish_on", "2016-05-06 14:08:28.512744"], ["created_at", "2016-05-05 14:08:28.519599"], ["updated_at", "2016-05-05 14:08:28.519599"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 119"], ["description", "Collection 121 description"], ["publish_on", "2016-05-06 14:08:28.512744"], ["created_at", "2016-05-05 14:08:28.521141"], ["updated_at", "2016-05-05 14:08:28.521141"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 120"], ["description", "Collection 122 description"], ["publish_on", "2016-05-06 14:08:28.512744"], ["created_at", "2016-05-05 14:08:28.522589"], ["updated_at", "2016-05-05 14:08:28.522589"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 121"], ["description", "Collection 123 description"], ["publish_on", "2016-05-06 14:08:28.512744"], ["created_at", "2016-05-05 14:08:28.524038"], ["updated_at", "2016-05-05 14:08:28.524038"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 122"], ["description", "Collection 124 description"], ["publish_on", "2016-05-06 14:08:28.512744"], ["created_at", "2016-05-05 14:08:28.525915"], ["updated_at", "2016-05-05 14:08:28.525915"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 123"], ["description", "Collection 125 description"], ["publish_on", "2016-05-06 14:08:28.512744"], ["created_at", "2016-05-05 14:08:28.528209"], ["updated_at", "2016-05-05 14:08:28.528209"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 124"], ["description", "Collection 126 description"], ["publish_on", "2016-05-05 14:07:28.529644"], ["created_at", "2016-05-05 14:08:28.530422"], ["updated_at", "2016-05-05 14:08:28.530422"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 125"], ["description", "Collection 127 description"], ["publish_on", "2016-05-05 14:07:28.529644"], ["created_at", "2016-05-05 14:08:28.532451"], ["updated_at", "2016-05-05 14:08:28.532451"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 126"], ["description", "Collection 128 description"], ["publish_on", "2016-05-05 14:07:28.529644"], ["created_at", "2016-05-05 14:08:28.534523"], ["updated_at", "2016-05-05 14:08:28.534523"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 127"], ["description", "Collection 129 description"], ["publish_on", "2016-05-05 14:07:28.529644"], ["created_at", "2016-05-05 14:08:28.536430"], ["updated_at", "2016-05-05 14:08:28.536430"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 128"], ["description", "Collection 130 description"], ["publish_on", "2016-05-05 14:07:28.529644"], ["created_at", "2016-05-05 14:08:28.538134"], ["updated_at", "2016-05-05 14:08:28.538134"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 129"], ["description", "Collection 131 description"], ["publish_on", "2016-05-05 14:07:28.529644"], ["created_at", "2016-05-05 14:08:28.539811"], ["updated_at", "2016-05-05 14:08:28.539811"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 130"], ["description", "Collection 132 description"], ["publish_on", "2016-05-05 14:07:28.529644"], ["created_at", "2016-05-05 14:08:28.541276"], ["updated_at", "2016-05-05 14:08:28.541276"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 131"], ["description", "Collection 133 description"], ["publish_on", "2016-05-05 14:07:28.529644"], ["created_at", "2016-05-05 14:08:28.542885"], ["updated_at", "2016-05-05 14:08:28.542885"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 132"], ["description", "Collection 134 description"], ["publish_on", "2016-05-05 14:07:28.529644"], ["created_at", "2016-05-05 14:08:28.544392"], ["updated_at", "2016-05-05 14:08:28.544392"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 133"], ["description", "Collection 135 description"], ["publish_on", "2016-05-05 14:07:28.529644"], ["created_at", "2016-05-05 14:08:28.545870"], ["updated_at", "2016-05-05 14:08:28.545870"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------
MagazCore::CollectionTest: test_visibility_scopes
-------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Collection 134"], ["description", "Collection 136 description"], ["created_at", "2016-05-05 14:08:28.550381"], ["updated_at", "2016-05-05 14:08:28.550381"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 135"], ["description", "Collection 137 description"], ["published_at", "2016-05-05 14:07:28.551632"], ["created_at", "2016-05-05 14:08:28.552250"], ["updated_at", "2016-05-05 14:08:28.552250"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 136"], ["description", "Collection 138 description"], ["published_at", "2016-05-05 14:07:28.551632"], ["created_at", "2016-05-05 14:08:28.553876"], ["updated_at", "2016-05-05 14:08:28.553876"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 137"], ["description", "Collection 139 description"], ["published_at", "2016-05-05 14:07:28.551632"], ["created_at", "2016-05-05 14:08:28.555261"], ["updated_at", "2016-05-05 14:08:28.555261"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 138"], ["description", "Collection 140 description"], ["published_at", "2016-05-05 14:07:28.551632"], ["created_at", "2016-05-05 14:08:28.556746"], ["updated_at", "2016-05-05 14:08:28.556746"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 139"], ["description", "Collection 141 description"], ["published_at", "2016-05-05 14:07:28.551632"], ["created_at", "2016-05-05 14:08:28.558848"], ["updated_at", "2016-05-05 14:08:28.558848"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 140"], ["description", "Collection 142 description"], ["published_at", "2016-05-05 14:07:28.551632"], ["created_at", "2016-05-05 14:08:28.560984"], ["updated_at", "2016-05-05 14:08:28.560984"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 141"], ["description", "Collection 143 description"], ["published_at", "2016-05-05 14:07:28.551632"], ["created_at", "2016-05-05 14:08:28.562920"], ["updated_at", "2016-05-05 14:08:28.562920"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 142"], ["description", "Collection 144 description"], ["published_at", "2016-05-05 14:07:28.551632"], ["created_at", "2016-05-05 14:08:28.564899"], ["updated_at", "2016-05-05 14:08:28.564899"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 143"], ["description", "Collection 145 description"], ["published_at", "2016-05-05 14:07:28.551632"], ["created_at", "2016-05-05 14:08:28.566832"], ["updated_at", "2016-05-05 14:08:28.566832"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 144"], ["description", "Collection 146 description"], ["published_at", "2016-05-05 14:07:28.551632"], ["created_at", "2016-05-05 14:08:28.568560"], ["updated_at", "2016-05-05 14:08:28.568560"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 145"], ["description", "Collection 147 description"], ["publish_on", "2016-05-06 14:08:28.569537"], ["created_at", "2016-05-05 14:08:28.570222"], ["updated_at", "2016-05-05 14:08:28.570222"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 146"], ["description", "Collection 148 description"], ["publish_on", "2016-05-06 14:08:28.569537"], ["created_at", "2016-05-05 14:08:28.571888"], ["updated_at", "2016-05-05 14:08:28.571888"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 147"], ["description", "Collection 149 description"], ["publish_on", "2016-05-06 14:08:28.569537"], ["created_at", "2016-05-05 14:08:28.579521"], ["updated_at", "2016-05-05 14:08:28.579521"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 148"], ["description", "Collection 150 description"], ["publish_on", "2016-05-06 14:08:28.569537"], ["created_at", "2016-05-05 14:08:28.581510"], ["updated_at", "2016-05-05 14:08:28.581510"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 149"], ["description", "Collection 151 description"], ["publish_on", "2016-05-06 14:08:28.569537"], ["created_at", "2016-05-05 14:08:28.583723"], ["updated_at", "2016-05-05 14:08:28.583723"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 150"], ["description", "Collection 152 description"], ["publish_on", "2016-05-06 14:08:28.569537"], ["created_at", "2016-05-05 14:08:28.585862"], ["updated_at", "2016-05-05 14:08:28.585862"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 151"], ["description", "Collection 153 description"], ["publish_on", "2016-05-06 14:08:28.569537"], ["created_at", "2016-05-05 14:08:28.587920"], ["updated_at", "2016-05-05 14:08:28.587920"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 152"], ["description", "Collection 154 description"], ["publish_on", "2016-05-06 14:08:28.569537"], ["created_at", "2016-05-05 14:08:28.589908"], ["updated_at", "2016-05-05 14:08:28.589908"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 153"], ["description", "Collection 155 description"], ["publish_on", "2016-05-06 14:08:28.569537"], ["created_at", "2016-05-05 14:08:28.591948"], ["updated_at", "2016-05-05 14:08:28.591948"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 154"], ["description", "Collection 156 description"], ["publish_on", "2016-05-06 14:08:28.569537"], ["created_at", "2016-05-05 14:08:28.593677"], ["updated_at", "2016-05-05 14:08:28.593677"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 155"], ["description", "Collection 157 description"], ["publish_on", "2016-05-05 14:07:28.594751"], ["created_at", "2016-05-05 14:08:28.595492"], ["updated_at", "2016-05-05 14:08:28.595492"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 156"], ["description", "Collection 158 description"], ["publish_on", "2016-05-05 14:07:28.594751"], ["created_at", "2016-05-05 14:08:28.597236"], ["updated_at", "2016-05-05 14:08:28.597236"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 157"], ["description", "Collection 159 description"], ["publish_on", "2016-05-05 14:07:28.594751"], ["created_at", "2016-05-05 14:08:28.598869"], ["updated_at", "2016-05-05 14:08:28.598869"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 158"], ["description", "Collection 160 description"], ["publish_on", "2016-05-05 14:07:28.594751"], ["created_at", "2016-05-05 14:08:28.600408"], ["updated_at", "2016-05-05 14:08:28.600408"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 159"], ["description", "Collection 161 description"], ["publish_on", "2016-05-05 14:07:28.594751"], ["created_at", "2016-05-05 14:08:28.601800"], ["updated_at", "2016-05-05 14:08:28.601800"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 160"], ["description", "Collection 162 description"], ["publish_on", "2016-05-05 14:07:28.594751"], ["created_at", "2016-05-05 14:08:28.603204"], ["updated_at", "2016-05-05 14:08:28.603204"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 161"], ["description", "Collection 163 description"], ["publish_on", "2016-05-05 14:07:28.594751"], ["created_at", "2016-05-05 14:08:28.604860"], ["updated_at", "2016-05-05 14:08:28.604860"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 162"], ["description", "Collection 164 description"], ["publish_on", "2016-05-05 14:07:28.594751"], ["created_at", "2016-05-05 14:08:28.606366"], ["updated_at", "2016-05-05 14:08:28.606366"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 163"], ["description", "Collection 165 description"], ["publish_on", "2016-05-05 14:07:28.594751"], ["created_at", "2016-05-05 14:08:28.607868"], ["updated_at", "2016-05-05 14:08:28.607868"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 164"], ["description", "Collection 166 description"], ["publish_on", "2016-05-05 14:07:28.594751"], ["created_at", "2016-05-05 14:08:28.609405"], ["updated_at", "2016-05-05 14:08:28.609405"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.2ms)[0m  [1mSELECT "collections".* FROM "collections" WHERE "collections"."publish_on" IS NULL AND ("collections"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-05 14:08:28.610465')[0m
  [1m[35mMagazCore::Collection Load (0.1ms)[0m  SELECT "collections".* FROM "collections" WHERE (publish_on >= '2016-05-05 14:08:28.611820') AND "collections"."published_at" IS NULL
  [1m[36mMagazCore::Collection Load (0.1ms)[0m  [1mSELECT "collections".* FROM "collections" WHERE (publish_on <= '2016-05-05 14:08:28.612443') AND "collections"."published_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------
MagazCore::CollectionTest: test_visibility_scopes_and_methods
-------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Collection 165"], ["description", "Collection 167 description"], ["created_at", "2016-05-05 14:08:28.616238"], ["updated_at", "2016-05-05 14:08:28.616238"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 166"], ["description", "Collection 168 description"], ["published_at", "2016-05-05 14:07:28.617440"], ["created_at", "2016-05-05 14:08:28.618021"], ["updated_at", "2016-05-05 14:08:28.618021"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 167"], ["description", "Collection 169 description"], ["published_at", "2016-05-05 14:07:28.617440"], ["created_at", "2016-05-05 14:08:28.619862"], ["updated_at", "2016-05-05 14:08:28.619862"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 168"], ["description", "Collection 170 description"], ["published_at", "2016-05-05 14:07:28.617440"], ["created_at", "2016-05-05 14:08:28.621976"], ["updated_at", "2016-05-05 14:08:28.621976"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 169"], ["description", "Collection 171 description"], ["published_at", "2016-05-05 14:07:28.617440"], ["created_at", "2016-05-05 14:08:28.624079"], ["updated_at", "2016-05-05 14:08:28.624079"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 170"], ["description", "Collection 172 description"], ["published_at", "2016-05-05 14:07:28.617440"], ["created_at", "2016-05-05 14:08:28.625772"], ["updated_at", "2016-05-05 14:08:28.625772"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 171"], ["description", "Collection 173 description"], ["published_at", "2016-05-05 14:07:28.617440"], ["created_at", "2016-05-05 14:08:28.627169"], ["updated_at", "2016-05-05 14:08:28.627169"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 172"], ["description", "Collection 174 description"], ["published_at", "2016-05-05 14:07:28.617440"], ["created_at", "2016-05-05 14:08:28.628746"], ["updated_at", "2016-05-05 14:08:28.628746"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 173"], ["description", "Collection 175 description"], ["published_at", "2016-05-05 14:07:28.617440"], ["created_at", "2016-05-05 14:08:28.630188"], ["updated_at", "2016-05-05 14:08:28.630188"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 174"], ["description", "Collection 176 description"], ["published_at", "2016-05-05 14:07:28.617440"], ["created_at", "2016-05-05 14:08:28.631613"], ["updated_at", "2016-05-05 14:08:28.631613"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 175"], ["description", "Collection 177 description"], ["published_at", "2016-05-05 14:07:28.617440"], ["created_at", "2016-05-05 14:08:28.632938"], ["updated_at", "2016-05-05 14:08:28.632938"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 176"], ["description", "Collection 178 description"], ["publish_on", "2016-05-06 14:08:28.633764"], ["created_at", "2016-05-05 14:08:28.634352"], ["updated_at", "2016-05-05 14:08:28.634352"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 177"], ["description", "Collection 179 description"], ["publish_on", "2016-05-06 14:08:28.633764"], ["created_at", "2016-05-05 14:08:28.636214"], ["updated_at", "2016-05-05 14:08:28.636214"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 178"], ["description", "Collection 180 description"], ["publish_on", "2016-05-06 14:08:28.633764"], ["created_at", "2016-05-05 14:08:28.638409"], ["updated_at", "2016-05-05 14:08:28.638409"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 179"], ["description", "Collection 181 description"], ["publish_on", "2016-05-06 14:08:28.633764"], ["created_at", "2016-05-05 14:08:28.640532"], ["updated_at", "2016-05-05 14:08:28.640532"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 180"], ["description", "Collection 182 description"], ["publish_on", "2016-05-06 14:08:28.633764"], ["created_at", "2016-05-05 14:08:28.642759"], ["updated_at", "2016-05-05 14:08:28.642759"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 181"], ["description", "Collection 183 description"], ["publish_on", "2016-05-06 14:08:28.633764"], ["created_at", "2016-05-05 14:08:28.645023"], ["updated_at", "2016-05-05 14:08:28.645023"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 182"], ["description", "Collection 184 description"], ["publish_on", "2016-05-06 14:08:28.633764"], ["created_at", "2016-05-05 14:08:28.647096"], ["updated_at", "2016-05-05 14:08:28.647096"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 183"], ["description", "Collection 185 description"], ["publish_on", "2016-05-06 14:08:28.633764"], ["created_at", "2016-05-05 14:08:28.649151"], ["updated_at", "2016-05-05 14:08:28.649151"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 184"], ["description", "Collection 186 description"], ["publish_on", "2016-05-06 14:08:28.633764"], ["created_at", "2016-05-05 14:08:28.650897"], ["updated_at", "2016-05-05 14:08:28.650897"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 185"], ["description", "Collection 187 description"], ["publish_on", "2016-05-06 14:08:28.633764"], ["created_at", "2016-05-05 14:08:28.653192"], ["updated_at", "2016-05-05 14:08:28.653192"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 186"], ["description", "Collection 188 description"], ["publish_on", "2016-05-05 14:07:28.654605"], ["created_at", "2016-05-05 14:08:28.655402"], ["updated_at", "2016-05-05 14:08:28.655402"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 187"], ["description", "Collection 189 description"], ["publish_on", "2016-05-05 14:07:28.654605"], ["created_at", "2016-05-05 14:08:28.657449"], ["updated_at", "2016-05-05 14:08:28.657449"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 188"], ["description", "Collection 190 description"], ["publish_on", "2016-05-05 14:07:28.654605"], ["created_at", "2016-05-05 14:08:28.659553"], ["updated_at", "2016-05-05 14:08:28.659553"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 189"], ["description", "Collection 191 description"], ["publish_on", "2016-05-05 14:07:28.654605"], ["created_at", "2016-05-05 14:08:28.661692"], ["updated_at", "2016-05-05 14:08:28.661692"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 190"], ["description", "Collection 192 description"], ["publish_on", "2016-05-05 14:07:28.654605"], ["created_at", "2016-05-05 14:08:28.663710"], ["updated_at", "2016-05-05 14:08:28.663710"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 191"], ["description", "Collection 193 description"], ["publish_on", "2016-05-05 14:07:28.654605"], ["created_at", "2016-05-05 14:08:28.665742"], ["updated_at", "2016-05-05 14:08:28.665742"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 192"], ["description", "Collection 194 description"], ["publish_on", "2016-05-05 14:07:28.654605"], ["created_at", "2016-05-05 14:08:28.667530"], ["updated_at", "2016-05-05 14:08:28.667530"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 193"], ["description", "Collection 195 description"], ["publish_on", "2016-05-05 14:07:28.654605"], ["created_at", "2016-05-05 14:08:28.669238"], ["updated_at", "2016-05-05 14:08:28.669238"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 194"], ["description", "Collection 196 description"], ["publish_on", "2016-05-05 14:07:28.654605"], ["created_at", "2016-05-05 14:08:28.670877"], ["updated_at", "2016-05-05 14:08:28.670877"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 195"], ["description", "Collection 197 description"], ["publish_on", "2016-05-05 14:07:28.654605"], ["created_at", "2016-05-05 14:08:28.672407"], ["updated_at", "2016-05-05 14:08:28.672407"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.1ms)[0m  [1mSELECT "collections".* FROM "collections" WHERE "collections"."publish_on" IS NULL AND ("collections"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-05 14:08:28.673388')[0m
  [1m[35mMagazCore::Collection Load (0.1ms)[0m  SELECT "collections".* FROM "collections" WHERE (publish_on >= '2016-05-05 14:08:28.674493') AND "collections"."published_at" IS NULL
  [1m[36mMagazCore::Collection Load (0.2ms)[0m  [1mSELECT "collections".* FROM "collections" WHERE (publish_on <= '2016-05-05 14:08:28.675121') AND "collections"."published_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (10.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
MagazCore::CollectionTest: test_worker_created
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Collection 196"], ["description", "Collection 198 description"], ["created_at", "2016-05-05 14:08:28.688919"], ["updated_at", "2016-05-05 14:08:28.688919"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 197"], ["description", "Collection 199 description"], ["published_at", "2016-05-05 14:07:28.690560"], ["created_at", "2016-05-05 14:08:28.691338"], ["updated_at", "2016-05-05 14:08:28.691338"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 198"], ["description", "Collection 200 description"], ["published_at", "2016-05-05 14:07:28.690560"], ["created_at", "2016-05-05 14:08:28.693907"], ["updated_at", "2016-05-05 14:08:28.693907"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 199"], ["description", "Collection 201 description"], ["published_at", "2016-05-05 14:07:28.690560"], ["created_at", "2016-05-05 14:08:28.695896"], ["updated_at", "2016-05-05 14:08:28.695896"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 200"], ["description", "Collection 202 description"], ["published_at", "2016-05-05 14:07:28.690560"], ["created_at", "2016-05-05 14:08:28.697924"], ["updated_at", "2016-05-05 14:08:28.697924"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 201"], ["description", "Collection 203 description"], ["published_at", "2016-05-05 14:07:28.690560"], ["created_at", "2016-05-05 14:08:28.700037"], ["updated_at", "2016-05-05 14:08:28.700037"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 202"], ["description", "Collection 204 description"], ["published_at", "2016-05-05 14:07:28.690560"], ["created_at", "2016-05-05 14:08:28.702057"], ["updated_at", "2016-05-05 14:08:28.702057"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 203"], ["description", "Collection 205 description"], ["published_at", "2016-05-05 14:07:28.690560"], ["created_at", "2016-05-05 14:08:28.703917"], ["updated_at", "2016-05-05 14:08:28.703917"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 204"], ["description", "Collection 206 description"], ["published_at", "2016-05-05 14:07:28.690560"], ["created_at", "2016-05-05 14:08:28.705503"], ["updated_at", "2016-05-05 14:08:28.705503"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 205"], ["description", "Collection 207 description"], ["published_at", "2016-05-05 14:07:28.690560"], ["created_at", "2016-05-05 14:08:28.707074"], ["updated_at", "2016-05-05 14:08:28.707074"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 206"], ["description", "Collection 208 description"], ["published_at", "2016-05-05 14:07:28.690560"], ["created_at", "2016-05-05 14:08:28.708712"], ["updated_at", "2016-05-05 14:08:28.708712"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 207"], ["description", "Collection 209 description"], ["publish_on", "2016-05-06 14:08:28.709606"], ["created_at", "2016-05-05 14:08:28.710289"], ["updated_at", "2016-05-05 14:08:28.710289"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 208"], ["description", "Collection 210 description"], ["publish_on", "2016-05-06 14:08:28.709606"], ["created_at", "2016-05-05 14:08:28.711959"], ["updated_at", "2016-05-05 14:08:28.711959"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 209"], ["description", "Collection 211 description"], ["publish_on", "2016-05-06 14:08:28.709606"], ["created_at", "2016-05-05 14:08:28.713484"], ["updated_at", "2016-05-05 14:08:28.713484"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 210"], ["description", "Collection 212 description"], ["publish_on", "2016-05-06 14:08:28.709606"], ["created_at", "2016-05-05 14:08:28.714934"], ["updated_at", "2016-05-05 14:08:28.714934"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 211"], ["description", "Collection 213 description"], ["publish_on", "2016-05-06 14:08:28.709606"], ["created_at", "2016-05-05 14:08:28.717125"], ["updated_at", "2016-05-05 14:08:28.717125"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 212"], ["description", "Collection 214 description"], ["publish_on", "2016-05-06 14:08:28.709606"], ["created_at", "2016-05-05 14:08:28.719254"], ["updated_at", "2016-05-05 14:08:28.719254"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 213"], ["description", "Collection 215 description"], ["publish_on", "2016-05-06 14:08:28.709606"], ["created_at", "2016-05-05 14:08:28.721293"], ["updated_at", "2016-05-05 14:08:28.721293"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 214"], ["description", "Collection 216 description"], ["publish_on", "2016-05-06 14:08:28.709606"], ["created_at", "2016-05-05 14:08:28.723351"], ["updated_at", "2016-05-05 14:08:28.723351"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 215"], ["description", "Collection 217 description"], ["publish_on", "2016-05-06 14:08:28.709606"], ["created_at", "2016-05-05 14:08:28.725566"], ["updated_at", "2016-05-05 14:08:28.725566"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 216"], ["description", "Collection 218 description"], ["publish_on", "2016-05-06 14:08:28.709606"], ["created_at", "2016-05-05 14:08:28.727600"], ["updated_at", "2016-05-05 14:08:28.727600"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 217"], ["description", "Collection 219 description"], ["publish_on", "2016-05-05 14:07:28.728983"], ["created_at", "2016-05-05 14:08:28.729750"], ["updated_at", "2016-05-05 14:08:28.729750"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 218"], ["description", "Collection 220 description"], ["publish_on", "2016-05-05 14:07:28.728983"], ["created_at", "2016-05-05 14:08:28.731592"], ["updated_at", "2016-05-05 14:08:28.731592"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 219"], ["description", "Collection 221 description"], ["publish_on", "2016-05-05 14:07:28.728983"], ["created_at", "2016-05-05 14:08:28.733320"], ["updated_at", "2016-05-05 14:08:28.733320"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 220"], ["description", "Collection 222 description"], ["publish_on", "2016-05-05 14:07:28.728983"], ["created_at", "2016-05-05 14:08:28.734939"], ["updated_at", "2016-05-05 14:08:28.734939"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 221"], ["description", "Collection 223 description"], ["publish_on", "2016-05-05 14:07:28.728983"], ["created_at", "2016-05-05 14:08:28.736461"], ["updated_at", "2016-05-05 14:08:28.736461"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 222"], ["description", "Collection 224 description"], ["publish_on", "2016-05-05 14:07:28.728983"], ["created_at", "2016-05-05 14:08:28.737985"], ["updated_at", "2016-05-05 14:08:28.737985"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 223"], ["description", "Collection 225 description"], ["publish_on", "2016-05-05 14:07:28.728983"], ["created_at", "2016-05-05 14:08:28.739667"], ["updated_at", "2016-05-05 14:08:28.739667"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 224"], ["description", "Collection 226 description"], ["publish_on", "2016-05-05 14:07:28.728983"], ["created_at", "2016-05-05 14:08:28.741905"], ["updated_at", "2016-05-05 14:08:28.741905"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 225"], ["description", "Collection 227 description"], ["publish_on", "2016-05-05 14:07:28.728983"], ["created_at", "2016-05-05 14:08:28.744030"], ["updated_at", "2016-05-05 14:08:28.744030"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 226"], ["description", "Collection 228 description"], ["publish_on", "2016-05-05 14:07:28.728983"], ["created_at", "2016-05-05 14:08:28.746092"], ["updated_at", "2016-05-05 14:08:28.746092"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "collections" SET "publish_on" = ?, "updated_at" = ? WHERE "collections"."id" = ?  [["publish_on", "2016-05-07 14:08:28.747553"], ["updated_at", "2016-05-05 14:08:28.748169"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (3.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangeCheckoutSettingsTest: test_should_update_shop_with_valid_blank_params
-----------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:28.758070"], ["updated_at", "2016-05-05 14:08:28.758070"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangeCheckoutSettingsTest: test_should_update_shop_with_valid_success_params
-------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:28.782564"], ["updated_at", "2016-05-05 14:08:28.782564"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "shops" SET "billing_address_is_shipping_too" = ?, "enable_multipass_login" = ?, "notify_customers_of_their_shipment" = ?, "automatically_fulfill_all_orders" = ?, "after_order_fulfilled_and_paid" = ?, "account_type_choice" = ?, "abandoned_checkout_time_delay" = ?, "email_marketing_choice" = ?, "after_order_paid" = ?, "checkout_refund_policy" = ?, "checkout_privacy_policy" = ?, "checkout_term_of_service" = ?, "updated_at" = ? WHERE "shops"."id" = ?[0m  [["billing_address_is_shipping_too", "f"], ["enable_multipass_login", "f"], ["notify_customers_of_their_shipment", "f"], ["automatically_fulfill_all_orders", "f"], ["after_order_fulfilled_and_paid", "f"], ["account_type_choice", "disabled"], ["abandoned_checkout_time_delay", "never"], ["email_marketing_choice", "customer_agrees"], ["after_order_paid", "automatically_fulfill"], ["checkout_refund_policy", "checkout_refund_policy"], ["checkout_privacy_policy", "checkout_privacy_policy"], ["checkout_term_of_service", "checkout_term_of_service"], ["updated_at", "2016-05-05 14:08:28.785488"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------
MagazCore::ThemeServices::ImportFromArchiveTest: test_imports_from_valid_archive
--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "themes" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2016-05-05 14:08:28.834924"], ["updated_at", "2016-05-05 14:08:28.834924"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.836028"], ["updated_at", "2016-05-05 14:08:28.836028"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.836831"], ["updated_at", "2016-05-05 14:08:28.836831"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.837539"], ["updated_at", "2016-05-05 14:08:28.837539"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.838268"], ["updated_at", "2016-05-05 14:08:28.838268"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.838956"], ["updated_at", "2016-05-05 14:08:28.838956"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.839668"], ["updated_at", "2016-05-05 14:08:28.839668"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.840374"], ["updated_at", "2016-05-05 14:08:28.840374"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.841070"], ["updated_at", "2016-05-05 14:08:28.841070"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.841795"], ["updated_at", "2016-05-05 14:08:28.841795"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.842519"], ["updated_at", "2016-05-05 14:08:28.842519"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.843193"], ["updated_at", "2016-05-05 14:08:28.843193"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.843885"], ["updated_at", "2016-05-05 14:08:28.843885"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.844564"], ["updated_at", "2016-05-05 14:08:28.844564"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.845263"], ["updated_at", "2016-05-05 14:08:28.845263"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.845953"], ["updated_at", "2016-05-05 14:08:28.845953"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.846819"], ["updated_at", "2016-05-05 14:08:28.846819"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.847985"], ["updated_at", "2016-05-05 14:08:28.847985"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.849041"], ["updated_at", "2016-05-05 14:08:28.849041"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.850096"], ["updated_at", "2016-05-05 14:08:28.850096"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.851149"], ["updated_at", "2016-05-05 14:08:28.851149"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.852143"], ["updated_at", "2016-05-05 14:08:28.852143"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.853141"], ["updated_at", "2016-05-05 14:08:28.853141"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.854137"], ["updated_at", "2016-05-05 14:08:28.854137"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.855143"], ["updated_at", "2016-05-05 14:08:28.855143"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.856128"], ["updated_at", "2016-05-05 14:08:28.856128"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.857137"], ["updated_at", "2016-05-05 14:08:28.857137"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.857995"], ["updated_at", "2016-05-05 14:08:28.857995"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.858827"], ["updated_at", "2016-05-05 14:08:28.858827"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.859640"], ["updated_at", "2016-05-05 14:08:28.859640"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.860487"], ["updated_at", "2016-05-05 14:08:28.860487"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.861304"], ["updated_at", "2016-05-05 14:08:28.861304"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.862069"], ["updated_at", "2016-05-05 14:08:28.862069"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.862792"], ["updated_at", "2016-05-05 14:08:28.862792"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.863551"], ["updated_at", "2016-05-05 14:08:28.863551"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.864282"], ["updated_at", "2016-05-05 14:08:28.864282"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.864997"], ["updated_at", "2016-05-05 14:08:28.864997"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.865707"], ["updated_at", "2016-05-05 14:08:28.865707"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.866397"], ["updated_at", "2016-05-05 14:08:28.866397"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.867083"], ["updated_at", "2016-05-05 14:08:28.867083"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.867782"], ["updated_at", "2016-05-05 14:08:28.867782"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.868466"], ["updated_at", "2016-05-05 14:08:28.868466"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.869172"], ["updated_at", "2016-05-05 14:08:28.869172"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.869867"], ["updated_at", "2016-05-05 14:08:28.869867"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.870558"], ["updated_at", "2016-05-05 14:08:28.870558"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.871282"], ["updated_at", "2016-05-05 14:08:28.871282"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.871976"], ["updated_at", "2016-05-05 14:08:28.871976"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.872695"], ["updated_at", "2016-05-05 14:08:28.872695"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.873412"], ["updated_at", "2016-05-05 14:08:28.873412"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.874115"], ["updated_at", "2016-05-05 14:08:28.874115"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:28.874856"], ["updated_at", "2016-05-05 14:08:28.874856"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (4.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::ChangeUserTest: test_should_not_update_user_with_blank_params
---------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:28.892450"], ["updated_at", "2016-05-05 14:08:28.892450"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example11.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example11.com"], ["first_name", "First Name 11 "], ["last_name", "Last Name 11"], ["password_salt", "$2a$10$QLtyAylTUuqh2g6Ql2Qm1e"], ["password_digest", "$2a$10$QLtyAylTUuqh2g6Ql2Qm1ezHBl/3sPGGvUcQWdLZTpB1fcK3rM5v6"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:29.050081"], ["updated_at", "2016-05-05 14:08:29.050081"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example12.com' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example12.com"], ["first_name", "First Name 12 "], ["last_name", "Last Name 12"], ["password_salt", "$2a$10$lok4e32jDB2IBPp7/z4XxO"], ["password_digest", "$2a$10$lok4e32jDB2IBPp7/z4XxO6X.w5BBNFBLBMr72maz2TmuNG8IM3RG"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:29.207113"], ["updated_at", "2016-05-05 14:08:29.207113"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::ChangeUserTest: test_should_not_update_user_with_existing_email
-----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:29.220009"], ["updated_at", "2016-05-05 14:08:29.220009"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example13.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example13.com"], ["first_name", "First Name 13 "], ["last_name", "Last Name 13"], ["password_salt", "$2a$10$h5U7FDfI8.alpKUpqHm/Ee"], ["password_digest", "$2a$10$h5U7FDfI8.alpKUpqHm/EezlhlShA3a1ldhfJDb2CmjXGPwfRn9gS"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:29.365669"], ["updated_at", "2016-05-05 14:08:29.365669"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example14.com' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example14.com"], ["first_name", "First Name 14 "], ["last_name", "Last Name 14"], ["password_salt", "$2a$10$On6DBCN4OA3CMrC3aXrnwe"], ["password_digest", "$2a$10$On6DBCN4OA3CMrC3aXrnwey1YTX5ma8iGnlmTLlgV270POg4g0ak6"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:29.523247"], ["updated_at", "2016-05-05 14:08:29.523247"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ?[0m  [["shop_id", 1], ["email", "staff_user@example14.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ?[0m  [["shop_id", 1], ["email", "staff_user@example14.com"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::ChangeUserTest: test_should_not_update_user_with_invalid_email
----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:29.542199"], ["updated_at", "2016-05-05 14:08:29.542199"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example15.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example15.com"], ["first_name", "First Name 15 "], ["last_name", "Last Name 15"], ["password_salt", "$2a$10$Gn23uTXgszi48yIHhSP8Ie"], ["password_digest", "$2a$10$Gn23uTXgszi48yIHhSP8IeLXEtXrv.6zJCxWyIH3sREep/rZi2mi."], ["shop_id", 1], ["created_at", "2016-05-05 14:08:29.704097"], ["updated_at", "2016-05-05 14:08:29.704097"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example16.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example16.com"], ["first_name", "First Name 16 "], ["last_name", "Last Name 16"], ["password_salt", "$2a$10$mFC8d.fK3GvnoQRKMIly.e"], ["password_digest", "$2a$10$mFC8d.fK3GvnoQRKMIly.elGnGhdNlmrEDZlkZFTSrm6wpDW4W/Ei"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:29.864629"], ["updated_at", "2016-05-05 14:08:29.864629"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::ChangeUserTest: test_should_update_user_with_some_blank_params
----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:29.877668"], ["updated_at", "2016-05-05 14:08:29.877668"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example17.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example17.com"], ["first_name", "First Name 17 "], ["last_name", "Last Name 17"], ["password_salt", "$2a$10$eTwUTo0jc3D5W1jHimUksO"], ["password_digest", "$2a$10$eTwUTo0jc3D5W1jHimUksOPZDjqv.cWhQY/3ouLFFTHq.KGhSdiq6"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:30.037660"], ["updated_at", "2016-05-05 14:08:30.037660"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example18.com' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example18.com"], ["first_name", "First Name 18 "], ["last_name", "Last Name 18"], ["password_salt", "$2a$10$JsyZrd17OYj3Rj/bop7Lde"], ["password_digest", "$2a$10$JsyZrd17OYj3Rj/bop7LdeZrYghK44WobgZSKygKAaS6fJe3c3p1i"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:30.174594"], ["updated_at", "2016-05-05 14:08:30.174594"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ?  [["shop_id", 1], ["email", "new@email.com"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE ("users"."email" = 'new@email.com' AND "users"."id" != 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "first_name" = ?, "last_name" = ?, "email" = ?, "permissions" = ?, "password_salt" = ?, "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["first_name", "New first_name"], ["last_name", "New last_name"], ["email", "new@email.com"], ["permissions", nil], ["password_salt", "$2a$10$UqySBsLrg9MMiM7fg1aZHu"], ["password_digest", "$2a$10$UqySBsLrg9MMiM7fg1aZHuY0hrnRiMiX.TdkBCDTDAeN0U/rxXPUG"], ["updated_at", "2016-05-05 14:08:30.249129"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::User::ChangeUserTest: test_should_update_user_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:30.256826"], ["updated_at", "2016-05-05 14:08:30.256826"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example19.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example19.com"], ["first_name", "First Name 19 "], ["last_name", "Last Name 19"], ["password_salt", "$2a$10$D2TmiRlHTf0vec67kFc83O"], ["password_digest", "$2a$10$D2TmiRlHTf0vec67kFc83OGmpEDxtjzI8niOchWfwtXAI6mGvJyLS"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:30.413884"], ["updated_at", "2016-05-05 14:08:30.413884"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example20.com' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example20.com"], ["first_name", "First Name 20 "], ["last_name", "Last Name 20"], ["password_salt", "$2a$10$MRWR84ICdkzEJmNVdUsDxu"], ["password_digest", "$2a$10$MRWR84ICdkzEJmNVdUsDxuaIFrQ0wIloY2jMBPSiiGsvW28WnEMNC"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:30.552029"], ["updated_at", "2016-05-05 14:08:30.552029"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ?[0m  [["shop_id", 1], ["email", "new@email.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."email" = 'new@email.com' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "first_name" = ?, "last_name" = ?, "email" = ?, "permissions" = ?, "password_salt" = ?, "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["first_name", "New first_name"], ["last_name", "New last_name"], ["email", "new@email.com"], ["permissions", "[\"God\", \"Mode\"]"], ["password_salt", "$2a$10$JWtMppz4nlk7L6bi55DawO"], ["password_digest", "$2a$10$JWtMppz4nlk7L6bi55DawO3gd/4NKz3QuakKN0tUIzEOhpNwa89vK"], ["updated_at", "2016-05-05 14:08:30.635161"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------
MagazCore::Shop::SubdomainOwnerTest: test_assigns_subdomain
-----------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'uniq-name' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
MagazCore::Shop::SubdomainOwnerTest: test_subdomain_format
----------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------
MagazCore::Shop::SubdomainOwnerTest: test_subdomain_format_-_characters_stripped
--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------
MagazCore::Shop::SubdomainOwnerTest: test_subdomain_uniqueness
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------
MagazCore::Shop::SubdomainOwnerTest: test_subdomain_uniqueness_-_subdomain_name_is_generated_if_needed
------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Invite::CreateInviteTest: test_should_create_user_and_send_invite_with_valid_params
-------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:30.647934"], ["updated_at", "2016-05-05 14:08:30.647934"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example21.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example21.com"], ["first_name", "First Name 21 "], ["last_name", "Last Name 21"], ["password_salt", "$2a$10$6VS/9yigU2O1mLPlNvmsBe"], ["password_digest", "$2a$10$6VS/9yigU2O1mLPlNvmsBe/GzXppzVbyD05QaoRMQA9kMJKAnjRwG"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:30.804311"], ["updated_at", "2016-05-05 14:08:30.804311"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1[0m  [["shop_id", 1], ["email", "some@email.com"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'some@email.com' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "shop_id", "invite_token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["email", "some@email.com"], ["shop_id", 1], ["invite_token", "4ceab23a456f4e6f6275ad28a0ac0a94b45592b3"], ["created_at", "2016-05-05 14:08:30.810109"], ["updated_at", "2016-05-05 14:08:30.810109"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered /Users/espozito89/projects/magaz/gems/magaz_core/app/views/magaz_core/user_mailer/invite_new_user.html.erb within layouts/mailer (2.1ms)
  Rendered /Users/espozito89/projects/magaz/gems/magaz_core/app/views/layouts/mailer.html.erb (2.5ms)

MagazCore::UserMailer#invite_new_user: processed outbound mail in 263.6ms

Sent mail to some@email.com (7.7ms)
Date: Thu, 05 May 2016 17:08:31 +0300
From: magazmailer@gmail.com
To: some@email.com
Message-ID: <572b53df16a5c_a2583fe91e03fa38904b4@Dmitrys-MacBook-Pro.local.mail>
Subject: translation missing:
 en.magaz_core.user_mailer.invite_new_user.subject
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<html>
  <body>
    <!DOCTYPE html>
<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
  </head>
  <body>
    <h1> <span class="translation_missing" title="translation missing: en.magaz_core.user_mailer.invite_new_user.text">Text</span></h1>
    <p> <a href="I&#39;m generated by proc"><span class="translation_missing" title="translation missing: en.magaz_core.user_mailer.invite_new_user.link">Link</span></a> </p>
  </body>
</html>
  </body>
</html>

  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Invite::CreateInviteTest: test_should_not_create_user_and_send_invite_with_blank_params
-----------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:31.102163"], ["updated_at", "2016-05-05 14:08:31.102163"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example22.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example22.com"], ["first_name", "First Name 22 "], ["last_name", "Last Name 22"], ["password_salt", "$2a$10$hcnSxqg4ODfBDABfdH.nUO"], ["password_digest", "$2a$10$hcnSxqg4ODfBDABfdH.nUO9aFJivsh7f6gDBM.s34oxJ/HqpuO1WW"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.266207"], ["updated_at", "2016-05-05 14:08:31.266207"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Invite::CreateInviteTest: test_should_not_create_user_and_send_invite_with_existing_email
-------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:31.278604"], ["updated_at", "2016-05-05 14:08:31.278604"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example23.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example23.com"], ["first_name", "First Name 23 "], ["last_name", "Last Name 23"], ["password_salt", "$2a$10$z3mRGoydAZnqShiSNcf4me"], ["password_digest", "$2a$10$z3mRGoydAZnqShiSNcf4me3bxBqmTesztDu7TIjO6CA4CUH11h/Oa"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.438768"], ["updated_at", "2016-05-05 14:08:31.438768"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1  [["shop_id", 1], ["email", "staff_user@example23.com"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1  [["shop_id", 1], ["email", "staff_user@example23.com"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::ChangeCustomerTest: test_should_not_update_customer_with_blank_params
---------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:31.449944"], ["updated_at", "2016-05-05 14:08:31.449944"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 4 "], ["last_name", "Last Name 4"], ["email", "customer4@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 5 "], ["last_name", "Last Name 5"], ["email", "customer5@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::ChangeCustomerTest: test_should_not_update_customer_with_existing_email
-----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:31.460358"], ["updated_at", "2016-05-05 14:08:31.460358"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 6 "], ["last_name", "Last Name 6"], ["email", "customer6@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 7 "], ["last_name", "Last Name 7"], ["email", "customer7@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?  [["shop_id", 1], ["email", "customer7@gmail.com"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.0ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.0ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?[0m  [["shop_id", 1], ["email", "customer7@gmail.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::ChangeCustomerTest: test_should_update_customer_with_some_blank_params
----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:31.471651"], ["updated_at", "2016-05-05 14:08:31.471651"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 8 "], ["last_name", "Last Name 8"], ["email", "customer8@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 9 "], ["last_name", "Last Name 9"], ["email", "customer9@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "customers" SET "first_name" = ?, "last_name" = ? WHERE "customers"."id" = ?[0m  [["first_name", "Changed first name"], ["last_name", ""], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::ChangeCustomerTest: test_should_update_customer_with_valid_params
-----------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:31.482457"], ["updated_at", "2016-05-05 14:08:31.482457"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 10 "], ["last_name", "Last Name 10"], ["email", "customer10@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 11 "], ["last_name", "Last Name 11"], ["email", "customer11@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.0ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?[0m  [["shop_id", 1], ["email", "Changedtest@test.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "customers" SET "first_name" = ?, "last_name" = ?, "email" = ? WHERE "customers"."id" = ?[0m  [["first_name", "Changed first name"], ["last_name", "CHanged last name"], ["email", "Changedtest@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Customer Load (0.1ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.0ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::ChangeCollectionTest: test_should_not_update_collection_with_existing_name
----------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:31.495267"], ["updated_at", "2016-05-05 14:08:31.495267"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 227"], ["description", "Collection 229 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.497988"], ["updated_at", "2016-05-05 14:08:31.497988"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 228"], ["description", "Collection 230 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.499822"], ["updated_at", "2016-05-05 14:08:31.499822"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.2ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Collection Load (0.1ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?[0m  [["shop_id", 1], ["name", "Collection 228"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."handle" = ?  [["shop_id", 1], ["handle", "Changed handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Load (0.1ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Collection Load (0.1ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?  [["shop_id", 1], ["name", "Collection 228"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."handle" = ?[0m  [["shop_id", 1], ["handle", "Changed handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::ChangeCollectionTest: test_should_update_collection_with_some_blank_params
----------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:31.517207"], ["updated_at", "2016-05-05 14:08:31.517207"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 229"], ["description", "Collection 231 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.519341"], ["updated_at", "2016-05-05 14:08:31.519341"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 230"], ["description", "Collection 232 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.521019"], ["updated_at", "2016-05-05 14:08:31.521019"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "2"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 2]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" != ?) AND "collections"."slug" = ? LIMIT 1[0m  [["id", 2], ["slug", ""]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "collections" SET "page_title" = ?, "handle" = ?, "meta_description" = ?, "description" = ?, "slug" = ?, "updated_at" = ? WHERE "collections"."id" = ?  [["page_title", ""], ["handle", ""], ["meta_description", ""], ["description", ""], ["slug", ""], ["updated_at", "2016-05-05 14:08:31.526347"], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::ChangeCollectionTest: test_should_update_collection_with_valid_params
-----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:31.531352"], ["updated_at", "2016-05-05 14:08:31.531352"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 231"], ["description", "Collection 233 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.533804"], ["updated_at", "2016-05-05 14:08:31.533804"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 232"], ["description", "Collection 234 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.535957"], ["updated_at", "2016-05-05 14:08:31.535957"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Load (0.1ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?  [["shop_id", 1], ["name", "Changed name"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."handle" = ?[0m  [["shop_id", 1], ["handle", "Changed handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" != ?) AND "collections"."slug" = ? LIMIT 1  [["id", 1], ["slug", "changed-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "collections" SET "name" = ?, "page_title" = ?, "handle" = ?, "meta_description" = ?, "description" = ?, "slug" = ?, "updated_at" = ? WHERE "collections"."id" = ?[0m  [["name", "Changed name"], ["page_title", "Changed page_title"], ["handle", "Changed handle"], ["meta_description", "Changed meta_description"], ["description", "Test description"], ["slug", "changed-handle"], ["updated_at", "2016-05-05 14:08:31.543187"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::DeleteWebhookTest: test_should_delete_webhook_with_valid_ids
-----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example13' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example13"], ["subdomain", "example13"], ["created_at", "2016-05-05 14:08:31.550304"], ["updated_at", "2016-05-05 14:08:31.550304"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.552790"], ["updated_at", "2016-05-05 14:08:31.552790"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.554844"], ["updated_at", "2016-05-05 14:08:31.554844"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Webhook Load (0.1ms)[0m  [1mSELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."shop_id" = ? AND "webhooks"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "webhooks" WHERE "webhooks"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Webhook Load (0.0ms)[0m  [1mSELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Webhook Load (0.0ms)[0m  SELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::DeleteWebhookTest: test_should_not_delete_webhook_with_blank_ids
---------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example14' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example14"], ["subdomain", "example14"], ["created_at", "2016-05-05 14:08:31.563224"], ["updated_at", "2016-05-05 14:08:31.563224"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.565087"], ["updated_at", "2016-05-05 14:08:31.565087"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.566592"], ["updated_at", "2016-05-05 14:08:31.566592"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "webhooks"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::DeleteSubscriberNotificationTest: test_should_delete_subscriber_notification_with_valid_ids
---------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:31.575488"], ["updated_at", "2016-05-05 14:08:31.575488"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["notification_method", "email 1"], ["subscription_address", "some11@here.run"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.581196"], ["updated_at", "2016-05-05 14:08:31.581196"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["notification_method", "email 2"], ["subscription_address", "some12@here.run"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.582816"], ["updated_at", "2016-05-05 14:08:31.582816"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::SubscriberNotification Load (0.1ms)[0m  SELECT  "order_subscriptions".* FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "order_subscriptions" WHERE "order_subscriptions"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::SubscriberNotification Load (0.1ms)[0m  SELECT  "order_subscriptions".* FROM "order_subscriptions" WHERE "order_subscriptions"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::SubscriberNotification Load (0.0ms)[0m  [1mSELECT  "order_subscriptions".* FROM "order_subscriptions" WHERE "order_subscriptions"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::DeleteSubscriberNotificationTest: test_should_not_delete_subscriber_notification_with_blank_ids
-------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:31.594260"], ["updated_at", "2016-05-05 14:08:31.594260"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["notification_method", "email 3"], ["subscription_address", "some13@here.run"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.596578"], ["updated_at", "2016-05-05 14:08:31.596578"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["notification_method", "email 4"], ["subscription_address", "some14@here.run"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.598370"], ["updated_at", "2016-05-05 14:08:31.598370"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::EnableEuDigitalGoodsTest: test_should_create_new_default_collection_for_shop
------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:31.607824"], ["updated_at", "2016-05-05 14:08:31.607824"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 233"], ["description", "Collection 235 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:31.610498"], ["updated_at", "2016-05-05 14:08:31.610498"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle2"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 234"], ["description", "Collection 236 description"], ["shop_id", 1], ["handle", "handle2"], ["slug", "handle2"], ["created_at", "2016-05-05 14:08:31.612759"], ["updated_at", "2016-05-05 14:08:31.612759"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Load (0.1ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ? LIMIT 1  [["shop_id", 1], ["name", "New name"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New name"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.616148"], ["updated_at", "2016-05-05 14:08:31.616148"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "shops" SET "eu_digital_goods_collection_id" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["eu_digital_goods_collection_id", 3], ["updated_at", "2016-05-05 14:08:31.619107"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::EnableEuDigitalGoodsTest: test_should_not_update_shop_default_collection_with_blank_name
------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:31.624658"], ["updated_at", "2016-05-05 14:08:31.624658"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 235"], ["description", "Collection 237 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:31.628046"], ["updated_at", "2016-05-05 14:08:31.628046"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle2"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 236"], ["description", "Collection 238 description"], ["shop_id", 1], ["handle", "handle2"], ["slug", "handle2"], ["created_at", "2016-05-05 14:08:31.630831"], ["updated_at", "2016-05-05 14:08:31.630831"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::EnableEuDigitalGoodsTest: test_should_update_shop_default_collection_with_valid_params
----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:31.637701"], ["updated_at", "2016-05-05 14:08:31.637701"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 237"], ["description", "Collection 239 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:31.640491"], ["updated_at", "2016-05-05 14:08:31.640491"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle2"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 238"], ["description", "Collection 240 description"], ["shop_id", 1], ["handle", "handle2"], ["slug", "handle2"], ["created_at", "2016-05-05 14:08:31.642874"], ["updated_at", "2016-05-05 14:08:31.642874"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ? LIMIT 1  [["shop_id", 1], ["name", "Collection 237"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ? LIMIT 1[0m  [["shop_id", 1], ["name", "Collection 237"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "shops" SET "eu_digital_goods_collection_id" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["eu_digital_goods_collection_id", 1], ["updated_at", "2016-05-05 14:08:31.646430"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ProductImage::ChangeProductImageTest: test_should_not_update_image_with_wrong_extension
-----------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:31.650751"], ["updated_at", "2016-05-05 14:08:31.650751"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 13' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 13"], ["description", "Example 13 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.653074"], ["updated_at", "2016-05-05 14:08:31.653074"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "product_images" ("product_id", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 1], ["image", "tapir.jpg"], ["created_at", "2016-05-05 14:08:31.663205"], ["updated_at", "2016-05-05 14:08:31.663205"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "product_images"[0m
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ProductImage Load (0.1ms)[0m  SELECT  "product_images".* FROM "product_images" WHERE "product_images"."product_id" = ? AND "product_images"."id" = ? LIMIT 1  [["product_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ProductImage Load (0.0ms)[0m  [1mSELECT  "product_images".* FROM "product_images" WHERE "product_images"."product_id" = ? AND "product_images"."id" = ? LIMIT 1[0m  [["product_id", 1], ["id", 1]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ProductImage Load (0.0ms)[0m  SELECT  "product_images".* FROM "product_images" WHERE "product_images"."product_id" = ? AND "product_images"."id" = ? LIMIT 1  [["product_id", 1], ["id", 1]]
  [1m[36mMagazCore::ProductImage Load (0.0ms)[0m  [1mSELECT  "product_images".* FROM "product_images" WHERE "product_images"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ProductImage::ChangeProductImageTest: test_should_not_update_image_without_image
----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:31.679628"], ["updated_at", "2016-05-05 14:08:31.679628"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 14' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 14"], ["description", "Example 14 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.682174"], ["updated_at", "2016-05-05 14:08:31.682174"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "product_images" ("product_id", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 1], ["image", "tapir.jpg"], ["created_at", "2016-05-05 14:08:31.691379"], ["updated_at", "2016-05-05 14:08:31.691379"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "product_images"[0m
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ProductImage Load (0.0ms)[0m  SELECT  "product_images".* FROM "product_images" WHERE "product_images"."product_id" = ? AND "product_images"."id" = ? LIMIT 1  [["product_id", 1], ["id", 1]]
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ProductImage Load (0.0ms)[0m  [1mSELECT  "product_images".* FROM "product_images" WHERE "product_images"."product_id" = ? AND "product_images"."id" = ? LIMIT 1[0m  [["product_id", 1], ["id", 1]]
  [1m[35mMagazCore::ProductImage Load (0.0ms)[0m  SELECT  "product_images".* FROM "product_images" WHERE "product_images"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ProductImage::ChangeProductImageTest: test_should_update_image_with_valid_params
----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:31.702661"], ["updated_at", "2016-05-05 14:08:31.702661"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 15' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 15"], ["description", "Example 15 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.705928"], ["updated_at", "2016-05-05 14:08:31.705928"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "product_images" ("product_id", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["product_id", 1], ["image", "tapir.jpg"], ["created_at", "2016-05-05 14:08:31.714716"], ["updated_at", "2016-05-05 14:08:31.714716"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "product_images"
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ProductImage Load (0.0ms)[0m  [1mSELECT  "product_images".* FROM "product_images" WHERE "product_images"."product_id" = ? AND "product_images"."id" = ? LIMIT 1[0m  [["product_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::ProductImage Load (0.1ms)[0m  [1mSELECT  "product_images".* FROM "product_images" WHERE "product_images"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "product_images" SET "image" = ?, "updated_at" = ? WHERE "product_images"."id" = ?  [["image", "sell_bg_berlin.jpg"], ["updated_at", "2016-05-05 14:08:31.723898"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ProductImage Load (0.0ms)[0m  SELECT  "product_images".* FROM "product_images" WHERE "product_images"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::EventWebhookRunnerTest: test_should_not_throw_error_and_schedule_2_webhooks
--------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example15' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example15"], ["subdomain", "example15"], ["created_at", "2016-05-05 14:08:31.731547"], ["updated_at", "2016-05-05 14:08:31.731547"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example24.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example24.com"], ["first_name", "First Name 24 "], ["last_name", "Last Name 24"], ["password_salt", "$2a$10$/w4OYXwHplDA3QHKQ2JZTO"], ["password_digest", "$2a$10$/w4OYXwHplDA3QHKQ2JZTOWETVOJ.81SBSvqn3i.W2/Zap.360vKW"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.892229"], ["updated_at", "2016-05-05 14:08:31.892229"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.895260"], ["updated_at", "2016-05-05 14:08:31.895260"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.897284"], ["updated_at", "2016-05-05 14:08:31.897284"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.899101"], ["updated_at", "2016-05-05 14:08:31.899101"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "webhooks" SET "topic" = ?, "updated_at" = ? WHERE "webhooks"."id" = ?[0m  [["topic", "create_product_event"], ["updated_at", "2016-05-05 14:08:31.900638"], ["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 16' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 16"], ["description", "Example 16 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:31.903613"], ["updated_at", "2016-05-05 14:08:31.903613"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("message", "verb", "arguments", "shop_id", "subject_id", "subject_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["message", "User created a product: "], ["verb", "create"], ["arguments", "Product_Name"], ["shop_id", 1], ["subject_id", 1], ["subject_type", "MagazCore::Product"], ["created_at", "2016-05-05 14:08:31.908632"], ["updated_at", "2016-05-05 14:08:31.908632"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Webhook Load (0.1ms)[0m  SELECT "webhooks".* FROM "webhooks" WHERE "webhooks"."shop_id" = ? AND "webhooks"."topic" = ?  [["shop_id", 1], ["topic", "update_product_event"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::EventWebhookRunnerTest: test_should_schedule_webhook
---------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example16' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example16"], ["subdomain", "example16"], ["created_at", "2016-05-05 14:08:31.918230"], ["updated_at", "2016-05-05 14:08:31.918230"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example25.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example25.com"], ["first_name", "First Name 25 "], ["last_name", "Last Name 25"], ["password_salt", "$2a$10$rCZXXxQJ420vYY3Sc1HxzO"], ["password_digest", "$2a$10$rCZXXxQJ420vYY3Sc1HxzOVBe5Eb9QJGSCHh0Fzp.jlYMCpW2Dv8G"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.074247"], ["updated_at", "2016-05-05 14:08:32.074247"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.076488"], ["updated_at", "2016-05-05 14:08:32.076488"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.078440"], ["updated_at", "2016-05-05 14:08:32.078440"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.080372"], ["updated_at", "2016-05-05 14:08:32.080372"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "webhooks" SET "topic" = ?, "updated_at" = ? WHERE "webhooks"."id" = ?[0m  [["topic", "create_product_event"], ["updated_at", "2016-05-05 14:08:32.081953"], ["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 17' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 17"], ["description", "Example 17 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.084506"], ["updated_at", "2016-05-05 14:08:32.084506"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "events" ("message", "verb", "arguments", "shop_id", "subject_id", "subject_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["message", "User created a product: "], ["verb", "create"], ["arguments", "Product_Name"], ["shop_id", 1], ["subject_id", 1], ["subject_type", "MagazCore::Product"], ["created_at", "2016-05-05 14:08:32.086786"], ["updated_at", "2016-05-05 14:08:32.086786"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::AddArticleTest: test_should_create_article_with_valid_params
-----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:32.093633"], ["updated_at", "2016-05-05 14:08:32.093633"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 17"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.095650"], ["updated_at", "2016-05-05 14:08:32.095650"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 1], ["title", "Test title"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 1], ["handle", "Test handle"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "test-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "page_title", "handle", "meta_description", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["title", "Test title"], ["content", "Test text"], ["page_title", "Test page_title"], ["handle", "Test handle"], ["meta_description", "Test meta_description"], ["blog_id", 1], ["slug", "test-handle"], ["created_at", "2016-05-05 14:08:32.099938"], ["updated_at", "2016-05-05 14:08:32.099938"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?[0m  [["blog_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::AddArticleTest: test_should_not_create_article_with_blank_params
---------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:32.106719"], ["updated_at", "2016-05-05 14:08:32.106719"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 18"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.108921"], ["updated_at", "2016-05-05 14:08:32.108921"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?[0m  [["blog_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::AddArticleTest: test_should_not_create_article_with_existing_handle
------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:32.117739"], ["updated_at", "2016-05-05 14:08:32.117739"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 19"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.119940"], ["updated_at", "2016-05-05 14:08:32.119940"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 1], ["handle", "Test handle"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "test-handle"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "page_title", "handle", "meta_description", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["title", "Test title"], ["content", "Test text"], ["page_title", "Test page_title"], ["handle", "Test handle"], ["meta_description", "Test meta_description"], ["blog_id", 1], ["slug", "test-handle"], ["created_at", "2016-05-05 14:08:32.124771"], ["updated_at", "2016-05-05 14:08:32.124771"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "Second title"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "Test handle"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "Second title"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "Test handle"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?  [["blog_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::AddArticleTest: test_should_not_create_article_with_same_params
--------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:32.131978"], ["updated_at", "2016-05-05 14:08:32.131978"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 20"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.134070"], ["updated_at", "2016-05-05 14:08:32.134070"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "Test title"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "Test handle"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "test-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "page_title", "handle", "meta_description", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Test title"], ["content", "Test text"], ["page_title", "Test page_title"], ["handle", "Test handle"], ["meta_description", "Test meta_description"], ["blog_id", 1], ["slug", "test-handle"], ["created_at", "2016-05-05 14:08:32.137890"], ["updated_at", "2016-05-05 14:08:32.137890"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 1], ["handle", "Test handle"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 1], ["handle", "Test handle"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?[0m  [["blog_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------
MagazCore::AdminServices::LinkList::DeleteLinkListTest: test_should_delete_link_list_with_valid_id
--------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:32.145668"], ["updated_at", "2016-05-05 14:08:32.145668"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 4"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)  [["name", "Link 1"], ["link_list_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.1ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Link Load (0.1ms)[0m  SELECT "links".* FROM "links" WHERE "links"."link_list_id" = ?  [["link_list_id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "links" WHERE "links"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "link_lists" WHERE "link_lists"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::LinkList::DeleteLinkListTest: test_should_delete_links_with_link_list
-----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:32.160026"], ["updated_at", "2016-05-05 14:08:32.160026"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)  [["name", "List 5"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)[0m  [["name", "Link 2"], ["link_list_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "links"[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.1ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Link Load (0.0ms)[0m  SELECT "links".* FROM "links" WHERE "links"."link_list_id" = ?  [["link_list_id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "links" WHERE "links"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "link_lists" WHERE "link_lists"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "links"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::LinkList::DeleteLinkListTest: test_should_not_delete_link_list_with_blank_id
------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:32.173207"], ["updated_at", "2016-05-05 14:08:32.173207"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)  [["name", "List 6"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)[0m  [["name", "Link 3"], ["link_list_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "link_lists"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::DeleteBlogTest: test_should_delete_blog_with_valid_id
-------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:32.183580"], ["updated_at", "2016-05-05 14:08:32.183580"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 21"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.185668"], ["updated_at", "2016-05-05 14:08:32.185668"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 22"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.187397"], ["updated_at", "2016-05-05 14:08:32.187397"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "blogs" WHERE "blogs"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::DeleteBlogTest: test_should_not_delete_blog_with_blank_id
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:32.195854"], ["updated_at", "2016-05-05 14:08:32.195854"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 23"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.197975"], ["updated_at", "2016-05-05 14:08:32.197975"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 24"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.199598"], ["updated_at", "2016-05-05 14:08:32.199598"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::File::DeleteFileTest: test_should_delete_file_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:32.206713"], ["updated_at", "2016-05-05 14:08:32.206713"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "files" ("name", "shop_id", "file", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "File 1"], ["shop_id", 1], ["file", "tapir.jpg"], ["created_at", "2016-05-05 14:08:32.225597"], ["updated_at", "2016-05-05 14:08:32.225597"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::File Load (0.1ms)[0m  [1mSELECT  "files".* FROM "files" WHERE "files"."shop_id" = ? AND "files"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "files" WHERE "files"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------
MagazCore::AdminServices::File::DeleteFileTest: test_should_not_delete_file_with_blank_params
---------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:32.235974"], ["updated_at", "2016-05-05 14:08:32.235974"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "files" ("name", "shop_id", "file", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "File 2"], ["shop_id", 1], ["file", "tapir.jpg"], ["created_at", "2016-05-05 14:08:32.243186"], ["updated_at", "2016-05-05 14:08:32.243186"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "files"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangeTaxesSettingsTest: test_should_update_authorization_settings_to_nil_with_blank_params
---------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:32.255120"], ["updated_at", "2016-05-05 14:08:32.255120"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangeTaxesSettingsTest: test_should_update_shop_with_valid_params
--------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:32.267819"], ["updated_at", "2016-05-05 14:08:32.267819"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "shops" SET "all_taxes_are_included" = ?, "charge_taxes_on_shipping_rates" = ?, "updated_at" = ? WHERE "shops"."id" = ?[0m  [["all_taxes_are_included", "f"], ["charge_taxes_on_shipping_rates", "t"], ["updated_at", "2016-05-05 14:08:32.271170"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::AddTaxOverrideTest: test_create_override_with_second_valid_params
--------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example17' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example17"], ["subdomain", "example17"], ["created_at", "2016-05-05 14:08:32.276137"], ["updated_at", "2016-05-05 14:08:32.276137"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example26.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example26.com"], ["first_name", "First Name 26 "], ["last_name", "Last Name 26"], ["password_salt", "$2a$10$b491Cb13i5V89LKaflLZ1O"], ["password_digest", "$2a$10$b491Cb13i5V89LKaflLZ1O5QUiMqDY9HAwfOyCFhExenbW7pgNBlC"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.418189"], ["updated_at", "2016-05-05 14:08:32.418189"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.1ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 239"], ["description", "Collection 241 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:32.422277"], ["updated_at", "2016-05-05 14:08:32.422277"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "10"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ShippingCountry Load (0.1ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::TaxOverride Load (0.2ms)[0m  [1mSELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."shipping_country_id" = ? AND "tax_overrides"."is_shipping" = ? LIMIT 1[0m  [["shipping_country_id", 1], ["is_shipping", "t"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "tax_overrides" ("rate", "shipping_country_id", "is_shipping") VALUES (?, ?, ?)[0m  [["rate", 5.4], ["shipping_country_id", 1], ["is_shipping", "t"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::AddTaxOverrideTest: test_create_override_with_valid_params_and_already_existing_one
--------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example18' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example18"], ["subdomain", "example18"], ["created_at", "2016-05-05 14:08:32.449124"], ["updated_at", "2016-05-05 14:08:32.449124"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example27.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example27.com"], ["first_name", "First Name 27 "], ["last_name", "Last Name 27"], ["password_salt", "$2a$10$OMNQ1d6a9PewpyAnfcSCRe"], ["password_digest", "$2a$10$OMNQ1d6a9PewpyAnfcSCRelwrUugHgfdNtKxahcUD0No7b4z8d8Ce"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.602698"], ["updated_at", "2016-05-05 14:08:32.602698"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 240"], ["description", "Collection 242 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:32.607472"], ["updated_at", "2016-05-05 14:08:32.607472"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "11"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ShippingCountry Load (0.1ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::TaxOverride Load (0.2ms)[0m  [1mSELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."shipping_country_id" = ? AND "tax_overrides"."collection_id" = ? LIMIT 1[0m  [["shipping_country_id", 1], ["collection_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "tax_overrides" ("rate", "collection_id", "shipping_country_id") VALUES (?, ?, ?)[0m  [["rate", 48.0], ["collection_id", 1], ["shipping_country_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::TaxOverride Load (0.1ms)[0m  SELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."shipping_country_id" = ? AND "tax_overrides"."collection_id" = ? LIMIT 1  [["shipping_country_id", 1], ["collection_id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::TaxOverride Load (0.0ms)[0m  SELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."shipping_country_id" = ? AND "tax_overrides"."collection_id" = ? LIMIT 1  [["shipping_country_id", 1], ["collection_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::AddTaxOverrideTest: test_fails_to_create_tax_override_with_blank_params_params
---------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example19' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example19"], ["subdomain", "example19"], ["created_at", "2016-05-05 14:08:32.626309"], ["updated_at", "2016-05-05 14:08:32.626309"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example28.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example28.com"], ["first_name", "First Name 28 "], ["last_name", "Last Name 28"], ["password_salt", "$2a$10$/I/D0ANGMpHd.A0AFy7rsu"], ["password_digest", "$2a$10$/I/D0ANGMpHd.A0AFy7rsuvqIQ43pWtQIQ7sgwWSBcdS7nWL35Gci"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.786463"], ["updated_at", "2016-05-05 14:08:32.786463"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 241"], ["description", "Collection 243 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:32.789893"], ["updated_at", "2016-05-05 14:08:32.789893"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "12"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::AddTaxOverrideTest: test_fails_to_create_tax_override_with_wrong_params
--------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example20' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example20"], ["subdomain", "example20"], ["created_at", "2016-05-05 14:08:32.808263"], ["updated_at", "2016-05-05 14:08:32.808263"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example29.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example29.com"], ["first_name", "First Name 29 "], ["last_name", "Last Name 29"], ["password_salt", "$2a$10$heQIPhGJrSQEzn0rd4giQe"], ["password_digest", "$2a$10$heQIPhGJrSQEzn0rd4giQe7.QwkIFOTiH8QDN/lkO1p4FiA9wZCvK"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:32.960167"], ["updated_at", "2016-05-05 14:08:32.960167"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "handle1"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Collection 242"], ["description", "Collection 244 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:32.965133"], ["updated_at", "2016-05-05 14:08:32.965133"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "13"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::TaxOverride Load (0.2ms)[0m  SELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."shipping_country_id" = ? AND "tax_overrides"."collection_id" IS NULL LIMIT 1  [["shipping_country_id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.1ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::TaxOverride Load (0.0ms)[0m  SELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."shipping_country_id" = ? AND "tax_overrides"."collection_id" IS NULL LIMIT 1  [["shipping_country_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------
MagazCore::AdminServices::File::AddFileTest: test_should_add_file_with_valid_params
-----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:32.976183"], ["updated_at", "2016-05-05 14:08:32.976183"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "files" ("shop_id", "file", "name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["shop_id", 1], ["file", "test.txt"], ["name", "New file"], ["created_at", "2016-05-05 14:08:32.982484"], ["updated_at", "2016-05-05 14:08:32.982484"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::File Load (0.1ms)[0m  SELECT  "files".* FROM "files" WHERE "files"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------
MagazCore::AdminServices::File::AddFileTest: test_should_not_add_file_with_blank_file
-------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:32.988840"], ["updated_at", "2016-05-05 14:08:32.988840"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "files"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------
MagazCore::AdminServices::File::AddFileTest: test_should_not_add_file_with_blank_name
-------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:32.998214"], ["updated_at", "2016-05-05 14:08:32.998214"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "files"
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------
MagazCore::AdminServices::File::AddFileTest: test_should_not_add_file_with_blank_shop_id
----------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:33.008498"], ["updated_at", "2016-05-05 14:08:33.008498"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "files"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Checkout::DeleteCheckoutTest: test_should_delete_checkout_with_valid_id
-------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:33.017775"], ["updated_at", "2016-05-05 14:08:33.017775"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 12 "], ["last_name", "Last Name 12"], ["email", "customer12@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["customer_id", 1], ["email", "Some Uniq Email"], ["created_at", "2016-05-05 14:08:33.021907"], ["updated_at", "2016-05-05 14:08:33.021907"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "checkouts" INNER JOIN "customers" ON "checkouts"."customer_id" = "customers"."id" WHERE "customers"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Checkout Load (0.1ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "checkouts" WHERE "checkouts"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Checkout Load (0.0ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "checkouts" INNER JOIN "customers" ON "checkouts"."customer_id" = "customers"."id" WHERE "customers"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Checkout::DeleteCheckoutTest: test_should_not_checkout_blog_with_blank_id
---------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:33.031150"], ["updated_at", "2016-05-05 14:08:33.031150"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 13 "], ["last_name", "Last Name 13"], ["email", "customer13@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_id", 1], ["email", "Some Uniq Email"], ["created_at", "2016-05-05 14:08:33.035118"], ["updated_at", "2016-05-05 14:08:33.035118"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "checkouts" INNER JOIN "customers" ON "checkouts"."customer_id" = "customers"."id" WHERE "customers"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "checkouts" INNER JOIN "customers" ON "checkouts"."customer_id" = "customers"."id" WHERE "customers"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::AddWebhookTest: test_should_create_webhook_with_valid_params
-----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example21' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example21"], ["subdomain", "example21"], ["created_at", "2016-05-05 14:08:33.042836"], ["updated_at", "2016-05-05 14:08:33.042836"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "webhooks" ("shop_id", "topic", "address", "format", "metafield_namespaces", "fields", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["topic", "create_product_event"], ["address", "https://www.examplee.com"], ["format", "JSON"], ["metafield_namespaces", nil], ["fields", nil], ["created_at", "2016-05-05 14:08:33.047456"], ["updated_at", "2016-05-05 14:08:33.047456"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Webhook Load (0.0ms)[0m  SELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Webhook Load (0.0ms)[0m  [1mSELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "webhooks"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::AddWebhookTest: test_should_not_create_webhook_with_blank_params
---------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example22' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example22"], ["subdomain", "example22"], ["created_at", "2016-05-05 14:08:33.052624"], ["updated_at", "2016-05-05 14:08:33.052624"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "webhooks"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::AddWebhookTest: test_should_not_create_webhook_with_invalid_address
------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example23' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example23"], ["subdomain", "example23"], ["created_at", "2016-05-05 14:08:33.059921"], ["updated_at", "2016-05-05 14:08:33.059921"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "webhooks"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MagazCore::ProductTest: test_associations
-----------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 18' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example 18"], ["description", "Example 18 description"], ["created_at", "2016-05-05 14:08:33.066906"], ["updated_at", "2016-05-05 14:08:33.066906"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 19' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 19"], ["description", "Example 19 description"], ["published_at", "2016-05-05 14:07:33.068395"], ["created_at", "2016-05-05 14:08:33.069967"], ["updated_at", "2016-05-05 14:08:33.069967"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 20' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 20"], ["description", "Example 20 description"], ["published_at", "2016-05-05 14:07:33.068395"], ["created_at", "2016-05-05 14:08:33.072372"], ["updated_at", "2016-05-05 14:08:33.072372"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 21' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 21"], ["description", "Example 21 description"], ["published_at", "2016-05-05 14:07:33.068395"], ["created_at", "2016-05-05 14:08:33.074144"], ["updated_at", "2016-05-05 14:08:33.074144"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 22' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 22"], ["description", "Example 22 description"], ["published_at", "2016-05-05 14:07:33.068395"], ["created_at", "2016-05-05 14:08:33.075939"], ["updated_at", "2016-05-05 14:08:33.075939"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 23' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 23"], ["description", "Example 23 description"], ["published_at", "2016-05-05 14:07:33.068395"], ["created_at", "2016-05-05 14:08:33.077677"], ["updated_at", "2016-05-05 14:08:33.077677"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 24' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 24"], ["description", "Example 24 description"], ["published_at", "2016-05-05 14:07:33.068395"], ["created_at", "2016-05-05 14:08:33.079538"], ["updated_at", "2016-05-05 14:08:33.079538"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 25' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 25"], ["description", "Example 25 description"], ["published_at", "2016-05-05 14:07:33.068395"], ["created_at", "2016-05-05 14:08:33.082219"], ["updated_at", "2016-05-05 14:08:33.082219"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 26' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 26"], ["description", "Example 26 description"], ["published_at", "2016-05-05 14:07:33.068395"], ["created_at", "2016-05-05 14:08:33.084153"], ["updated_at", "2016-05-05 14:08:33.084153"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 27' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 27"], ["description", "Example 27 description"], ["published_at", "2016-05-05 14:07:33.068395"], ["created_at", "2016-05-05 14:08:33.086011"], ["updated_at", "2016-05-05 14:08:33.086011"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 28' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 28"], ["description", "Example 28 description"], ["published_at", "2016-05-05 14:07:33.068395"], ["created_at", "2016-05-05 14:08:33.088036"], ["updated_at", "2016-05-05 14:08:33.088036"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 29' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 29"], ["description", "Example 29 description"], ["publish_on", "2016-05-06 14:08:33.088971"], ["created_at", "2016-05-05 14:08:33.090134"], ["updated_at", "2016-05-05 14:08:33.090134"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 30' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 30"], ["description", "Example 30 description"], ["publish_on", "2016-05-06 14:08:33.088971"], ["created_at", "2016-05-05 14:08:33.092218"], ["updated_at", "2016-05-05 14:08:33.092218"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 31' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 31"], ["description", "Example 31 description"], ["publish_on", "2016-05-06 14:08:33.088971"], ["created_at", "2016-05-05 14:08:33.094124"], ["updated_at", "2016-05-05 14:08:33.094124"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 32' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 32"], ["description", "Example 32 description"], ["publish_on", "2016-05-06 14:08:33.088971"], ["created_at", "2016-05-05 14:08:33.096648"], ["updated_at", "2016-05-05 14:08:33.096648"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 33' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 33"], ["description", "Example 33 description"], ["publish_on", "2016-05-06 14:08:33.088971"], ["created_at", "2016-05-05 14:08:33.099579"], ["updated_at", "2016-05-05 14:08:33.099579"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 34' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 34"], ["description", "Example 34 description"], ["publish_on", "2016-05-06 14:08:33.088971"], ["created_at", "2016-05-05 14:08:33.102173"], ["updated_at", "2016-05-05 14:08:33.102173"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 35' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 35"], ["description", "Example 35 description"], ["publish_on", "2016-05-06 14:08:33.088971"], ["created_at", "2016-05-05 14:08:33.104783"], ["updated_at", "2016-05-05 14:08:33.104783"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 36' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 36"], ["description", "Example 36 description"], ["publish_on", "2016-05-06 14:08:33.088971"], ["created_at", "2016-05-05 14:08:33.106759"], ["updated_at", "2016-05-05 14:08:33.106759"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 37' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 37"], ["description", "Example 37 description"], ["publish_on", "2016-05-06 14:08:33.088971"], ["created_at", "2016-05-05 14:08:33.108711"], ["updated_at", "2016-05-05 14:08:33.108711"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 38' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 38"], ["description", "Example 38 description"], ["publish_on", "2016-05-06 14:08:33.088971"], ["created_at", "2016-05-05 14:08:33.110539"], ["updated_at", "2016-05-05 14:08:33.110539"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 39' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 39"], ["description", "Example 39 description"], ["publish_on", "2016-05-05 14:07:33.111792"], ["created_at", "2016-05-05 14:08:33.113167"], ["updated_at", "2016-05-05 14:08:33.113167"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 40' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 40"], ["description", "Example 40 description"], ["publish_on", "2016-05-05 14:07:33.111792"], ["created_at", "2016-05-05 14:08:33.115978"], ["updated_at", "2016-05-05 14:08:33.115978"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 41' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 41"], ["description", "Example 41 description"], ["publish_on", "2016-05-05 14:07:33.111792"], ["created_at", "2016-05-05 14:08:33.118572"], ["updated_at", "2016-05-05 14:08:33.118572"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 42' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 42"], ["description", "Example 42 description"], ["publish_on", "2016-05-05 14:07:33.111792"], ["created_at", "2016-05-05 14:08:33.120802"], ["updated_at", "2016-05-05 14:08:33.120802"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 43' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 43"], ["description", "Example 43 description"], ["publish_on", "2016-05-05 14:07:33.111792"], ["created_at", "2016-05-05 14:08:33.122669"], ["updated_at", "2016-05-05 14:08:33.122669"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 44' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 44"], ["description", "Example 44 description"], ["publish_on", "2016-05-05 14:07:33.111792"], ["created_at", "2016-05-05 14:08:33.124573"], ["updated_at", "2016-05-05 14:08:33.124573"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 45' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 45"], ["description", "Example 45 description"], ["publish_on", "2016-05-05 14:07:33.111792"], ["created_at", "2016-05-05 14:08:33.126399"], ["updated_at", "2016-05-05 14:08:33.126399"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 46' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 46"], ["description", "Example 46 description"], ["publish_on", "2016-05-05 14:07:33.111792"], ["created_at", "2016-05-05 14:08:33.128879"], ["updated_at", "2016-05-05 14:08:33.128879"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 47' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 47"], ["description", "Example 47 description"], ["publish_on", "2016-05-05 14:07:33.111792"], ["created_at", "2016-05-05 14:08:33.131539"], ["updated_at", "2016-05-05 14:08:33.131539"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 48' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 48"], ["description", "Example 48 description"], ["publish_on", "2016-05-05 14:07:33.111792"], ["created_at", "2016-05-05 14:08:33.134385"], ["updated_at", "2016-05-05 14:08:33.134385"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------
MagazCore::ProductTest: test_basic_visibility_functionality
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 49' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example 49"], ["description", "Example 49 description"], ["created_at", "2016-05-05 14:08:33.139694"], ["updated_at", "2016-05-05 14:08:33.139694"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 50' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 50"], ["description", "Example 50 description"], ["published_at", "2016-05-05 14:07:33.140841"], ["created_at", "2016-05-05 14:08:33.141815"], ["updated_at", "2016-05-05 14:08:33.141815"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 51' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 51"], ["description", "Example 51 description"], ["published_at", "2016-05-05 14:07:33.140841"], ["created_at", "2016-05-05 14:08:33.144308"], ["updated_at", "2016-05-05 14:08:33.144308"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 52' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 52"], ["description", "Example 52 description"], ["published_at", "2016-05-05 14:07:33.140841"], ["created_at", "2016-05-05 14:08:33.146985"], ["updated_at", "2016-05-05 14:08:33.146985"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 53' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 53"], ["description", "Example 53 description"], ["published_at", "2016-05-05 14:07:33.140841"], ["created_at", "2016-05-05 14:08:33.149585"], ["updated_at", "2016-05-05 14:08:33.149585"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 54' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 54"], ["description", "Example 54 description"], ["published_at", "2016-05-05 14:07:33.140841"], ["created_at", "2016-05-05 14:08:33.152311"], ["updated_at", "2016-05-05 14:08:33.152311"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 55' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 55"], ["description", "Example 55 description"], ["published_at", "2016-05-05 14:07:33.140841"], ["created_at", "2016-05-05 14:08:33.154965"], ["updated_at", "2016-05-05 14:08:33.154965"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 56' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 56"], ["description", "Example 56 description"], ["published_at", "2016-05-05 14:07:33.140841"], ["created_at", "2016-05-05 14:08:33.157496"], ["updated_at", "2016-05-05 14:08:33.157496"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 57' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 57"], ["description", "Example 57 description"], ["published_at", "2016-05-05 14:07:33.140841"], ["created_at", "2016-05-05 14:08:33.160053"], ["updated_at", "2016-05-05 14:08:33.160053"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 58' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 58"], ["description", "Example 58 description"], ["published_at", "2016-05-05 14:07:33.140841"], ["created_at", "2016-05-05 14:08:33.162480"], ["updated_at", "2016-05-05 14:08:33.162480"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 59' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 59"], ["description", "Example 59 description"], ["published_at", "2016-05-05 14:07:33.140841"], ["created_at", "2016-05-05 14:08:33.164437"], ["updated_at", "2016-05-05 14:08:33.164437"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 60' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 60"], ["description", "Example 60 description"], ["publish_on", "2016-05-06 14:08:33.165450"], ["created_at", "2016-05-05 14:08:33.166458"], ["updated_at", "2016-05-05 14:08:33.166458"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 61' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 61"], ["description", "Example 61 description"], ["publish_on", "2016-05-06 14:08:33.165450"], ["created_at", "2016-05-05 14:08:33.168451"], ["updated_at", "2016-05-05 14:08:33.168451"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 62' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 62"], ["description", "Example 62 description"], ["publish_on", "2016-05-06 14:08:33.165450"], ["created_at", "2016-05-05 14:08:33.170266"], ["updated_at", "2016-05-05 14:08:33.170266"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 63' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 63"], ["description", "Example 63 description"], ["publish_on", "2016-05-06 14:08:33.165450"], ["created_at", "2016-05-05 14:08:33.172042"], ["updated_at", "2016-05-05 14:08:33.172042"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.2ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 64' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 64"], ["description", "Example 64 description"], ["publish_on", "2016-05-06 14:08:33.165450"], ["created_at", "2016-05-05 14:08:33.175464"], ["updated_at", "2016-05-05 14:08:33.175464"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 65' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 65"], ["description", "Example 65 description"], ["publish_on", "2016-05-06 14:08:33.165450"], ["created_at", "2016-05-05 14:08:33.178264"], ["updated_at", "2016-05-05 14:08:33.178264"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 66' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 66"], ["description", "Example 66 description"], ["publish_on", "2016-05-06 14:08:33.165450"], ["created_at", "2016-05-05 14:08:33.181200"], ["updated_at", "2016-05-05 14:08:33.181200"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 67' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 67"], ["description", "Example 67 description"], ["publish_on", "2016-05-06 14:08:33.165450"], ["created_at", "2016-05-05 14:08:33.184298"], ["updated_at", "2016-05-05 14:08:33.184298"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 68' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 68"], ["description", "Example 68 description"], ["publish_on", "2016-05-06 14:08:33.165450"], ["created_at", "2016-05-05 14:08:33.187277"], ["updated_at", "2016-05-05 14:08:33.187277"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 69' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 69"], ["description", "Example 69 description"], ["publish_on", "2016-05-06 14:08:33.165450"], ["created_at", "2016-05-05 14:08:33.189763"], ["updated_at", "2016-05-05 14:08:33.189763"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 70' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 70"], ["description", "Example 70 description"], ["publish_on", "2016-05-05 14:07:33.190944"], ["created_at", "2016-05-05 14:08:33.192365"], ["updated_at", "2016-05-05 14:08:33.192365"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 71' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 71"], ["description", "Example 71 description"], ["publish_on", "2016-05-05 14:07:33.190944"], ["created_at", "2016-05-05 14:08:33.194752"], ["updated_at", "2016-05-05 14:08:33.194752"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 72' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 72"], ["description", "Example 72 description"], ["publish_on", "2016-05-05 14:07:33.190944"], ["created_at", "2016-05-05 14:08:33.196849"], ["updated_at", "2016-05-05 14:08:33.196849"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 73' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 73"], ["description", "Example 73 description"], ["publish_on", "2016-05-05 14:07:33.190944"], ["created_at", "2016-05-05 14:08:33.199253"], ["updated_at", "2016-05-05 14:08:33.199253"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 74' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 74"], ["description", "Example 74 description"], ["publish_on", "2016-05-05 14:07:33.190944"], ["created_at", "2016-05-05 14:08:33.201599"], ["updated_at", "2016-05-05 14:08:33.201599"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 75' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 75"], ["description", "Example 75 description"], ["publish_on", "2016-05-05 14:07:33.190944"], ["created_at", "2016-05-05 14:08:33.203540"], ["updated_at", "2016-05-05 14:08:33.203540"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 76' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 76"], ["description", "Example 76 description"], ["publish_on", "2016-05-05 14:07:33.190944"], ["created_at", "2016-05-05 14:08:33.205338"], ["updated_at", "2016-05-05 14:08:33.205338"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 77' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 77"], ["description", "Example 77 description"], ["publish_on", "2016-05-05 14:07:33.190944"], ["created_at", "2016-05-05 14:08:33.207068"], ["updated_at", "2016-05-05 14:08:33.207068"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 78' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 78"], ["description", "Example 78 description"], ["publish_on", "2016-05-05 14:07:33.190944"], ["created_at", "2016-05-05 14:08:33.209802"], ["updated_at", "2016-05-05 14:08:33.209802"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 79' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 79"], ["description", "Example 79 description"], ["publish_on", "2016-05-05 14:07:33.190944"], ["created_at", "2016-05-05 14:08:33.212368"], ["updated_at", "2016-05-05 14:08:33.212368"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 49' AND "products"."id" != 1 AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 49' AND "products"."id" != 1 AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 49' AND "products"."id" != 1 AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "products" SET "publish_on" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["publish_on", "2016-05-07 14:08:33.215842"], ["updated_at", "2016-05-05 14:08:33.216939"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 49' AND "products"."id" != 1 AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 49' AND "products"."id" != 1 AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "products" SET "publish_on" = ?, "published_at" = ?, "updated_at" = ? WHERE "products"."id" = ?  [["publish_on", nil], ["published_at", "2016-05-03 14:08:33.218846"], ["updated_at", "2016-05-05 14:08:33.219883"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 49' AND "products"."id" != 1 AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------
MagazCore::ProductTest: test_two_products_with_same_handle_and_different_shops
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 80' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example 80"], ["description", "Example 80 description"], ["created_at", "2016-05-05 14:08:33.225622"], ["updated_at", "2016-05-05 14:08:33.225622"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 81' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 81"], ["description", "Example 81 description"], ["published_at", "2016-05-05 14:07:33.226824"], ["created_at", "2016-05-05 14:08:33.227813"], ["updated_at", "2016-05-05 14:08:33.227813"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 82' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 82"], ["description", "Example 82 description"], ["published_at", "2016-05-05 14:07:33.226824"], ["created_at", "2016-05-05 14:08:33.229729"], ["updated_at", "2016-05-05 14:08:33.229729"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 83' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 83"], ["description", "Example 83 description"], ["published_at", "2016-05-05 14:07:33.226824"], ["created_at", "2016-05-05 14:08:33.231521"], ["updated_at", "2016-05-05 14:08:33.231521"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 84' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 84"], ["description", "Example 84 description"], ["published_at", "2016-05-05 14:07:33.226824"], ["created_at", "2016-05-05 14:08:33.233374"], ["updated_at", "2016-05-05 14:08:33.233374"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 85' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 85"], ["description", "Example 85 description"], ["published_at", "2016-05-05 14:07:33.226824"], ["created_at", "2016-05-05 14:08:33.235241"], ["updated_at", "2016-05-05 14:08:33.235241"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 86' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 86"], ["description", "Example 86 description"], ["published_at", "2016-05-05 14:07:33.226824"], ["created_at", "2016-05-05 14:08:33.236952"], ["updated_at", "2016-05-05 14:08:33.236952"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 87' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 87"], ["description", "Example 87 description"], ["published_at", "2016-05-05 14:07:33.226824"], ["created_at", "2016-05-05 14:08:33.238646"], ["updated_at", "2016-05-05 14:08:33.238646"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 88' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 88"], ["description", "Example 88 description"], ["published_at", "2016-05-05 14:07:33.226824"], ["created_at", "2016-05-05 14:08:33.241135"], ["updated_at", "2016-05-05 14:08:33.241135"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 89' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 89"], ["description", "Example 89 description"], ["published_at", "2016-05-05 14:07:33.226824"], ["created_at", "2016-05-05 14:08:33.243664"], ["updated_at", "2016-05-05 14:08:33.243664"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 90' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 90"], ["description", "Example 90 description"], ["published_at", "2016-05-05 14:07:33.226824"], ["created_at", "2016-05-05 14:08:33.245975"], ["updated_at", "2016-05-05 14:08:33.245975"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 91' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 91"], ["description", "Example 91 description"], ["publish_on", "2016-05-06 14:08:33.247123"], ["created_at", "2016-05-05 14:08:33.248408"], ["updated_at", "2016-05-05 14:08:33.248408"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 92' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 92"], ["description", "Example 92 description"], ["publish_on", "2016-05-06 14:08:33.247123"], ["created_at", "2016-05-05 14:08:33.250740"], ["updated_at", "2016-05-05 14:08:33.250740"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 93' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 93"], ["description", "Example 93 description"], ["publish_on", "2016-05-06 14:08:33.247123"], ["created_at", "2016-05-05 14:08:33.252745"], ["updated_at", "2016-05-05 14:08:33.252745"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 94' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 94"], ["description", "Example 94 description"], ["publish_on", "2016-05-06 14:08:33.247123"], ["created_at", "2016-05-05 14:08:33.254642"], ["updated_at", "2016-05-05 14:08:33.254642"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 95' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 95"], ["description", "Example 95 description"], ["publish_on", "2016-05-06 14:08:33.247123"], ["created_at", "2016-05-05 14:08:33.256499"], ["updated_at", "2016-05-05 14:08:33.256499"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 96' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 96"], ["description", "Example 96 description"], ["publish_on", "2016-05-06 14:08:33.247123"], ["created_at", "2016-05-05 14:08:33.258490"], ["updated_at", "2016-05-05 14:08:33.258490"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 97' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 97"], ["description", "Example 97 description"], ["publish_on", "2016-05-06 14:08:33.247123"], ["created_at", "2016-05-05 14:08:33.260606"], ["updated_at", "2016-05-05 14:08:33.260606"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 98' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 98"], ["description", "Example 98 description"], ["publish_on", "2016-05-06 14:08:33.247123"], ["created_at", "2016-05-05 14:08:33.262444"], ["updated_at", "2016-05-05 14:08:33.262444"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 99' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 99"], ["description", "Example 99 description"], ["publish_on", "2016-05-06 14:08:33.247123"], ["created_at", "2016-05-05 14:08:33.264312"], ["updated_at", "2016-05-05 14:08:33.264312"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 100' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 100"], ["description", "Example 100 description"], ["publish_on", "2016-05-06 14:08:33.247123"], ["created_at", "2016-05-05 14:08:33.266105"], ["updated_at", "2016-05-05 14:08:33.266105"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 101' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 101"], ["description", "Example 101 description"], ["publish_on", "2016-05-05 14:07:33.267017"], ["created_at", "2016-05-05 14:08:33.267957"], ["updated_at", "2016-05-05 14:08:33.267957"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 102' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 102"], ["description", "Example 102 description"], ["publish_on", "2016-05-05 14:07:33.267017"], ["created_at", "2016-05-05 14:08:33.270200"], ["updated_at", "2016-05-05 14:08:33.270200"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 103' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 103"], ["description", "Example 103 description"], ["publish_on", "2016-05-05 14:07:33.267017"], ["created_at", "2016-05-05 14:08:33.272052"], ["updated_at", "2016-05-05 14:08:33.272052"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 104' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 104"], ["description", "Example 104 description"], ["publish_on", "2016-05-05 14:07:33.267017"], ["created_at", "2016-05-05 14:08:33.273834"], ["updated_at", "2016-05-05 14:08:33.273834"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 105' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 105"], ["description", "Example 105 description"], ["publish_on", "2016-05-05 14:07:33.267017"], ["created_at", "2016-05-05 14:08:33.275597"], ["updated_at", "2016-05-05 14:08:33.275597"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 106' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 106"], ["description", "Example 106 description"], ["publish_on", "2016-05-05 14:07:33.267017"], ["created_at", "2016-05-05 14:08:33.277325"], ["updated_at", "2016-05-05 14:08:33.277325"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 107' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 107"], ["description", "Example 107 description"], ["publish_on", "2016-05-05 14:07:33.267017"], ["created_at", "2016-05-05 14:08:33.279028"], ["updated_at", "2016-05-05 14:08:33.279028"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 108' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 108"], ["description", "Example 108 description"], ["publish_on", "2016-05-05 14:07:33.267017"], ["created_at", "2016-05-05 14:08:33.281708"], ["updated_at", "2016-05-05 14:08:33.281708"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 109' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 109"], ["description", "Example 109 description"], ["publish_on", "2016-05-05 14:07:33.267017"], ["created_at", "2016-05-05 14:08:33.284274"], ["updated_at", "2016-05-05 14:08:33.284274"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 110' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 110"], ["description", "Example 110 description"], ["publish_on", "2016-05-05 14:07:33.267017"], ["created_at", "2016-05-05 14:08:33.286730"], ["updated_at", "2016-05-05 14:08:33.286730"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-05 14:08:33.289706"], ["updated_at", "2016-05-05 14:08:33.289706"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop2' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop2"], ["subdomain", "shop2"], ["created_at", "2016-05-05 14:08:33.292354"], ["updated_at", "2016-05-05 14:08:33.292354"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 1 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1  [["slug", "product-handle"]]
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'product' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "product"], ["description", "Example 111 description"], ["handle", "product-handle"], ["shop_id", 1], ["slug", "product-handle"], ["created_at", "2016-05-05 14:08:33.296573"], ["updated_at", "2016-05-05 14:08:33.296573"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 2 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1[0m  [["slug", "product-handle"]]
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'product' AND "products"."shop_id" = 2) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "product"], ["handle", "product-handle"], ["shop_id", 2], ["slug", "product-handle"], ["created_at", "2016-05-05 14:08:33.300506"], ["updated_at", "2016-05-05 14:08:33.300506"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------
MagazCore::ProductTest: test_two_products_with_same_handle_and_same_shop
------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 111' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example 111"], ["description", "Example 112 description"], ["created_at", "2016-05-05 14:08:33.305522"], ["updated_at", "2016-05-05 14:08:33.305522"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 112' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 112"], ["description", "Example 113 description"], ["published_at", "2016-05-05 14:07:33.306647"], ["created_at", "2016-05-05 14:08:33.307635"], ["updated_at", "2016-05-05 14:08:33.307635"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 113' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 113"], ["description", "Example 114 description"], ["published_at", "2016-05-05 14:07:33.306647"], ["created_at", "2016-05-05 14:08:33.309565"], ["updated_at", "2016-05-05 14:08:33.309565"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 114' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 114"], ["description", "Example 115 description"], ["published_at", "2016-05-05 14:07:33.306647"], ["created_at", "2016-05-05 14:08:33.311225"], ["updated_at", "2016-05-05 14:08:33.311225"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 115' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 115"], ["description", "Example 116 description"], ["published_at", "2016-05-05 14:07:33.306647"], ["created_at", "2016-05-05 14:08:33.313919"], ["updated_at", "2016-05-05 14:08:33.313919"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 116' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 116"], ["description", "Example 117 description"], ["published_at", "2016-05-05 14:07:33.306647"], ["created_at", "2016-05-05 14:08:33.316460"], ["updated_at", "2016-05-05 14:08:33.316460"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 117' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 117"], ["description", "Example 118 description"], ["published_at", "2016-05-05 14:07:33.306647"], ["created_at", "2016-05-05 14:08:33.318827"], ["updated_at", "2016-05-05 14:08:33.318827"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 118' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 118"], ["description", "Example 119 description"], ["published_at", "2016-05-05 14:07:33.306647"], ["created_at", "2016-05-05 14:08:33.321177"], ["updated_at", "2016-05-05 14:08:33.321177"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 119' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 119"], ["description", "Example 120 description"], ["published_at", "2016-05-05 14:07:33.306647"], ["created_at", "2016-05-05 14:08:33.323499"], ["updated_at", "2016-05-05 14:08:33.323499"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 120' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 120"], ["description", "Example 121 description"], ["published_at", "2016-05-05 14:07:33.306647"], ["created_at", "2016-05-05 14:08:33.325410"], ["updated_at", "2016-05-05 14:08:33.325410"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 121' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 121"], ["description", "Example 122 description"], ["published_at", "2016-05-05 14:07:33.306647"], ["created_at", "2016-05-05 14:08:33.327361"], ["updated_at", "2016-05-05 14:08:33.327361"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 122' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 122"], ["description", "Example 123 description"], ["publish_on", "2016-05-06 14:08:33.328372"], ["created_at", "2016-05-05 14:08:33.329482"], ["updated_at", "2016-05-05 14:08:33.329482"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 123' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 123"], ["description", "Example 124 description"], ["publish_on", "2016-05-06 14:08:33.328372"], ["created_at", "2016-05-05 14:08:33.331600"], ["updated_at", "2016-05-05 14:08:33.331600"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 124' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 124"], ["description", "Example 125 description"], ["publish_on", "2016-05-06 14:08:33.328372"], ["created_at", "2016-05-05 14:08:33.333394"], ["updated_at", "2016-05-05 14:08:33.333394"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 125' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 125"], ["description", "Example 126 description"], ["publish_on", "2016-05-06 14:08:33.328372"], ["created_at", "2016-05-05 14:08:33.335134"], ["updated_at", "2016-05-05 14:08:33.335134"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 126' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 126"], ["description", "Example 127 description"], ["publish_on", "2016-05-06 14:08:33.328372"], ["created_at", "2016-05-05 14:08:33.337028"], ["updated_at", "2016-05-05 14:08:33.337028"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 127' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 127"], ["description", "Example 128 description"], ["publish_on", "2016-05-06 14:08:33.328372"], ["created_at", "2016-05-05 14:08:33.339001"], ["updated_at", "2016-05-05 14:08:33.339001"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 128' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 128"], ["description", "Example 129 description"], ["publish_on", "2016-05-06 14:08:33.328372"], ["created_at", "2016-05-05 14:08:33.341080"], ["updated_at", "2016-05-05 14:08:33.341080"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 129' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 129"], ["description", "Example 130 description"], ["publish_on", "2016-05-06 14:08:33.328372"], ["created_at", "2016-05-05 14:08:33.343020"], ["updated_at", "2016-05-05 14:08:33.343020"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 130' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 130"], ["description", "Example 131 description"], ["publish_on", "2016-05-06 14:08:33.328372"], ["created_at", "2016-05-05 14:08:33.345046"], ["updated_at", "2016-05-05 14:08:33.345046"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 131' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 131"], ["description", "Example 132 description"], ["publish_on", "2016-05-06 14:08:33.328372"], ["created_at", "2016-05-05 14:08:33.347186"], ["updated_at", "2016-05-05 14:08:33.347186"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 132' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 132"], ["description", "Example 133 description"], ["publish_on", "2016-05-05 14:07:33.348260"], ["created_at", "2016-05-05 14:08:33.349133"], ["updated_at", "2016-05-05 14:08:33.349133"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 133' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 133"], ["description", "Example 134 description"], ["publish_on", "2016-05-05 14:07:33.348260"], ["created_at", "2016-05-05 14:08:33.350910"], ["updated_at", "2016-05-05 14:08:33.350910"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.2ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 134' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 134"], ["description", "Example 135 description"], ["publish_on", "2016-05-05 14:07:33.348260"], ["created_at", "2016-05-05 14:08:33.354100"], ["updated_at", "2016-05-05 14:08:33.354100"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 135' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 135"], ["description", "Example 136 description"], ["publish_on", "2016-05-05 14:07:33.348260"], ["created_at", "2016-05-05 14:08:33.356749"], ["updated_at", "2016-05-05 14:08:33.356749"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 136' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 136"], ["description", "Example 137 description"], ["publish_on", "2016-05-05 14:07:33.348260"], ["created_at", "2016-05-05 14:08:33.359209"], ["updated_at", "2016-05-05 14:08:33.359209"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 137' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 137"], ["description", "Example 138 description"], ["publish_on", "2016-05-05 14:07:33.348260"], ["created_at", "2016-05-05 14:08:33.361664"], ["updated_at", "2016-05-05 14:08:33.361664"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 138' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 138"], ["description", "Example 139 description"], ["publish_on", "2016-05-05 14:07:33.348260"], ["created_at", "2016-05-05 14:08:33.363770"], ["updated_at", "2016-05-05 14:08:33.363770"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 139' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 139"], ["description", "Example 140 description"], ["publish_on", "2016-05-05 14:07:33.348260"], ["created_at", "2016-05-05 14:08:33.365772"], ["updated_at", "2016-05-05 14:08:33.365772"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 140' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 140"], ["description", "Example 141 description"], ["publish_on", "2016-05-05 14:07:33.348260"], ["created_at", "2016-05-05 14:08:33.367717"], ["updated_at", "2016-05-05 14:08:33.367717"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 141' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 141"], ["description", "Example 142 description"], ["publish_on", "2016-05-05 14:07:33.348260"], ["created_at", "2016-05-05 14:08:33.369561"], ["updated_at", "2016-05-05 14:08:33.369561"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-05 14:08:33.371663"], ["updated_at", "2016-05-05 14:08:33.371663"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.0ms)[0m  SELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 1 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1  [["slug", "product-handle"]]
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'product1' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "product1"], ["description", "Example 143 description"], ["handle", "product-handle"], ["shop_id", 1], ["slug", "product-handle"], ["created_at", "2016-05-05 14:08:33.374519"], ["updated_at", "2016-05-05 14:08:33.374519"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 1 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1[0m  [["slug", "product-handle"]]
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'product2' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "product2"], ["handle", "product-handle"], ["shop_id", 1], ["slug", "product-handle-8c0b54ba-73b0-418b-aef7-816359848445"], ["created_at", "2016-05-05 14:08:33.378441"], ["updated_at", "2016-05-05 14:08:33.378441"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'product2' AND "products"."id" != 33 AND "products"."shop_id" = 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------
MagazCore::ProductTest: test_validation
---------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 142' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example 142"], ["description", "Example 144 description"], ["created_at", "2016-05-05 14:08:33.385851"], ["updated_at", "2016-05-05 14:08:33.385851"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 143' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 143"], ["description", "Example 145 description"], ["published_at", "2016-05-05 14:07:33.387330"], ["created_at", "2016-05-05 14:08:33.388637"], ["updated_at", "2016-05-05 14:08:33.388637"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 144' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 144"], ["description", "Example 146 description"], ["published_at", "2016-05-05 14:07:33.387330"], ["created_at", "2016-05-05 14:08:33.391348"], ["updated_at", "2016-05-05 14:08:33.391348"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 145' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 145"], ["description", "Example 147 description"], ["published_at", "2016-05-05 14:07:33.387330"], ["created_at", "2016-05-05 14:08:33.393951"], ["updated_at", "2016-05-05 14:08:33.393951"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 146' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 146"], ["description", "Example 148 description"], ["published_at", "2016-05-05 14:07:33.387330"], ["created_at", "2016-05-05 14:08:33.395999"], ["updated_at", "2016-05-05 14:08:33.395999"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 147' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 147"], ["description", "Example 149 description"], ["published_at", "2016-05-05 14:07:33.387330"], ["created_at", "2016-05-05 14:08:33.397937"], ["updated_at", "2016-05-05 14:08:33.397937"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 148' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 148"], ["description", "Example 150 description"], ["published_at", "2016-05-05 14:07:33.387330"], ["created_at", "2016-05-05 14:08:33.399768"], ["updated_at", "2016-05-05 14:08:33.399768"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 149' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 149"], ["description", "Example 151 description"], ["published_at", "2016-05-05 14:07:33.387330"], ["created_at", "2016-05-05 14:08:33.401624"], ["updated_at", "2016-05-05 14:08:33.401624"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 150' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 150"], ["description", "Example 152 description"], ["published_at", "2016-05-05 14:07:33.387330"], ["created_at", "2016-05-05 14:08:33.403450"], ["updated_at", "2016-05-05 14:08:33.403450"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 151' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 151"], ["description", "Example 153 description"], ["published_at", "2016-05-05 14:07:33.387330"], ["created_at", "2016-05-05 14:08:33.405200"], ["updated_at", "2016-05-05 14:08:33.405200"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 152' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 152"], ["description", "Example 154 description"], ["published_at", "2016-05-05 14:07:33.387330"], ["created_at", "2016-05-05 14:08:33.406852"], ["updated_at", "2016-05-05 14:08:33.406852"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 153' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 153"], ["description", "Example 155 description"], ["publish_on", "2016-05-06 14:08:33.408066"], ["created_at", "2016-05-05 14:08:33.409528"], ["updated_at", "2016-05-05 14:08:33.409528"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 154' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 154"], ["description", "Example 156 description"], ["publish_on", "2016-05-06 14:08:33.408066"], ["created_at", "2016-05-05 14:08:33.412265"], ["updated_at", "2016-05-05 14:08:33.412265"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 155' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 155"], ["description", "Example 157 description"], ["publish_on", "2016-05-06 14:08:33.408066"], ["created_at", "2016-05-05 14:08:33.414815"], ["updated_at", "2016-05-05 14:08:33.414815"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 156' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 156"], ["description", "Example 158 description"], ["publish_on", "2016-05-06 14:08:33.408066"], ["created_at", "2016-05-05 14:08:33.417417"], ["updated_at", "2016-05-05 14:08:33.417417"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 157' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 157"], ["description", "Example 159 description"], ["publish_on", "2016-05-06 14:08:33.408066"], ["created_at", "2016-05-05 14:08:33.419693"], ["updated_at", "2016-05-05 14:08:33.419693"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 158' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 158"], ["description", "Example 160 description"], ["publish_on", "2016-05-06 14:08:33.408066"], ["created_at", "2016-05-05 14:08:33.422034"], ["updated_at", "2016-05-05 14:08:33.422034"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 159' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 159"], ["description", "Example 161 description"], ["publish_on", "2016-05-06 14:08:33.408066"], ["created_at", "2016-05-05 14:08:33.424269"], ["updated_at", "2016-05-05 14:08:33.424269"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 160' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 160"], ["description", "Example 162 description"], ["publish_on", "2016-05-06 14:08:33.408066"], ["created_at", "2016-05-05 14:08:33.426571"], ["updated_at", "2016-05-05 14:08:33.426571"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 161' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 161"], ["description", "Example 163 description"], ["publish_on", "2016-05-06 14:08:33.408066"], ["created_at", "2016-05-05 14:08:33.428509"], ["updated_at", "2016-05-05 14:08:33.428509"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 162' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 162"], ["description", "Example 164 description"], ["publish_on", "2016-05-06 14:08:33.408066"], ["created_at", "2016-05-05 14:08:33.430435"], ["updated_at", "2016-05-05 14:08:33.430435"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 163' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 163"], ["description", "Example 165 description"], ["publish_on", "2016-05-05 14:07:33.431499"], ["created_at", "2016-05-05 14:08:33.432498"], ["updated_at", "2016-05-05 14:08:33.432498"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 164' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 164"], ["description", "Example 166 description"], ["publish_on", "2016-05-05 14:07:33.431499"], ["created_at", "2016-05-05 14:08:33.434334"], ["updated_at", "2016-05-05 14:08:33.434334"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 165' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 165"], ["description", "Example 167 description"], ["publish_on", "2016-05-05 14:07:33.431499"], ["created_at", "2016-05-05 14:08:33.437010"], ["updated_at", "2016-05-05 14:08:33.437010"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 166' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 166"], ["description", "Example 168 description"], ["publish_on", "2016-05-05 14:07:33.431499"], ["created_at", "2016-05-05 14:08:33.439001"], ["updated_at", "2016-05-05 14:08:33.439001"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 167' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 167"], ["description", "Example 169 description"], ["publish_on", "2016-05-05 14:07:33.431499"], ["created_at", "2016-05-05 14:08:33.440887"], ["updated_at", "2016-05-05 14:08:33.440887"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 168' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 168"], ["description", "Example 170 description"], ["publish_on", "2016-05-05 14:07:33.431499"], ["created_at", "2016-05-05 14:08:33.442635"], ["updated_at", "2016-05-05 14:08:33.442635"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 169' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 169"], ["description", "Example 171 description"], ["publish_on", "2016-05-05 14:07:33.431499"], ["created_at", "2016-05-05 14:08:33.444383"], ["updated_at", "2016-05-05 14:08:33.444383"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 170' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 170"], ["description", "Example 172 description"], ["publish_on", "2016-05-05 14:07:33.431499"], ["created_at", "2016-05-05 14:08:33.446136"], ["updated_at", "2016-05-05 14:08:33.446136"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 171' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 171"], ["description", "Example 173 description"], ["publish_on", "2016-05-05 14:07:33.431499"], ["created_at", "2016-05-05 14:08:33.448449"], ["updated_at", "2016-05-05 14:08:33.448449"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 172' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 172"], ["description", "Example 174 description"], ["publish_on", "2016-05-05 14:07:33.431499"], ["created_at", "2016-05-05 14:08:33.451158"], ["updated_at", "2016-05-05 14:08:33.451158"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
MagazCore::ProductTest: test_visibility_scopes
----------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 173' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example 173"], ["description", "Example 175 description"], ["created_at", "2016-05-05 14:08:33.457343"], ["updated_at", "2016-05-05 14:08:33.457343"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 174' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 174"], ["description", "Example 176 description"], ["published_at", "2016-05-05 14:07:33.458807"], ["created_at", "2016-05-05 14:08:33.460043"], ["updated_at", "2016-05-05 14:08:33.460043"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 175' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 175"], ["description", "Example 177 description"], ["published_at", "2016-05-05 14:07:33.458807"], ["created_at", "2016-05-05 14:08:33.462369"], ["updated_at", "2016-05-05 14:08:33.462369"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 176' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 176"], ["description", "Example 178 description"], ["published_at", "2016-05-05 14:07:33.458807"], ["created_at", "2016-05-05 14:08:33.464728"], ["updated_at", "2016-05-05 14:08:33.464728"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 177' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 177"], ["description", "Example 179 description"], ["published_at", "2016-05-05 14:07:33.458807"], ["created_at", "2016-05-05 14:08:33.466869"], ["updated_at", "2016-05-05 14:08:33.466869"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 178' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 178"], ["description", "Example 180 description"], ["published_at", "2016-05-05 14:07:33.458807"], ["created_at", "2016-05-05 14:08:33.468722"], ["updated_at", "2016-05-05 14:08:33.468722"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 179' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 179"], ["description", "Example 181 description"], ["published_at", "2016-05-05 14:07:33.458807"], ["created_at", "2016-05-05 14:08:33.470464"], ["updated_at", "2016-05-05 14:08:33.470464"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 180' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 180"], ["description", "Example 182 description"], ["published_at", "2016-05-05 14:07:33.458807"], ["created_at", "2016-05-05 14:08:33.472338"], ["updated_at", "2016-05-05 14:08:33.472338"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 181' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 181"], ["description", "Example 183 description"], ["published_at", "2016-05-05 14:07:33.458807"], ["created_at", "2016-05-05 14:08:33.474050"], ["updated_at", "2016-05-05 14:08:33.474050"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 182' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 182"], ["description", "Example 184 description"], ["published_at", "2016-05-05 14:07:33.458807"], ["created_at", "2016-05-05 14:08:33.475691"], ["updated_at", "2016-05-05 14:08:33.475691"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 183' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 183"], ["description", "Example 185 description"], ["published_at", "2016-05-05 14:07:33.458807"], ["created_at", "2016-05-05 14:08:33.477325"], ["updated_at", "2016-05-05 14:08:33.477325"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 184' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 184"], ["description", "Example 186 description"], ["publish_on", "2016-05-06 14:08:33.478134"], ["created_at", "2016-05-05 14:08:33.479050"], ["updated_at", "2016-05-05 14:08:33.479050"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 185' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 185"], ["description", "Example 187 description"], ["publish_on", "2016-05-06 14:08:33.478134"], ["created_at", "2016-05-05 14:08:33.481801"], ["updated_at", "2016-05-05 14:08:33.481801"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 186' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 186"], ["description", "Example 188 description"], ["publish_on", "2016-05-06 14:08:33.478134"], ["created_at", "2016-05-05 14:08:33.484374"], ["updated_at", "2016-05-05 14:08:33.484374"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 187' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 187"], ["description", "Example 189 description"], ["publish_on", "2016-05-06 14:08:33.478134"], ["created_at", "2016-05-05 14:08:33.486863"], ["updated_at", "2016-05-05 14:08:33.486863"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 188' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 188"], ["description", "Example 190 description"], ["publish_on", "2016-05-06 14:08:33.478134"], ["created_at", "2016-05-05 14:08:33.489362"], ["updated_at", "2016-05-05 14:08:33.489362"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 189' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 189"], ["description", "Example 191 description"], ["publish_on", "2016-05-06 14:08:33.478134"], ["created_at", "2016-05-05 14:08:33.491601"], ["updated_at", "2016-05-05 14:08:33.491601"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 190' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 190"], ["description", "Example 192 description"], ["publish_on", "2016-05-06 14:08:33.478134"], ["created_at", "2016-05-05 14:08:33.493875"], ["updated_at", "2016-05-05 14:08:33.493875"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 191' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 191"], ["description", "Example 193 description"], ["publish_on", "2016-05-06 14:08:33.478134"], ["created_at", "2016-05-05 14:08:33.496079"], ["updated_at", "2016-05-05 14:08:33.496079"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 192' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 192"], ["description", "Example 194 description"], ["publish_on", "2016-05-06 14:08:33.478134"], ["created_at", "2016-05-05 14:08:33.498151"], ["updated_at", "2016-05-05 14:08:33.498151"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 193' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 193"], ["description", "Example 195 description"], ["publish_on", "2016-05-06 14:08:33.478134"], ["created_at", "2016-05-05 14:08:33.499921"], ["updated_at", "2016-05-05 14:08:33.499921"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 194' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 194"], ["description", "Example 196 description"], ["publish_on", "2016-05-05 14:07:33.500815"], ["created_at", "2016-05-05 14:08:33.501810"], ["updated_at", "2016-05-05 14:08:33.501810"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 195' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 195"], ["description", "Example 197 description"], ["publish_on", "2016-05-05 14:07:33.500815"], ["created_at", "2016-05-05 14:08:33.503962"], ["updated_at", "2016-05-05 14:08:33.503962"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 196' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 196"], ["description", "Example 198 description"], ["publish_on", "2016-05-05 14:07:33.500815"], ["created_at", "2016-05-05 14:08:33.505836"], ["updated_at", "2016-05-05 14:08:33.505836"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 197' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 197"], ["description", "Example 199 description"], ["publish_on", "2016-05-05 14:07:33.500815"], ["created_at", "2016-05-05 14:08:33.507635"], ["updated_at", "2016-05-05 14:08:33.507635"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 198' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 198"], ["description", "Example 200 description"], ["publish_on", "2016-05-05 14:07:33.500815"], ["created_at", "2016-05-05 14:08:33.509542"], ["updated_at", "2016-05-05 14:08:33.509542"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 199' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 199"], ["description", "Example 201 description"], ["publish_on", "2016-05-05 14:07:33.500815"], ["created_at", "2016-05-05 14:08:33.511637"], ["updated_at", "2016-05-05 14:08:33.511637"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 200' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 200"], ["description", "Example 202 description"], ["publish_on", "2016-05-05 14:07:33.500815"], ["created_at", "2016-05-05 14:08:33.514309"], ["updated_at", "2016-05-05 14:08:33.514309"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 201' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 201"], ["description", "Example 203 description"], ["publish_on", "2016-05-05 14:07:33.500815"], ["created_at", "2016-05-05 14:08:33.516880"], ["updated_at", "2016-05-05 14:08:33.516880"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 202' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 202"], ["description", "Example 204 description"], ["publish_on", "2016-05-05 14:07:33.500815"], ["created_at", "2016-05-05 14:08:33.519371"], ["updated_at", "2016-05-05 14:08:33.519371"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 203' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 203"], ["description", "Example 205 description"], ["publish_on", "2016-05-05 14:07:33.500815"], ["created_at", "2016-05-05 14:08:33.521855"], ["updated_at", "2016-05-05 14:08:33.521855"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Load (0.2ms)[0m  SELECT "products".* FROM "products" WHERE "products"."publish_on" IS NULL AND ("products"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-05 14:08:33.523000')
  [1m[36mMagazCore::Product Load (0.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE (publish_on >= '2016-05-05 14:08:33.523799') AND "products"."published_at" IS NULL[0m
  [1m[35mMagazCore::Product Load (0.1ms)[0m  SELECT "products".* FROM "products" WHERE (publish_on <= '2016-05-05 14:08:33.524409') AND "products"."published_at" IS NULL
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
MagazCore::ProductTest: test_visibility_scopes_and_methods
----------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 204' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example 204"], ["description", "Example 206 description"], ["created_at", "2016-05-05 14:08:33.529124"], ["updated_at", "2016-05-05 14:08:33.529124"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 205' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 205"], ["description", "Example 207 description"], ["published_at", "2016-05-05 14:07:33.530264"], ["created_at", "2016-05-05 14:08:33.531242"], ["updated_at", "2016-05-05 14:08:33.531242"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 206' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 206"], ["description", "Example 208 description"], ["published_at", "2016-05-05 14:07:33.530264"], ["created_at", "2016-05-05 14:08:33.533144"], ["updated_at", "2016-05-05 14:08:33.533144"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 207' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 207"], ["description", "Example 209 description"], ["published_at", "2016-05-05 14:07:33.530264"], ["created_at", "2016-05-05 14:08:33.534842"], ["updated_at", "2016-05-05 14:08:33.534842"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 208' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 208"], ["description", "Example 210 description"], ["published_at", "2016-05-05 14:07:33.530264"], ["created_at", "2016-05-05 14:08:33.537233"], ["updated_at", "2016-05-05 14:08:33.537233"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 209' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 209"], ["description", "Example 211 description"], ["published_at", "2016-05-05 14:07:33.530264"], ["created_at", "2016-05-05 14:08:33.539044"], ["updated_at", "2016-05-05 14:08:33.539044"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 210' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 210"], ["description", "Example 212 description"], ["published_at", "2016-05-05 14:07:33.530264"], ["created_at", "2016-05-05 14:08:33.540755"], ["updated_at", "2016-05-05 14:08:33.540755"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 211' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 211"], ["description", "Example 213 description"], ["published_at", "2016-05-05 14:07:33.530264"], ["created_at", "2016-05-05 14:08:33.542426"], ["updated_at", "2016-05-05 14:08:33.542426"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 212' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 212"], ["description", "Example 214 description"], ["published_at", "2016-05-05 14:07:33.530264"], ["created_at", "2016-05-05 14:08:33.544681"], ["updated_at", "2016-05-05 14:08:33.544681"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 213' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 213"], ["description", "Example 215 description"], ["published_at", "2016-05-05 14:07:33.530264"], ["created_at", "2016-05-05 14:08:33.547188"], ["updated_at", "2016-05-05 14:08:33.547188"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 214' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 214"], ["description", "Example 216 description"], ["published_at", "2016-05-05 14:07:33.530264"], ["created_at", "2016-05-05 14:08:33.549595"], ["updated_at", "2016-05-05 14:08:33.549595"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 215' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 215"], ["description", "Example 217 description"], ["publish_on", "2016-05-06 14:08:33.550757"], ["created_at", "2016-05-05 14:08:33.552082"], ["updated_at", "2016-05-05 14:08:33.552082"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 216' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 216"], ["description", "Example 218 description"], ["publish_on", "2016-05-06 14:08:33.550757"], ["created_at", "2016-05-05 14:08:33.554547"], ["updated_at", "2016-05-05 14:08:33.554547"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 217' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 217"], ["description", "Example 219 description"], ["publish_on", "2016-05-06 14:08:33.550757"], ["created_at", "2016-05-05 14:08:33.556598"], ["updated_at", "2016-05-05 14:08:33.556598"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 218' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 218"], ["description", "Example 220 description"], ["publish_on", "2016-05-06 14:08:33.550757"], ["created_at", "2016-05-05 14:08:33.558549"], ["updated_at", "2016-05-05 14:08:33.558549"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 219' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 219"], ["description", "Example 221 description"], ["publish_on", "2016-05-06 14:08:33.550757"], ["created_at", "2016-05-05 14:08:33.560767"], ["updated_at", "2016-05-05 14:08:33.560767"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 220' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 220"], ["description", "Example 222 description"], ["publish_on", "2016-05-06 14:08:33.550757"], ["created_at", "2016-05-05 14:08:33.562933"], ["updated_at", "2016-05-05 14:08:33.562933"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 221' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 221"], ["description", "Example 223 description"], ["publish_on", "2016-05-06 14:08:33.550757"], ["created_at", "2016-05-05 14:08:33.565019"], ["updated_at", "2016-05-05 14:08:33.565019"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 222' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 222"], ["description", "Example 224 description"], ["publish_on", "2016-05-06 14:08:33.550757"], ["created_at", "2016-05-05 14:08:33.566894"], ["updated_at", "2016-05-05 14:08:33.566894"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 223' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 223"], ["description", "Example 225 description"], ["publish_on", "2016-05-06 14:08:33.550757"], ["created_at", "2016-05-05 14:08:33.568879"], ["updated_at", "2016-05-05 14:08:33.568879"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 224' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 224"], ["description", "Example 226 description"], ["publish_on", "2016-05-06 14:08:33.550757"], ["created_at", "2016-05-05 14:08:33.571296"], ["updated_at", "2016-05-05 14:08:33.571296"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 225' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 225"], ["description", "Example 227 description"], ["publish_on", "2016-05-05 14:07:33.572277"], ["created_at", "2016-05-05 14:08:33.573233"], ["updated_at", "2016-05-05 14:08:33.573233"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 226' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 226"], ["description", "Example 228 description"], ["publish_on", "2016-05-05 14:07:33.572277"], ["created_at", "2016-05-05 14:08:33.575070"], ["updated_at", "2016-05-05 14:08:33.575070"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 227' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 227"], ["description", "Example 229 description"], ["publish_on", "2016-05-05 14:07:33.572277"], ["created_at", "2016-05-05 14:08:33.577780"], ["updated_at", "2016-05-05 14:08:33.577780"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 228' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 228"], ["description", "Example 230 description"], ["publish_on", "2016-05-05 14:07:33.572277"], ["created_at", "2016-05-05 14:08:33.580372"], ["updated_at", "2016-05-05 14:08:33.580372"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 229' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 229"], ["description", "Example 231 description"], ["publish_on", "2016-05-05 14:07:33.572277"], ["created_at", "2016-05-05 14:08:33.582860"], ["updated_at", "2016-05-05 14:08:33.582860"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 230' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 230"], ["description", "Example 232 description"], ["publish_on", "2016-05-05 14:07:33.572277"], ["created_at", "2016-05-05 14:08:33.585385"], ["updated_at", "2016-05-05 14:08:33.585385"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 231' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 231"], ["description", "Example 233 description"], ["publish_on", "2016-05-05 14:07:33.572277"], ["created_at", "2016-05-05 14:08:33.587544"], ["updated_at", "2016-05-05 14:08:33.587544"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 232' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 232"], ["description", "Example 234 description"], ["publish_on", "2016-05-05 14:07:33.572277"], ["created_at", "2016-05-05 14:08:33.589611"], ["updated_at", "2016-05-05 14:08:33.589611"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 233' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 233"], ["description", "Example 235 description"], ["publish_on", "2016-05-05 14:07:33.572277"], ["created_at", "2016-05-05 14:08:33.591576"], ["updated_at", "2016-05-05 14:08:33.591576"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 234' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 234"], ["description", "Example 236 description"], ["publish_on", "2016-05-05 14:07:33.572277"], ["created_at", "2016-05-05 14:08:33.593508"], ["updated_at", "2016-05-05 14:08:33.593508"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Load (0.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."publish_on" IS NULL AND ("products"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-05 14:08:33.594503')[0m
  [1m[35mMagazCore::Product Load (0.1ms)[0m  SELECT "products".* FROM "products" WHERE (publish_on >= '2016-05-05 14:08:33.595503') AND "products"."published_at" IS NULL
  [1m[36mMagazCore::Product Load (0.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE (publish_on <= '2016-05-05 14:08:33.596071') AND "products"."published_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
MagazCore::ProductTest: test_worker_created
-------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 235' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example 235"], ["description", "Example 237 description"], ["created_at", "2016-05-05 14:08:33.599852"], ["updated_at", "2016-05-05 14:08:33.599852"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 236' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 236"], ["description", "Example 238 description"], ["published_at", "2016-05-05 14:07:33.600890"], ["created_at", "2016-05-05 14:08:33.601911"], ["updated_at", "2016-05-05 14:08:33.601911"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 237' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 237"], ["description", "Example 239 description"], ["published_at", "2016-05-05 14:07:33.600890"], ["created_at", "2016-05-05 14:08:33.603896"], ["updated_at", "2016-05-05 14:08:33.603896"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 238' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 238"], ["description", "Example 240 description"], ["published_at", "2016-05-05 14:07:33.600890"], ["created_at", "2016-05-05 14:08:33.605545"], ["updated_at", "2016-05-05 14:08:33.605545"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 239' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 239"], ["description", "Example 241 description"], ["published_at", "2016-05-05 14:07:33.600890"], ["created_at", "2016-05-05 14:08:33.607203"], ["updated_at", "2016-05-05 14:08:33.607203"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 240' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 240"], ["description", "Example 242 description"], ["published_at", "2016-05-05 14:07:33.600890"], ["created_at", "2016-05-05 14:08:33.610062"], ["updated_at", "2016-05-05 14:08:33.610062"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 241' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 241"], ["description", "Example 243 description"], ["published_at", "2016-05-05 14:07:33.600890"], ["created_at", "2016-05-05 14:08:33.612524"], ["updated_at", "2016-05-05 14:08:33.612524"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 242' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 242"], ["description", "Example 244 description"], ["published_at", "2016-05-05 14:07:33.600890"], ["created_at", "2016-05-05 14:08:33.614930"], ["updated_at", "2016-05-05 14:08:33.614930"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 243' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 243"], ["description", "Example 245 description"], ["published_at", "2016-05-05 14:07:33.600890"], ["created_at", "2016-05-05 14:08:33.617288"], ["updated_at", "2016-05-05 14:08:33.617288"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 244' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 244"], ["description", "Example 246 description"], ["published_at", "2016-05-05 14:07:33.600890"], ["created_at", "2016-05-05 14:08:33.619369"], ["updated_at", "2016-05-05 14:08:33.619369"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 245' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 245"], ["description", "Example 247 description"], ["published_at", "2016-05-05 14:07:33.600890"], ["created_at", "2016-05-05 14:08:33.621306"], ["updated_at", "2016-05-05 14:08:33.621306"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 246' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 246"], ["description", "Example 248 description"], ["publish_on", "2016-05-06 14:08:33.622235"], ["created_at", "2016-05-05 14:08:33.623166"], ["updated_at", "2016-05-05 14:08:33.623166"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 247' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 247"], ["description", "Example 249 description"], ["publish_on", "2016-05-06 14:08:33.622235"], ["created_at", "2016-05-05 14:08:33.625163"], ["updated_at", "2016-05-05 14:08:33.625163"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 248' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 248"], ["description", "Example 250 description"], ["publish_on", "2016-05-06 14:08:33.622235"], ["created_at", "2016-05-05 14:08:33.626985"], ["updated_at", "2016-05-05 14:08:33.626985"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 249' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 249"], ["description", "Example 251 description"], ["publish_on", "2016-05-06 14:08:33.622235"], ["created_at", "2016-05-05 14:08:33.628738"], ["updated_at", "2016-05-05 14:08:33.628738"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 250' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 250"], ["description", "Example 252 description"], ["publish_on", "2016-05-06 14:08:33.622235"], ["created_at", "2016-05-05 14:08:33.630463"], ["updated_at", "2016-05-05 14:08:33.630463"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 251' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 251"], ["description", "Example 253 description"], ["publish_on", "2016-05-06 14:08:33.622235"], ["created_at", "2016-05-05 14:08:33.632805"], ["updated_at", "2016-05-05 14:08:33.632805"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 252' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 252"], ["description", "Example 254 description"], ["publish_on", "2016-05-06 14:08:33.622235"], ["created_at", "2016-05-05 14:08:33.635533"], ["updated_at", "2016-05-05 14:08:33.635533"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 253' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 253"], ["description", "Example 255 description"], ["publish_on", "2016-05-06 14:08:33.622235"], ["created_at", "2016-05-05 14:08:33.638264"], ["updated_at", "2016-05-05 14:08:33.638264"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 254' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 254"], ["description", "Example 256 description"], ["publish_on", "2016-05-06 14:08:33.622235"], ["created_at", "2016-05-05 14:08:33.640945"], ["updated_at", "2016-05-05 14:08:33.640945"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 255' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 255"], ["description", "Example 257 description"], ["publish_on", "2016-05-06 14:08:33.622235"], ["created_at", "2016-05-05 14:08:33.643188"], ["updated_at", "2016-05-05 14:08:33.643188"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 256' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 256"], ["description", "Example 258 description"], ["publish_on", "2016-05-05 14:07:33.644246"], ["created_at", "2016-05-05 14:08:33.645279"], ["updated_at", "2016-05-05 14:08:33.645279"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 257' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 257"], ["description", "Example 259 description"], ["publish_on", "2016-05-05 14:07:33.644246"], ["created_at", "2016-05-05 14:08:33.647221"], ["updated_at", "2016-05-05 14:08:33.647221"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 258' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 258"], ["description", "Example 260 description"], ["publish_on", "2016-05-05 14:07:33.644246"], ["created_at", "2016-05-05 14:08:33.649266"], ["updated_at", "2016-05-05 14:08:33.649266"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 259' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 259"], ["description", "Example 261 description"], ["publish_on", "2016-05-05 14:07:33.644246"], ["created_at", "2016-05-05 14:08:33.651149"], ["updated_at", "2016-05-05 14:08:33.651149"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 260' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 260"], ["description", "Example 262 description"], ["publish_on", "2016-05-05 14:07:33.644246"], ["created_at", "2016-05-05 14:08:33.653563"], ["updated_at", "2016-05-05 14:08:33.653563"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 261' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 261"], ["description", "Example 263 description"], ["publish_on", "2016-05-05 14:07:33.644246"], ["created_at", "2016-05-05 14:08:33.655530"], ["updated_at", "2016-05-05 14:08:33.655530"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 262' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 262"], ["description", "Example 264 description"], ["publish_on", "2016-05-05 14:07:33.644246"], ["created_at", "2016-05-05 14:08:33.657402"], ["updated_at", "2016-05-05 14:08:33.657402"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 263' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 263"], ["description", "Example 265 description"], ["publish_on", "2016-05-05 14:07:33.644246"], ["created_at", "2016-05-05 14:08:33.659197"], ["updated_at", "2016-05-05 14:08:33.659197"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 264' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 264"], ["description", "Example 266 description"], ["publish_on", "2016-05-05 14:07:33.644246"], ["created_at", "2016-05-05 14:08:33.661093"], ["updated_at", "2016-05-05 14:08:33.661093"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 265' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 265"], ["description", "Example 267 description"], ["publish_on", "2016-05-05 14:07:33.644246"], ["created_at", "2016-05-05 14:08:33.662896"], ["updated_at", "2016-05-05 14:08:33.662896"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 235' AND "products"."id" != 1 AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "products" SET "publish_on" = ?, "updated_at" = ? WHERE "products"."id" = ?  [["publish_on", "2016-05-07 14:08:33.664037"], ["updated_at", "2016-05-05 14:08:33.664935"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
MagazCore::CheckoutTest: test_attributes
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example24' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example24"], ["subdomain", "example24"], ["created_at", "2016-05-05 14:08:33.670407"], ["updated_at", "2016-05-05 14:08:33.670407"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 14 "], ["last_name", "Last Name 14"], ["email", "customer14@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 1], ["created_at", "2016-05-05 14:08:33.673801"], ["updated_at", "2016-05-05 14:08:33.673801"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 266' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 266"], ["description", "Example 268 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:33.675868"], ["updated_at", "2016-05-05 14:08:33.675868"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 267' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 267"], ["description", "Example 269 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:33.677912"], ["updated_at", "2016-05-05 14:08:33.677912"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
MagazCore::CheckoutTest: test_items
-----------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example25' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example25"], ["subdomain", "example25"], ["created_at", "2016-05-05 14:08:33.681686"], ["updated_at", "2016-05-05 14:08:33.681686"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 15 "], ["last_name", "Last Name 15"], ["email", "customer15@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 1], ["created_at", "2016-05-05 14:08:33.684796"], ["updated_at", "2016-05-05 14:08:33.684796"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 268' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 268"], ["description", "Example 270 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:33.686599"], ["updated_at", "2016-05-05 14:08:33.686599"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 269' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 269"], ["description", "Example 271 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:33.689031"], ["updated_at", "2016-05-05 14:08:33.689031"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."checkout_id" = ?  [["checkout_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------
MagazCore::CheckoutTest: test_note
----------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example26' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example26"], ["subdomain", "example26"], ["created_at", "2016-05-05 14:08:33.693937"], ["updated_at", "2016-05-05 14:08:33.693937"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 16 "], ["last_name", "Last Name 16"], ["email", "customer16@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["customer_id", 1], ["created_at", "2016-05-05 14:08:33.697121"], ["updated_at", "2016-05-05 14:08:33.697121"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 270' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 270"], ["description", "Example 272 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:33.698995"], ["updated_at", "2016-05-05 14:08:33.698995"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 271' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 271"], ["description", "Example 273 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:33.700718"], ["updated_at", "2016-05-05 14:08:33.700718"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MagazCore::CheckoutTest: test_total_price
-----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example27' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example27"], ["subdomain", "example27"], ["created_at", "2016-05-05 14:08:33.705465"], ["updated_at", "2016-05-05 14:08:33.705465"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 17 "], ["last_name", "Last Name 17"], ["email", "customer17@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["customer_id", 1], ["created_at", "2016-05-05 14:08:33.708797"], ["updated_at", "2016-05-05 14:08:33.708797"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 272' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 272"], ["description", "Example 274 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:33.710630"], ["updated_at", "2016-05-05 14:08:33.710630"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 273' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 273"], ["description", "Example 275 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:33.713108"], ["updated_at", "2016-05-05 14:08:33.713108"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::LineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."checkout_id" = ?[0m  [["checkout_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
MagazCore::CheckoutTest: test_total_weight
------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example28' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example28"], ["subdomain", "example28"], ["created_at", "2016-05-05 14:08:33.718242"], ["updated_at", "2016-05-05 14:08:33.718242"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 18 "], ["last_name", "Last Name 18"], ["email", "customer18@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 1], ["created_at", "2016-05-05 14:08:33.721941"], ["updated_at", "2016-05-05 14:08:33.721941"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 274' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 274"], ["description", "Example 276 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:33.723905"], ["updated_at", "2016-05-05 14:08:33.723905"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 275' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 275"], ["description", "Example 277 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:33.725943"], ["updated_at", "2016-05-05 14:08:33.725943"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."checkout_id" = ?  [["checkout_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::AddShippingCountryTest: test_should_create_shipping_country_with_valid_params
------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example29' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example29"], ["subdomain", "example29"], ["created_at", "2016-05-05 14:08:33.730754"], ["updated_at", "2016-05-05 14:08:33.730754"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "14"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?[0m  [["shop_id", 1], ["name", "AF"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("shop_id", "tax", "name") VALUES (?, ?, ?)  [["shop_id", 1], ["tax", "1488"], ["name", "AF"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::AddShippingCountryTest: test_should_not_create_existing_shipping_country
-------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example30' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example30"], ["subdomain", "example30"], ["created_at", "2016-05-05 14:08:33.750286"], ["updated_at", "2016-05-05 14:08:33.750286"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "15"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?  [["shop_id", 1], ["name", "UA"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?[0m  [["shop_id", 1], ["name", "UA"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::AddShippingCountryTest: test_should_not_create_shipping_country_with_blank_params
----------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example31' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example31"], ["subdomain", "example31"], ["created_at", "2016-05-05 14:08:33.758963"], ["updated_at", "2016-05-05 14:08:33.758963"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "16"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::AddShippingCountryTest: test_should_not_create_shipping_country_with_invalid_name
----------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example32' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example32"], ["subdomain", "example32"], ["created_at", "2016-05-05 14:08:33.768227"], ["updated_at", "2016-05-05 14:08:33.768227"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "17"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?  [["shop_id", 1], ["name", "AX"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?[0m  [["shop_id", 1], ["name", "AX"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::AddShippingCountryTest: test_should_not_create_shipping_country_with_invalid_tax
---------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example33' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example33"], ["subdomain", "example33"], ["created_at", "2016-05-05 14:08:33.779086"], ["updated_at", "2016-05-05 14:08:33.779086"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "18"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?[0m  [["shop_id", 1], ["name", "AF"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?  [["shop_id", 1], ["name", "AF"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------
MagazCore::ThemeServices::ResolverTest: test_find_all_-_returns_empty_array
---------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme7"], ["created_at", "2016-05-05 14:08:33.846897"], ["updated_at", "2016-05-05 14:08:33.846897"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.848177"], ["updated_at", "2016-05-05 14:08:33.848177"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.849108"], ["updated_at", "2016-05-05 14:08:33.849108"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.850000"], ["updated_at", "2016-05-05 14:08:33.850000"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.851028"], ["updated_at", "2016-05-05 14:08:33.851028"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.851835"], ["updated_at", "2016-05-05 14:08:33.851835"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.852742"], ["updated_at", "2016-05-05 14:08:33.852742"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.853556"], ["updated_at", "2016-05-05 14:08:33.853556"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.854274"], ["updated_at", "2016-05-05 14:08:33.854274"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.855014"], ["updated_at", "2016-05-05 14:08:33.855014"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.855734"], ["updated_at", "2016-05-05 14:08:33.855734"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.856496"], ["updated_at", "2016-05-05 14:08:33.856496"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.857287"], ["updated_at", "2016-05-05 14:08:33.857287"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.858094"], ["updated_at", "2016-05-05 14:08:33.858094"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.859055"], ["updated_at", "2016-05-05 14:08:33.859055"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.859835"], ["updated_at", "2016-05-05 14:08:33.859835"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.860754"], ["updated_at", "2016-05-05 14:08:33.860754"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.861633"], ["updated_at", "2016-05-05 14:08:33.861633"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.862478"], ["updated_at", "2016-05-05 14:08:33.862478"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.863266"], ["updated_at", "2016-05-05 14:08:33.863266"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.864072"], ["updated_at", "2016-05-05 14:08:33.864072"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.865013"], ["updated_at", "2016-05-05 14:08:33.865013"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.865824"], ["updated_at", "2016-05-05 14:08:33.865824"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.866587"], ["updated_at", "2016-05-05 14:08:33.866587"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.867384"], ["updated_at", "2016-05-05 14:08:33.867384"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.868147"], ["updated_at", "2016-05-05 14:08:33.868147"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.868945"], ["updated_at", "2016-05-05 14:08:33.868945"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.870317"], ["updated_at", "2016-05-05 14:08:33.870317"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.871467"], ["updated_at", "2016-05-05 14:08:33.871467"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.872624"], ["updated_at", "2016-05-05 14:08:33.872624"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.873777"], ["updated_at", "2016-05-05 14:08:33.873777"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.874955"], ["updated_at", "2016-05-05 14:08:33.874955"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.876037"], ["updated_at", "2016-05-05 14:08:33.876037"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.877310"], ["updated_at", "2016-05-05 14:08:33.877310"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.878376"], ["updated_at", "2016-05-05 14:08:33.878376"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.879484"], ["updated_at", "2016-05-05 14:08:33.879484"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.880460"], ["updated_at", "2016-05-05 14:08:33.880460"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.881362"], ["updated_at", "2016-05-05 14:08:33.881362"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.882225"], ["updated_at", "2016-05-05 14:08:33.882225"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.883276"], ["updated_at", "2016-05-05 14:08:33.883276"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.884166"], ["updated_at", "2016-05-05 14:08:33.884166"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.884978"], ["updated_at", "2016-05-05 14:08:33.884978"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.885947"], ["updated_at", "2016-05-05 14:08:33.885947"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.886887"], ["updated_at", "2016-05-05 14:08:33.886887"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.887955"], ["updated_at", "2016-05-05 14:08:33.887955"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.888911"], ["updated_at", "2016-05-05 14:08:33.888911"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.889771"], ["updated_at", "2016-05-05 14:08:33.889771"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.890588"], ["updated_at", "2016-05-05 14:08:33.890588"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.891355"], ["updated_at", "2016-05-05 14:08:33.891355"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.892140"], ["updated_at", "2016-05-05 14:08:33.892140"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.893115"], ["updated_at", "2016-05-05 14:08:33.893115"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "assets" ("key", "theme_id", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["key", "prefix/template.liquid"], ["theme_id", 1], ["value", "<%= 'Hi from theme template asset!' %>"], ["created_at", "2016-05-05 14:08:33.901089"], ["updated_at", "2016-05-05 14:08:33.901089"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Asset Load (0.1ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ? AND "assets"."key" = ?  [["theme_id", 1], ["key", "noprefix/notemplate.liquid"]]
  [1m[36mMagazCore::Asset Load (0.2ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ? AND "assets"."key" = ?[0m  [["theme_id", 1], ["key", "noprefix/notemplate.liquid"]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------
MagazCore::ThemeServices::ResolverTest: test_find_all_-_returns_template,_when_it_is_exist
------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme8"], ["created_at", "2016-05-05 14:08:33.959670"], ["updated_at", "2016-05-05 14:08:33.959670"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.960930"], ["updated_at", "2016-05-05 14:08:33.960930"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.961786"], ["updated_at", "2016-05-05 14:08:33.961786"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.962543"], ["updated_at", "2016-05-05 14:08:33.962543"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.963453"], ["updated_at", "2016-05-05 14:08:33.963453"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.964162"], ["updated_at", "2016-05-05 14:08:33.964162"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.964874"], ["updated_at", "2016-05-05 14:08:33.964874"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.965800"], ["updated_at", "2016-05-05 14:08:33.965800"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.966704"], ["updated_at", "2016-05-05 14:08:33.966704"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.967493"], ["updated_at", "2016-05-05 14:08:33.967493"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.968405"], ["updated_at", "2016-05-05 14:08:33.968405"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.969190"], ["updated_at", "2016-05-05 14:08:33.969190"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.970089"], ["updated_at", "2016-05-05 14:08:33.970089"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.970858"], ["updated_at", "2016-05-05 14:08:33.970858"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.971833"], ["updated_at", "2016-05-05 14:08:33.971833"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.972856"], ["updated_at", "2016-05-05 14:08:33.972856"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.973880"], ["updated_at", "2016-05-05 14:08:33.973880"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.974686"], ["updated_at", "2016-05-05 14:08:33.974686"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.975496"], ["updated_at", "2016-05-05 14:08:33.975496"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.976250"], ["updated_at", "2016-05-05 14:08:33.976250"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.977075"], ["updated_at", "2016-05-05 14:08:33.977075"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.977828"], ["updated_at", "2016-05-05 14:08:33.977828"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.978552"], ["updated_at", "2016-05-05 14:08:33.978552"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.979266"], ["updated_at", "2016-05-05 14:08:33.979266"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.980591"], ["updated_at", "2016-05-05 14:08:33.980591"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.981818"], ["updated_at", "2016-05-05 14:08:33.981818"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.982860"], ["updated_at", "2016-05-05 14:08:33.982860"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.984121"], ["updated_at", "2016-05-05 14:08:33.984121"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.985250"], ["updated_at", "2016-05-05 14:08:33.985250"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.986444"], ["updated_at", "2016-05-05 14:08:33.986444"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.987550"], ["updated_at", "2016-05-05 14:08:33.987550"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.988559"], ["updated_at", "2016-05-05 14:08:33.988559"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.989537"], ["updated_at", "2016-05-05 14:08:33.989537"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.990622"], ["updated_at", "2016-05-05 14:08:33.990622"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.991796"], ["updated_at", "2016-05-05 14:08:33.991796"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.992908"], ["updated_at", "2016-05-05 14:08:33.992908"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.993923"], ["updated_at", "2016-05-05 14:08:33.993923"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.994766"], ["updated_at", "2016-05-05 14:08:33.994766"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.995982"], ["updated_at", "2016-05-05 14:08:33.995982"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.997229"], ["updated_at", "2016-05-05 14:08:33.997229"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.998316"], ["updated_at", "2016-05-05 14:08:33.998316"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:33.999362"], ["updated_at", "2016-05-05 14:08:33.999362"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.000384"], ["updated_at", "2016-05-05 14:08:34.000384"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.001360"], ["updated_at", "2016-05-05 14:08:34.001360"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.002414"], ["updated_at", "2016-05-05 14:08:34.002414"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.003474"], ["updated_at", "2016-05-05 14:08:34.003474"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.004458"], ["updated_at", "2016-05-05 14:08:34.004458"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.005451"], ["updated_at", "2016-05-05 14:08:34.005451"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.006422"], ["updated_at", "2016-05-05 14:08:34.006422"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.007241"], ["updated_at", "2016-05-05 14:08:34.007241"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.008069"], ["updated_at", "2016-05-05 14:08:34.008069"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "assets" ("key", "theme_id", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["key", "prefix/template.liquid"], ["theme_id", 1], ["value", "<%= 'Hi from theme template asset!' %>"], ["created_at", "2016-05-05 14:08:34.015339"], ["updated_at", "2016-05-05 14:08:34.015339"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Asset Load (0.1ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ? AND "assets"."key" = ?  [["theme_id", 1], ["key", "prefix/template.liquid"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MagazCore::ThemeServices::ResolverTest: test_initialize
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme9"], ["created_at", "2016-05-05 14:08:34.069011"], ["updated_at", "2016-05-05 14:08:34.069011"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.070226"], ["updated_at", "2016-05-05 14:08:34.070226"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.071189"], ["updated_at", "2016-05-05 14:08:34.071189"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.071935"], ["updated_at", "2016-05-05 14:08:34.071935"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.072744"], ["updated_at", "2016-05-05 14:08:34.072744"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.073517"], ["updated_at", "2016-05-05 14:08:34.073517"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.074351"], ["updated_at", "2016-05-05 14:08:34.074351"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.075076"], ["updated_at", "2016-05-05 14:08:34.075076"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.075803"], ["updated_at", "2016-05-05 14:08:34.075803"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.076520"], ["updated_at", "2016-05-05 14:08:34.076520"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.077239"], ["updated_at", "2016-05-05 14:08:34.077239"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.077918"], ["updated_at", "2016-05-05 14:08:34.077918"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.078684"], ["updated_at", "2016-05-05 14:08:34.078684"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.079367"], ["updated_at", "2016-05-05 14:08:34.079367"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.080135"], ["updated_at", "2016-05-05 14:08:34.080135"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.080910"], ["updated_at", "2016-05-05 14:08:34.080910"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.081671"], ["updated_at", "2016-05-05 14:08:34.081671"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.082413"], ["updated_at", "2016-05-05 14:08:34.082413"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.083147"], ["updated_at", "2016-05-05 14:08:34.083147"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.083883"], ["updated_at", "2016-05-05 14:08:34.083883"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.084624"], ["updated_at", "2016-05-05 14:08:34.084624"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.085300"], ["updated_at", "2016-05-05 14:08:34.085300"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.086077"], ["updated_at", "2016-05-05 14:08:34.086077"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.086803"], ["updated_at", "2016-05-05 14:08:34.086803"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.087495"], ["updated_at", "2016-05-05 14:08:34.087495"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.088232"], ["updated_at", "2016-05-05 14:08:34.088232"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.088988"], ["updated_at", "2016-05-05 14:08:34.088988"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.089665"], ["updated_at", "2016-05-05 14:08:34.089665"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.090390"], ["updated_at", "2016-05-05 14:08:34.090390"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.091082"], ["updated_at", "2016-05-05 14:08:34.091082"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.091798"], ["updated_at", "2016-05-05 14:08:34.091798"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.092511"], ["updated_at", "2016-05-05 14:08:34.092511"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.093242"], ["updated_at", "2016-05-05 14:08:34.093242"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.093921"], ["updated_at", "2016-05-05 14:08:34.093921"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.094749"], ["updated_at", "2016-05-05 14:08:34.094749"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.095518"], ["updated_at", "2016-05-05 14:08:34.095518"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.096199"], ["updated_at", "2016-05-05 14:08:34.096199"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.096961"], ["updated_at", "2016-05-05 14:08:34.096961"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.097715"], ["updated_at", "2016-05-05 14:08:34.097715"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.098450"], ["updated_at", "2016-05-05 14:08:34.098450"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.099182"], ["updated_at", "2016-05-05 14:08:34.099182"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.099922"], ["updated_at", "2016-05-05 14:08:34.099922"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.100673"], ["updated_at", "2016-05-05 14:08:34.100673"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.101421"], ["updated_at", "2016-05-05 14:08:34.101421"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.102144"], ["updated_at", "2016-05-05 14:08:34.102144"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.102937"], ["updated_at", "2016-05-05 14:08:34.102937"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.103646"], ["updated_at", "2016-05-05 14:08:34.103646"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.104362"], ["updated_at", "2016-05-05 14:08:34.104362"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.105031"], ["updated_at", "2016-05-05 14:08:34.105031"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.105746"], ["updated_at", "2016-05-05 14:08:34.105746"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.106464"], ["updated_at", "2016-05-05 14:08:34.106464"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["key", "prefix/template.liquid"], ["theme_id", 1], ["value", "<%= 'Hi from theme template asset!' %>"], ["created_at", "2016-05-05 14:08:34.113634"], ["updated_at", "2016-05-05 14:08:34.113634"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
MagazCore::ThemeTest: test_#activate!
-------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example34' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example34"], ["subdomain", "example34"], ["created_at", "2016-05-05 14:08:34.119133"], ["updated_at", "2016-05-05 14:08:34.119133"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme10"], ["created_at", "2016-05-05 14:08:34.178317"], ["updated_at", "2016-05-05 14:08:34.178317"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.179730"], ["updated_at", "2016-05-05 14:08:34.179730"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.180663"], ["updated_at", "2016-05-05 14:08:34.180663"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.181567"], ["updated_at", "2016-05-05 14:08:34.181567"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.182332"], ["updated_at", "2016-05-05 14:08:34.182332"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.183133"], ["updated_at", "2016-05-05 14:08:34.183133"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.183885"], ["updated_at", "2016-05-05 14:08:34.183885"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.184639"], ["updated_at", "2016-05-05 14:08:34.184639"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.185374"], ["updated_at", "2016-05-05 14:08:34.185374"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.186171"], ["updated_at", "2016-05-05 14:08:34.186171"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.186917"], ["updated_at", "2016-05-05 14:08:34.186917"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.187799"], ["updated_at", "2016-05-05 14:08:34.187799"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.188608"], ["updated_at", "2016-05-05 14:08:34.188608"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.189386"], ["updated_at", "2016-05-05 14:08:34.189386"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.190177"], ["updated_at", "2016-05-05 14:08:34.190177"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.191302"], ["updated_at", "2016-05-05 14:08:34.191302"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.192163"], ["updated_at", "2016-05-05 14:08:34.192163"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.192969"], ["updated_at", "2016-05-05 14:08:34.192969"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.193754"], ["updated_at", "2016-05-05 14:08:34.193754"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.194678"], ["updated_at", "2016-05-05 14:08:34.194678"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.195655"], ["updated_at", "2016-05-05 14:08:34.195655"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.196552"], ["updated_at", "2016-05-05 14:08:34.196552"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.197388"], ["updated_at", "2016-05-05 14:08:34.197388"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.198163"], ["updated_at", "2016-05-05 14:08:34.198163"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.198977"], ["updated_at", "2016-05-05 14:08:34.198977"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.199732"], ["updated_at", "2016-05-05 14:08:34.199732"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.200474"], ["updated_at", "2016-05-05 14:08:34.200474"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.201191"], ["updated_at", "2016-05-05 14:08:34.201191"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.201918"], ["updated_at", "2016-05-05 14:08:34.201918"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.202779"], ["updated_at", "2016-05-05 14:08:34.202779"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.203875"], ["updated_at", "2016-05-05 14:08:34.203875"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.205108"], ["updated_at", "2016-05-05 14:08:34.205108"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.206411"], ["updated_at", "2016-05-05 14:08:34.206411"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.207569"], ["updated_at", "2016-05-05 14:08:34.207569"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.208701"], ["updated_at", "2016-05-05 14:08:34.208701"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.209830"], ["updated_at", "2016-05-05 14:08:34.209830"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.211018"], ["updated_at", "2016-05-05 14:08:34.211018"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.212048"], ["updated_at", "2016-05-05 14:08:34.212048"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.212925"], ["updated_at", "2016-05-05 14:08:34.212925"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.213823"], ["updated_at", "2016-05-05 14:08:34.213823"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.214672"], ["updated_at", "2016-05-05 14:08:34.214672"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.215570"], ["updated_at", "2016-05-05 14:08:34.215570"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.216454"], ["updated_at", "2016-05-05 14:08:34.216454"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.217378"], ["updated_at", "2016-05-05 14:08:34.217378"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.218291"], ["updated_at", "2016-05-05 14:08:34.218291"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.219529"], ["updated_at", "2016-05-05 14:08:34.219529"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.220522"], ["updated_at", "2016-05-05 14:08:34.220522"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.221453"], ["updated_at", "2016-05-05 14:08:34.221453"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.222340"], ["updated_at", "2016-05-05 14:08:34.222340"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.223161"], ["updated_at", "2016-05-05 14:08:34.223161"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.223970"], ["updated_at", "2016-05-05 14:08:34.223970"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Asset Load (0.3ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme10"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-05 14:08:34.271776"], ["updated_at", "2016-05-05 14:08:34.271776"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-05 14:08:34.179730"], ["updated_at", "2016-05-05 14:08:34.179730"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-05 14:08:34.180663"], ["updated_at", "2016-05-05 14:08:34.180663"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-05 14:08:34.181567"], ["updated_at", "2016-05-05 14:08:34.181567"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-05 14:08:34.182332"], ["updated_at", "2016-05-05 14:08:34.182332"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-05 14:08:34.183133"], ["updated_at", "2016-05-05 14:08:34.183133"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-05 14:08:34.183885"], ["updated_at", "2016-05-05 14:08:34.183885"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-05 14:08:34.184639"], ["updated_at", "2016-05-05 14:08:34.184639"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-05 14:08:34.185374"], ["updated_at", "2016-05-05 14:08:34.185374"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-05 14:08:34.186171"], ["updated_at", "2016-05-05 14:08:34.186171"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-05 14:08:34.186917"], ["updated_at", "2016-05-05 14:08:34.186917"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-05 14:08:34.187799"], ["updated_at", "2016-05-05 14:08:34.187799"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-05 14:08:34.188608"], ["updated_at", "2016-05-05 14:08:34.188608"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-05 14:08:34.189386"], ["updated_at", "2016-05-05 14:08:34.189386"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-05 14:08:34.190177"], ["updated_at", "2016-05-05 14:08:34.190177"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-05 14:08:34.191302"], ["updated_at", "2016-05-05 14:08:34.191302"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-05 14:08:34.192163"], ["updated_at", "2016-05-05 14:08:34.192163"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-05 14:08:34.192969"], ["updated_at", "2016-05-05 14:08:34.192969"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-05 14:08:34.193754"], ["updated_at", "2016-05-05 14:08:34.193754"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-05 14:08:34.194678"], ["updated_at", "2016-05-05 14:08:34.194678"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-05 14:08:34.195655"], ["updated_at", "2016-05-05 14:08:34.195655"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-05 14:08:34.196552"], ["updated_at", "2016-05-05 14:08:34.196552"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-05 14:08:34.197388"], ["updated_at", "2016-05-05 14:08:34.197388"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-05 14:08:34.198163"], ["updated_at", "2016-05-05 14:08:34.198163"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-05 14:08:34.198977"], ["updated_at", "2016-05-05 14:08:34.198977"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-05 14:08:34.199732"], ["updated_at", "2016-05-05 14:08:34.199732"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-05 14:08:34.200474"], ["updated_at", "2016-05-05 14:08:34.200474"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-05 14:08:34.201191"], ["updated_at", "2016-05-05 14:08:34.201191"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-05 14:08:34.201918"], ["updated_at", "2016-05-05 14:08:34.201918"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-05 14:08:34.202779"], ["updated_at", "2016-05-05 14:08:34.202779"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-05 14:08:34.203875"], ["updated_at", "2016-05-05 14:08:34.203875"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-05 14:08:34.205108"], ["updated_at", "2016-05-05 14:08:34.205108"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-05 14:08:34.206411"], ["updated_at", "2016-05-05 14:08:34.206411"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-05 14:08:34.207569"], ["updated_at", "2016-05-05 14:08:34.207569"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-05 14:08:34.208701"], ["updated_at", "2016-05-05 14:08:34.208701"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-05 14:08:34.209830"], ["updated_at", "2016-05-05 14:08:34.209830"], ["theme_id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-05 14:08:34.211018"], ["updated_at", "2016-05-05 14:08:34.211018"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-05 14:08:34.212048"], ["updated_at", "2016-05-05 14:08:34.212048"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-05 14:08:34.212925"], ["updated_at", "2016-05-05 14:08:34.212925"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-05 14:08:34.213823"], ["updated_at", "2016-05-05 14:08:34.213823"], ["theme_id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-05 14:08:34.214672"], ["updated_at", "2016-05-05 14:08:34.214672"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-05 14:08:34.215570"], ["updated_at", "2016-05-05 14:08:34.215570"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-05 14:08:34.216454"], ["updated_at", "2016-05-05 14:08:34.216454"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-05 14:08:34.217378"], ["updated_at", "2016-05-05 14:08:34.217378"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-05 14:08:34.218291"], ["updated_at", "2016-05-05 14:08:34.218291"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-05 14:08:34.219529"], ["updated_at", "2016-05-05 14:08:34.219529"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-05 14:08:34.220522"], ["updated_at", "2016-05-05 14:08:34.220522"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-05 14:08:34.221453"], ["updated_at", "2016-05-05 14:08:34.221453"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-05 14:08:34.222340"], ["updated_at", "2016-05-05 14:08:34.222340"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-05 14:08:34.223161"], ["updated_at", "2016-05-05 14:08:34.223161"], ["theme_id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-05 14:08:34.223970"], ["updated_at", "2016-05-05 14:08:34.223970"], ["theme_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "themes" SET "role" = ?, "updated_at" = ? WHERE "themes"."id" = ?  [["role", "main"], ["updated_at", "2016-05-05 14:08:34.319438"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------
MagazCore::ThemeTest: test_#deactivate!
---------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example35' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example35"], ["subdomain", "example35"], ["created_at", "2016-05-05 14:08:34.327266"], ["updated_at", "2016-05-05 14:08:34.327266"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme11"], ["created_at", "2016-05-05 14:08:34.386963"], ["updated_at", "2016-05-05 14:08:34.386963"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.388572"], ["updated_at", "2016-05-05 14:08:34.388572"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.389726"], ["updated_at", "2016-05-05 14:08:34.389726"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.390549"], ["updated_at", "2016-05-05 14:08:34.390549"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.391406"], ["updated_at", "2016-05-05 14:08:34.391406"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.392299"], ["updated_at", "2016-05-05 14:08:34.392299"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.393064"], ["updated_at", "2016-05-05 14:08:34.393064"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.393978"], ["updated_at", "2016-05-05 14:08:34.393978"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.394789"], ["updated_at", "2016-05-05 14:08:34.394789"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.395776"], ["updated_at", "2016-05-05 14:08:34.395776"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.396778"], ["updated_at", "2016-05-05 14:08:34.396778"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.397603"], ["updated_at", "2016-05-05 14:08:34.397603"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.398436"], ["updated_at", "2016-05-05 14:08:34.398436"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.399352"], ["updated_at", "2016-05-05 14:08:34.399352"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.400255"], ["updated_at", "2016-05-05 14:08:34.400255"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.400930"], ["updated_at", "2016-05-05 14:08:34.400930"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.401798"], ["updated_at", "2016-05-05 14:08:34.401798"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.402691"], ["updated_at", "2016-05-05 14:08:34.402691"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.403668"], ["updated_at", "2016-05-05 14:08:34.403668"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.404547"], ["updated_at", "2016-05-05 14:08:34.404547"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.405432"], ["updated_at", "2016-05-05 14:08:34.405432"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.406133"], ["updated_at", "2016-05-05 14:08:34.406133"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.406999"], ["updated_at", "2016-05-05 14:08:34.406999"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.407894"], ["updated_at", "2016-05-05 14:08:34.407894"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.408958"], ["updated_at", "2016-05-05 14:08:34.408958"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.409614"], ["updated_at", "2016-05-05 14:08:34.409614"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.410363"], ["updated_at", "2016-05-05 14:08:34.410363"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.411073"], ["updated_at", "2016-05-05 14:08:34.411073"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.412243"], ["updated_at", "2016-05-05 14:08:34.412243"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.413316"], ["updated_at", "2016-05-05 14:08:34.413316"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.414406"], ["updated_at", "2016-05-05 14:08:34.414406"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.415486"], ["updated_at", "2016-05-05 14:08:34.415486"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.416518"], ["updated_at", "2016-05-05 14:08:34.416518"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.417577"], ["updated_at", "2016-05-05 14:08:34.417577"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.418642"], ["updated_at", "2016-05-05 14:08:34.418642"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.419585"], ["updated_at", "2016-05-05 14:08:34.419585"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.420726"], ["updated_at", "2016-05-05 14:08:34.420726"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.421848"], ["updated_at", "2016-05-05 14:08:34.421848"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.422844"], ["updated_at", "2016-05-05 14:08:34.422844"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.423759"], ["updated_at", "2016-05-05 14:08:34.423759"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.424680"], ["updated_at", "2016-05-05 14:08:34.424680"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.425587"], ["updated_at", "2016-05-05 14:08:34.425587"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.426528"], ["updated_at", "2016-05-05 14:08:34.426528"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.427332"], ["updated_at", "2016-05-05 14:08:34.427332"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.428281"], ["updated_at", "2016-05-05 14:08:34.428281"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.429114"], ["updated_at", "2016-05-05 14:08:34.429114"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.429815"], ["updated_at", "2016-05-05 14:08:34.429815"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.430595"], ["updated_at", "2016-05-05 14:08:34.430595"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.431356"], ["updated_at", "2016-05-05 14:08:34.431356"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.432011"], ["updated_at", "2016-05-05 14:08:34.432011"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.432732"], ["updated_at", "2016-05-05 14:08:34.432732"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Asset Load (0.2ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme11"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-05 14:08:34.474601"], ["updated_at", "2016-05-05 14:08:34.474601"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-05 14:08:34.388572"], ["updated_at", "2016-05-05 14:08:34.388572"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-05 14:08:34.389726"], ["updated_at", "2016-05-05 14:08:34.389726"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-05 14:08:34.390549"], ["updated_at", "2016-05-05 14:08:34.390549"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-05 14:08:34.391406"], ["updated_at", "2016-05-05 14:08:34.391406"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-05 14:08:34.392299"], ["updated_at", "2016-05-05 14:08:34.392299"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-05 14:08:34.393064"], ["updated_at", "2016-05-05 14:08:34.393064"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-05 14:08:34.393978"], ["updated_at", "2016-05-05 14:08:34.393978"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-05 14:08:34.394789"], ["updated_at", "2016-05-05 14:08:34.394789"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-05 14:08:34.395776"], ["updated_at", "2016-05-05 14:08:34.395776"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-05 14:08:34.396778"], ["updated_at", "2016-05-05 14:08:34.396778"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-05 14:08:34.397603"], ["updated_at", "2016-05-05 14:08:34.397603"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-05 14:08:34.398436"], ["updated_at", "2016-05-05 14:08:34.398436"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-05 14:08:34.399352"], ["updated_at", "2016-05-05 14:08:34.399352"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-05 14:08:34.400255"], ["updated_at", "2016-05-05 14:08:34.400255"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-05 14:08:34.400930"], ["updated_at", "2016-05-05 14:08:34.400930"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-05 14:08:34.401798"], ["updated_at", "2016-05-05 14:08:34.401798"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-05 14:08:34.402691"], ["updated_at", "2016-05-05 14:08:34.402691"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-05 14:08:34.403668"], ["updated_at", "2016-05-05 14:08:34.403668"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-05 14:08:34.404547"], ["updated_at", "2016-05-05 14:08:34.404547"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-05 14:08:34.405432"], ["updated_at", "2016-05-05 14:08:34.405432"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-05 14:08:34.406133"], ["updated_at", "2016-05-05 14:08:34.406133"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-05 14:08:34.406999"], ["updated_at", "2016-05-05 14:08:34.406999"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-05 14:08:34.407894"], ["updated_at", "2016-05-05 14:08:34.407894"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-05 14:08:34.408958"], ["updated_at", "2016-05-05 14:08:34.408958"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-05 14:08:34.409614"], ["updated_at", "2016-05-05 14:08:34.409614"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-05 14:08:34.410363"], ["updated_at", "2016-05-05 14:08:34.410363"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-05 14:08:34.411073"], ["updated_at", "2016-05-05 14:08:34.411073"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-05 14:08:34.412243"], ["updated_at", "2016-05-05 14:08:34.412243"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-05 14:08:34.413316"], ["updated_at", "2016-05-05 14:08:34.413316"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-05 14:08:34.414406"], ["updated_at", "2016-05-05 14:08:34.414406"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-05 14:08:34.415486"], ["updated_at", "2016-05-05 14:08:34.415486"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-05 14:08:34.416518"], ["updated_at", "2016-05-05 14:08:34.416518"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-05 14:08:34.417577"], ["updated_at", "2016-05-05 14:08:34.417577"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-05 14:08:34.418642"], ["updated_at", "2016-05-05 14:08:34.418642"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-05 14:08:34.419585"], ["updated_at", "2016-05-05 14:08:34.419585"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-05 14:08:34.420726"], ["updated_at", "2016-05-05 14:08:34.420726"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-05 14:08:34.421848"], ["updated_at", "2016-05-05 14:08:34.421848"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-05 14:08:34.422844"], ["updated_at", "2016-05-05 14:08:34.422844"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-05 14:08:34.423759"], ["updated_at", "2016-05-05 14:08:34.423759"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-05 14:08:34.424680"], ["updated_at", "2016-05-05 14:08:34.424680"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-05 14:08:34.425587"], ["updated_at", "2016-05-05 14:08:34.425587"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-05 14:08:34.426528"], ["updated_at", "2016-05-05 14:08:34.426528"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-05 14:08:34.427332"], ["updated_at", "2016-05-05 14:08:34.427332"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-05 14:08:34.428281"], ["updated_at", "2016-05-05 14:08:34.428281"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-05 14:08:34.429114"], ["updated_at", "2016-05-05 14:08:34.429114"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-05 14:08:34.429815"], ["updated_at", "2016-05-05 14:08:34.429815"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-05 14:08:34.430595"], ["updated_at", "2016-05-05 14:08:34.430595"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-05 14:08:34.431356"], ["updated_at", "2016-05-05 14:08:34.431356"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-05 14:08:34.432011"], ["updated_at", "2016-05-05 14:08:34.432011"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-05 14:08:34.432732"], ["updated_at", "2016-05-05 14:08:34.432732"], ["theme_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "themes" SET "role" = ?, "updated_at" = ? WHERE "themes"."id" = ?  [["role", "unpublished"], ["updated_at", "2016-05-05 14:08:34.517438"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
MagazCore::ThemeTest: test_finder_of_source_associations
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example36' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example36"], ["subdomain", "example36"], ["created_at", "2016-05-05 14:08:34.526129"], ["updated_at", "2016-05-05 14:08:34.526129"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme12"], ["created_at", "2016-05-05 14:08:34.580138"], ["updated_at", "2016-05-05 14:08:34.580138"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.581650"], ["updated_at", "2016-05-05 14:08:34.581650"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.582941"], ["updated_at", "2016-05-05 14:08:34.582941"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.584071"], ["updated_at", "2016-05-05 14:08:34.584071"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.585017"], ["updated_at", "2016-05-05 14:08:34.585017"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.586124"], ["updated_at", "2016-05-05 14:08:34.586124"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.587076"], ["updated_at", "2016-05-05 14:08:34.587076"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.588192"], ["updated_at", "2016-05-05 14:08:34.588192"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.589281"], ["updated_at", "2016-05-05 14:08:34.589281"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.590331"], ["updated_at", "2016-05-05 14:08:34.590331"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.591099"], ["updated_at", "2016-05-05 14:08:34.591099"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.592017"], ["updated_at", "2016-05-05 14:08:34.592017"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.592960"], ["updated_at", "2016-05-05 14:08:34.592960"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.593893"], ["updated_at", "2016-05-05 14:08:34.593893"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.594791"], ["updated_at", "2016-05-05 14:08:34.594791"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.595607"], ["updated_at", "2016-05-05 14:08:34.595607"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.596569"], ["updated_at", "2016-05-05 14:08:34.596569"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.597269"], ["updated_at", "2016-05-05 14:08:34.597269"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.598071"], ["updated_at", "2016-05-05 14:08:34.598071"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.598916"], ["updated_at", "2016-05-05 14:08:34.598916"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.599615"], ["updated_at", "2016-05-05 14:08:34.599615"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.600386"], ["updated_at", "2016-05-05 14:08:34.600386"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.601073"], ["updated_at", "2016-05-05 14:08:34.601073"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.601836"], ["updated_at", "2016-05-05 14:08:34.601836"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.602642"], ["updated_at", "2016-05-05 14:08:34.602642"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.603380"], ["updated_at", "2016-05-05 14:08:34.603380"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.604187"], ["updated_at", "2016-05-05 14:08:34.604187"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.604877"], ["updated_at", "2016-05-05 14:08:34.604877"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.605708"], ["updated_at", "2016-05-05 14:08:34.605708"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.606527"], ["updated_at", "2016-05-05 14:08:34.606527"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.607202"], ["updated_at", "2016-05-05 14:08:34.607202"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.608014"], ["updated_at", "2016-05-05 14:08:34.608014"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.608719"], ["updated_at", "2016-05-05 14:08:34.608719"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.609624"], ["updated_at", "2016-05-05 14:08:34.609624"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.685131"], ["updated_at", "2016-05-05 14:08:34.685131"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.686078"], ["updated_at", "2016-05-05 14:08:34.686078"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.686778"], ["updated_at", "2016-05-05 14:08:34.686778"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.687462"], ["updated_at", "2016-05-05 14:08:34.687462"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.688139"], ["updated_at", "2016-05-05 14:08:34.688139"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.688800"], ["updated_at", "2016-05-05 14:08:34.688800"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.689531"], ["updated_at", "2016-05-05 14:08:34.689531"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.690189"], ["updated_at", "2016-05-05 14:08:34.690189"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.690892"], ["updated_at", "2016-05-05 14:08:34.690892"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.691899"], ["updated_at", "2016-05-05 14:08:34.691899"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.692918"], ["updated_at", "2016-05-05 14:08:34.692918"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.693981"], ["updated_at", "2016-05-05 14:08:34.693981"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.694974"], ["updated_at", "2016-05-05 14:08:34.694974"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.696170"], ["updated_at", "2016-05-05 14:08:34.696170"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.697168"], ["updated_at", "2016-05-05 14:08:34.697168"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.698122"], ["updated_at", "2016-05-05 14:08:34.698122"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.699066"], ["updated_at", "2016-05-05 14:08:34.699066"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Asset Load (0.2ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme12"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-05 14:08:34.742690"], ["updated_at", "2016-05-05 14:08:34.742690"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-05 14:08:34.581650"], ["updated_at", "2016-05-05 14:08:34.581650"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-05 14:08:34.582941"], ["updated_at", "2016-05-05 14:08:34.582941"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-05 14:08:34.584071"], ["updated_at", "2016-05-05 14:08:34.584071"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-05 14:08:34.585017"], ["updated_at", "2016-05-05 14:08:34.585017"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-05 14:08:34.586124"], ["updated_at", "2016-05-05 14:08:34.586124"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-05 14:08:34.587076"], ["updated_at", "2016-05-05 14:08:34.587076"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-05 14:08:34.588192"], ["updated_at", "2016-05-05 14:08:34.588192"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-05 14:08:34.589281"], ["updated_at", "2016-05-05 14:08:34.589281"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-05 14:08:34.590331"], ["updated_at", "2016-05-05 14:08:34.590331"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-05 14:08:34.591099"], ["updated_at", "2016-05-05 14:08:34.591099"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-05 14:08:34.592017"], ["updated_at", "2016-05-05 14:08:34.592017"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-05 14:08:34.592960"], ["updated_at", "2016-05-05 14:08:34.592960"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-05 14:08:34.593893"], ["updated_at", "2016-05-05 14:08:34.593893"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-05 14:08:34.594791"], ["updated_at", "2016-05-05 14:08:34.594791"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-05 14:08:34.595607"], ["updated_at", "2016-05-05 14:08:34.595607"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-05 14:08:34.596569"], ["updated_at", "2016-05-05 14:08:34.596569"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-05 14:08:34.597269"], ["updated_at", "2016-05-05 14:08:34.597269"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-05 14:08:34.598071"], ["updated_at", "2016-05-05 14:08:34.598071"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-05 14:08:34.598916"], ["updated_at", "2016-05-05 14:08:34.598916"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-05 14:08:34.599615"], ["updated_at", "2016-05-05 14:08:34.599615"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-05 14:08:34.600386"], ["updated_at", "2016-05-05 14:08:34.600386"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-05 14:08:34.601073"], ["updated_at", "2016-05-05 14:08:34.601073"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-05 14:08:34.601836"], ["updated_at", "2016-05-05 14:08:34.601836"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-05 14:08:34.602642"], ["updated_at", "2016-05-05 14:08:34.602642"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-05 14:08:34.603380"], ["updated_at", "2016-05-05 14:08:34.603380"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-05 14:08:34.604187"], ["updated_at", "2016-05-05 14:08:34.604187"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-05 14:08:34.604877"], ["updated_at", "2016-05-05 14:08:34.604877"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-05 14:08:34.605708"], ["updated_at", "2016-05-05 14:08:34.605708"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-05 14:08:34.606527"], ["updated_at", "2016-05-05 14:08:34.606527"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-05 14:08:34.607202"], ["updated_at", "2016-05-05 14:08:34.607202"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-05 14:08:34.608014"], ["updated_at", "2016-05-05 14:08:34.608014"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-05 14:08:34.608719"], ["updated_at", "2016-05-05 14:08:34.608719"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-05 14:08:34.609624"], ["updated_at", "2016-05-05 14:08:34.609624"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-05 14:08:34.685131"], ["updated_at", "2016-05-05 14:08:34.685131"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-05 14:08:34.686078"], ["updated_at", "2016-05-05 14:08:34.686078"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-05 14:08:34.686778"], ["updated_at", "2016-05-05 14:08:34.686778"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-05 14:08:34.687462"], ["updated_at", "2016-05-05 14:08:34.687462"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-05 14:08:34.688139"], ["updated_at", "2016-05-05 14:08:34.688139"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-05 14:08:34.688800"], ["updated_at", "2016-05-05 14:08:34.688800"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-05 14:08:34.689531"], ["updated_at", "2016-05-05 14:08:34.689531"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-05 14:08:34.690189"], ["updated_at", "2016-05-05 14:08:34.690189"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-05 14:08:34.690892"], ["updated_at", "2016-05-05 14:08:34.690892"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-05 14:08:34.691899"], ["updated_at", "2016-05-05 14:08:34.691899"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-05 14:08:34.692918"], ["updated_at", "2016-05-05 14:08:34.692918"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-05 14:08:34.693981"], ["updated_at", "2016-05-05 14:08:34.693981"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-05 14:08:34.694974"], ["updated_at", "2016-05-05 14:08:34.694974"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-05 14:08:34.696170"], ["updated_at", "2016-05-05 14:08:34.696170"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-05 14:08:34.697168"], ["updated_at", "2016-05-05 14:08:34.697168"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-05 14:08:34.698122"], ["updated_at", "2016-05-05 14:08:34.698122"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-05 14:08:34.699066"], ["updated_at", "2016-05-05 14:08:34.699066"], ["theme_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL[0m
  [1m[35mMagazCore::Theme Load (0.1ms)[0m  SELECT "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MagazCore::ThemeTest: test_self_referencing_association
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example37' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example37"], ["subdomain", "example37"], ["created_at", "2016-05-05 14:08:34.785336"], ["updated_at", "2016-05-05 14:08:34.785336"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme13"], ["created_at", "2016-05-05 14:08:34.832354"], ["updated_at", "2016-05-05 14:08:34.832354"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.833437"], ["updated_at", "2016-05-05 14:08:34.833437"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.834198"], ["updated_at", "2016-05-05 14:08:34.834198"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.834867"], ["updated_at", "2016-05-05 14:08:34.834867"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.835964"], ["updated_at", "2016-05-05 14:08:34.835964"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.837000"], ["updated_at", "2016-05-05 14:08:34.837000"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.838003"], ["updated_at", "2016-05-05 14:08:34.838003"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.839000"], ["updated_at", "2016-05-05 14:08:34.839000"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.839995"], ["updated_at", "2016-05-05 14:08:34.839995"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.840937"], ["updated_at", "2016-05-05 14:08:34.840937"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.841885"], ["updated_at", "2016-05-05 14:08:34.841885"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.842832"], ["updated_at", "2016-05-05 14:08:34.842832"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.843985"], ["updated_at", "2016-05-05 14:08:34.843985"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.844961"], ["updated_at", "2016-05-05 14:08:34.844961"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.845925"], ["updated_at", "2016-05-05 14:08:34.845925"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.846868"], ["updated_at", "2016-05-05 14:08:34.846868"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.847817"], ["updated_at", "2016-05-05 14:08:34.847817"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.848754"], ["updated_at", "2016-05-05 14:08:34.848754"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.849696"], ["updated_at", "2016-05-05 14:08:34.849696"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.850507"], ["updated_at", "2016-05-05 14:08:34.850507"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.851284"], ["updated_at", "2016-05-05 14:08:34.851284"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.852054"], ["updated_at", "2016-05-05 14:08:34.852054"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.852822"], ["updated_at", "2016-05-05 14:08:34.852822"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.853583"], ["updated_at", "2016-05-05 14:08:34.853583"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.854306"], ["updated_at", "2016-05-05 14:08:34.854306"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.855004"], ["updated_at", "2016-05-05 14:08:34.855004"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.855816"], ["updated_at", "2016-05-05 14:08:34.855816"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.856669"], ["updated_at", "2016-05-05 14:08:34.856669"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.857469"], ["updated_at", "2016-05-05 14:08:34.857469"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.858119"], ["updated_at", "2016-05-05 14:08:34.858119"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.858770"], ["updated_at", "2016-05-05 14:08:34.858770"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.859492"], ["updated_at", "2016-05-05 14:08:34.859492"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.860273"], ["updated_at", "2016-05-05 14:08:34.860273"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.860940"], ["updated_at", "2016-05-05 14:08:34.860940"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.861604"], ["updated_at", "2016-05-05 14:08:34.861604"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.862272"], ["updated_at", "2016-05-05 14:08:34.862272"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.862938"], ["updated_at", "2016-05-05 14:08:34.862938"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.863606"], ["updated_at", "2016-05-05 14:08:34.863606"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.864280"], ["updated_at", "2016-05-05 14:08:34.864280"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.864933"], ["updated_at", "2016-05-05 14:08:34.864933"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.865593"], ["updated_at", "2016-05-05 14:08:34.865593"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.866243"], ["updated_at", "2016-05-05 14:08:34.866243"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.866890"], ["updated_at", "2016-05-05 14:08:34.866890"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.867888"], ["updated_at", "2016-05-05 14:08:34.867888"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.868899"], ["updated_at", "2016-05-05 14:08:34.868899"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.869955"], ["updated_at", "2016-05-05 14:08:34.869955"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.870955"], ["updated_at", "2016-05-05 14:08:34.870955"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.871933"], ["updated_at", "2016-05-05 14:08:34.871933"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.872875"], ["updated_at", "2016-05-05 14:08:34.872875"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.873814"], ["updated_at", "2016-05-05 14:08:34.873814"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:34.874751"], ["updated_at", "2016-05-05 14:08:34.874751"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Asset Load (0.2ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme13"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-05 14:08:34.916176"], ["updated_at", "2016-05-05 14:08:34.916176"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-05 14:08:34.833437"], ["updated_at", "2016-05-05 14:08:34.833437"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-05 14:08:34.834198"], ["updated_at", "2016-05-05 14:08:34.834198"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-05 14:08:34.834867"], ["updated_at", "2016-05-05 14:08:34.834867"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-05 14:08:34.835964"], ["updated_at", "2016-05-05 14:08:34.835964"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-05 14:08:34.837000"], ["updated_at", "2016-05-05 14:08:34.837000"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-05 14:08:34.838003"], ["updated_at", "2016-05-05 14:08:34.838003"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-05 14:08:34.839000"], ["updated_at", "2016-05-05 14:08:34.839000"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-05 14:08:34.839995"], ["updated_at", "2016-05-05 14:08:34.839995"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-05 14:08:34.840937"], ["updated_at", "2016-05-05 14:08:34.840937"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-05 14:08:34.841885"], ["updated_at", "2016-05-05 14:08:34.841885"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-05 14:08:34.842832"], ["updated_at", "2016-05-05 14:08:34.842832"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-05 14:08:34.843985"], ["updated_at", "2016-05-05 14:08:34.843985"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-05 14:08:34.844961"], ["updated_at", "2016-05-05 14:08:34.844961"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-05 14:08:34.845925"], ["updated_at", "2016-05-05 14:08:34.845925"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-05 14:08:34.846868"], ["updated_at", "2016-05-05 14:08:34.846868"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-05 14:08:34.847817"], ["updated_at", "2016-05-05 14:08:34.847817"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-05 14:08:34.848754"], ["updated_at", "2016-05-05 14:08:34.848754"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-05 14:08:34.849696"], ["updated_at", "2016-05-05 14:08:34.849696"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-05 14:08:34.850507"], ["updated_at", "2016-05-05 14:08:34.850507"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-05 14:08:34.851284"], ["updated_at", "2016-05-05 14:08:34.851284"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-05 14:08:34.852054"], ["updated_at", "2016-05-05 14:08:34.852054"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-05 14:08:34.852822"], ["updated_at", "2016-05-05 14:08:34.852822"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-05 14:08:34.853583"], ["updated_at", "2016-05-05 14:08:34.853583"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-05 14:08:34.854306"], ["updated_at", "2016-05-05 14:08:34.854306"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-05 14:08:34.855004"], ["updated_at", "2016-05-05 14:08:34.855004"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-05 14:08:34.855816"], ["updated_at", "2016-05-05 14:08:34.855816"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-05 14:08:34.856669"], ["updated_at", "2016-05-05 14:08:34.856669"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-05 14:08:34.857469"], ["updated_at", "2016-05-05 14:08:34.857469"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-05 14:08:34.858119"], ["updated_at", "2016-05-05 14:08:34.858119"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-05 14:08:34.858770"], ["updated_at", "2016-05-05 14:08:34.858770"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-05 14:08:34.859492"], ["updated_at", "2016-05-05 14:08:34.859492"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-05 14:08:34.860273"], ["updated_at", "2016-05-05 14:08:34.860273"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-05 14:08:34.860940"], ["updated_at", "2016-05-05 14:08:34.860940"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-05 14:08:34.861604"], ["updated_at", "2016-05-05 14:08:34.861604"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-05 14:08:34.862272"], ["updated_at", "2016-05-05 14:08:34.862272"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-05 14:08:34.862938"], ["updated_at", "2016-05-05 14:08:34.862938"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-05 14:08:34.863606"], ["updated_at", "2016-05-05 14:08:34.863606"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-05 14:08:34.864280"], ["updated_at", "2016-05-05 14:08:34.864280"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-05 14:08:34.864933"], ["updated_at", "2016-05-05 14:08:34.864933"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-05 14:08:34.865593"], ["updated_at", "2016-05-05 14:08:34.865593"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-05 14:08:34.866243"], ["updated_at", "2016-05-05 14:08:34.866243"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-05 14:08:34.866890"], ["updated_at", "2016-05-05 14:08:34.866890"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-05 14:08:34.867888"], ["updated_at", "2016-05-05 14:08:34.867888"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-05 14:08:34.868899"], ["updated_at", "2016-05-05 14:08:34.868899"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-05 14:08:34.869955"], ["updated_at", "2016-05-05 14:08:34.869955"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-05 14:08:34.870955"], ["updated_at", "2016-05-05 14:08:34.870955"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-05 14:08:34.871933"], ["updated_at", "2016-05-05 14:08:34.871933"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-05 14:08:34.872875"], ["updated_at", "2016-05-05 14:08:34.872875"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-05 14:08:34.873814"], ["updated_at", "2016-05-05 14:08:34.873814"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-05 14:08:34.874751"], ["updated_at", "2016-05-05 14:08:34.874751"], ["theme_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Theme Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "themes" WHERE "themes"."source_theme_id" = ? AND "themes"."id" = ? LIMIT 1[0m  [["source_theme_id", 1], ["id", 2]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
MagazCore::ThemeTest: test_validates_default_config_presence
------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example38' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example38"], ["subdomain", "example38"], ["created_at", "2016-05-05 14:08:34.961860"], ["updated_at", "2016-05-05 14:08:34.961860"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme14"], ["created_at", "2016-05-05 14:08:35.098723"], ["updated_at", "2016-05-05 14:08:35.098723"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.100192"], ["updated_at", "2016-05-05 14:08:35.100192"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.101333"], ["updated_at", "2016-05-05 14:08:35.101333"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.102337"], ["updated_at", "2016-05-05 14:08:35.102337"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.103324"], ["updated_at", "2016-05-05 14:08:35.103324"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.104297"], ["updated_at", "2016-05-05 14:08:35.104297"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.105226"], ["updated_at", "2016-05-05 14:08:35.105226"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.106161"], ["updated_at", "2016-05-05 14:08:35.106161"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.107085"], ["updated_at", "2016-05-05 14:08:35.107085"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.108041"], ["updated_at", "2016-05-05 14:08:35.108041"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.108968"], ["updated_at", "2016-05-05 14:08:35.108968"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.109921"], ["updated_at", "2016-05-05 14:08:35.109921"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.110856"], ["updated_at", "2016-05-05 14:08:35.110856"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.111909"], ["updated_at", "2016-05-05 14:08:35.111909"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.112712"], ["updated_at", "2016-05-05 14:08:35.112712"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.113499"], ["updated_at", "2016-05-05 14:08:35.113499"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.114269"], ["updated_at", "2016-05-05 14:08:35.114269"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.115025"], ["updated_at", "2016-05-05 14:08:35.115025"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.115870"], ["updated_at", "2016-05-05 14:08:35.115870"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.116622"], ["updated_at", "2016-05-05 14:08:35.116622"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.117366"], ["updated_at", "2016-05-05 14:08:35.117366"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.118066"], ["updated_at", "2016-05-05 14:08:35.118066"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.118758"], ["updated_at", "2016-05-05 14:08:35.118758"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.119448"], ["updated_at", "2016-05-05 14:08:35.119448"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.120137"], ["updated_at", "2016-05-05 14:08:35.120137"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.120840"], ["updated_at", "2016-05-05 14:08:35.120840"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.121486"], ["updated_at", "2016-05-05 14:08:35.121486"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.122141"], ["updated_at", "2016-05-05 14:08:35.122141"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.122783"], ["updated_at", "2016-05-05 14:08:35.122783"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.123725"], ["updated_at", "2016-05-05 14:08:35.123725"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.124746"], ["updated_at", "2016-05-05 14:08:35.124746"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.125724"], ["updated_at", "2016-05-05 14:08:35.125724"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.126695"], ["updated_at", "2016-05-05 14:08:35.126695"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.127675"], ["updated_at", "2016-05-05 14:08:35.127675"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.128599"], ["updated_at", "2016-05-05 14:08:35.128599"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.129544"], ["updated_at", "2016-05-05 14:08:35.129544"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.130462"], ["updated_at", "2016-05-05 14:08:35.130462"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.131395"], ["updated_at", "2016-05-05 14:08:35.131395"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.132316"], ["updated_at", "2016-05-05 14:08:35.132316"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.133236"], ["updated_at", "2016-05-05 14:08:35.133236"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.134143"], ["updated_at", "2016-05-05 14:08:35.134143"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.134898"], ["updated_at", "2016-05-05 14:08:35.134898"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.135659"], ["updated_at", "2016-05-05 14:08:35.135659"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.136417"], ["updated_at", "2016-05-05 14:08:35.136417"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.137175"], ["updated_at", "2016-05-05 14:08:35.137175"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.137996"], ["updated_at", "2016-05-05 14:08:35.137996"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.138653"], ["updated_at", "2016-05-05 14:08:35.138653"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.139432"], ["updated_at", "2016-05-05 14:08:35.139432"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.140242"], ["updated_at", "2016-05-05 14:08:35.140242"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.140905"], ["updated_at", "2016-05-05 14:08:35.140905"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.141614"], ["updated_at", "2016-05-05 14:08:35.141614"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Asset Load (0.2ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?  [["theme_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Theme14"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-05 14:08:35.181819"], ["updated_at", "2016-05-05 14:08:35.181819"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-05 14:08:35.100192"], ["updated_at", "2016-05-05 14:08:35.100192"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-05 14:08:35.101333"], ["updated_at", "2016-05-05 14:08:35.101333"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-05 14:08:35.102337"], ["updated_at", "2016-05-05 14:08:35.102337"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-05 14:08:35.103324"], ["updated_at", "2016-05-05 14:08:35.103324"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-05 14:08:35.104297"], ["updated_at", "2016-05-05 14:08:35.104297"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-05 14:08:35.105226"], ["updated_at", "2016-05-05 14:08:35.105226"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["created_at", "2016-05-05 14:08:35.106161"], ["updated_at", "2016-05-05 14:08:35.106161"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["created_at", "2016-05-05 14:08:35.107085"], ["updated_at", "2016-05-05 14:08:35.107085"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["created_at", "2016-05-05 14:08:35.108041"], ["updated_at", "2016-05-05 14:08:35.108041"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["created_at", "2016-05-05 14:08:35.108968"], ["updated_at", "2016-05-05 14:08:35.108968"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["created_at", "2016-05-05 14:08:35.109921"], ["updated_at", "2016-05-05 14:08:35.109921"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["created_at", "2016-05-05 14:08:35.110856"], ["updated_at", "2016-05-05 14:08:35.110856"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["created_at", "2016-05-05 14:08:35.111909"], ["updated_at", "2016-05-05 14:08:35.111909"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-05 14:08:35.112712"], ["updated_at", "2016-05-05 14:08:35.112712"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-05 14:08:35.113499"], ["updated_at", "2016-05-05 14:08:35.113499"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-05 14:08:35.114269"], ["updated_at", "2016-05-05 14:08:35.114269"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-05 14:08:35.115025"], ["updated_at", "2016-05-05 14:08:35.115025"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-05 14:08:35.115870"], ["updated_at", "2016-05-05 14:08:35.115870"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-05 14:08:35.116622"], ["updated_at", "2016-05-05 14:08:35.116622"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-05 14:08:35.117366"], ["updated_at", "2016-05-05 14:08:35.117366"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-05 14:08:35.118066"], ["updated_at", "2016-05-05 14:08:35.118066"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-05 14:08:35.118758"], ["updated_at", "2016-05-05 14:08:35.118758"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-05 14:08:35.119448"], ["updated_at", "2016-05-05 14:08:35.119448"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-05 14:08:35.120137"], ["updated_at", "2016-05-05 14:08:35.120137"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-05 14:08:35.120840"], ["updated_at", "2016-05-05 14:08:35.120840"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-05 14:08:35.121486"], ["updated_at", "2016-05-05 14:08:35.121486"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-05 14:08:35.122141"], ["updated_at", "2016-05-05 14:08:35.122141"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-05 14:08:35.122783"], ["updated_at", "2016-05-05 14:08:35.122783"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-05 14:08:35.123725"], ["updated_at", "2016-05-05 14:08:35.123725"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-05 14:08:35.124746"], ["updated_at", "2016-05-05 14:08:35.124746"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-05 14:08:35.125724"], ["updated_at", "2016-05-05 14:08:35.125724"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["created_at", "2016-05-05 14:08:35.126695"], ["updated_at", "2016-05-05 14:08:35.126695"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["created_at", "2016-05-05 14:08:35.127675"], ["updated_at", "2016-05-05 14:08:35.127675"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["created_at", "2016-05-05 14:08:35.128599"], ["updated_at", "2016-05-05 14:08:35.128599"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["created_at", "2016-05-05 14:08:35.129544"], ["updated_at", "2016-05-05 14:08:35.129544"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["created_at", "2016-05-05 14:08:35.130462"], ["updated_at", "2016-05-05 14:08:35.130462"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-05 14:08:35.131395"], ["updated_at", "2016-05-05 14:08:35.131395"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-05 14:08:35.132316"], ["updated_at", "2016-05-05 14:08:35.132316"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-05 14:08:35.133236"], ["updated_at", "2016-05-05 14:08:35.133236"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-05 14:08:35.134143"], ["updated_at", "2016-05-05 14:08:35.134143"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-05 14:08:35.134898"], ["updated_at", "2016-05-05 14:08:35.134898"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-05 14:08:35.135659"], ["updated_at", "2016-05-05 14:08:35.135659"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-05 14:08:35.136417"], ["updated_at", "2016-05-05 14:08:35.136417"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-05 14:08:35.137175"], ["updated_at", "2016-05-05 14:08:35.137175"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["created_at", "2016-05-05 14:08:35.137996"], ["updated_at", "2016-05-05 14:08:35.137996"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-05 14:08:35.138653"], ["updated_at", "2016-05-05 14:08:35.138653"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-05 14:08:35.139432"], ["updated_at", "2016-05-05 14:08:35.139432"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["created_at", "2016-05-05 14:08:35.140242"], ["updated_at", "2016-05-05 14:08:35.140242"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["created_at", "2016-05-05 14:08:35.140905"], ["updated_at", "2016-05-05 14:08:35.140905"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["created_at", "2016-05-05 14:08:35.141614"], ["updated_at", "2016-05-05 14:08:35.141614"], ["theme_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------
MagazCore::ThemeTest: test_validates_default_directories_presence
-----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example39' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example39"], ["subdomain", "example39"], ["created_at", "2016-05-05 14:08:35.222631"], ["updated_at", "2016-05-05 14:08:35.222631"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme15"], ["created_at", "2016-05-05 14:08:35.271708"], ["updated_at", "2016-05-05 14:08:35.271708"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.273542"], ["updated_at", "2016-05-05 14:08:35.273542"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.274433"], ["updated_at", "2016-05-05 14:08:35.274433"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.275146"], ["updated_at", "2016-05-05 14:08:35.275146"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.275842"], ["updated_at", "2016-05-05 14:08:35.275842"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.276551"], ["updated_at", "2016-05-05 14:08:35.276551"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.277243"], ["updated_at", "2016-05-05 14:08:35.277243"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.277916"], ["updated_at", "2016-05-05 14:08:35.277916"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.278583"], ["updated_at", "2016-05-05 14:08:35.278583"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.279248"], ["updated_at", "2016-05-05 14:08:35.279248"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.279951"], ["updated_at", "2016-05-05 14:08:35.279951"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.280615"], ["updated_at", "2016-05-05 14:08:35.280615"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.281275"], ["updated_at", "2016-05-05 14:08:35.281275"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.281946"], ["updated_at", "2016-05-05 14:08:35.281946"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.282604"], ["updated_at", "2016-05-05 14:08:35.282604"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.283271"], ["updated_at", "2016-05-05 14:08:35.283271"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.283951"], ["updated_at", "2016-05-05 14:08:35.283951"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.284914"], ["updated_at", "2016-05-05 14:08:35.284914"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.285635"], ["updated_at", "2016-05-05 14:08:35.285635"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.286318"], ["updated_at", "2016-05-05 14:08:35.286318"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.286995"], ["updated_at", "2016-05-05 14:08:35.286995"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.287673"], ["updated_at", "2016-05-05 14:08:35.287673"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.288369"], ["updated_at", "2016-05-05 14:08:35.288369"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.289049"], ["updated_at", "2016-05-05 14:08:35.289049"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.289727"], ["updated_at", "2016-05-05 14:08:35.289727"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.290400"], ["updated_at", "2016-05-05 14:08:35.290400"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.291073"], ["updated_at", "2016-05-05 14:08:35.291073"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.291747"], ["updated_at", "2016-05-05 14:08:35.291747"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.292418"], ["updated_at", "2016-05-05 14:08:35.292418"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.293084"], ["updated_at", "2016-05-05 14:08:35.293084"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.293752"], ["updated_at", "2016-05-05 14:08:35.293752"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.294433"], ["updated_at", "2016-05-05 14:08:35.294433"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.295112"], ["updated_at", "2016-05-05 14:08:35.295112"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.295783"], ["updated_at", "2016-05-05 14:08:35.295783"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.296447"], ["updated_at", "2016-05-05 14:08:35.296447"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.297114"], ["updated_at", "2016-05-05 14:08:35.297114"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.297789"], ["updated_at", "2016-05-05 14:08:35.297789"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.298461"], ["updated_at", "2016-05-05 14:08:35.298461"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.299134"], ["updated_at", "2016-05-05 14:08:35.299134"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.299801"], ["updated_at", "2016-05-05 14:08:35.299801"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.300468"], ["updated_at", "2016-05-05 14:08:35.300468"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.301138"], ["updated_at", "2016-05-05 14:08:35.301138"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.301805"], ["updated_at", "2016-05-05 14:08:35.301805"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.302476"], ["updated_at", "2016-05-05 14:08:35.302476"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.303140"], ["updated_at", "2016-05-05 14:08:35.303140"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.303867"], ["updated_at", "2016-05-05 14:08:35.303867"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.304559"], ["updated_at", "2016-05-05 14:08:35.304559"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.305248"], ["updated_at", "2016-05-05 14:08:35.305248"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.305923"], ["updated_at", "2016-05-05 14:08:35.305923"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.306589"], ["updated_at", "2016-05-05 14:08:35.306589"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.307360"], ["updated_at", "2016-05-05 14:08:35.307360"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Theme Load (0.0ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Asset Load (0.2ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?  [["theme_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Theme15"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-05 14:08:35.342917"], ["updated_at", "2016-05-05 14:08:35.342917"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-05 14:08:35.273542"], ["updated_at", "2016-05-05 14:08:35.273542"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-05 14:08:35.274433"], ["updated_at", "2016-05-05 14:08:35.274433"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-05 14:08:35.275146"], ["updated_at", "2016-05-05 14:08:35.275146"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-05 14:08:35.275842"], ["updated_at", "2016-05-05 14:08:35.275842"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-05 14:08:35.276551"], ["updated_at", "2016-05-05 14:08:35.276551"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-05 14:08:35.277243"], ["updated_at", "2016-05-05 14:08:35.277243"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["created_at", "2016-05-05 14:08:35.277916"], ["updated_at", "2016-05-05 14:08:35.277916"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["created_at", "2016-05-05 14:08:35.278583"], ["updated_at", "2016-05-05 14:08:35.278583"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["created_at", "2016-05-05 14:08:35.279248"], ["updated_at", "2016-05-05 14:08:35.279248"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["created_at", "2016-05-05 14:08:35.279951"], ["updated_at", "2016-05-05 14:08:35.279951"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["created_at", "2016-05-05 14:08:35.280615"], ["updated_at", "2016-05-05 14:08:35.280615"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["created_at", "2016-05-05 14:08:35.281275"], ["updated_at", "2016-05-05 14:08:35.281275"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["created_at", "2016-05-05 14:08:35.281946"], ["updated_at", "2016-05-05 14:08:35.281946"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-05 14:08:35.282604"], ["updated_at", "2016-05-05 14:08:35.282604"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-05 14:08:35.283271"], ["updated_at", "2016-05-05 14:08:35.283271"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-05 14:08:35.283951"], ["updated_at", "2016-05-05 14:08:35.283951"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-05 14:08:35.284914"], ["updated_at", "2016-05-05 14:08:35.284914"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-05 14:08:35.285635"], ["updated_at", "2016-05-05 14:08:35.285635"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-05 14:08:35.286318"], ["updated_at", "2016-05-05 14:08:35.286318"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-05 14:08:35.286995"], ["updated_at", "2016-05-05 14:08:35.286995"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-05 14:08:35.287673"], ["updated_at", "2016-05-05 14:08:35.287673"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-05 14:08:35.288369"], ["updated_at", "2016-05-05 14:08:35.288369"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-05 14:08:35.289049"], ["updated_at", "2016-05-05 14:08:35.289049"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-05 14:08:35.289727"], ["updated_at", "2016-05-05 14:08:35.289727"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-05 14:08:35.290400"], ["updated_at", "2016-05-05 14:08:35.290400"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-05 14:08:35.291073"], ["updated_at", "2016-05-05 14:08:35.291073"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-05 14:08:35.291747"], ["updated_at", "2016-05-05 14:08:35.291747"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-05 14:08:35.292418"], ["updated_at", "2016-05-05 14:08:35.292418"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-05 14:08:35.293084"], ["updated_at", "2016-05-05 14:08:35.293084"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-05 14:08:35.293752"], ["updated_at", "2016-05-05 14:08:35.293752"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-05 14:08:35.294433"], ["updated_at", "2016-05-05 14:08:35.294433"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["created_at", "2016-05-05 14:08:35.295112"], ["updated_at", "2016-05-05 14:08:35.295112"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["created_at", "2016-05-05 14:08:35.295783"], ["updated_at", "2016-05-05 14:08:35.295783"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["created_at", "2016-05-05 14:08:35.296447"], ["updated_at", "2016-05-05 14:08:35.296447"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["created_at", "2016-05-05 14:08:35.297114"], ["updated_at", "2016-05-05 14:08:35.297114"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["created_at", "2016-05-05 14:08:35.297789"], ["updated_at", "2016-05-05 14:08:35.297789"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-05 14:08:35.298461"], ["updated_at", "2016-05-05 14:08:35.298461"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-05 14:08:35.299134"], ["updated_at", "2016-05-05 14:08:35.299134"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-05 14:08:35.299801"], ["updated_at", "2016-05-05 14:08:35.299801"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-05 14:08:35.300468"], ["updated_at", "2016-05-05 14:08:35.300468"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-05 14:08:35.301138"], ["updated_at", "2016-05-05 14:08:35.301138"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-05 14:08:35.301805"], ["updated_at", "2016-05-05 14:08:35.301805"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-05 14:08:35.302476"], ["updated_at", "2016-05-05 14:08:35.302476"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-05 14:08:35.303140"], ["updated_at", "2016-05-05 14:08:35.303140"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["created_at", "2016-05-05 14:08:35.303867"], ["updated_at", "2016-05-05 14:08:35.303867"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-05 14:08:35.304559"], ["updated_at", "2016-05-05 14:08:35.304559"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-05 14:08:35.305248"], ["updated_at", "2016-05-05 14:08:35.305248"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["created_at", "2016-05-05 14:08:35.305923"], ["updated_at", "2016-05-05 14:08:35.305923"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["created_at", "2016-05-05 14:08:35.306589"], ["updated_at", "2016-05-05 14:08:35.306589"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["created_at", "2016-05-05 14:08:35.307360"], ["updated_at", "2016-05-05 14:08:35.307360"], ["theme_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------
MagazCore::ThemeTest: test_validates_default_layout_presence
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example40' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example40"], ["subdomain", "example40"], ["created_at", "2016-05-05 14:08:35.380677"], ["updated_at", "2016-05-05 14:08:35.380677"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme16"], ["created_at", "2016-05-05 14:08:35.437887"], ["updated_at", "2016-05-05 14:08:35.437887"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.439052"], ["updated_at", "2016-05-05 14:08:35.439052"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.439876"], ["updated_at", "2016-05-05 14:08:35.439876"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.440580"], ["updated_at", "2016-05-05 14:08:35.440580"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.441424"], ["updated_at", "2016-05-05 14:08:35.441424"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.442075"], ["updated_at", "2016-05-05 14:08:35.442075"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.442863"], ["updated_at", "2016-05-05 14:08:35.442863"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.443656"], ["updated_at", "2016-05-05 14:08:35.443656"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.444303"], ["updated_at", "2016-05-05 14:08:35.444303"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.445092"], ["updated_at", "2016-05-05 14:08:35.445092"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.446159"], ["updated_at", "2016-05-05 14:08:35.446159"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.447348"], ["updated_at", "2016-05-05 14:08:35.447348"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.448317"], ["updated_at", "2016-05-05 14:08:35.448317"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.449525"], ["updated_at", "2016-05-05 14:08:35.449525"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.451158"], ["updated_at", "2016-05-05 14:08:35.451158"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.452145"], ["updated_at", "2016-05-05 14:08:35.452145"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.453275"], ["updated_at", "2016-05-05 14:08:35.453275"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.454202"], ["updated_at", "2016-05-05 14:08:35.454202"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.455306"], ["updated_at", "2016-05-05 14:08:35.455306"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.456370"], ["updated_at", "2016-05-05 14:08:35.456370"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.457124"], ["updated_at", "2016-05-05 14:08:35.457124"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.458017"], ["updated_at", "2016-05-05 14:08:35.458017"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.458770"], ["updated_at", "2016-05-05 14:08:35.458770"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.459661"], ["updated_at", "2016-05-05 14:08:35.459661"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.460388"], ["updated_at", "2016-05-05 14:08:35.460388"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.461135"], ["updated_at", "2016-05-05 14:08:35.461135"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.462043"], ["updated_at", "2016-05-05 14:08:35.462043"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.462716"], ["updated_at", "2016-05-05 14:08:35.462716"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.463530"], ["updated_at", "2016-05-05 14:08:35.463530"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.464210"], ["updated_at", "2016-05-05 14:08:35.464210"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.465058"], ["updated_at", "2016-05-05 14:08:35.465058"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.465910"], ["updated_at", "2016-05-05 14:08:35.465910"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.466553"], ["updated_at", "2016-05-05 14:08:35.466553"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.467379"], ["updated_at", "2016-05-05 14:08:35.467379"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.468025"], ["updated_at", "2016-05-05 14:08:35.468025"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.468773"], ["updated_at", "2016-05-05 14:08:35.468773"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.469530"], ["updated_at", "2016-05-05 14:08:35.469530"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.470429"], ["updated_at", "2016-05-05 14:08:35.470429"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.471283"], ["updated_at", "2016-05-05 14:08:35.471283"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.471951"], ["updated_at", "2016-05-05 14:08:35.471951"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.472773"], ["updated_at", "2016-05-05 14:08:35.472773"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.473440"], ["updated_at", "2016-05-05 14:08:35.473440"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.474242"], ["updated_at", "2016-05-05 14:08:35.474242"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.475077"], ["updated_at", "2016-05-05 14:08:35.475077"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.475729"], ["updated_at", "2016-05-05 14:08:35.475729"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.476498"], ["updated_at", "2016-05-05 14:08:35.476498"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.477178"], ["updated_at", "2016-05-05 14:08:35.477178"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.478284"], ["updated_at", "2016-05-05 14:08:35.478284"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.479260"], ["updated_at", "2016-05-05 14:08:35.479260"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.480275"], ["updated_at", "2016-05-05 14:08:35.480275"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.481295"], ["updated_at", "2016-05-05 14:08:35.481295"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Theme Load (0.0ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Asset Load (0.2ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?  [["theme_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Theme16"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-05 14:08:35.524240"], ["updated_at", "2016-05-05 14:08:35.524240"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-05 14:08:35.439052"], ["updated_at", "2016-05-05 14:08:35.439052"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-05 14:08:35.439876"], ["updated_at", "2016-05-05 14:08:35.439876"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-05 14:08:35.440580"], ["updated_at", "2016-05-05 14:08:35.440580"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-05 14:08:35.441424"], ["updated_at", "2016-05-05 14:08:35.441424"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-05 14:08:35.442075"], ["updated_at", "2016-05-05 14:08:35.442075"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-05 14:08:35.442863"], ["updated_at", "2016-05-05 14:08:35.442863"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["created_at", "2016-05-05 14:08:35.443656"], ["updated_at", "2016-05-05 14:08:35.443656"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["created_at", "2016-05-05 14:08:35.444303"], ["updated_at", "2016-05-05 14:08:35.444303"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["created_at", "2016-05-05 14:08:35.445092"], ["updated_at", "2016-05-05 14:08:35.445092"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["created_at", "2016-05-05 14:08:35.446159"], ["updated_at", "2016-05-05 14:08:35.446159"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["created_at", "2016-05-05 14:08:35.447348"], ["updated_at", "2016-05-05 14:08:35.447348"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["created_at", "2016-05-05 14:08:35.448317"], ["updated_at", "2016-05-05 14:08:35.448317"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["created_at", "2016-05-05 14:08:35.449525"], ["updated_at", "2016-05-05 14:08:35.449525"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-05 14:08:35.451158"], ["updated_at", "2016-05-05 14:08:35.451158"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-05 14:08:35.452145"], ["updated_at", "2016-05-05 14:08:35.452145"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-05 14:08:35.453275"], ["updated_at", "2016-05-05 14:08:35.453275"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-05 14:08:35.454202"], ["updated_at", "2016-05-05 14:08:35.454202"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-05 14:08:35.455306"], ["updated_at", "2016-05-05 14:08:35.455306"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-05 14:08:35.456370"], ["updated_at", "2016-05-05 14:08:35.456370"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-05 14:08:35.457124"], ["updated_at", "2016-05-05 14:08:35.457124"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-05 14:08:35.458017"], ["updated_at", "2016-05-05 14:08:35.458017"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-05 14:08:35.458770"], ["updated_at", "2016-05-05 14:08:35.458770"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-05 14:08:35.459661"], ["updated_at", "2016-05-05 14:08:35.459661"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-05 14:08:35.460388"], ["updated_at", "2016-05-05 14:08:35.460388"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-05 14:08:35.461135"], ["updated_at", "2016-05-05 14:08:35.461135"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-05 14:08:35.462043"], ["updated_at", "2016-05-05 14:08:35.462043"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-05 14:08:35.462716"], ["updated_at", "2016-05-05 14:08:35.462716"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-05 14:08:35.463530"], ["updated_at", "2016-05-05 14:08:35.463530"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-05 14:08:35.464210"], ["updated_at", "2016-05-05 14:08:35.464210"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-05 14:08:35.465058"], ["updated_at", "2016-05-05 14:08:35.465058"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-05 14:08:35.465910"], ["updated_at", "2016-05-05 14:08:35.465910"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["created_at", "2016-05-05 14:08:35.466553"], ["updated_at", "2016-05-05 14:08:35.466553"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["created_at", "2016-05-05 14:08:35.467379"], ["updated_at", "2016-05-05 14:08:35.467379"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["created_at", "2016-05-05 14:08:35.468025"], ["updated_at", "2016-05-05 14:08:35.468025"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["created_at", "2016-05-05 14:08:35.468773"], ["updated_at", "2016-05-05 14:08:35.468773"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["created_at", "2016-05-05 14:08:35.469530"], ["updated_at", "2016-05-05 14:08:35.469530"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-05 14:08:35.470429"], ["updated_at", "2016-05-05 14:08:35.470429"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-05 14:08:35.471283"], ["updated_at", "2016-05-05 14:08:35.471283"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-05 14:08:35.471951"], ["updated_at", "2016-05-05 14:08:35.471951"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-05 14:08:35.472773"], ["updated_at", "2016-05-05 14:08:35.472773"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-05 14:08:35.473440"], ["updated_at", "2016-05-05 14:08:35.473440"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-05 14:08:35.474242"], ["updated_at", "2016-05-05 14:08:35.474242"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-05 14:08:35.475077"], ["updated_at", "2016-05-05 14:08:35.475077"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-05 14:08:35.475729"], ["updated_at", "2016-05-05 14:08:35.475729"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["created_at", "2016-05-05 14:08:35.476498"], ["updated_at", "2016-05-05 14:08:35.476498"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-05 14:08:35.477178"], ["updated_at", "2016-05-05 14:08:35.477178"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-05 14:08:35.478284"], ["updated_at", "2016-05-05 14:08:35.478284"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["created_at", "2016-05-05 14:08:35.479260"], ["updated_at", "2016-05-05 14:08:35.479260"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["created_at", "2016-05-05 14:08:35.480275"], ["updated_at", "2016-05-05 14:08:35.480275"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["created_at", "2016-05-05 14:08:35.481295"], ["updated_at", "2016-05-05 14:08:35.481295"], ["theme_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
MagazCore::ThemeTest: test_validates_default_templates_presence
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example41' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example41"], ["subdomain", "example41"], ["created_at", "2016-05-05 14:08:35.568802"], ["updated_at", "2016-05-05 14:08:35.568802"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme17"], ["created_at", "2016-05-05 14:08:35.616377"], ["updated_at", "2016-05-05 14:08:35.616377"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.617520"], ["updated_at", "2016-05-05 14:08:35.617520"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.618281"], ["updated_at", "2016-05-05 14:08:35.618281"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.618976"], ["updated_at", "2016-05-05 14:08:35.618976"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.619667"], ["updated_at", "2016-05-05 14:08:35.619667"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.620314"], ["updated_at", "2016-05-05 14:08:35.620314"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.620989"], ["updated_at", "2016-05-05 14:08:35.620989"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.622145"], ["updated_at", "2016-05-05 14:08:35.622145"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.623122"], ["updated_at", "2016-05-05 14:08:35.623122"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.624135"], ["updated_at", "2016-05-05 14:08:35.624135"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.625095"], ["updated_at", "2016-05-05 14:08:35.625095"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.626099"], ["updated_at", "2016-05-05 14:08:35.626099"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.627058"], ["updated_at", "2016-05-05 14:08:35.627058"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.628157"], ["updated_at", "2016-05-05 14:08:35.628157"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.629156"], ["updated_at", "2016-05-05 14:08:35.629156"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.630092"], ["updated_at", "2016-05-05 14:08:35.630092"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.631064"], ["updated_at", "2016-05-05 14:08:35.631064"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.632058"], ["updated_at", "2016-05-05 14:08:35.632058"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.632973"], ["updated_at", "2016-05-05 14:08:35.632973"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.633930"], ["updated_at", "2016-05-05 14:08:35.633930"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.634721"], ["updated_at", "2016-05-05 14:08:35.634721"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.635489"], ["updated_at", "2016-05-05 14:08:35.635489"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.636279"], ["updated_at", "2016-05-05 14:08:35.636279"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.637036"], ["updated_at", "2016-05-05 14:08:35.637036"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.637910"], ["updated_at", "2016-05-05 14:08:35.637910"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.638737"], ["updated_at", "2016-05-05 14:08:35.638737"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.639522"], ["updated_at", "2016-05-05 14:08:35.639522"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.640317"], ["updated_at", "2016-05-05 14:08:35.640317"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.641086"], ["updated_at", "2016-05-05 14:08:35.641086"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.641838"], ["updated_at", "2016-05-05 14:08:35.641838"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.642520"], ["updated_at", "2016-05-05 14:08:35.642520"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.643185"], ["updated_at", "2016-05-05 14:08:35.643185"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.643873"], ["updated_at", "2016-05-05 14:08:35.643873"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.644552"], ["updated_at", "2016-05-05 14:08:35.644552"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.645314"], ["updated_at", "2016-05-05 14:08:35.645314"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.646425"], ["updated_at", "2016-05-05 14:08:35.646425"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.647439"], ["updated_at", "2016-05-05 14:08:35.647439"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.648439"], ["updated_at", "2016-05-05 14:08:35.648439"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.649426"], ["updated_at", "2016-05-05 14:08:35.649426"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.650397"], ["updated_at", "2016-05-05 14:08:35.650397"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.651361"], ["updated_at", "2016-05-05 14:08:35.651361"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.652306"], ["updated_at", "2016-05-05 14:08:35.652306"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.653272"], ["updated_at", "2016-05-05 14:08:35.653272"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.654236"], ["updated_at", "2016-05-05 14:08:35.654236"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.655162"], ["updated_at", "2016-05-05 14:08:35.655162"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.656151"], ["updated_at", "2016-05-05 14:08:35.656151"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.656956"], ["updated_at", "2016-05-05 14:08:35.656956"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.657730"], ["updated_at", "2016-05-05 14:08:35.657730"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.658515"], ["updated_at", "2016-05-05 14:08:35.658515"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.659306"], ["updated_at", "2016-05-05 14:08:35.659306"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:35.660057"], ["updated_at", "2016-05-05 14:08:35.660057"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Theme Load (0.0ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Asset Load (0.2ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?  [["theme_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Theme17"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-05 14:08:35.700383"], ["updated_at", "2016-05-05 14:08:35.700383"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-05 14:08:35.617520"], ["updated_at", "2016-05-05 14:08:35.617520"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-05 14:08:35.618281"], ["updated_at", "2016-05-05 14:08:35.618281"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-05 14:08:35.618976"], ["updated_at", "2016-05-05 14:08:35.618976"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-05 14:08:35.619667"], ["updated_at", "2016-05-05 14:08:35.619667"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-05 14:08:35.620314"], ["updated_at", "2016-05-05 14:08:35.620314"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-05 14:08:35.620989"], ["updated_at", "2016-05-05 14:08:35.620989"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["created_at", "2016-05-05 14:08:35.622145"], ["updated_at", "2016-05-05 14:08:35.622145"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["created_at", "2016-05-05 14:08:35.623122"], ["updated_at", "2016-05-05 14:08:35.623122"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["created_at", "2016-05-05 14:08:35.624135"], ["updated_at", "2016-05-05 14:08:35.624135"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["created_at", "2016-05-05 14:08:35.625095"], ["updated_at", "2016-05-05 14:08:35.625095"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["created_at", "2016-05-05 14:08:35.626099"], ["updated_at", "2016-05-05 14:08:35.626099"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["created_at", "2016-05-05 14:08:35.627058"], ["updated_at", "2016-05-05 14:08:35.627058"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["created_at", "2016-05-05 14:08:35.628157"], ["updated_at", "2016-05-05 14:08:35.628157"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-05 14:08:35.629156"], ["updated_at", "2016-05-05 14:08:35.629156"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-05 14:08:35.630092"], ["updated_at", "2016-05-05 14:08:35.630092"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-05 14:08:35.631064"], ["updated_at", "2016-05-05 14:08:35.631064"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-05 14:08:35.632058"], ["updated_at", "2016-05-05 14:08:35.632058"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-05 14:08:35.632973"], ["updated_at", "2016-05-05 14:08:35.632973"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-05 14:08:35.633930"], ["updated_at", "2016-05-05 14:08:35.633930"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-05 14:08:35.634721"], ["updated_at", "2016-05-05 14:08:35.634721"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-05 14:08:35.635489"], ["updated_at", "2016-05-05 14:08:35.635489"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-05 14:08:35.636279"], ["updated_at", "2016-05-05 14:08:35.636279"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-05 14:08:35.637036"], ["updated_at", "2016-05-05 14:08:35.637036"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-05 14:08:35.637910"], ["updated_at", "2016-05-05 14:08:35.637910"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-05 14:08:35.638737"], ["updated_at", "2016-05-05 14:08:35.638737"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-05 14:08:35.639522"], ["updated_at", "2016-05-05 14:08:35.639522"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-05 14:08:35.640317"], ["updated_at", "2016-05-05 14:08:35.640317"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-05 14:08:35.641086"], ["updated_at", "2016-05-05 14:08:35.641086"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-05 14:08:35.641838"], ["updated_at", "2016-05-05 14:08:35.641838"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-05 14:08:35.642520"], ["updated_at", "2016-05-05 14:08:35.642520"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-05 14:08:35.643185"], ["updated_at", "2016-05-05 14:08:35.643185"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["created_at", "2016-05-05 14:08:35.643873"], ["updated_at", "2016-05-05 14:08:35.643873"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["created_at", "2016-05-05 14:08:35.644552"], ["updated_at", "2016-05-05 14:08:35.644552"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["created_at", "2016-05-05 14:08:35.645314"], ["updated_at", "2016-05-05 14:08:35.645314"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["created_at", "2016-05-05 14:08:35.646425"], ["updated_at", "2016-05-05 14:08:35.646425"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["created_at", "2016-05-05 14:08:35.647439"], ["updated_at", "2016-05-05 14:08:35.647439"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-05 14:08:35.648439"], ["updated_at", "2016-05-05 14:08:35.648439"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-05 14:08:35.649426"], ["updated_at", "2016-05-05 14:08:35.649426"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-05 14:08:35.650397"], ["updated_at", "2016-05-05 14:08:35.650397"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-05 14:08:35.651361"], ["updated_at", "2016-05-05 14:08:35.651361"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-05 14:08:35.652306"], ["updated_at", "2016-05-05 14:08:35.652306"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-05 14:08:35.653272"], ["updated_at", "2016-05-05 14:08:35.653272"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-05 14:08:35.654236"], ["updated_at", "2016-05-05 14:08:35.654236"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-05 14:08:35.655162"], ["updated_at", "2016-05-05 14:08:35.655162"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["created_at", "2016-05-05 14:08:35.656151"], ["updated_at", "2016-05-05 14:08:35.656151"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-05 14:08:35.656956"], ["updated_at", "2016-05-05 14:08:35.656956"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-05 14:08:35.657730"], ["updated_at", "2016-05-05 14:08:35.657730"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["created_at", "2016-05-05 14:08:35.658515"], ["updated_at", "2016-05-05 14:08:35.658515"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["created_at", "2016-05-05 14:08:35.659306"], ["updated_at", "2016-05-05 14:08:35.659306"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["created_at", "2016-05-05 14:08:35.660057"], ["updated_at", "2016-05-05 14:08:35.660057"], ["theme_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------
MagazCore::AdminServices::DeleteArticleTest: test_should_delete_article_with_valid_id
-------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:35.745362"], ["updated_at", "2016-05-05 14:08:35.745362"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 25"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:35.747893"], ["updated_at", "2016-05-05 14:08:35.747893"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 5"], ["content", "Article 5 content"], ["blog_id", 1], ["created_at", "2016-05-05 14:08:35.750487"], ["updated_at", "2016-05-05 14:08:35.750487"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 6"], ["content", "Article 6 content"], ["blog_id", 1], ["created_at", "2016-05-05 14:08:35.752590"], ["updated_at", "2016-05-05 14:08:35.752590"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?[0m  [["blog_id", 1]]
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "articles" WHERE "articles"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?[0m  [["blog_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::DeleteArticleTest: test_should_not_delete_article_with_valid_blank_id
-----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:35.761659"], ["updated_at", "2016-05-05 14:08:35.761659"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 26"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:35.763631"], ["updated_at", "2016-05-05 14:08:35.763631"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 7"], ["content", "Article 7 content"], ["blog_id", 1], ["created_at", "2016-05-05 14:08:35.765523"], ["updated_at", "2016-05-05 14:08:35.765523"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 8"], ["content", "Article 8 content"], ["blog_id", 1], ["created_at", "2016-05-05 14:08:35.767164"], ["updated_at", "2016-05-05 14:08:35.767164"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?[0m  [["blog_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?  [["blog_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------
MagazCore::AdminServices::File::ChangeFileTest: test_should_not_update_file_with_blank_params
---------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:35.775219"], ["updated_at", "2016-05-05 14:08:35.775219"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "files" ("name", "shop_id", "file", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "File 3"], ["shop_id", 1], ["file", "test.txt"], ["created_at", "2016-05-05 14:08:35.779673"], ["updated_at", "2016-05-05 14:08:35.779673"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::File::ChangeFileTest: test_should_update_file_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:35.790561"], ["updated_at", "2016-05-05 14:08:35.790561"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "files" ("name", "shop_id", "file", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "File 4"], ["shop_id", 1], ["file", "test.txt"], ["created_at", "2016-05-05 14:08:35.795966"], ["updated_at", "2016-05-05 14:08:35.795966"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::File Load (0.0ms)[0m  SELECT  "files".* FROM "files" WHERE "files"."shop_id" = ? AND "files"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::File Load (0.0ms)[0m  SELECT  "files".* FROM "files" WHERE "files"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "files" SET "file" = ?, "name" = ?, "updated_at" = ? WHERE "files"."id" = ?[0m  [["file", "tapir.jpg"], ["name", "New name"], ["updated_at", "2016-05-05 14:08:35.800698"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::User::DeleteUserTest: test_should_delete_user_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:35.806719"], ["updated_at", "2016-05-05 14:08:35.806719"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example30.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "account_owner", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example30.com"], ["first_name", "First Name 30 "], ["last_name", "Last Name 30"], ["password_salt", "$2a$10$xnpI3B33CnQ4fE7fKQV17u"], ["password_digest", "$2a$10$xnpI3B33CnQ4fE7fKQV17uFKKpa8ZJM8ZU4mDQS4dHUCrxOORiyOy"], ["shop_id", 1], ["account_owner", "t"], ["created_at", "2016-05-05 14:08:35.967884"], ["updated_at", "2016-05-05 14:08:35.967884"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example31.com' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example31.com"], ["first_name", "First Name 31 "], ["last_name", "Last Name 31"], ["password_salt", "$2a$10$RtEFTxEhULAwFefw.UwrBO"], ["password_digest", "$2a$10$RtEFTxEhULAwFefw.UwrBO/o3d6xQuRjD.lgHtaPDwaXnQuD50sF2"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:36.126218"], ["updated_at", "2016-05-05 14:08:36.126218"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------
MagazCore::AdminServices::User::DeleteUserTest: test_should_not_delete_shop_owner
---------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:36.136136"], ["updated_at", "2016-05-05 14:08:36.136136"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example32.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "account_owner", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example32.com"], ["first_name", "First Name 32 "], ["last_name", "Last Name 32"], ["password_salt", "$2a$10$fK7ik6pbnxj/77UbCUqn1e"], ["password_digest", "$2a$10$fK7ik6pbnxj/77UbCUqn1eQyZuMpcSbXH.CGLv/EW..r2j7ytaNRS"], ["shop_id", 1], ["account_owner", "t"], ["created_at", "2016-05-05 14:08:36.291189"], ["updated_at", "2016-05-05 14:08:36.291189"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example33.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example33.com"], ["first_name", "First Name 33 "], ["last_name", "Last Name 33"], ["password_salt", "$2a$10$AeL.F9FGA1IbxY7XZGBwzu"], ["password_digest", "$2a$10$AeL.F9FGA1IbxY7XZGBwzu31FcEjQjoKCAQuXqfUSSVo33.wliEv."], ["shop_id", 1], ["created_at", "2016-05-05 14:08:36.444722"], ["updated_at", "2016-05-05 14:08:36.444722"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36mMagazCore::User Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::DeleteUserTest: test_should_not_delete_user_with_invalid_params
-----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:36.453825"], ["updated_at", "2016-05-05 14:08:36.453825"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example34.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "account_owner", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example34.com"], ["first_name", "First Name 34 "], ["last_name", "Last Name 34"], ["password_salt", "$2a$10$MHnrc8nbaNPXQ4gaRoRzJe"], ["password_digest", "$2a$10$MHnrc8nbaNPXQ4gaRoRzJekI8F6Bz7/.uU2oKh7jrTTk7sQIYFQ/2"], ["shop_id", 1], ["account_owner", "t"], ["created_at", "2016-05-05 14:08:36.609215"], ["updated_at", "2016-05-05 14:08:36.609215"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example35.com' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example35.com"], ["first_name", "First Name 35 "], ["last_name", "Last Name 35"], ["password_salt", "$2a$10$nBPphha6wMGlCNWapMctx."], ["password_digest", "$2a$10$nBPphha6wMGlCNWapMctx.HgnpxkXiunOvKKGuWW6YUzg3nvZG1.i"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:36.766511"], ["updated_at", "2016-05-05 14:08:36.766511"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------
MagazCore::PageTest: test_basic_visibility_functionality
--------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pages" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Title 4"], ["content", "Content 4"], ["created_at", "2016-05-05 14:08:36.776475"], ["updated_at", "2016-05-05 14:08:36.776475"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 5"], ["content", "Content 5"], ["published_at", "2016-05-05 14:07:36.777599"], ["created_at", "2016-05-05 14:08:36.778176"], ["updated_at", "2016-05-05 14:08:36.778176"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 6"], ["content", "Content 6"], ["published_at", "2016-05-05 14:07:36.777599"], ["created_at", "2016-05-05 14:08:36.779636"], ["updated_at", "2016-05-05 14:08:36.779636"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 7"], ["content", "Content 7"], ["published_at", "2016-05-05 14:07:36.777599"], ["created_at", "2016-05-05 14:08:36.780883"], ["updated_at", "2016-05-05 14:08:36.780883"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 8"], ["content", "Content 8"], ["published_at", "2016-05-05 14:07:36.777599"], ["created_at", "2016-05-05 14:08:36.782954"], ["updated_at", "2016-05-05 14:08:36.782954"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 9"], ["content", "Content 9"], ["published_at", "2016-05-05 14:07:36.777599"], ["created_at", "2016-05-05 14:08:36.784848"], ["updated_at", "2016-05-05 14:08:36.784848"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 10"], ["content", "Content 10"], ["published_at", "2016-05-05 14:07:36.777599"], ["created_at", "2016-05-05 14:08:36.786754"], ["updated_at", "2016-05-05 14:08:36.786754"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 11"], ["content", "Content 11"], ["published_at", "2016-05-05 14:07:36.777599"], ["created_at", "2016-05-05 14:08:36.788603"], ["updated_at", "2016-05-05 14:08:36.788603"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 12"], ["content", "Content 12"], ["published_at", "2016-05-05 14:07:36.777599"], ["created_at", "2016-05-05 14:08:36.790365"], ["updated_at", "2016-05-05 14:08:36.790365"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 13"], ["content", "Content 13"], ["published_at", "2016-05-05 14:07:36.777599"], ["created_at", "2016-05-05 14:08:36.792174"], ["updated_at", "2016-05-05 14:08:36.792174"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 14"], ["content", "Content 14"], ["published_at", "2016-05-05 14:07:36.777599"], ["created_at", "2016-05-05 14:08:36.793931"], ["updated_at", "2016-05-05 14:08:36.793931"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 15"], ["content", "Content 15"], ["publish_on", "2016-05-06 14:08:36.794947"], ["created_at", "2016-05-05 14:08:36.795595"], ["updated_at", "2016-05-05 14:08:36.795595"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 16"], ["content", "Content 16"], ["publish_on", "2016-05-06 14:08:36.794947"], ["created_at", "2016-05-05 14:08:36.797309"], ["updated_at", "2016-05-05 14:08:36.797309"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 17"], ["content", "Content 17"], ["publish_on", "2016-05-06 14:08:36.794947"], ["created_at", "2016-05-05 14:08:36.799549"], ["updated_at", "2016-05-05 14:08:36.799549"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 18"], ["content", "Content 18"], ["publish_on", "2016-05-06 14:08:36.794947"], ["created_at", "2016-05-05 14:08:36.801587"], ["updated_at", "2016-05-05 14:08:36.801587"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 19"], ["content", "Content 19"], ["publish_on", "2016-05-06 14:08:36.794947"], ["created_at", "2016-05-05 14:08:36.803514"], ["updated_at", "2016-05-05 14:08:36.803514"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 20"], ["content", "Content 20"], ["publish_on", "2016-05-06 14:08:36.794947"], ["created_at", "2016-05-05 14:08:36.805496"], ["updated_at", "2016-05-05 14:08:36.805496"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 21"], ["content", "Content 21"], ["publish_on", "2016-05-06 14:08:36.794947"], ["created_at", "2016-05-05 14:08:36.807421"], ["updated_at", "2016-05-05 14:08:36.807421"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 22"], ["content", "Content 22"], ["publish_on", "2016-05-06 14:08:36.794947"], ["created_at", "2016-05-05 14:08:36.809101"], ["updated_at", "2016-05-05 14:08:36.809101"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 23"], ["content", "Content 23"], ["publish_on", "2016-05-06 14:08:36.794947"], ["created_at", "2016-05-05 14:08:36.810693"], ["updated_at", "2016-05-05 14:08:36.810693"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 24"], ["content", "Content 24"], ["publish_on", "2016-05-06 14:08:36.794947"], ["created_at", "2016-05-05 14:08:36.812442"], ["updated_at", "2016-05-05 14:08:36.812442"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 25"], ["content", "Content 25"], ["publish_on", "2016-05-05 14:07:36.813520"], ["created_at", "2016-05-05 14:08:36.814093"], ["updated_at", "2016-05-05 14:08:36.814093"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 26"], ["content", "Content 26"], ["publish_on", "2016-05-05 14:07:36.813520"], ["created_at", "2016-05-05 14:08:36.815587"], ["updated_at", "2016-05-05 14:08:36.815587"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 27"], ["content", "Content 27"], ["publish_on", "2016-05-05 14:07:36.813520"], ["created_at", "2016-05-05 14:08:36.817118"], ["updated_at", "2016-05-05 14:08:36.817118"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 28"], ["content", "Content 28"], ["publish_on", "2016-05-05 14:07:36.813520"], ["created_at", "2016-05-05 14:08:36.818493"], ["updated_at", "2016-05-05 14:08:36.818493"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 29"], ["content", "Content 29"], ["publish_on", "2016-05-05 14:07:36.813520"], ["created_at", "2016-05-05 14:08:36.819867"], ["updated_at", "2016-05-05 14:08:36.819867"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 30"], ["content", "Content 30"], ["publish_on", "2016-05-05 14:07:36.813520"], ["created_at", "2016-05-05 14:08:36.821383"], ["updated_at", "2016-05-05 14:08:36.821383"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 31"], ["content", "Content 31"], ["publish_on", "2016-05-05 14:07:36.813520"], ["created_at", "2016-05-05 14:08:36.823570"], ["updated_at", "2016-05-05 14:08:36.823570"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 32"], ["content", "Content 32"], ["publish_on", "2016-05-05 14:07:36.813520"], ["created_at", "2016-05-05 14:08:36.825601"], ["updated_at", "2016-05-05 14:08:36.825601"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 33"], ["content", "Content 33"], ["publish_on", "2016-05-05 14:07:36.813520"], ["created_at", "2016-05-05 14:08:36.827824"], ["updated_at", "2016-05-05 14:08:36.827824"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 34"], ["content", "Content 34"], ["publish_on", "2016-05-05 14:07:36.813520"], ["created_at", "2016-05-05 14:08:36.829932"], ["updated_at", "2016-05-05 14:08:36.829932"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "pages" SET "publish_on" = ?, "updated_at" = ? WHERE "pages"."id" = ?  [["publish_on", "2016-05-07 14:08:36.832159"], ["updated_at", "2016-05-05 14:08:36.832649"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "pages" SET "publish_on" = ?, "published_at" = ?, "updated_at" = ? WHERE "pages"."id" = ?[0m  [["publish_on", nil], ["published_at", "2016-05-03 14:08:36.834019"], ["updated_at", "2016-05-05 14:08:36.834505"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------
MagazCore::PageTest: test_two_pages_with_same_handle_and_different_shops
------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Title 35"], ["content", "Content 35"], ["created_at", "2016-05-05 14:08:36.839243"], ["updated_at", "2016-05-05 14:08:36.839243"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 36"], ["content", "Content 36"], ["published_at", "2016-05-05 14:07:36.840522"], ["created_at", "2016-05-05 14:08:36.841155"], ["updated_at", "2016-05-05 14:08:36.841155"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 37"], ["content", "Content 37"], ["published_at", "2016-05-05 14:07:36.840522"], ["created_at", "2016-05-05 14:08:36.842707"], ["updated_at", "2016-05-05 14:08:36.842707"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 38"], ["content", "Content 38"], ["published_at", "2016-05-05 14:07:36.840522"], ["created_at", "2016-05-05 14:08:36.843963"], ["updated_at", "2016-05-05 14:08:36.843963"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 39"], ["content", "Content 39"], ["published_at", "2016-05-05 14:07:36.840522"], ["created_at", "2016-05-05 14:08:36.845289"], ["updated_at", "2016-05-05 14:08:36.845289"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 40"], ["content", "Content 40"], ["published_at", "2016-05-05 14:07:36.840522"], ["created_at", "2016-05-05 14:08:36.846603"], ["updated_at", "2016-05-05 14:08:36.846603"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 41"], ["content", "Content 41"], ["published_at", "2016-05-05 14:07:36.840522"], ["created_at", "2016-05-05 14:08:36.848243"], ["updated_at", "2016-05-05 14:08:36.848243"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 42"], ["content", "Content 42"], ["published_at", "2016-05-05 14:07:36.840522"], ["created_at", "2016-05-05 14:08:36.849593"], ["updated_at", "2016-05-05 14:08:36.849593"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 43"], ["content", "Content 43"], ["published_at", "2016-05-05 14:07:36.840522"], ["created_at", "2016-05-05 14:08:36.850873"], ["updated_at", "2016-05-05 14:08:36.850873"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 44"], ["content", "Content 44"], ["published_at", "2016-05-05 14:07:36.840522"], ["created_at", "2016-05-05 14:08:36.852142"], ["updated_at", "2016-05-05 14:08:36.852142"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 45"], ["content", "Content 45"], ["published_at", "2016-05-05 14:07:36.840522"], ["created_at", "2016-05-05 14:08:36.853638"], ["updated_at", "2016-05-05 14:08:36.853638"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 46"], ["content", "Content 46"], ["publish_on", "2016-05-06 14:08:36.854871"], ["created_at", "2016-05-05 14:08:36.855686"], ["updated_at", "2016-05-05 14:08:36.855686"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 47"], ["content", "Content 47"], ["publish_on", "2016-05-06 14:08:36.854871"], ["created_at", "2016-05-05 14:08:36.857808"], ["updated_at", "2016-05-05 14:08:36.857808"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 48"], ["content", "Content 48"], ["publish_on", "2016-05-06 14:08:36.854871"], ["created_at", "2016-05-05 14:08:36.859714"], ["updated_at", "2016-05-05 14:08:36.859714"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 49"], ["content", "Content 49"], ["publish_on", "2016-05-06 14:08:36.854871"], ["created_at", "2016-05-05 14:08:36.861677"], ["updated_at", "2016-05-05 14:08:36.861677"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 50"], ["content", "Content 50"], ["publish_on", "2016-05-06 14:08:36.854871"], ["created_at", "2016-05-05 14:08:36.863658"], ["updated_at", "2016-05-05 14:08:36.863658"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 51"], ["content", "Content 51"], ["publish_on", "2016-05-06 14:08:36.854871"], ["created_at", "2016-05-05 14:08:36.865281"], ["updated_at", "2016-05-05 14:08:36.865281"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 52"], ["content", "Content 52"], ["publish_on", "2016-05-06 14:08:36.854871"], ["created_at", "2016-05-05 14:08:36.866835"], ["updated_at", "2016-05-05 14:08:36.866835"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 53"], ["content", "Content 53"], ["publish_on", "2016-05-06 14:08:36.854871"], ["created_at", "2016-05-05 14:08:36.868540"], ["updated_at", "2016-05-05 14:08:36.868540"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 54"], ["content", "Content 54"], ["publish_on", "2016-05-06 14:08:36.854871"], ["created_at", "2016-05-05 14:08:36.870099"], ["updated_at", "2016-05-05 14:08:36.870099"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 55"], ["content", "Content 55"], ["publish_on", "2016-05-06 14:08:36.854871"], ["created_at", "2016-05-05 14:08:36.871472"], ["updated_at", "2016-05-05 14:08:36.871472"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 56"], ["content", "Content 56"], ["publish_on", "2016-05-05 14:07:36.872412"], ["created_at", "2016-05-05 14:08:36.872911"], ["updated_at", "2016-05-05 14:08:36.872911"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 57"], ["content", "Content 57"], ["publish_on", "2016-05-05 14:07:36.872412"], ["created_at", "2016-05-05 14:08:36.874330"], ["updated_at", "2016-05-05 14:08:36.874330"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 58"], ["content", "Content 58"], ["publish_on", "2016-05-05 14:07:36.872412"], ["created_at", "2016-05-05 14:08:36.875897"], ["updated_at", "2016-05-05 14:08:36.875897"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 59"], ["content", "Content 59"], ["publish_on", "2016-05-05 14:07:36.872412"], ["created_at", "2016-05-05 14:08:36.877381"], ["updated_at", "2016-05-05 14:08:36.877381"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 60"], ["content", "Content 60"], ["publish_on", "2016-05-05 14:07:36.872412"], ["created_at", "2016-05-05 14:08:36.878813"], ["updated_at", "2016-05-05 14:08:36.878813"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 61"], ["content", "Content 61"], ["publish_on", "2016-05-05 14:07:36.872412"], ["created_at", "2016-05-05 14:08:36.880181"], ["updated_at", "2016-05-05 14:08:36.880181"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 62"], ["content", "Content 62"], ["publish_on", "2016-05-05 14:07:36.872412"], ["created_at", "2016-05-05 14:08:36.881554"], ["updated_at", "2016-05-05 14:08:36.881554"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 63"], ["content", "Content 63"], ["publish_on", "2016-05-05 14:07:36.872412"], ["created_at", "2016-05-05 14:08:36.882894"], ["updated_at", "2016-05-05 14:08:36.882894"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 64"], ["content", "Content 64"], ["publish_on", "2016-05-05 14:07:36.872412"], ["created_at", "2016-05-05 14:08:36.884270"], ["updated_at", "2016-05-05 14:08:36.884270"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 65"], ["content", "Content 65"], ["publish_on", "2016-05-05 14:07:36.872412"], ["created_at", "2016-05-05 14:08:36.885988"], ["updated_at", "2016-05-05 14:08:36.885988"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-05 14:08:36.889194"], ["updated_at", "2016-05-05 14:08:36.889194"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop2' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop2"], ["subdomain", "shop2"], ["created_at", "2016-05-05 14:08:36.891926"], ["updated_at", "2016-05-05 14:08:36.891926"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", "page-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "page"], ["content", "Content 66"], ["handle", "page-handle"], ["shop_id", 1], ["slug", "page-handle"], ["created_at", "2016-05-05 14:08:36.895684"], ["updated_at", "2016-05-05 14:08:36.895684"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 2 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", "page-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "page"], ["handle", "page-handle"], ["shop_id", 2], ["slug", "page-handle"], ["created_at", "2016-05-05 14:08:36.898418"], ["updated_at", "2016-05-05 14:08:36.898418"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------
MagazCore::PageTest: test_two_pages_with_same_handle_and_same_shop
------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "pages" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Title 66"], ["content", "Content 67"], ["created_at", "2016-05-05 14:08:36.902735"], ["updated_at", "2016-05-05 14:08:36.902735"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 67"], ["content", "Content 68"], ["published_at", "2016-05-05 14:07:36.903880"], ["created_at", "2016-05-05 14:08:36.904422"], ["updated_at", "2016-05-05 14:08:36.904422"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 68"], ["content", "Content 69"], ["published_at", "2016-05-05 14:07:36.903880"], ["created_at", "2016-05-05 14:08:36.905870"], ["updated_at", "2016-05-05 14:08:36.905870"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 69"], ["content", "Content 70"], ["published_at", "2016-05-05 14:07:36.903880"], ["created_at", "2016-05-05 14:08:36.907107"], ["updated_at", "2016-05-05 14:08:36.907107"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 70"], ["content", "Content 71"], ["published_at", "2016-05-05 14:07:36.903880"], ["created_at", "2016-05-05 14:08:36.908350"], ["updated_at", "2016-05-05 14:08:36.908350"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 71"], ["content", "Content 72"], ["published_at", "2016-05-05 14:07:36.903880"], ["created_at", "2016-05-05 14:08:36.909933"], ["updated_at", "2016-05-05 14:08:36.909933"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 72"], ["content", "Content 73"], ["published_at", "2016-05-05 14:07:36.903880"], ["created_at", "2016-05-05 14:08:36.911684"], ["updated_at", "2016-05-05 14:08:36.911684"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 73"], ["content", "Content 74"], ["published_at", "2016-05-05 14:07:36.903880"], ["created_at", "2016-05-05 14:08:36.913019"], ["updated_at", "2016-05-05 14:08:36.913019"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 74"], ["content", "Content 75"], ["published_at", "2016-05-05 14:07:36.903880"], ["created_at", "2016-05-05 14:08:36.914311"], ["updated_at", "2016-05-05 14:08:36.914311"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 75"], ["content", "Content 76"], ["published_at", "2016-05-05 14:07:36.903880"], ["created_at", "2016-05-05 14:08:36.915543"], ["updated_at", "2016-05-05 14:08:36.915543"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 76"], ["content", "Content 77"], ["published_at", "2016-05-05 14:07:36.903880"], ["created_at", "2016-05-05 14:08:36.916745"], ["updated_at", "2016-05-05 14:08:36.916745"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 77"], ["content", "Content 78"], ["publish_on", "2016-05-06 14:08:36.917816"], ["created_at", "2016-05-05 14:08:36.918614"], ["updated_at", "2016-05-05 14:08:36.918614"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 78"], ["content", "Content 79"], ["publish_on", "2016-05-06 14:08:36.917816"], ["created_at", "2016-05-05 14:08:36.920630"], ["updated_at", "2016-05-05 14:08:36.920630"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 79"], ["content", "Content 80"], ["publish_on", "2016-05-06 14:08:36.917816"], ["created_at", "2016-05-05 14:08:36.922532"], ["updated_at", "2016-05-05 14:08:36.922532"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 80"], ["content", "Content 81"], ["publish_on", "2016-05-06 14:08:36.917816"], ["created_at", "2016-05-05 14:08:36.924368"], ["updated_at", "2016-05-05 14:08:36.924368"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 81"], ["content", "Content 82"], ["publish_on", "2016-05-06 14:08:36.917816"], ["created_at", "2016-05-05 14:08:36.926266"], ["updated_at", "2016-05-05 14:08:36.926266"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 82"], ["content", "Content 83"], ["publish_on", "2016-05-06 14:08:36.917816"], ["created_at", "2016-05-05 14:08:36.928099"], ["updated_at", "2016-05-05 14:08:36.928099"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 83"], ["content", "Content 84"], ["publish_on", "2016-05-06 14:08:36.917816"], ["created_at", "2016-05-05 14:08:36.929603"], ["updated_at", "2016-05-05 14:08:36.929603"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 84"], ["content", "Content 85"], ["publish_on", "2016-05-06 14:08:36.917816"], ["created_at", "2016-05-05 14:08:36.931106"], ["updated_at", "2016-05-05 14:08:36.931106"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 85"], ["content", "Content 86"], ["publish_on", "2016-05-06 14:08:36.917816"], ["created_at", "2016-05-05 14:08:36.932515"], ["updated_at", "2016-05-05 14:08:36.932515"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 86"], ["content", "Content 87"], ["publish_on", "2016-05-06 14:08:36.917816"], ["created_at", "2016-05-05 14:08:36.933928"], ["updated_at", "2016-05-05 14:08:36.933928"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 87"], ["content", "Content 88"], ["publish_on", "2016-05-05 14:07:36.934794"], ["created_at", "2016-05-05 14:08:36.935294"], ["updated_at", "2016-05-05 14:08:36.935294"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 88"], ["content", "Content 89"], ["publish_on", "2016-05-05 14:07:36.934794"], ["created_at", "2016-05-05 14:08:36.936685"], ["updated_at", "2016-05-05 14:08:36.936685"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 89"], ["content", "Content 90"], ["publish_on", "2016-05-05 14:07:36.934794"], ["created_at", "2016-05-05 14:08:36.938057"], ["updated_at", "2016-05-05 14:08:36.938057"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 90"], ["content", "Content 91"], ["publish_on", "2016-05-05 14:07:36.934794"], ["created_at", "2016-05-05 14:08:36.939604"], ["updated_at", "2016-05-05 14:08:36.939604"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 91"], ["content", "Content 92"], ["publish_on", "2016-05-05 14:07:36.934794"], ["created_at", "2016-05-05 14:08:36.941081"], ["updated_at", "2016-05-05 14:08:36.941081"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 92"], ["content", "Content 93"], ["publish_on", "2016-05-05 14:07:36.934794"], ["created_at", "2016-05-05 14:08:36.942619"], ["updated_at", "2016-05-05 14:08:36.942619"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 93"], ["content", "Content 94"], ["publish_on", "2016-05-05 14:07:36.934794"], ["created_at", "2016-05-05 14:08:36.944103"], ["updated_at", "2016-05-05 14:08:36.944103"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 94"], ["content", "Content 95"], ["publish_on", "2016-05-05 14:07:36.934794"], ["created_at", "2016-05-05 14:08:36.945475"], ["updated_at", "2016-05-05 14:08:36.945475"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 95"], ["content", "Content 96"], ["publish_on", "2016-05-05 14:07:36.934794"], ["created_at", "2016-05-05 14:08:36.946837"], ["updated_at", "2016-05-05 14:08:36.946837"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 96"], ["content", "Content 97"], ["publish_on", "2016-05-05 14:07:36.934794"], ["created_at", "2016-05-05 14:08:36.948116"], ["updated_at", "2016-05-05 14:08:36.948116"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-05 14:08:36.950849"], ["updated_at", "2016-05-05 14:08:36.950849"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Exists (0.0ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", "page-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "page1"], ["content", "Content 98"], ["handle", "page-handle"], ["shop_id", 1], ["slug", "page-handle"], ["created_at", "2016-05-05 14:08:36.954286"], ["updated_at", "2016-05-05 14:08:36.954286"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Exists (0.1ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", "page-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "page2"], ["handle", "page-handle"], ["shop_id", 1], ["slug", "page-handle-4ec2e3c8-2d24-498c-b512-30241862f0bb"], ["created_at", "2016-05-05 14:08:36.957449"], ["updated_at", "2016-05-05 14:08:36.957449"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
MagazCore::PageTest: test_visibility_scopes
-------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Title 97"], ["content", "Content 99"], ["created_at", "2016-05-05 14:08:36.962770"], ["updated_at", "2016-05-05 14:08:36.962770"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 98"], ["content", "Content 100"], ["published_at", "2016-05-05 14:07:36.964061"], ["created_at", "2016-05-05 14:08:36.964671"], ["updated_at", "2016-05-05 14:08:36.964671"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 99"], ["content", "Content 101"], ["published_at", "2016-05-05 14:07:36.964061"], ["created_at", "2016-05-05 14:08:36.966307"], ["updated_at", "2016-05-05 14:08:36.966307"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 100"], ["content", "Content 102"], ["published_at", "2016-05-05 14:07:36.964061"], ["created_at", "2016-05-05 14:08:36.967567"], ["updated_at", "2016-05-05 14:08:36.967567"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 101"], ["content", "Content 103"], ["published_at", "2016-05-05 14:07:36.964061"], ["created_at", "2016-05-05 14:08:36.968802"], ["updated_at", "2016-05-05 14:08:36.968802"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 102"], ["content", "Content 104"], ["published_at", "2016-05-05 14:07:36.964061"], ["created_at", "2016-05-05 14:08:36.970032"], ["updated_at", "2016-05-05 14:08:36.970032"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 103"], ["content", "Content 105"], ["published_at", "2016-05-05 14:07:36.964061"], ["created_at", "2016-05-05 14:08:36.971598"], ["updated_at", "2016-05-05 14:08:36.971598"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 104"], ["content", "Content 106"], ["published_at", "2016-05-05 14:07:36.964061"], ["created_at", "2016-05-05 14:08:36.973498"], ["updated_at", "2016-05-05 14:08:36.973498"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 105"], ["content", "Content 107"], ["published_at", "2016-05-05 14:07:36.964061"], ["created_at", "2016-05-05 14:08:36.975325"], ["updated_at", "2016-05-05 14:08:36.975325"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 106"], ["content", "Content 108"], ["published_at", "2016-05-05 14:07:36.964061"], ["created_at", "2016-05-05 14:08:36.977047"], ["updated_at", "2016-05-05 14:08:36.977047"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 107"], ["content", "Content 109"], ["published_at", "2016-05-05 14:07:36.964061"], ["created_at", "2016-05-05 14:08:36.978774"], ["updated_at", "2016-05-05 14:08:36.978774"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 108"], ["content", "Content 110"], ["publish_on", "2016-05-06 14:08:36.979872"], ["created_at", "2016-05-05 14:08:36.980615"], ["updated_at", "2016-05-05 14:08:36.980615"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 109"], ["content", "Content 111"], ["publish_on", "2016-05-06 14:08:36.979872"], ["created_at", "2016-05-05 14:08:36.982374"], ["updated_at", "2016-05-05 14:08:36.982374"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 110"], ["content", "Content 112"], ["publish_on", "2016-05-06 14:08:36.979872"], ["created_at", "2016-05-05 14:08:36.983963"], ["updated_at", "2016-05-05 14:08:36.983963"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 111"], ["content", "Content 113"], ["publish_on", "2016-05-06 14:08:36.979872"], ["created_at", "2016-05-05 14:08:36.985545"], ["updated_at", "2016-05-05 14:08:36.985545"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 112"], ["content", "Content 114"], ["publish_on", "2016-05-06 14:08:36.979872"], ["created_at", "2016-05-05 14:08:36.986881"], ["updated_at", "2016-05-05 14:08:36.986881"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 113"], ["content", "Content 115"], ["publish_on", "2016-05-06 14:08:36.979872"], ["created_at", "2016-05-05 14:08:36.988168"], ["updated_at", "2016-05-05 14:08:36.988168"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 114"], ["content", "Content 116"], ["publish_on", "2016-05-06 14:08:36.979872"], ["created_at", "2016-05-05 14:08:36.989754"], ["updated_at", "2016-05-05 14:08:36.989754"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 115"], ["content", "Content 117"], ["publish_on", "2016-05-06 14:08:36.979872"], ["created_at", "2016-05-05 14:08:36.991746"], ["updated_at", "2016-05-05 14:08:36.991746"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 116"], ["content", "Content 118"], ["publish_on", "2016-05-06 14:08:36.979872"], ["created_at", "2016-05-05 14:08:36.993678"], ["updated_at", "2016-05-05 14:08:36.993678"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 117"], ["content", "Content 119"], ["publish_on", "2016-05-06 14:08:36.979872"], ["created_at", "2016-05-05 14:08:36.995520"], ["updated_at", "2016-05-05 14:08:36.995520"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 118"], ["content", "Content 120"], ["publish_on", "2016-05-05 14:07:36.996728"], ["created_at", "2016-05-05 14:08:36.997537"], ["updated_at", "2016-05-05 14:08:36.997537"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 119"], ["content", "Content 121"], ["publish_on", "2016-05-05 14:07:36.996728"], ["created_at", "2016-05-05 14:08:36.999677"], ["updated_at", "2016-05-05 14:08:36.999677"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 120"], ["content", "Content 122"], ["publish_on", "2016-05-05 14:07:36.996728"], ["created_at", "2016-05-05 14:08:37.001873"], ["updated_at", "2016-05-05 14:08:37.001873"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 121"], ["content", "Content 123"], ["publish_on", "2016-05-05 14:07:36.996728"], ["created_at", "2016-05-05 14:08:37.004035"], ["updated_at", "2016-05-05 14:08:37.004035"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 122"], ["content", "Content 124"], ["publish_on", "2016-05-05 14:07:36.996728"], ["created_at", "2016-05-05 14:08:37.006012"], ["updated_at", "2016-05-05 14:08:37.006012"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 123"], ["content", "Content 125"], ["publish_on", "2016-05-05 14:07:36.996728"], ["created_at", "2016-05-05 14:08:37.007638"], ["updated_at", "2016-05-05 14:08:37.007638"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 124"], ["content", "Content 126"], ["publish_on", "2016-05-05 14:07:36.996728"], ["created_at", "2016-05-05 14:08:37.009236"], ["updated_at", "2016-05-05 14:08:37.009236"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 125"], ["content", "Content 127"], ["publish_on", "2016-05-05 14:07:36.996728"], ["created_at", "2016-05-05 14:08:37.011505"], ["updated_at", "2016-05-05 14:08:37.011505"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 126"], ["content", "Content 128"], ["publish_on", "2016-05-05 14:07:36.996728"], ["created_at", "2016-05-05 14:08:37.012934"], ["updated_at", "2016-05-05 14:08:37.012934"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 127"], ["content", "Content 129"], ["publish_on", "2016-05-05 14:07:36.996728"], ["created_at", "2016-05-05 14:08:37.014421"], ["updated_at", "2016-05-05 14:08:37.014421"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Load (0.1ms)[0m  SELECT "pages".* FROM "pages" WHERE "pages"."publish_on" IS NULL AND ("pages"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-05 14:08:37.015479')
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT "pages".* FROM "pages" WHERE (publish_on >= '2016-05-05 14:08:37.016262') AND "pages"."published_at" IS NULL[0m
  [1m[35mMagazCore::Page Load (0.1ms)[0m  SELECT "pages".* FROM "pages" WHERE (publish_on <= '2016-05-05 14:08:37.016784') AND "pages"."published_at" IS NULL
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MagazCore::PageTest: test_visibility_scopes_and_methods
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Title 128"], ["content", "Content 130"], ["created_at", "2016-05-05 14:08:37.020506"], ["updated_at", "2016-05-05 14:08:37.020506"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 129"], ["content", "Content 131"], ["published_at", "2016-05-05 14:07:37.021709"], ["created_at", "2016-05-05 14:08:37.022293"], ["updated_at", "2016-05-05 14:08:37.022293"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 130"], ["content", "Content 132"], ["published_at", "2016-05-05 14:07:37.021709"], ["created_at", "2016-05-05 14:08:37.023812"], ["updated_at", "2016-05-05 14:08:37.023812"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 131"], ["content", "Content 133"], ["published_at", "2016-05-05 14:07:37.021709"], ["created_at", "2016-05-05 14:08:37.025441"], ["updated_at", "2016-05-05 14:08:37.025441"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 132"], ["content", "Content 134"], ["published_at", "2016-05-05 14:07:37.021709"], ["created_at", "2016-05-05 14:08:37.027292"], ["updated_at", "2016-05-05 14:08:37.027292"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 133"], ["content", "Content 135"], ["published_at", "2016-05-05 14:07:37.021709"], ["created_at", "2016-05-05 14:08:37.029225"], ["updated_at", "2016-05-05 14:08:37.029225"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 134"], ["content", "Content 136"], ["published_at", "2016-05-05 14:07:37.021709"], ["created_at", "2016-05-05 14:08:37.030693"], ["updated_at", "2016-05-05 14:08:37.030693"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 135"], ["content", "Content 137"], ["published_at", "2016-05-05 14:07:37.021709"], ["created_at", "2016-05-05 14:08:37.031987"], ["updated_at", "2016-05-05 14:08:37.031987"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 136"], ["content", "Content 138"], ["published_at", "2016-05-05 14:07:37.021709"], ["created_at", "2016-05-05 14:08:37.033277"], ["updated_at", "2016-05-05 14:08:37.033277"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 137"], ["content", "Content 139"], ["published_at", "2016-05-05 14:07:37.021709"], ["created_at", "2016-05-05 14:08:37.034477"], ["updated_at", "2016-05-05 14:08:37.034477"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 138"], ["content", "Content 140"], ["published_at", "2016-05-05 14:07:37.021709"], ["created_at", "2016-05-05 14:08:37.035682"], ["updated_at", "2016-05-05 14:08:37.035682"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 139"], ["content", "Content 141"], ["publish_on", "2016-05-06 14:08:37.036468"], ["created_at", "2016-05-05 14:08:37.037006"], ["updated_at", "2016-05-05 14:08:37.037006"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 140"], ["content", "Content 142"], ["publish_on", "2016-05-06 14:08:37.036468"], ["created_at", "2016-05-05 14:08:37.038604"], ["updated_at", "2016-05-05 14:08:37.038604"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 141"], ["content", "Content 143"], ["publish_on", "2016-05-06 14:08:37.036468"], ["created_at", "2016-05-05 14:08:37.039987"], ["updated_at", "2016-05-05 14:08:37.039987"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 142"], ["content", "Content 144"], ["publish_on", "2016-05-06 14:08:37.036468"], ["created_at", "2016-05-05 14:08:37.041362"], ["updated_at", "2016-05-05 14:08:37.041362"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 143"], ["content", "Content 145"], ["publish_on", "2016-05-06 14:08:37.036468"], ["created_at", "2016-05-05 14:08:37.042767"], ["updated_at", "2016-05-05 14:08:37.042767"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 144"], ["content", "Content 146"], ["publish_on", "2016-05-06 14:08:37.036468"], ["created_at", "2016-05-05 14:08:37.044100"], ["updated_at", "2016-05-05 14:08:37.044100"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 145"], ["content", "Content 147"], ["publish_on", "2016-05-06 14:08:37.036468"], ["created_at", "2016-05-05 14:08:37.045557"], ["updated_at", "2016-05-05 14:08:37.045557"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 146"], ["content", "Content 148"], ["publish_on", "2016-05-06 14:08:37.036468"], ["created_at", "2016-05-05 14:08:37.046971"], ["updated_at", "2016-05-05 14:08:37.046971"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 147"], ["content", "Content 149"], ["publish_on", "2016-05-06 14:08:37.036468"], ["created_at", "2016-05-05 14:08:37.048305"], ["updated_at", "2016-05-05 14:08:37.048305"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 148"], ["content", "Content 150"], ["publish_on", "2016-05-06 14:08:37.036468"], ["created_at", "2016-05-05 14:08:37.049617"], ["updated_at", "2016-05-05 14:08:37.049617"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 149"], ["content", "Content 151"], ["publish_on", "2016-05-05 14:07:37.050460"], ["created_at", "2016-05-05 14:08:37.050934"], ["updated_at", "2016-05-05 14:08:37.050934"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 150"], ["content", "Content 152"], ["publish_on", "2016-05-05 14:07:37.050460"], ["created_at", "2016-05-05 14:08:37.052212"], ["updated_at", "2016-05-05 14:08:37.052212"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 151"], ["content", "Content 153"], ["publish_on", "2016-05-05 14:07:37.050460"], ["created_at", "2016-05-05 14:08:37.053907"], ["updated_at", "2016-05-05 14:08:37.053907"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 152"], ["content", "Content 154"], ["publish_on", "2016-05-05 14:07:37.050460"], ["created_at", "2016-05-05 14:08:37.055940"], ["updated_at", "2016-05-05 14:08:37.055940"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 153"], ["content", "Content 155"], ["publish_on", "2016-05-05 14:07:37.050460"], ["created_at", "2016-05-05 14:08:37.058120"], ["updated_at", "2016-05-05 14:08:37.058120"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 154"], ["content", "Content 156"], ["publish_on", "2016-05-05 14:07:37.050460"], ["created_at", "2016-05-05 14:08:37.060670"], ["updated_at", "2016-05-05 14:08:37.060670"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 155"], ["content", "Content 157"], ["publish_on", "2016-05-05 14:07:37.050460"], ["created_at", "2016-05-05 14:08:37.062381"], ["updated_at", "2016-05-05 14:08:37.062381"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 156"], ["content", "Content 158"], ["publish_on", "2016-05-05 14:07:37.050460"], ["created_at", "2016-05-05 14:08:37.063771"], ["updated_at", "2016-05-05 14:08:37.063771"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 157"], ["content", "Content 159"], ["publish_on", "2016-05-05 14:07:37.050460"], ["created_at", "2016-05-05 14:08:37.065148"], ["updated_at", "2016-05-05 14:08:37.065148"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 158"], ["content", "Content 160"], ["publish_on", "2016-05-05 14:07:37.050460"], ["created_at", "2016-05-05 14:08:37.066506"], ["updated_at", "2016-05-05 14:08:37.066506"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Load (0.1ms)[0m  SELECT "pages".* FROM "pages" WHERE "pages"."publish_on" IS NULL AND ("pages"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-05 14:08:37.067499')
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT "pages".* FROM "pages" WHERE (publish_on >= '2016-05-05 14:08:37.068540') AND "pages"."published_at" IS NULL[0m
  [1m[35mMagazCore::Page Load (0.1ms)[0m  SELECT "pages".* FROM "pages" WHERE (publish_on <= '2016-05-05 14:08:37.069112') AND "pages"."published_at" IS NULL
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
MagazCore::PageTest: test_worker_created
----------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Title 159"], ["content", "Content 161"], ["created_at", "2016-05-05 14:08:37.073269"], ["updated_at", "2016-05-05 14:08:37.073269"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 160"], ["content", "Content 162"], ["published_at", "2016-05-05 14:07:37.074508"], ["created_at", "2016-05-05 14:08:37.075047"], ["updated_at", "2016-05-05 14:08:37.075047"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 161"], ["content", "Content 163"], ["published_at", "2016-05-05 14:07:37.074508"], ["created_at", "2016-05-05 14:08:37.076466"], ["updated_at", "2016-05-05 14:08:37.076466"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 162"], ["content", "Content 164"], ["published_at", "2016-05-05 14:07:37.074508"], ["created_at", "2016-05-05 14:08:37.078102"], ["updated_at", "2016-05-05 14:08:37.078102"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 163"], ["content", "Content 165"], ["published_at", "2016-05-05 14:07:37.074508"], ["created_at", "2016-05-05 14:08:37.079940"], ["updated_at", "2016-05-05 14:08:37.079940"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 164"], ["content", "Content 166"], ["published_at", "2016-05-05 14:07:37.074508"], ["created_at", "2016-05-05 14:08:37.081755"], ["updated_at", "2016-05-05 14:08:37.081755"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 165"], ["content", "Content 167"], ["published_at", "2016-05-05 14:07:37.074508"], ["created_at", "2016-05-05 14:08:37.083115"], ["updated_at", "2016-05-05 14:08:37.083115"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 166"], ["content", "Content 168"], ["published_at", "2016-05-05 14:07:37.074508"], ["created_at", "2016-05-05 14:08:37.084389"], ["updated_at", "2016-05-05 14:08:37.084389"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 167"], ["content", "Content 169"], ["published_at", "2016-05-05 14:07:37.074508"], ["created_at", "2016-05-05 14:08:37.085794"], ["updated_at", "2016-05-05 14:08:37.085794"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 168"], ["content", "Content 170"], ["published_at", "2016-05-05 14:07:37.074508"], ["created_at", "2016-05-05 14:08:37.087110"], ["updated_at", "2016-05-05 14:08:37.087110"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 169"], ["content", "Content 171"], ["published_at", "2016-05-05 14:07:37.074508"], ["created_at", "2016-05-05 14:08:37.088417"], ["updated_at", "2016-05-05 14:08:37.088417"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 170"], ["content", "Content 172"], ["publish_on", "2016-05-06 14:08:37.089225"], ["created_at", "2016-05-05 14:08:37.089797"], ["updated_at", "2016-05-05 14:08:37.089797"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 171"], ["content", "Content 173"], ["publish_on", "2016-05-06 14:08:37.089225"], ["created_at", "2016-05-05 14:08:37.091425"], ["updated_at", "2016-05-05 14:08:37.091425"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 172"], ["content", "Content 174"], ["publish_on", "2016-05-06 14:08:37.089225"], ["created_at", "2016-05-05 14:08:37.092796"], ["updated_at", "2016-05-05 14:08:37.092796"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 173"], ["content", "Content 175"], ["publish_on", "2016-05-06 14:08:37.089225"], ["created_at", "2016-05-05 14:08:37.094298"], ["updated_at", "2016-05-05 14:08:37.094298"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 174"], ["content", "Content 176"], ["publish_on", "2016-05-06 14:08:37.089225"], ["created_at", "2016-05-05 14:08:37.095655"], ["updated_at", "2016-05-05 14:08:37.095655"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 175"], ["content", "Content 177"], ["publish_on", "2016-05-06 14:08:37.089225"], ["created_at", "2016-05-05 14:08:37.096990"], ["updated_at", "2016-05-05 14:08:37.096990"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 176"], ["content", "Content 178"], ["publish_on", "2016-05-06 14:08:37.089225"], ["created_at", "2016-05-05 14:08:37.098291"], ["updated_at", "2016-05-05 14:08:37.098291"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 177"], ["content", "Content 179"], ["publish_on", "2016-05-06 14:08:37.089225"], ["created_at", "2016-05-05 14:08:37.099585"], ["updated_at", "2016-05-05 14:08:37.099585"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 178"], ["content", "Content 180"], ["publish_on", "2016-05-06 14:08:37.089225"], ["created_at", "2016-05-05 14:08:37.100870"], ["updated_at", "2016-05-05 14:08:37.100870"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 179"], ["content", "Content 181"], ["publish_on", "2016-05-06 14:08:37.089225"], ["created_at", "2016-05-05 14:08:37.102888"], ["updated_at", "2016-05-05 14:08:37.102888"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 180"], ["content", "Content 182"], ["publish_on", "2016-05-05 14:07:37.104172"], ["created_at", "2016-05-05 14:08:37.104891"], ["updated_at", "2016-05-05 14:08:37.104891"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 181"], ["content", "Content 183"], ["publish_on", "2016-05-05 14:07:37.104172"], ["created_at", "2016-05-05 14:08:37.106778"], ["updated_at", "2016-05-05 14:08:37.106778"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 182"], ["content", "Content 184"], ["publish_on", "2016-05-05 14:07:37.104172"], ["created_at", "2016-05-05 14:08:37.108652"], ["updated_at", "2016-05-05 14:08:37.108652"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 183"], ["content", "Content 185"], ["publish_on", "2016-05-05 14:07:37.104172"], ["created_at", "2016-05-05 14:08:37.110880"], ["updated_at", "2016-05-05 14:08:37.110880"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 184"], ["content", "Content 186"], ["publish_on", "2016-05-05 14:07:37.104172"], ["created_at", "2016-05-05 14:08:37.112803"], ["updated_at", "2016-05-05 14:08:37.112803"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 185"], ["content", "Content 187"], ["publish_on", "2016-05-05 14:07:37.104172"], ["created_at", "2016-05-05 14:08:37.114653"], ["updated_at", "2016-05-05 14:08:37.114653"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 186"], ["content", "Content 188"], ["publish_on", "2016-05-05 14:07:37.104172"], ["created_at", "2016-05-05 14:08:37.116442"], ["updated_at", "2016-05-05 14:08:37.116442"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 187"], ["content", "Content 189"], ["publish_on", "2016-05-05 14:07:37.104172"], ["created_at", "2016-05-05 14:08:37.118018"], ["updated_at", "2016-05-05 14:08:37.118018"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 188"], ["content", "Content 190"], ["publish_on", "2016-05-05 14:07:37.104172"], ["created_at", "2016-05-05 14:08:37.119595"], ["updated_at", "2016-05-05 14:08:37.119595"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 189"], ["content", "Content 191"], ["publish_on", "2016-05-05 14:07:37.104172"], ["created_at", "2016-05-05 14:08:37.121016"], ["updated_at", "2016-05-05 14:08:37.121016"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "pages" SET "publish_on" = ?, "updated_at" = ? WHERE "pages"."id" = ?[0m  [["publish_on", "2016-05-07 14:08:37.121952"], ["updated_at", "2016-05-05 14:08:37.122379"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::DeleteShippingCountryTest: test_should_delete_shipping_country_with_valid_ids
------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example42' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example42"], ["subdomain", "example42"], ["created_at", "2016-05-05 14:08:37.128252"], ["updated_at", "2016-05-05 14:08:37.128252"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example43' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example43"], ["subdomain", "example43"], ["created_at", "2016-05-05 14:08:37.130525"], ["updated_at", "2016-05-05 14:08:37.130525"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "19"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.1ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ShippingRate Load (0.1ms)[0m  SELECT "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."shipping_country_id" = ?  [["shipping_country_id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "shipping_countries" WHERE "shipping_countries"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::DeleteShippingCountryTest: test_should_not_delete_shipping_country_with_blank_ids
----------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example44' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example44"], ["subdomain", "example44"], ["created_at", "2016-05-05 14:08:37.139866"], ["updated_at", "2016-05-05 14:08:37.139866"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example45' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example45"], ["subdomain", "example45"], ["created_at", "2016-05-05 14:08:37.142118"], ["updated_at", "2016-05-05 14:08:37.142118"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "20"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36mMagazCore::ShippingCountry Load (0.1ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::DeleteShippingCountryTest: test_should_not_delete_shipping_country_with_invalid_ids
------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example46' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example46"], ["subdomain", "example46"], ["created_at", "2016-05-05 14:08:37.152154"], ["updated_at", "2016-05-05 14:08:37.152154"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example47' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example47"], ["subdomain", "example47"], ["created_at", "2016-05-05 14:08:37.154306"], ["updated_at", "2016-05-05 14:08:37.154306"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "21"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36mMagazCore::ShippingCountry Load (0.1ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ChangeLinkListTest: test_should_not_update_link_list_with_existing_handle
---------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:37.163006"], ["updated_at", "2016-05-05 14:08:37.163006"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)  [["name", "List 7"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::LinkList Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1[0m  [["slug", "existing-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "link_lists" ("name", "shop_id", "handle", "slug") VALUES (?, ?, ?, ?)  [["name", "List 8"], ["shop_id", 1], ["handle", "existing handle"], ["slug", "existing-handle"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", "New name"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?[0m  [["shop_id", 1], ["handle", "existing handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "New name"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?  [["shop_id", 1], ["handle", "existing handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ChangeLinkListTest: test_should_not_update_link_list_with_existing_name
-------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:37.186050"], ["updated_at", "2016-05-05 14:08:37.186050"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 9"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LinkList Exists (0.0ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1  [["slug", "existing-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id", "handle", "slug") VALUES (?, ?, ?, ?)[0m  [["name", "List 10"], ["shop_id", 1], ["handle", "existing handle"], ["slug", "existing-handle"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "List 10"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?  [["shop_id", 1], ["handle", "Changed handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.1ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", "List 10"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?[0m  [["shop_id", 1], ["handle", "Changed handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------
MagazCore::AdminServices::ChangeLinkListTest: test_should_update_link_list_with_blank_handle
--------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:37.206753"], ["updated_at", "2016-05-05 14:08:37.206753"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)  [["name", "List 11"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::LinkList Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1[0m  [["slug", "existing-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "link_lists" ("name", "shop_id", "handle", "slug") VALUES (?, ?, ?, ?)  [["name", "List 12"], ["shop_id", 1], ["handle", "existing handle"], ["slug", "existing-handle"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", "Changed name"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::LinkList Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" != ?) AND "link_lists"."slug" = ? LIMIT 1[0m  [["id", 1], ["slug", ""]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "link_lists" SET "name" = ?, "handle" = ?, "slug" = ? WHERE "link_lists"."id" = ?  [["name", "Changed name"], ["handle", ""], ["slug", ""], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------
MagazCore::AdminServices::ChangeLinkListTest: test_should_update_link_list_with_valid_params
--------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:37.223265"], ["updated_at", "2016-05-05 14:08:37.223265"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 13"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LinkList Exists (0.0ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1  [["slug", "existing-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id", "handle", "slug") VALUES (?, ?, ?, ?)[0m  [["name", "List 14"], ["shop_id", 1], ["handle", "existing handle"], ["slug", "existing-handle"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "Test name"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::LinkList Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" != ?) AND "link_lists"."slug" = ? LIMIT 1[0m  [["id", 1], ["slug", "test-handle"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "link_lists" SET "name" = ?, "handle" = ?, "slug" = ? WHERE "link_lists"."id" = ?  [["name", "Test name"], ["handle", "Test handle"], ["slug", "test-handle"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::ChangeLinkTest: test_should_not_update_link_with_existing_name
----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:37.239817"], ["updated_at", "2016-05-05 14:08:37.239817"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 15"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)  [["name", "Link 4"], ["link_list_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)[0m  [["name", "Link 5"], ["link_list_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::LinkList Load (0.1ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Link Load (0.1ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1[0m  [["link_list_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Link 5"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Link Load (0.0ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1[0m  [["link_list_id", 1], ["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Link Load (0.0ms)[0m  SELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1  [["link_list_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 1], ["name", "Link 5"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Link Load (0.1ms)[0m  SELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1  [["link_list_id", 1], ["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Link Load (0.0ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1[0m  [["link_list_id", 1], ["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Link Load (0.0ms)[0m  SELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1  [["link_list_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::ChangeLinkTest: test_should_update_link_with_some_blank_params
----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:37.261398"], ["updated_at", "2016-05-05 14:08:37.261398"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)  [["name", "List 16"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)[0m  [["name", "Link 6"], ["link_list_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)  [["name", "Link 7"], ["link_list_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Link Load (0.1ms)[0m  SELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1  [["link_list_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 1], ["name", "Changed name"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Link Load (0.0ms)[0m  SELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1  [["link_list_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "links" SET "name" = ?, "link_type" = ?, "position" = ? WHERE "links"."id" = ?  [["name", "Changed name"], ["link_type", ""], ["position", 123], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::ChangeLinkTest: test_should_update_link_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:37.277122"], ["updated_at", "2016-05-05 14:08:37.277122"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 17"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)  [["name", "Link 8"], ["link_list_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)[0m  [["name", "Link 9"], ["link_list_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Link Load (0.0ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1[0m  [["link_list_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Test name"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Link Load (0.0ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1[0m  [["link_list_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "links" SET "name" = ?, "link_type" = ?, "position" = ? WHERE "links"."id" = ?[0m  [["name", "Test name"], ["link_type", "Test type"], ["position", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Link Load (0.0ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Link Load (0.0ms)[0m  SELECT  "links".* FROM "links" WHERE "links"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
MagazCore::EmailTemplateTest: test_should_have_default_values_after_create
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example48' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example48"], ["subdomain", "example48"], ["created_at", "2016-05-05 14:08:37.290793"], ["updated_at", "2016-05-05 14:08:37.290793"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "email_templates" ("name", "title", "body", "template_type", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["name", "Order Notification"], ["title", "New order"], ["body", "You have a new order"], ["template_type", "new_order_notification"], ["description", "some description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:37.292687"], ["updated_at", "2016-05-05 14:08:37.292687"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Checkout::ChangeOrderTest: test_should_not_update_order_with_valid_params
---------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:37.297018"], ["updated_at", "2016-05-05 14:08:37.297018"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 19 "], ["last_name", "Last Name 19"], ["email", "customer19@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 1], ["created_at", "2016-05-05 14:08:37.300323"], ["updated_at", "2016-05-05 14:08:37.300323"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_id", 1], ["status", "open"], ["created_at", "2016-05-05 14:08:37.301595"], ["updated_at", "2016-05-05 14:08:37.301595"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Checkout Load (0.1ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Checkout Load (0.0ms)[0m  SELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Checkout Load (0.0ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Checkout Load (0.0ms)[0m  SELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Checkout Load (0.0ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Checkout::ChangeOrderTest: test_should_update_order_with_valid_params
-----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:37.312271"], ["updated_at", "2016-05-05 14:08:37.312271"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 20 "], ["last_name", "Last Name 20"], ["email", "customer20@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 1], ["created_at", "2016-05-05 14:08:37.315515"], ["updated_at", "2016-05-05 14:08:37.315515"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_id", 1], ["status", "open"], ["created_at", "2016-05-05 14:08:37.316798"], ["updated_at", "2016-05-05 14:08:37.316798"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Checkout Load (0.1ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "checkouts" SET "status" = ?, "updated_at" = ? WHERE "checkouts"."id" = ?[0m  [["status", "open"], ["updated_at", "2016-05-05 14:08:37.318693"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Checkout Load (0.0ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Checkout Load (0.0ms)[0m  SELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------
MagazCore::ArticleTest: test_basic_visibility_functionality
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Article 9"], ["content", "Article 9 content"], ["created_at", "2016-05-05 14:08:37.323041"], ["updated_at", "2016-05-05 14:08:37.323041"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 10"], ["content", "Article 10 content"], ["published_at", "2016-05-05 14:07:37.324180"], ["created_at", "2016-05-05 14:08:37.324879"], ["updated_at", "2016-05-05 14:08:37.324879"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 11"], ["content", "Article 11 content"], ["published_at", "2016-05-05 14:07:37.324180"], ["created_at", "2016-05-05 14:08:37.326575"], ["updated_at", "2016-05-05 14:08:37.326575"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 12"], ["content", "Article 12 content"], ["published_at", "2016-05-05 14:07:37.324180"], ["created_at", "2016-05-05 14:08:37.327888"], ["updated_at", "2016-05-05 14:08:37.327888"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 13"], ["content", "Article 13 content"], ["published_at", "2016-05-05 14:07:37.324180"], ["created_at", "2016-05-05 14:08:37.329226"], ["updated_at", "2016-05-05 14:08:37.329226"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 14"], ["content", "Article 14 content"], ["published_at", "2016-05-05 14:07:37.324180"], ["created_at", "2016-05-05 14:08:37.330656"], ["updated_at", "2016-05-05 14:08:37.330656"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 15"], ["content", "Article 15 content"], ["published_at", "2016-05-05 14:07:37.324180"], ["created_at", "2016-05-05 14:08:37.332153"], ["updated_at", "2016-05-05 14:08:37.332153"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 16"], ["content", "Article 16 content"], ["published_at", "2016-05-05 14:07:37.324180"], ["created_at", "2016-05-05 14:08:37.333511"], ["updated_at", "2016-05-05 14:08:37.333511"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 17"], ["content", "Article 17 content"], ["published_at", "2016-05-05 14:07:37.324180"], ["created_at", "2016-05-05 14:08:37.334839"], ["updated_at", "2016-05-05 14:08:37.334839"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 18"], ["content", "Article 18 content"], ["published_at", "2016-05-05 14:07:37.324180"], ["created_at", "2016-05-05 14:08:37.336151"], ["updated_at", "2016-05-05 14:08:37.336151"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 19"], ["content", "Article 19 content"], ["published_at", "2016-05-05 14:07:37.324180"], ["created_at", "2016-05-05 14:08:37.337663"], ["updated_at", "2016-05-05 14:08:37.337663"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 20"], ["content", "Article 20 content"], ["publish_on", "2016-05-06 14:08:37.338544"], ["created_at", "2016-05-05 14:08:37.339112"], ["updated_at", "2016-05-05 14:08:37.339112"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 21"], ["content", "Article 21 content"], ["publish_on", "2016-05-06 14:08:37.338544"], ["created_at", "2016-05-05 14:08:37.340594"], ["updated_at", "2016-05-05 14:08:37.340594"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 22"], ["content", "Article 22 content"], ["publish_on", "2016-05-06 14:08:37.338544"], ["created_at", "2016-05-05 14:08:37.342117"], ["updated_at", "2016-05-05 14:08:37.342117"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 23"], ["content", "Article 23 content"], ["publish_on", "2016-05-06 14:08:37.338544"], ["created_at", "2016-05-05 14:08:37.344008"], ["updated_at", "2016-05-05 14:08:37.344008"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 24"], ["content", "Article 24 content"], ["publish_on", "2016-05-06 14:08:37.338544"], ["created_at", "2016-05-05 14:08:37.345614"], ["updated_at", "2016-05-05 14:08:37.345614"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 25"], ["content", "Article 25 content"], ["publish_on", "2016-05-06 14:08:37.338544"], ["created_at", "2016-05-05 14:08:37.347035"], ["updated_at", "2016-05-05 14:08:37.347035"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 26"], ["content", "Article 26 content"], ["publish_on", "2016-05-06 14:08:37.338544"], ["created_at", "2016-05-05 14:08:37.348832"], ["updated_at", "2016-05-05 14:08:37.348832"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 27"], ["content", "Article 27 content"], ["publish_on", "2016-05-06 14:08:37.338544"], ["created_at", "2016-05-05 14:08:37.350702"], ["updated_at", "2016-05-05 14:08:37.350702"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 28"], ["content", "Article 28 content"], ["publish_on", "2016-05-06 14:08:37.338544"], ["created_at", "2016-05-05 14:08:37.352357"], ["updated_at", "2016-05-05 14:08:37.352357"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 29"], ["content", "Article 29 content"], ["publish_on", "2016-05-06 14:08:37.338544"], ["created_at", "2016-05-05 14:08:37.353745"], ["updated_at", "2016-05-05 14:08:37.353745"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 30"], ["content", "Article 30 content"], ["publish_on", "2016-05-05 14:07:37.354864"], ["created_at", "2016-05-05 14:08:37.355509"], ["updated_at", "2016-05-05 14:08:37.355509"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 31"], ["content", "Article 31 content"], ["publish_on", "2016-05-05 14:07:37.354864"], ["created_at", "2016-05-05 14:08:37.356957"], ["updated_at", "2016-05-05 14:08:37.356957"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 32"], ["content", "Article 32 content"], ["publish_on", "2016-05-05 14:07:37.354864"], ["created_at", "2016-05-05 14:08:37.358818"], ["updated_at", "2016-05-05 14:08:37.358818"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 33"], ["content", "Article 33 content"], ["publish_on", "2016-05-05 14:07:37.354864"], ["created_at", "2016-05-05 14:08:37.360530"], ["updated_at", "2016-05-05 14:08:37.360530"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 34"], ["content", "Article 34 content"], ["publish_on", "2016-05-05 14:07:37.354864"], ["created_at", "2016-05-05 14:08:37.362009"], ["updated_at", "2016-05-05 14:08:37.362009"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 35"], ["content", "Article 35 content"], ["publish_on", "2016-05-05 14:07:37.354864"], ["created_at", "2016-05-05 14:08:37.363466"], ["updated_at", "2016-05-05 14:08:37.363466"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 36"], ["content", "Article 36 content"], ["publish_on", "2016-05-05 14:07:37.354864"], ["created_at", "2016-05-05 14:08:37.364844"], ["updated_at", "2016-05-05 14:08:37.364844"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 37"], ["content", "Article 37 content"], ["publish_on", "2016-05-05 14:07:37.354864"], ["created_at", "2016-05-05 14:08:37.366332"], ["updated_at", "2016-05-05 14:08:37.366332"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 38"], ["content", "Article 38 content"], ["publish_on", "2016-05-05 14:07:37.354864"], ["created_at", "2016-05-05 14:08:37.367729"], ["updated_at", "2016-05-05 14:08:37.367729"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 39"], ["content", "Article 39 content"], ["publish_on", "2016-05-05 14:07:37.354864"], ["created_at", "2016-05-05 14:08:37.369140"], ["updated_at", "2016-05-05 14:08:37.369140"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "articles" SET "publish_on" = ?, "updated_at" = ? WHERE "articles"."id" = ?[0m  [["publish_on", "2016-05-07 14:08:37.370899"], ["updated_at", "2016-05-05 14:08:37.371264"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "articles" SET "publish_on" = ?, "published_at" = ?, "updated_at" = ? WHERE "articles"."id" = ?  [["publish_on", nil], ["published_at", "2016-05-03 14:08:37.372235"], ["updated_at", "2016-05-05 14:08:37.372612"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------
MagazCore::ArticleTest: test_two_articles_with_same_handle_and_different_shops
------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Article 40"], ["content", "Article 40 content"], ["created_at", "2016-05-05 14:08:37.376737"], ["updated_at", "2016-05-05 14:08:37.376737"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 41"], ["content", "Article 41 content"], ["published_at", "2016-05-05 14:07:37.377955"], ["created_at", "2016-05-05 14:08:37.378500"], ["updated_at", "2016-05-05 14:08:37.378500"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 42"], ["content", "Article 42 content"], ["published_at", "2016-05-05 14:07:37.377955"], ["created_at", "2016-05-05 14:08:37.379970"], ["updated_at", "2016-05-05 14:08:37.379970"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 43"], ["content", "Article 43 content"], ["published_at", "2016-05-05 14:07:37.377955"], ["created_at", "2016-05-05 14:08:37.381352"], ["updated_at", "2016-05-05 14:08:37.381352"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 44"], ["content", "Article 44 content"], ["published_at", "2016-05-05 14:07:37.377955"], ["created_at", "2016-05-05 14:08:37.383354"], ["updated_at", "2016-05-05 14:08:37.383354"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 45"], ["content", "Article 45 content"], ["published_at", "2016-05-05 14:07:37.377955"], ["created_at", "2016-05-05 14:08:37.385204"], ["updated_at", "2016-05-05 14:08:37.385204"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 46"], ["content", "Article 46 content"], ["published_at", "2016-05-05 14:07:37.377955"], ["created_at", "2016-05-05 14:08:37.386591"], ["updated_at", "2016-05-05 14:08:37.386591"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 47"], ["content", "Article 47 content"], ["published_at", "2016-05-05 14:07:37.377955"], ["created_at", "2016-05-05 14:08:37.387898"], ["updated_at", "2016-05-05 14:08:37.387898"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 48"], ["content", "Article 48 content"], ["published_at", "2016-05-05 14:07:37.377955"], ["created_at", "2016-05-05 14:08:37.389217"], ["updated_at", "2016-05-05 14:08:37.389217"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 49"], ["content", "Article 49 content"], ["published_at", "2016-05-05 14:07:37.377955"], ["created_at", "2016-05-05 14:08:37.390636"], ["updated_at", "2016-05-05 14:08:37.390636"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 50"], ["content", "Article 50 content"], ["published_at", "2016-05-05 14:07:37.377955"], ["created_at", "2016-05-05 14:08:37.391923"], ["updated_at", "2016-05-05 14:08:37.391923"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 51"], ["content", "Article 51 content"], ["publish_on", "2016-05-06 14:08:37.392742"], ["created_at", "2016-05-05 14:08:37.393303"], ["updated_at", "2016-05-05 14:08:37.393303"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 52"], ["content", "Article 52 content"], ["publish_on", "2016-05-06 14:08:37.392742"], ["created_at", "2016-05-05 14:08:37.394762"], ["updated_at", "2016-05-05 14:08:37.394762"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 53"], ["content", "Article 53 content"], ["publish_on", "2016-05-06 14:08:37.392742"], ["created_at", "2016-05-05 14:08:37.396097"], ["updated_at", "2016-05-05 14:08:37.396097"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 54"], ["content", "Article 54 content"], ["publish_on", "2016-05-06 14:08:37.392742"], ["created_at", "2016-05-05 14:08:37.397752"], ["updated_at", "2016-05-05 14:08:37.397752"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 55"], ["content", "Article 55 content"], ["publish_on", "2016-05-06 14:08:37.392742"], ["created_at", "2016-05-05 14:08:37.399807"], ["updated_at", "2016-05-05 14:08:37.399807"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 56"], ["content", "Article 56 content"], ["publish_on", "2016-05-06 14:08:37.392742"], ["created_at", "2016-05-05 14:08:37.401848"], ["updated_at", "2016-05-05 14:08:37.401848"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 57"], ["content", "Article 57 content"], ["publish_on", "2016-05-06 14:08:37.392742"], ["created_at", "2016-05-05 14:08:37.403793"], ["updated_at", "2016-05-05 14:08:37.403793"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 58"], ["content", "Article 58 content"], ["publish_on", "2016-05-06 14:08:37.392742"], ["created_at", "2016-05-05 14:08:37.405715"], ["updated_at", "2016-05-05 14:08:37.405715"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 59"], ["content", "Article 59 content"], ["publish_on", "2016-05-06 14:08:37.392742"], ["created_at", "2016-05-05 14:08:37.407548"], ["updated_at", "2016-05-05 14:08:37.407548"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 60"], ["content", "Article 60 content"], ["publish_on", "2016-05-06 14:08:37.392742"], ["created_at", "2016-05-05 14:08:37.408994"], ["updated_at", "2016-05-05 14:08:37.408994"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 61"], ["content", "Article 61 content"], ["publish_on", "2016-05-05 14:07:37.409993"], ["created_at", "2016-05-05 14:08:37.410734"], ["updated_at", "2016-05-05 14:08:37.410734"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 62"], ["content", "Article 62 content"], ["publish_on", "2016-05-05 14:07:37.409993"], ["created_at", "2016-05-05 14:08:37.412715"], ["updated_at", "2016-05-05 14:08:37.412715"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 63"], ["content", "Article 63 content"], ["publish_on", "2016-05-05 14:07:37.409993"], ["created_at", "2016-05-05 14:08:37.414621"], ["updated_at", "2016-05-05 14:08:37.414621"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 64"], ["content", "Article 64 content"], ["publish_on", "2016-05-05 14:07:37.409993"], ["created_at", "2016-05-05 14:08:37.416294"], ["updated_at", "2016-05-05 14:08:37.416294"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 65"], ["content", "Article 65 content"], ["publish_on", "2016-05-05 14:07:37.409993"], ["created_at", "2016-05-05 14:08:37.417942"], ["updated_at", "2016-05-05 14:08:37.417942"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 66"], ["content", "Article 66 content"], ["publish_on", "2016-05-05 14:07:37.409993"], ["created_at", "2016-05-05 14:08:37.419552"], ["updated_at", "2016-05-05 14:08:37.419552"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 67"], ["content", "Article 67 content"], ["publish_on", "2016-05-05 14:07:37.409993"], ["created_at", "2016-05-05 14:08:37.421157"], ["updated_at", "2016-05-05 14:08:37.421157"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 68"], ["content", "Article 68 content"], ["publish_on", "2016-05-05 14:07:37.409993"], ["created_at", "2016-05-05 14:08:37.423113"], ["updated_at", "2016-05-05 14:08:37.423113"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 69"], ["content", "Article 69 content"], ["publish_on", "2016-05-05 14:07:37.409993"], ["created_at", "2016-05-05 14:08:37.424903"], ["updated_at", "2016-05-05 14:08:37.424903"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (8.9ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 70"], ["content", "Article 70 content"], ["publish_on", "2016-05-05 14:07:37.409993"], ["created_at", "2016-05-05 14:08:37.427056"], ["updated_at", "2016-05-05 14:08:37.427056"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-05 14:08:37.439349"], ["updated_at", "2016-05-05 14:08:37.439349"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop2' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop2"], ["subdomain", "shop2"], ["created_at", "2016-05-05 14:08:37.441752"], ["updated_at", "2016-05-05 14:08:37.441752"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "blog"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:37.443680"], ["updated_at", "2016-05-05 14:08:37.443680"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "blog"], ["shop_id", 2], ["created_at", "2016-05-05 14:08:37.445322"], ["updated_at", "2016-05-05 14:08:37.445322"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "article-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "handle", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "article"], ["content", "Article 71 content"], ["handle", "article-handle"], ["blog_id", 1], ["slug", "article-handle"], ["created_at", "2016-05-05 14:08:37.447988"], ["updated_at", "2016-05-05 14:08:37.447988"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.1ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "article-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "handle", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "article"], ["handle", "article-handle"], ["blog_id", 2], ["slug", "article-handle"], ["created_at", "2016-05-05 14:08:37.450611"], ["updated_at", "2016-05-05 14:08:37.450611"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------
MagazCore::ArticleTest: test_two_articles_with_same_handle_and_same_shop
------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Article 71"], ["content", "Article 72 content"], ["created_at", "2016-05-05 14:08:37.454443"], ["updated_at", "2016-05-05 14:08:37.454443"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 72"], ["content", "Article 73 content"], ["published_at", "2016-05-05 14:07:37.455471"], ["created_at", "2016-05-05 14:08:37.456057"], ["updated_at", "2016-05-05 14:08:37.456057"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 73"], ["content", "Article 74 content"], ["published_at", "2016-05-05 14:07:37.455471"], ["created_at", "2016-05-05 14:08:37.457690"], ["updated_at", "2016-05-05 14:08:37.457690"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 74"], ["content", "Article 75 content"], ["published_at", "2016-05-05 14:07:37.455471"], ["created_at", "2016-05-05 14:08:37.459039"], ["updated_at", "2016-05-05 14:08:37.459039"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 75"], ["content", "Article 76 content"], ["published_at", "2016-05-05 14:07:37.455471"], ["created_at", "2016-05-05 14:08:37.460407"], ["updated_at", "2016-05-05 14:08:37.460407"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 76"], ["content", "Article 77 content"], ["published_at", "2016-05-05 14:07:37.455471"], ["created_at", "2016-05-05 14:08:37.462168"], ["updated_at", "2016-05-05 14:08:37.462168"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 77"], ["content", "Article 78 content"], ["published_at", "2016-05-05 14:07:37.455471"], ["created_at", "2016-05-05 14:08:37.464563"], ["updated_at", "2016-05-05 14:08:37.464563"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 78"], ["content", "Article 79 content"], ["published_at", "2016-05-05 14:07:37.455471"], ["created_at", "2016-05-05 14:08:37.466625"], ["updated_at", "2016-05-05 14:08:37.466625"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 79"], ["content", "Article 80 content"], ["published_at", "2016-05-05 14:07:37.455471"], ["created_at", "2016-05-05 14:08:37.468741"], ["updated_at", "2016-05-05 14:08:37.468741"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 80"], ["content", "Article 81 content"], ["published_at", "2016-05-05 14:07:37.455471"], ["created_at", "2016-05-05 14:08:37.471213"], ["updated_at", "2016-05-05 14:08:37.471213"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 81"], ["content", "Article 82 content"], ["published_at", "2016-05-05 14:07:37.455471"], ["created_at", "2016-05-05 14:08:37.473404"], ["updated_at", "2016-05-05 14:08:37.473404"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 82"], ["content", "Article 83 content"], ["publish_on", "2016-05-06 14:08:37.474703"], ["created_at", "2016-05-05 14:08:37.475485"], ["updated_at", "2016-05-05 14:08:37.475485"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 83"], ["content", "Article 84 content"], ["publish_on", "2016-05-06 14:08:37.474703"], ["created_at", "2016-05-05 14:08:37.477527"], ["updated_at", "2016-05-05 14:08:37.477527"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 84"], ["content", "Article 85 content"], ["publish_on", "2016-05-06 14:08:37.474703"], ["created_at", "2016-05-05 14:08:37.479306"], ["updated_at", "2016-05-05 14:08:37.479306"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 85"], ["content", "Article 86 content"], ["publish_on", "2016-05-06 14:08:37.474703"], ["created_at", "2016-05-05 14:08:37.481048"], ["updated_at", "2016-05-05 14:08:37.481048"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 86"], ["content", "Article 87 content"], ["publish_on", "2016-05-06 14:08:37.474703"], ["created_at", "2016-05-05 14:08:37.483032"], ["updated_at", "2016-05-05 14:08:37.483032"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 87"], ["content", "Article 88 content"], ["publish_on", "2016-05-06 14:08:37.474703"], ["created_at", "2016-05-05 14:08:37.484994"], ["updated_at", "2016-05-05 14:08:37.484994"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 88"], ["content", "Article 89 content"], ["publish_on", "2016-05-06 14:08:37.474703"], ["created_at", "2016-05-05 14:08:37.486840"], ["updated_at", "2016-05-05 14:08:37.486840"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 89"], ["content", "Article 90 content"], ["publish_on", "2016-05-06 14:08:37.474703"], ["created_at", "2016-05-05 14:08:37.488807"], ["updated_at", "2016-05-05 14:08:37.488807"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 90"], ["content", "Article 91 content"], ["publish_on", "2016-05-06 14:08:37.474703"], ["created_at", "2016-05-05 14:08:37.490674"], ["updated_at", "2016-05-05 14:08:37.490674"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 91"], ["content", "Article 92 content"], ["publish_on", "2016-05-06 14:08:37.474703"], ["created_at", "2016-05-05 14:08:37.495246"], ["updated_at", "2016-05-05 14:08:37.495246"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 92"], ["content", "Article 93 content"], ["publish_on", "2016-05-05 14:07:37.497439"], ["created_at", "2016-05-05 14:08:37.498197"], ["updated_at", "2016-05-05 14:08:37.498197"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 93"], ["content", "Article 94 content"], ["publish_on", "2016-05-05 14:07:37.497439"], ["created_at", "2016-05-05 14:08:37.499936"], ["updated_at", "2016-05-05 14:08:37.499936"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 94"], ["content", "Article 95 content"], ["publish_on", "2016-05-05 14:07:37.497439"], ["created_at", "2016-05-05 14:08:37.501910"], ["updated_at", "2016-05-05 14:08:37.501910"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 95"], ["content", "Article 96 content"], ["publish_on", "2016-05-05 14:07:37.497439"], ["created_at", "2016-05-05 14:08:37.503763"], ["updated_at", "2016-05-05 14:08:37.503763"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 96"], ["content", "Article 97 content"], ["publish_on", "2016-05-05 14:07:37.497439"], ["created_at", "2016-05-05 14:08:37.505788"], ["updated_at", "2016-05-05 14:08:37.505788"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 97"], ["content", "Article 98 content"], ["publish_on", "2016-05-05 14:07:37.497439"], ["created_at", "2016-05-05 14:08:37.507649"], ["updated_at", "2016-05-05 14:08:37.507649"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 98"], ["content", "Article 99 content"], ["publish_on", "2016-05-05 14:07:37.497439"], ["created_at", "2016-05-05 14:08:37.509766"], ["updated_at", "2016-05-05 14:08:37.509766"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 99"], ["content", "Article 100 content"], ["publish_on", "2016-05-05 14:07:37.497439"], ["created_at", "2016-05-05 14:08:37.511546"], ["updated_at", "2016-05-05 14:08:37.511546"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 100"], ["content", "Article 101 content"], ["publish_on", "2016-05-05 14:07:37.497439"], ["created_at", "2016-05-05 14:08:37.513210"], ["updated_at", "2016-05-05 14:08:37.513210"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 101"], ["content", "Article 102 content"], ["publish_on", "2016-05-05 14:07:37.497439"], ["created_at", "2016-05-05 14:08:37.515179"], ["updated_at", "2016-05-05 14:08:37.515179"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-05 14:08:37.517913"], ["updated_at", "2016-05-05 14:08:37.517913"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["title", "blog1"], ["created_at", "2016-05-05 14:08:37.519777"], ["updated_at", "2016-05-05 14:08:37.519777"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "article-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "handle", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "article1"], ["content", "Article 103 content"], ["handle", "article-handle"], ["blog_id", 1], ["slug", "article-handle"], ["created_at", "2016-05-05 14:08:37.522320"], ["updated_at", "2016-05-05 14:08:37.522320"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "article-handle"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "articles" ("title", "handle", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "article2"], ["handle", "article-handle"], ["blog_id", 1], ["slug", "article-handle-edf8f438-2caa-48ac-84b2-824eab99826c"], ["created_at", "2016-05-05 14:08:37.524942"], ["updated_at", "2016-05-05 14:08:37.524942"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
MagazCore::ArticleTest: test_visibility_scopes
----------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Article 102"], ["content", "Article 104 content"], ["created_at", "2016-05-05 14:08:37.531466"], ["updated_at", "2016-05-05 14:08:37.531466"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 103"], ["content", "Article 105 content"], ["published_at", "2016-05-05 14:07:37.533066"], ["created_at", "2016-05-05 14:08:37.534085"], ["updated_at", "2016-05-05 14:08:37.534085"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 104"], ["content", "Article 106 content"], ["published_at", "2016-05-05 14:07:37.533066"], ["created_at", "2016-05-05 14:08:37.536502"], ["updated_at", "2016-05-05 14:08:37.536502"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 105"], ["content", "Article 107 content"], ["published_at", "2016-05-05 14:07:37.533066"], ["created_at", "2016-05-05 14:08:37.538504"], ["updated_at", "2016-05-05 14:08:37.538504"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 106"], ["content", "Article 108 content"], ["published_at", "2016-05-05 14:07:37.533066"], ["created_at", "2016-05-05 14:08:37.540843"], ["updated_at", "2016-05-05 14:08:37.540843"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 107"], ["content", "Article 109 content"], ["published_at", "2016-05-05 14:07:37.533066"], ["created_at", "2016-05-05 14:08:37.542558"], ["updated_at", "2016-05-05 14:08:37.542558"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 108"], ["content", "Article 110 content"], ["published_at", "2016-05-05 14:07:37.533066"], ["created_at", "2016-05-05 14:08:37.544317"], ["updated_at", "2016-05-05 14:08:37.544317"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 109"], ["content", "Article 111 content"], ["published_at", "2016-05-05 14:07:37.533066"], ["created_at", "2016-05-05 14:08:37.545794"], ["updated_at", "2016-05-05 14:08:37.545794"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 110"], ["content", "Article 112 content"], ["published_at", "2016-05-05 14:07:37.533066"], ["created_at", "2016-05-05 14:08:37.547270"], ["updated_at", "2016-05-05 14:08:37.547270"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 111"], ["content", "Article 113 content"], ["published_at", "2016-05-05 14:07:37.533066"], ["created_at", "2016-05-05 14:08:37.548647"], ["updated_at", "2016-05-05 14:08:37.548647"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 112"], ["content", "Article 114 content"], ["published_at", "2016-05-05 14:07:37.533066"], ["created_at", "2016-05-05 14:08:37.550145"], ["updated_at", "2016-05-05 14:08:37.550145"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 113"], ["content", "Article 115 content"], ["publish_on", "2016-05-06 14:08:37.551010"], ["created_at", "2016-05-05 14:08:37.551614"], ["updated_at", "2016-05-05 14:08:37.551614"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 114"], ["content", "Article 116 content"], ["publish_on", "2016-05-06 14:08:37.551010"], ["created_at", "2016-05-05 14:08:37.553260"], ["updated_at", "2016-05-05 14:08:37.553260"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 115"], ["content", "Article 117 content"], ["publish_on", "2016-05-06 14:08:37.551010"], ["created_at", "2016-05-05 14:08:37.554792"], ["updated_at", "2016-05-05 14:08:37.554792"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 116"], ["content", "Article 118 content"], ["publish_on", "2016-05-06 14:08:37.551010"], ["created_at", "2016-05-05 14:08:37.556433"], ["updated_at", "2016-05-05 14:08:37.556433"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 117"], ["content", "Article 119 content"], ["publish_on", "2016-05-06 14:08:37.551010"], ["created_at", "2016-05-05 14:08:37.558589"], ["updated_at", "2016-05-05 14:08:37.558589"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 118"], ["content", "Article 120 content"], ["publish_on", "2016-05-06 14:08:37.551010"], ["created_at", "2016-05-05 14:08:37.560844"], ["updated_at", "2016-05-05 14:08:37.560844"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 119"], ["content", "Article 121 content"], ["publish_on", "2016-05-06 14:08:37.551010"], ["created_at", "2016-05-05 14:08:37.562965"], ["updated_at", "2016-05-05 14:08:37.562965"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 120"], ["content", "Article 122 content"], ["publish_on", "2016-05-06 14:08:37.551010"], ["created_at", "2016-05-05 14:08:37.565070"], ["updated_at", "2016-05-05 14:08:37.565070"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 121"], ["content", "Article 123 content"], ["publish_on", "2016-05-06 14:08:37.551010"], ["created_at", "2016-05-05 14:08:37.567533"], ["updated_at", "2016-05-05 14:08:37.567533"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 122"], ["content", "Article 124 content"], ["publish_on", "2016-05-06 14:08:37.551010"], ["created_at", "2016-05-05 14:08:37.569659"], ["updated_at", "2016-05-05 14:08:37.569659"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 123"], ["content", "Article 125 content"], ["publish_on", "2016-05-05 14:07:37.570807"], ["created_at", "2016-05-05 14:08:37.571457"], ["updated_at", "2016-05-05 14:08:37.571457"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 124"], ["content", "Article 126 content"], ["publish_on", "2016-05-05 14:07:37.570807"], ["created_at", "2016-05-05 14:08:37.573145"], ["updated_at", "2016-05-05 14:08:37.573145"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 125"], ["content", "Article 127 content"], ["publish_on", "2016-05-05 14:07:37.570807"], ["created_at", "2016-05-05 14:08:37.574788"], ["updated_at", "2016-05-05 14:08:37.574788"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 126"], ["content", "Article 128 content"], ["publish_on", "2016-05-05 14:07:37.570807"], ["created_at", "2016-05-05 14:08:37.576342"], ["updated_at", "2016-05-05 14:08:37.576342"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 127"], ["content", "Article 129 content"], ["publish_on", "2016-05-05 14:07:37.570807"], ["created_at", "2016-05-05 14:08:37.578274"], ["updated_at", "2016-05-05 14:08:37.578274"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 128"], ["content", "Article 130 content"], ["publish_on", "2016-05-05 14:07:37.570807"], ["created_at", "2016-05-05 14:08:37.579941"], ["updated_at", "2016-05-05 14:08:37.579941"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 129"], ["content", "Article 131 content"], ["publish_on", "2016-05-05 14:07:37.570807"], ["created_at", "2016-05-05 14:08:37.581517"], ["updated_at", "2016-05-05 14:08:37.581517"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 130"], ["content", "Article 132 content"], ["publish_on", "2016-05-05 14:07:37.570807"], ["created_at", "2016-05-05 14:08:37.583040"], ["updated_at", "2016-05-05 14:08:37.583040"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 131"], ["content", "Article 133 content"], ["publish_on", "2016-05-05 14:07:37.570807"], ["created_at", "2016-05-05 14:08:37.584535"], ["updated_at", "2016-05-05 14:08:37.584535"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 132"], ["content", "Article 134 content"], ["publish_on", "2016-05-05 14:07:37.570807"], ["created_at", "2016-05-05 14:08:37.585985"], ["updated_at", "2016-05-05 14:08:37.585985"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT "articles".* FROM "articles" WHERE "articles"."publish_on" IS NULL AND ("articles"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-05 14:08:37.587126')
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT "articles".* FROM "articles" WHERE (publish_on >= '2016-05-05 14:08:37.587953') AND "articles"."published_at" IS NULL[0m
  [1m[35mMagazCore::Article Load (0.2ms)[0m  SELECT "articles".* FROM "articles" WHERE (publish_on <= '2016-05-05 14:08:37.588595') AND "articles"."published_at" IS NULL
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (10.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
MagazCore::ArticleTest: test_visibility_scopes_and_methods
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Article 133"], ["content", "Article 135 content"], ["created_at", "2016-05-05 14:08:37.602759"], ["updated_at", "2016-05-05 14:08:37.602759"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 134"], ["content", "Article 136 content"], ["published_at", "2016-05-05 14:07:37.604404"], ["created_at", "2016-05-05 14:08:37.605350"], ["updated_at", "2016-05-05 14:08:37.605350"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 135"], ["content", "Article 137 content"], ["published_at", "2016-05-05 14:07:37.604404"], ["created_at", "2016-05-05 14:08:37.607949"], ["updated_at", "2016-05-05 14:08:37.607949"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 136"], ["content", "Article 138 content"], ["published_at", "2016-05-05 14:07:37.604404"], ["created_at", "2016-05-05 14:08:37.610014"], ["updated_at", "2016-05-05 14:08:37.610014"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 137"], ["content", "Article 139 content"], ["published_at", "2016-05-05 14:07:37.604404"], ["created_at", "2016-05-05 14:08:37.612407"], ["updated_at", "2016-05-05 14:08:37.612407"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 138"], ["content", "Article 140 content"], ["published_at", "2016-05-05 14:07:37.604404"], ["created_at", "2016-05-05 14:08:37.614501"], ["updated_at", "2016-05-05 14:08:37.614501"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 139"], ["content", "Article 141 content"], ["published_at", "2016-05-05 14:07:37.604404"], ["created_at", "2016-05-05 14:08:37.616582"], ["updated_at", "2016-05-05 14:08:37.616582"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 140"], ["content", "Article 142 content"], ["published_at", "2016-05-05 14:07:37.604404"], ["created_at", "2016-05-05 14:08:37.618206"], ["updated_at", "2016-05-05 14:08:37.618206"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 141"], ["content", "Article 143 content"], ["published_at", "2016-05-05 14:07:37.604404"], ["created_at", "2016-05-05 14:08:37.619836"], ["updated_at", "2016-05-05 14:08:37.619836"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 142"], ["content", "Article 144 content"], ["published_at", "2016-05-05 14:07:37.604404"], ["created_at", "2016-05-05 14:08:37.621587"], ["updated_at", "2016-05-05 14:08:37.621587"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 143"], ["content", "Article 145 content"], ["published_at", "2016-05-05 14:07:37.604404"], ["created_at", "2016-05-05 14:08:37.623677"], ["updated_at", "2016-05-05 14:08:37.623677"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 144"], ["content", "Article 146 content"], ["publish_on", "2016-05-06 14:08:37.624981"], ["created_at", "2016-05-05 14:08:37.625837"], ["updated_at", "2016-05-05 14:08:37.625837"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 145"], ["content", "Article 147 content"], ["publish_on", "2016-05-06 14:08:37.624981"], ["created_at", "2016-05-05 14:08:37.627998"], ["updated_at", "2016-05-05 14:08:37.627998"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 146"], ["content", "Article 148 content"], ["publish_on", "2016-05-06 14:08:37.624981"], ["created_at", "2016-05-05 14:08:37.630485"], ["updated_at", "2016-05-05 14:08:37.630485"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 147"], ["content", "Article 149 content"], ["publish_on", "2016-05-06 14:08:37.624981"], ["created_at", "2016-05-05 14:08:37.632509"], ["updated_at", "2016-05-05 14:08:37.632509"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 148"], ["content", "Article 150 content"], ["publish_on", "2016-05-06 14:08:37.624981"], ["created_at", "2016-05-05 14:08:37.634361"], ["updated_at", "2016-05-05 14:08:37.634361"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 149"], ["content", "Article 151 content"], ["publish_on", "2016-05-06 14:08:37.624981"], ["created_at", "2016-05-05 14:08:37.636188"], ["updated_at", "2016-05-05 14:08:37.636188"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 150"], ["content", "Article 152 content"], ["publish_on", "2016-05-06 14:08:37.624981"], ["created_at", "2016-05-05 14:08:37.637962"], ["updated_at", "2016-05-05 14:08:37.637962"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 151"], ["content", "Article 153 content"], ["publish_on", "2016-05-06 14:08:37.624981"], ["created_at", "2016-05-05 14:08:37.639582"], ["updated_at", "2016-05-05 14:08:37.639582"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 152"], ["content", "Article 154 content"], ["publish_on", "2016-05-06 14:08:37.624981"], ["created_at", "2016-05-05 14:08:37.641360"], ["updated_at", "2016-05-05 14:08:37.641360"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 153"], ["content", "Article 155 content"], ["publish_on", "2016-05-06 14:08:37.624981"], ["created_at", "2016-05-05 14:08:37.642985"], ["updated_at", "2016-05-05 14:08:37.642985"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 154"], ["content", "Article 156 content"], ["publish_on", "2016-05-05 14:07:37.644266"], ["created_at", "2016-05-05 14:08:37.645051"], ["updated_at", "2016-05-05 14:08:37.645051"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 155"], ["content", "Article 157 content"], ["publish_on", "2016-05-05 14:07:37.644266"], ["created_at", "2016-05-05 14:08:37.646759"], ["updated_at", "2016-05-05 14:08:37.646759"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 156"], ["content", "Article 158 content"], ["publish_on", "2016-05-05 14:07:37.644266"], ["created_at", "2016-05-05 14:08:37.648360"], ["updated_at", "2016-05-05 14:08:37.648360"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 157"], ["content", "Article 159 content"], ["publish_on", "2016-05-05 14:07:37.644266"], ["created_at", "2016-05-05 14:08:37.649805"], ["updated_at", "2016-05-05 14:08:37.649805"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 158"], ["content", "Article 160 content"], ["publish_on", "2016-05-05 14:07:37.644266"], ["created_at", "2016-05-05 14:08:37.651442"], ["updated_at", "2016-05-05 14:08:37.651442"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 159"], ["content", "Article 161 content"], ["publish_on", "2016-05-05 14:07:37.644266"], ["created_at", "2016-05-05 14:08:37.653094"], ["updated_at", "2016-05-05 14:08:37.653094"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 160"], ["content", "Article 162 content"], ["publish_on", "2016-05-05 14:07:37.644266"], ["created_at", "2016-05-05 14:08:37.655543"], ["updated_at", "2016-05-05 14:08:37.655543"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 161"], ["content", "Article 163 content"], ["publish_on", "2016-05-05 14:07:37.644266"], ["created_at", "2016-05-05 14:08:37.657719"], ["updated_at", "2016-05-05 14:08:37.657719"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 162"], ["content", "Article 164 content"], ["publish_on", "2016-05-05 14:07:37.644266"], ["created_at", "2016-05-05 14:08:37.659847"], ["updated_at", "2016-05-05 14:08:37.659847"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 163"], ["content", "Article 165 content"], ["publish_on", "2016-05-05 14:07:37.644266"], ["created_at", "2016-05-05 14:08:37.662099"], ["updated_at", "2016-05-05 14:08:37.662099"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Load (0.2ms)[0m  SELECT "articles".* FROM "articles" WHERE "articles"."publish_on" IS NULL AND ("articles"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-05 14:08:37.663550')
  [1m[36mMagazCore::Article Load (0.2ms)[0m  [1mSELECT "articles".* FROM "articles" WHERE (publish_on >= '2016-05-05 14:08:37.665112') AND "articles"."published_at" IS NULL[0m
  [1m[35mMagazCore::Article Load (0.2ms)[0m  SELECT "articles".* FROM "articles" WHERE (publish_on <= '2016-05-05 14:08:37.665982') AND "articles"."published_at" IS NULL
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
MagazCore::ArticleTest: test_worker_created
-------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Article 164"], ["content", "Article 166 content"], ["created_at", "2016-05-05 14:08:37.670308"], ["updated_at", "2016-05-05 14:08:37.670308"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 165"], ["content", "Article 167 content"], ["published_at", "2016-05-05 14:07:37.671905"], ["created_at", "2016-05-05 14:08:37.672733"], ["updated_at", "2016-05-05 14:08:37.672733"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 166"], ["content", "Article 168 content"], ["published_at", "2016-05-05 14:07:37.671905"], ["created_at", "2016-05-05 14:08:37.674610"], ["updated_at", "2016-05-05 14:08:37.674610"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 167"], ["content", "Article 169 content"], ["published_at", "2016-05-05 14:07:37.671905"], ["created_at", "2016-05-05 14:08:37.676101"], ["updated_at", "2016-05-05 14:08:37.676101"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 168"], ["content", "Article 170 content"], ["published_at", "2016-05-05 14:07:37.671905"], ["created_at", "2016-05-05 14:08:37.677738"], ["updated_at", "2016-05-05 14:08:37.677738"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 169"], ["content", "Article 171 content"], ["published_at", "2016-05-05 14:07:37.671905"], ["created_at", "2016-05-05 14:08:37.679512"], ["updated_at", "2016-05-05 14:08:37.679512"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 170"], ["content", "Article 172 content"], ["published_at", "2016-05-05 14:07:37.671905"], ["created_at", "2016-05-05 14:08:37.681062"], ["updated_at", "2016-05-05 14:08:37.681062"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 171"], ["content", "Article 173 content"], ["published_at", "2016-05-05 14:07:37.671905"], ["created_at", "2016-05-05 14:08:37.682445"], ["updated_at", "2016-05-05 14:08:37.682445"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 172"], ["content", "Article 174 content"], ["published_at", "2016-05-05 14:07:37.671905"], ["created_at", "2016-05-05 14:08:37.683856"], ["updated_at", "2016-05-05 14:08:37.683856"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 173"], ["content", "Article 175 content"], ["published_at", "2016-05-05 14:07:37.671905"], ["created_at", "2016-05-05 14:08:37.685392"], ["updated_at", "2016-05-05 14:08:37.685392"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 174"], ["content", "Article 176 content"], ["published_at", "2016-05-05 14:07:37.671905"], ["created_at", "2016-05-05 14:08:37.687578"], ["updated_at", "2016-05-05 14:08:37.687578"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 175"], ["content", "Article 177 content"], ["publish_on", "2016-05-06 14:08:37.688872"], ["created_at", "2016-05-05 14:08:37.689833"], ["updated_at", "2016-05-05 14:08:37.689833"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 176"], ["content", "Article 178 content"], ["publish_on", "2016-05-06 14:08:37.688872"], ["created_at", "2016-05-05 14:08:37.691936"], ["updated_at", "2016-05-05 14:08:37.691936"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 177"], ["content", "Article 179 content"], ["publish_on", "2016-05-06 14:08:37.688872"], ["created_at", "2016-05-05 14:08:37.694215"], ["updated_at", "2016-05-05 14:08:37.694215"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 178"], ["content", "Article 180 content"], ["publish_on", "2016-05-06 14:08:37.688872"], ["created_at", "2016-05-05 14:08:37.696518"], ["updated_at", "2016-05-05 14:08:37.696518"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 179"], ["content", "Article 181 content"], ["publish_on", "2016-05-06 14:08:37.688872"], ["created_at", "2016-05-05 14:08:37.698639"], ["updated_at", "2016-05-05 14:08:37.698639"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 180"], ["content", "Article 182 content"], ["publish_on", "2016-05-06 14:08:37.688872"], ["created_at", "2016-05-05 14:08:37.700617"], ["updated_at", "2016-05-05 14:08:37.700617"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 181"], ["content", "Article 183 content"], ["publish_on", "2016-05-06 14:08:37.688872"], ["created_at", "2016-05-05 14:08:37.702391"], ["updated_at", "2016-05-05 14:08:37.702391"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 182"], ["content", "Article 184 content"], ["publish_on", "2016-05-06 14:08:37.688872"], ["created_at", "2016-05-05 14:08:37.704676"], ["updated_at", "2016-05-05 14:08:37.704676"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 183"], ["content", "Article 185 content"], ["publish_on", "2016-05-06 14:08:37.688872"], ["created_at", "2016-05-05 14:08:37.706984"], ["updated_at", "2016-05-05 14:08:37.706984"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 184"], ["content", "Article 186 content"], ["publish_on", "2016-05-06 14:08:37.688872"], ["created_at", "2016-05-05 14:08:37.709160"], ["updated_at", "2016-05-05 14:08:37.709160"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 185"], ["content", "Article 187 content"], ["publish_on", "2016-05-05 14:07:37.711122"], ["created_at", "2016-05-05 14:08:37.712048"], ["updated_at", "2016-05-05 14:08:37.712048"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 186"], ["content", "Article 188 content"], ["publish_on", "2016-05-05 14:07:37.711122"], ["created_at", "2016-05-05 14:08:37.713826"], ["updated_at", "2016-05-05 14:08:37.713826"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 187"], ["content", "Article 189 content"], ["publish_on", "2016-05-05 14:07:37.711122"], ["created_at", "2016-05-05 14:08:37.715500"], ["updated_at", "2016-05-05 14:08:37.715500"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 188"], ["content", "Article 190 content"], ["publish_on", "2016-05-05 14:07:37.711122"], ["created_at", "2016-05-05 14:08:37.716935"], ["updated_at", "2016-05-05 14:08:37.716935"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 189"], ["content", "Article 191 content"], ["publish_on", "2016-05-05 14:07:37.711122"], ["created_at", "2016-05-05 14:08:37.718665"], ["updated_at", "2016-05-05 14:08:37.718665"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 190"], ["content", "Article 192 content"], ["publish_on", "2016-05-05 14:07:37.711122"], ["created_at", "2016-05-05 14:08:37.720229"], ["updated_at", "2016-05-05 14:08:37.720229"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 191"], ["content", "Article 193 content"], ["publish_on", "2016-05-05 14:07:37.711122"], ["created_at", "2016-05-05 14:08:37.721749"], ["updated_at", "2016-05-05 14:08:37.721749"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 192"], ["content", "Article 194 content"], ["publish_on", "2016-05-05 14:07:37.711122"], ["created_at", "2016-05-05 14:08:37.723301"], ["updated_at", "2016-05-05 14:08:37.723301"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 193"], ["content", "Article 195 content"], ["publish_on", "2016-05-05 14:07:37.711122"], ["created_at", "2016-05-05 14:08:37.724832"], ["updated_at", "2016-05-05 14:08:37.724832"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 194"], ["content", "Article 196 content"], ["publish_on", "2016-05-05 14:07:37.711122"], ["created_at", "2016-05-05 14:08:37.726984"], ["updated_at", "2016-05-05 14:08:37.726984"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "articles" SET "publish_on" = ?, "updated_at" = ? WHERE "articles"."id" = ?[0m  [["publish_on", "2016-05-07 14:08:37.728546"], ["updated_at", "2016-05-05 14:08:37.729239"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------
MagazCore::ThemeServices::ActivateTest: test_activate_theme
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example49' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example49"], ["subdomain", "example49"], ["created_at", "2016-05-05 14:08:37.736118"], ["updated_at", "2016-05-05 14:08:37.736118"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme18"], ["created_at", "2016-05-05 14:08:37.786372"], ["updated_at", "2016-05-05 14:08:37.786372"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.787556"], ["updated_at", "2016-05-05 14:08:37.787556"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.788408"], ["updated_at", "2016-05-05 14:08:37.788408"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.789162"], ["updated_at", "2016-05-05 14:08:37.789162"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.789924"], ["updated_at", "2016-05-05 14:08:37.789924"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.790684"], ["updated_at", "2016-05-05 14:08:37.790684"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.791426"], ["updated_at", "2016-05-05 14:08:37.791426"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.792176"], ["updated_at", "2016-05-05 14:08:37.792176"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.792963"], ["updated_at", "2016-05-05 14:08:37.792963"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.793690"], ["updated_at", "2016-05-05 14:08:37.793690"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.794419"], ["updated_at", "2016-05-05 14:08:37.794419"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.795151"], ["updated_at", "2016-05-05 14:08:37.795151"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.795845"], ["updated_at", "2016-05-05 14:08:37.795845"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.796563"], ["updated_at", "2016-05-05 14:08:37.796563"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.797402"], ["updated_at", "2016-05-05 14:08:37.797402"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.798201"], ["updated_at", "2016-05-05 14:08:37.798201"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.798886"], ["updated_at", "2016-05-05 14:08:37.798886"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.799650"], ["updated_at", "2016-05-05 14:08:37.799650"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.800427"], ["updated_at", "2016-05-05 14:08:37.800427"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.801243"], ["updated_at", "2016-05-05 14:08:37.801243"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.802027"], ["updated_at", "2016-05-05 14:08:37.802027"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.802766"], ["updated_at", "2016-05-05 14:08:37.802766"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.803496"], ["updated_at", "2016-05-05 14:08:37.803496"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.804188"], ["updated_at", "2016-05-05 14:08:37.804188"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.804917"], ["updated_at", "2016-05-05 14:08:37.804917"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.806078"], ["updated_at", "2016-05-05 14:08:37.806078"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.807128"], ["updated_at", "2016-05-05 14:08:37.807128"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.808241"], ["updated_at", "2016-05-05 14:08:37.808241"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.809365"], ["updated_at", "2016-05-05 14:08:37.809365"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.810361"], ["updated_at", "2016-05-05 14:08:37.810361"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.811387"], ["updated_at", "2016-05-05 14:08:37.811387"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.812380"], ["updated_at", "2016-05-05 14:08:37.812380"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.813584"], ["updated_at", "2016-05-05 14:08:37.813584"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.814628"], ["updated_at", "2016-05-05 14:08:37.814628"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.815702"], ["updated_at", "2016-05-05 14:08:37.815702"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.816683"], ["updated_at", "2016-05-05 14:08:37.816683"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.817765"], ["updated_at", "2016-05-05 14:08:37.817765"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.818749"], ["updated_at", "2016-05-05 14:08:37.818749"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.819823"], ["updated_at", "2016-05-05 14:08:37.819823"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.820643"], ["updated_at", "2016-05-05 14:08:37.820643"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.821458"], ["updated_at", "2016-05-05 14:08:37.821458"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.822344"], ["updated_at", "2016-05-05 14:08:37.822344"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.823164"], ["updated_at", "2016-05-05 14:08:37.823164"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.824004"], ["updated_at", "2016-05-05 14:08:37.824004"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.824739"], ["updated_at", "2016-05-05 14:08:37.824739"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.825591"], ["updated_at", "2016-05-05 14:08:37.825591"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.826365"], ["updated_at", "2016-05-05 14:08:37.826365"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.827149"], ["updated_at", "2016-05-05 14:08:37.827149"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.827891"], ["updated_at", "2016-05-05 14:08:37.827891"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.828651"], ["updated_at", "2016-05-05 14:08:37.828651"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:37.829409"], ["updated_at", "2016-05-05 14:08:37.829409"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Asset Load (0.2ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme18"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-05 14:08:37.874090"], ["updated_at", "2016-05-05 14:08:37.874090"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-05 14:08:37.787556"], ["updated_at", "2016-05-05 14:08:37.787556"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-05 14:08:37.788408"], ["updated_at", "2016-05-05 14:08:37.788408"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-05 14:08:37.789162"], ["updated_at", "2016-05-05 14:08:37.789162"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-05 14:08:37.789924"], ["updated_at", "2016-05-05 14:08:37.789924"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-05 14:08:37.790684"], ["updated_at", "2016-05-05 14:08:37.790684"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-05 14:08:37.791426"], ["updated_at", "2016-05-05 14:08:37.791426"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-05 14:08:37.792176"], ["updated_at", "2016-05-05 14:08:37.792176"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-05 14:08:37.792963"], ["updated_at", "2016-05-05 14:08:37.792963"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-05 14:08:37.793690"], ["updated_at", "2016-05-05 14:08:37.793690"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-05 14:08:37.794419"], ["updated_at", "2016-05-05 14:08:37.794419"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-05 14:08:37.795151"], ["updated_at", "2016-05-05 14:08:37.795151"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-05 14:08:37.795845"], ["updated_at", "2016-05-05 14:08:37.795845"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-05 14:08:37.796563"], ["updated_at", "2016-05-05 14:08:37.796563"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-05 14:08:37.797402"], ["updated_at", "2016-05-05 14:08:37.797402"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-05 14:08:37.798201"], ["updated_at", "2016-05-05 14:08:37.798201"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-05 14:08:37.798886"], ["updated_at", "2016-05-05 14:08:37.798886"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-05 14:08:37.799650"], ["updated_at", "2016-05-05 14:08:37.799650"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-05 14:08:37.800427"], ["updated_at", "2016-05-05 14:08:37.800427"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-05 14:08:37.801243"], ["updated_at", "2016-05-05 14:08:37.801243"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-05 14:08:37.802027"], ["updated_at", "2016-05-05 14:08:37.802027"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-05 14:08:37.802766"], ["updated_at", "2016-05-05 14:08:37.802766"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-05 14:08:37.803496"], ["updated_at", "2016-05-05 14:08:37.803496"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-05 14:08:37.804188"], ["updated_at", "2016-05-05 14:08:37.804188"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-05 14:08:37.804917"], ["updated_at", "2016-05-05 14:08:37.804917"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-05 14:08:37.806078"], ["updated_at", "2016-05-05 14:08:37.806078"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-05 14:08:37.807128"], ["updated_at", "2016-05-05 14:08:37.807128"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-05 14:08:37.808241"], ["updated_at", "2016-05-05 14:08:37.808241"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-05 14:08:37.809365"], ["updated_at", "2016-05-05 14:08:37.809365"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-05 14:08:37.810361"], ["updated_at", "2016-05-05 14:08:37.810361"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-05 14:08:37.811387"], ["updated_at", "2016-05-05 14:08:37.811387"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-05 14:08:37.812380"], ["updated_at", "2016-05-05 14:08:37.812380"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-05 14:08:37.813584"], ["updated_at", "2016-05-05 14:08:37.813584"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-05 14:08:37.814628"], ["updated_at", "2016-05-05 14:08:37.814628"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-05 14:08:37.815702"], ["updated_at", "2016-05-05 14:08:37.815702"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-05 14:08:37.816683"], ["updated_at", "2016-05-05 14:08:37.816683"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-05 14:08:37.817765"], ["updated_at", "2016-05-05 14:08:37.817765"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-05 14:08:37.818749"], ["updated_at", "2016-05-05 14:08:37.818749"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-05 14:08:37.819823"], ["updated_at", "2016-05-05 14:08:37.819823"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-05 14:08:37.820643"], ["updated_at", "2016-05-05 14:08:37.820643"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-05 14:08:37.821458"], ["updated_at", "2016-05-05 14:08:37.821458"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-05 14:08:37.822344"], ["updated_at", "2016-05-05 14:08:37.822344"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-05 14:08:37.823164"], ["updated_at", "2016-05-05 14:08:37.823164"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-05 14:08:37.824004"], ["updated_at", "2016-05-05 14:08:37.824004"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-05 14:08:37.824739"], ["updated_at", "2016-05-05 14:08:37.824739"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-05 14:08:37.825591"], ["updated_at", "2016-05-05 14:08:37.825591"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-05 14:08:37.826365"], ["updated_at", "2016-05-05 14:08:37.826365"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-05 14:08:37.827149"], ["updated_at", "2016-05-05 14:08:37.827149"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-05 14:08:37.827891"], ["updated_at", "2016-05-05 14:08:37.827891"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-05 14:08:37.828651"], ["updated_at", "2016-05-05 14:08:37.828651"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-05 14:08:37.829409"], ["updated_at", "2016-05-05 14:08:37.829409"], ["theme_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT "themes".* FROM "themes" WHERE "themes"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Asset Load (0.3ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "themes" SET "role" = ?, "updated_at" = ? WHERE "themes"."id" = ?  [["role", "unpublished"], ["updated_at", "2016-05-05 14:08:37.922011"], ["id", 2]]
  [1m[36mMagazCore::Asset Load (0.3ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "themes" SET "role" = ?, "updated_at" = ? WHERE "themes"."id" = ?  [["role", "main"], ["updated_at", "2016-05-05 14:08:37.926550"], ["id", 2]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."shop_id" = ? AND "themes"."role" = ?  ORDER BY "themes"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["role", "main"]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::AddShippingRateTest: test_shoul_add_shipping_rate_with_some_blank_params
----------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:37.934877"], ["updated_at", "2016-05-05 14:08:37.934877"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "22"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_rates" ("name", "criteria", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Test name"], ["criteria", "weight"], ["shipping_price", 5.0], ["shipping_country_id", 1], ["created_at", "2016-05-05 14:08:37.940588"], ["updated_at", "2016-05-05 14:08:37.940588"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::ShippingRate Load (0.0ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36mMagazCore::ShippingRate Load (0.0ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingRate Load (0.0ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::AddShippingRateTest: test_should_add_shipping_rate_with_valid_params
------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:37.946199"], ["updated_at", "2016-05-05 14:08:37.946199"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "23"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_rates" ("name", "price_from", "price_to", "weight_from", "weight_to", "criteria", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "Test name"], ["price_from", 15.7], ["price_to", 20.5], ["weight_from", 3.1], ["weight_to", 5.5], ["criteria", "weight"], ["shipping_price", 5.0], ["shipping_country_id", 1], ["created_at", "2016-05-05 14:08:37.950183"], ["updated_at", "2016-05-05 14:08:37.950183"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ShippingRate Load (0.1ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35mMagazCore::ShippingRate Load (0.0ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::AddShippingRateTest: test_should_not_add_shipping_rate_with_blank_params
----------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:37.954839"], ["updated_at", "2016-05-05 14:08:37.954839"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "24"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::AddShippingRateTest: test_should_not_add_shipping_rate_with_wrong_comparison
--------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:37.968125"], ["updated_at", "2016-05-05 14:08:37.968125"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "25"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::AddShippingRateTest: test_should_not_add_shipping_rate_with_wrong_criteria
------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:37.975494"], ["updated_at", "2016-05-05 14:08:37.975494"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "26"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::AddShippingRateTest: test_should_not_add_shipping_rate_with_wrong_weight
----------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:37.983675"], ["updated_at", "2016-05-05 14:08:37.983675"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "27"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
MagazCore::ThemeServices::InstallThemeTest: test_should_install_theme_with_valid_params_and_theme_in_system
-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example50' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example50"], ["subdomain", "example50"], ["created_at", "2016-05-05 14:08:37.995436"], ["updated_at", "2016-05-05 14:08:37.995436"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme19"], ["created_at", "2016-05-05 14:08:38.052553"], ["updated_at", "2016-05-05 14:08:38.052553"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.053835"], ["updated_at", "2016-05-05 14:08:38.053835"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.054714"], ["updated_at", "2016-05-05 14:08:38.054714"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.055512"], ["updated_at", "2016-05-05 14:08:38.055512"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.056198"], ["updated_at", "2016-05-05 14:08:38.056198"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.056983"], ["updated_at", "2016-05-05 14:08:38.056983"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.057774"], ["updated_at", "2016-05-05 14:08:38.057774"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.058538"], ["updated_at", "2016-05-05 14:08:38.058538"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.059345"], ["updated_at", "2016-05-05 14:08:38.059345"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.060137"], ["updated_at", "2016-05-05 14:08:38.060137"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.060904"], ["updated_at", "2016-05-05 14:08:38.060904"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.061827"], ["updated_at", "2016-05-05 14:08:38.061827"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.062639"], ["updated_at", "2016-05-05 14:08:38.062639"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.063437"], ["updated_at", "2016-05-05 14:08:38.063437"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.064216"], ["updated_at", "2016-05-05 14:08:38.064216"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.065303"], ["updated_at", "2016-05-05 14:08:38.065303"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.066121"], ["updated_at", "2016-05-05 14:08:38.066121"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.066932"], ["updated_at", "2016-05-05 14:08:38.066932"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.067748"], ["updated_at", "2016-05-05 14:08:38.067748"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.068566"], ["updated_at", "2016-05-05 14:08:38.068566"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.069493"], ["updated_at", "2016-05-05 14:08:38.069493"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.070624"], ["updated_at", "2016-05-05 14:08:38.070624"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.071744"], ["updated_at", "2016-05-05 14:08:38.071744"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.072846"], ["updated_at", "2016-05-05 14:08:38.072846"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.073823"], ["updated_at", "2016-05-05 14:08:38.073823"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.074874"], ["updated_at", "2016-05-05 14:08:38.074874"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.075929"], ["updated_at", "2016-05-05 14:08:38.075929"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.077001"], ["updated_at", "2016-05-05 14:08:38.077001"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.078077"], ["updated_at", "2016-05-05 14:08:38.078077"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.079131"], ["updated_at", "2016-05-05 14:08:38.079131"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.080056"], ["updated_at", "2016-05-05 14:08:38.080056"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.080943"], ["updated_at", "2016-05-05 14:08:38.080943"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.081833"], ["updated_at", "2016-05-05 14:08:38.081833"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.082706"], ["updated_at", "2016-05-05 14:08:38.082706"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.083608"], ["updated_at", "2016-05-05 14:08:38.083608"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.084451"], ["updated_at", "2016-05-05 14:08:38.084451"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.085122"], ["updated_at", "2016-05-05 14:08:38.085122"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.086037"], ["updated_at", "2016-05-05 14:08:38.086037"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.086847"], ["updated_at", "2016-05-05 14:08:38.086847"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.087645"], ["updated_at", "2016-05-05 14:08:38.087645"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.088432"], ["updated_at", "2016-05-05 14:08:38.088432"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.089235"], ["updated_at", "2016-05-05 14:08:38.089235"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.090016"], ["updated_at", "2016-05-05 14:08:38.090016"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.090766"], ["updated_at", "2016-05-05 14:08:38.090766"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.091519"], ["updated_at", "2016-05-05 14:08:38.091519"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.092355"], ["updated_at", "2016-05-05 14:08:38.092355"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.093123"], ["updated_at", "2016-05-05 14:08:38.093123"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.094414"], ["updated_at", "2016-05-05 14:08:38.094414"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.095416"], ["updated_at", "2016-05-05 14:08:38.095416"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.096529"], ["updated_at", "2016-05-05 14:08:38.096529"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.097660"], ["updated_at", "2016-05-05 14:08:38.097660"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Asset Load (0.4ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme19"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.145413"], ["updated_at", "2016-05-05 14:08:38.145413"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-05 14:08:38.053835"], ["updated_at", "2016-05-05 14:08:38.053835"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-05 14:08:38.054714"], ["updated_at", "2016-05-05 14:08:38.054714"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-05 14:08:38.055512"], ["updated_at", "2016-05-05 14:08:38.055512"], ["theme_id", 2]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-05 14:08:38.056198"], ["updated_at", "2016-05-05 14:08:38.056198"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-05 14:08:38.056983"], ["updated_at", "2016-05-05 14:08:38.056983"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-05 14:08:38.057774"], ["updated_at", "2016-05-05 14:08:38.057774"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-05 14:08:38.058538"], ["updated_at", "2016-05-05 14:08:38.058538"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-05 14:08:38.059345"], ["updated_at", "2016-05-05 14:08:38.059345"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-05 14:08:38.060137"], ["updated_at", "2016-05-05 14:08:38.060137"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-05 14:08:38.060904"], ["updated_at", "2016-05-05 14:08:38.060904"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-05 14:08:38.061827"], ["updated_at", "2016-05-05 14:08:38.061827"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-05 14:08:38.062639"], ["updated_at", "2016-05-05 14:08:38.062639"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-05 14:08:38.063437"], ["updated_at", "2016-05-05 14:08:38.063437"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-05 14:08:38.064216"], ["updated_at", "2016-05-05 14:08:38.064216"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-05 14:08:38.065303"], ["updated_at", "2016-05-05 14:08:38.065303"], ["theme_id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-05 14:08:38.066121"], ["updated_at", "2016-05-05 14:08:38.066121"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-05 14:08:38.066932"], ["updated_at", "2016-05-05 14:08:38.066932"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-05 14:08:38.067748"], ["updated_at", "2016-05-05 14:08:38.067748"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-05 14:08:38.068566"], ["updated_at", "2016-05-05 14:08:38.068566"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-05 14:08:38.069493"], ["updated_at", "2016-05-05 14:08:38.069493"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-05 14:08:38.070624"], ["updated_at", "2016-05-05 14:08:38.070624"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-05 14:08:38.071744"], ["updated_at", "2016-05-05 14:08:38.071744"], ["theme_id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-05 14:08:38.072846"], ["updated_at", "2016-05-05 14:08:38.072846"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-05 14:08:38.073823"], ["updated_at", "2016-05-05 14:08:38.073823"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-05 14:08:38.074874"], ["updated_at", "2016-05-05 14:08:38.074874"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-05 14:08:38.075929"], ["updated_at", "2016-05-05 14:08:38.075929"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-05 14:08:38.077001"], ["updated_at", "2016-05-05 14:08:38.077001"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-05 14:08:38.078077"], ["updated_at", "2016-05-05 14:08:38.078077"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-05 14:08:38.079131"], ["updated_at", "2016-05-05 14:08:38.079131"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-05 14:08:38.080056"], ["updated_at", "2016-05-05 14:08:38.080056"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-05 14:08:38.080943"], ["updated_at", "2016-05-05 14:08:38.080943"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-05 14:08:38.081833"], ["updated_at", "2016-05-05 14:08:38.081833"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-05 14:08:38.082706"], ["updated_at", "2016-05-05 14:08:38.082706"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-05 14:08:38.083608"], ["updated_at", "2016-05-05 14:08:38.083608"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-05 14:08:38.084451"], ["updated_at", "2016-05-05 14:08:38.084451"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-05 14:08:38.085122"], ["updated_at", "2016-05-05 14:08:38.085122"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-05 14:08:38.086037"], ["updated_at", "2016-05-05 14:08:38.086037"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-05 14:08:38.086847"], ["updated_at", "2016-05-05 14:08:38.086847"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-05 14:08:38.087645"], ["updated_at", "2016-05-05 14:08:38.087645"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-05 14:08:38.088432"], ["updated_at", "2016-05-05 14:08:38.088432"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-05 14:08:38.089235"], ["updated_at", "2016-05-05 14:08:38.089235"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-05 14:08:38.090016"], ["updated_at", "2016-05-05 14:08:38.090016"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-05 14:08:38.090766"], ["updated_at", "2016-05-05 14:08:38.090766"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-05 14:08:38.091519"], ["updated_at", "2016-05-05 14:08:38.091519"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-05 14:08:38.092355"], ["updated_at", "2016-05-05 14:08:38.092355"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-05 14:08:38.093123"], ["updated_at", "2016-05-05 14:08:38.093123"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-05 14:08:38.094414"], ["updated_at", "2016-05-05 14:08:38.094414"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-05 14:08:38.095416"], ["updated_at", "2016-05-05 14:08:38.095416"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-05 14:08:38.096529"], ["updated_at", "2016-05-05 14:08:38.096529"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-05 14:08:38.097660"], ["updated_at", "2016-05-05 14:08:38.097660"], ["theme_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT "themes".* FROM "themes" WHERE "themes"."shop_id" = ? AND (source_theme_id IS NOT NULL)[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------
MagazCore::ThemeServices::InstallThemeTest: test_should_not_install_theme_with_invalid_shop_id
----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example51' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example51"], ["subdomain", "example51"], ["created_at", "2016-05-05 14:08:38.193543"], ["updated_at", "2016-05-05 14:08:38.193543"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme20"], ["created_at", "2016-05-05 14:08:38.245847"], ["updated_at", "2016-05-05 14:08:38.245847"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.247379"], ["updated_at", "2016-05-05 14:08:38.247379"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.248584"], ["updated_at", "2016-05-05 14:08:38.248584"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.249593"], ["updated_at", "2016-05-05 14:08:38.249593"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.250620"], ["updated_at", "2016-05-05 14:08:38.250620"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.251566"], ["updated_at", "2016-05-05 14:08:38.251566"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.252590"], ["updated_at", "2016-05-05 14:08:38.252590"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.253608"], ["updated_at", "2016-05-05 14:08:38.253608"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.254547"], ["updated_at", "2016-05-05 14:08:38.254547"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.255580"], ["updated_at", "2016-05-05 14:08:38.255580"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.256469"], ["updated_at", "2016-05-05 14:08:38.256469"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.257250"], ["updated_at", "2016-05-05 14:08:38.257250"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.258191"], ["updated_at", "2016-05-05 14:08:38.258191"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.259085"], ["updated_at", "2016-05-05 14:08:38.259085"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.259862"], ["updated_at", "2016-05-05 14:08:38.259862"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.260712"], ["updated_at", "2016-05-05 14:08:38.260712"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.261505"], ["updated_at", "2016-05-05 14:08:38.261505"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.262253"], ["updated_at", "2016-05-05 14:08:38.262253"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.263001"], ["updated_at", "2016-05-05 14:08:38.263001"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.263671"], ["updated_at", "2016-05-05 14:08:38.263671"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.264401"], ["updated_at", "2016-05-05 14:08:38.264401"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.265070"], ["updated_at", "2016-05-05 14:08:38.265070"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.265811"], ["updated_at", "2016-05-05 14:08:38.265811"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.266519"], ["updated_at", "2016-05-05 14:08:38.266519"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.267165"], ["updated_at", "2016-05-05 14:08:38.267165"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.267877"], ["updated_at", "2016-05-05 14:08:38.267877"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.268750"], ["updated_at", "2016-05-05 14:08:38.268750"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.269546"], ["updated_at", "2016-05-05 14:08:38.269546"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.270344"], ["updated_at", "2016-05-05 14:08:38.270344"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.271057"], ["updated_at", "2016-05-05 14:08:38.271057"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.271821"], ["updated_at", "2016-05-05 14:08:38.271821"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.272596"], ["updated_at", "2016-05-05 14:08:38.272596"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.273292"], ["updated_at", "2016-05-05 14:08:38.273292"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.274053"], ["updated_at", "2016-05-05 14:08:38.274053"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.274771"], ["updated_at", "2016-05-05 14:08:38.274771"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.275425"], ["updated_at", "2016-05-05 14:08:38.275425"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.276409"], ["updated_at", "2016-05-05 14:08:38.276409"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.277192"], ["updated_at", "2016-05-05 14:08:38.277192"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.278001"], ["updated_at", "2016-05-05 14:08:38.278001"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.278919"], ["updated_at", "2016-05-05 14:08:38.278919"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.279696"], ["updated_at", "2016-05-05 14:08:38.279696"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.280405"], ["updated_at", "2016-05-05 14:08:38.280405"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.281310"], ["updated_at", "2016-05-05 14:08:38.281310"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.282365"], ["updated_at", "2016-05-05 14:08:38.282365"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.283291"], ["updated_at", "2016-05-05 14:08:38.283291"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.284353"], ["updated_at", "2016-05-05 14:08:38.284353"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.285353"], ["updated_at", "2016-05-05 14:08:38.285353"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.286276"], ["updated_at", "2016-05-05 14:08:38.286276"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.287260"], ["updated_at", "2016-05-05 14:08:38.287260"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.288261"], ["updated_at", "2016-05-05 14:08:38.288261"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-05 14:08:38.289079"], ["updated_at", "2016-05-05 14:08:38.289079"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 111]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 111]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::DeleteCollectionTest: test_should_delete_collection_with_valid_id
-------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:38.299941"], ["updated_at", "2016-05-05 14:08:38.299941"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 243"], ["description", "Collection 245 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.302127"], ["updated_at", "2016-05-05 14:08:38.302127"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "collections_products" WHERE "collections_products"."collection_id" = ?[0m  [["collection_id", 1]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "collections" WHERE "collections"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "collections"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::DeleteCollectionTest: test_should_not_delet_collection_with_blank_id
----------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:38.314215"], ["updated_at", "2016-05-05 14:08:38.314215"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 244"], ["description", "Collection 246 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.317240"], ["updated_at", "2016-05-05 14:08:38.317240"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "collections"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::ChangeArticleTest: test_should_not_update_article_with_blank_params
------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:38.324507"], ["updated_at", "2016-05-05 14:08:38.324507"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 27"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.326777"], ["updated_at", "2016-05-05 14:08:38.326777"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 28"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.328353"], ["updated_at", "2016-05-05 14:08:38.328353"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "myhandle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "mytitle"], ["content", "Article 197 content"], ["blog_id", 2], ["handle", "myhandle"], ["slug", "myhandle"], ["created_at", "2016-05-05 14:08:38.330737"], ["updated_at", "2016-05-05 14:08:38.330737"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Article 195"], ["content", "Article 198 content"], ["created_at", "2016-05-05 14:08:38.332132"], ["updated_at", "2016-05-05 14:08:38.332132"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "unique-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Article 196"], ["content", "Article 199 content"], ["blog_id", 1], ["handle", "Unique handle"], ["slug", "unique-handle"], ["created_at", "2016-05-05 14:08:38.334890"], ["updated_at", "2016-05-05 14:08:38.334890"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "3"]]
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "3"]]
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::ChangeArticleTest: test_should_not_update_article_with_existing_handle
---------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:38.347577"], ["updated_at", "2016-05-05 14:08:38.347577"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 29"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.350435"], ["updated_at", "2016-05-05 14:08:38.350435"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 30"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.352786"], ["updated_at", "2016-05-05 14:08:38.352786"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "myhandle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "mytitle"], ["content", "Article 200 content"], ["blog_id", 2], ["handle", "myhandle"], ["slug", "myhandle"], ["created_at", "2016-05-05 14:08:38.356516"], ["updated_at", "2016-05-05 14:08:38.356516"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Article 197"], ["content", "Article 201 content"], ["created_at", "2016-05-05 14:08:38.358574"], ["updated_at", "2016-05-05 14:08:38.358574"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "unique-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "Article 198"], ["content", "Article 202 content"], ["blog_id", 1], ["handle", "Unique handle"], ["slug", "unique-handle"], ["created_at", "2016-05-05 14:08:38.361438"], ["updated_at", "2016-05-05 14:08:38.361438"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "New title"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "Unique handle"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "New title"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "Unique handle"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::ChangeArticleTest: test_should_not_update_article_with_existing_handle_when_blog_is_changed
------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:38.374955"], ["updated_at", "2016-05-05 14:08:38.374955"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 31"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.377029"], ["updated_at", "2016-05-05 14:08:38.377029"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 32"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.378639"], ["updated_at", "2016-05-05 14:08:38.378639"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "myhandle"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "mytitle"], ["content", "Article 203 content"], ["blog_id", 2], ["handle", "myhandle"], ["slug", "myhandle"], ["created_at", "2016-05-05 14:08:38.381595"], ["updated_at", "2016-05-05 14:08:38.381595"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Article 199"], ["content", "Article 204 content"], ["created_at", "2016-05-05 14:08:38.383612"], ["updated_at", "2016-05-05 14:08:38.383612"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "unique-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Article 200"], ["content", "Article 205 content"], ["blog_id", 1], ["handle", "Unique handle"], ["slug", "unique-handle"], ["created_at", "2016-05-05 14:08:38.386061"], ["updated_at", "2016-05-05 14:08:38.386061"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 2], ["title", "New title"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 2], ["handle", "myhandle"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.2ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 2], ["title", "New title"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 2], ["handle", "myhandle"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (6.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::ChangeArticleTest: test_should_not_update_article_with_existing_title
--------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:38.408498"], ["updated_at", "2016-05-05 14:08:38.408498"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 33"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.411619"], ["updated_at", "2016-05-05 14:08:38.411619"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 34"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.413396"], ["updated_at", "2016-05-05 14:08:38.413396"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "myhandle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "mytitle"], ["content", "Article 206 content"], ["blog_id", 2], ["handle", "myhandle"], ["slug", "myhandle"], ["created_at", "2016-05-05 14:08:38.415921"], ["updated_at", "2016-05-05 14:08:38.415921"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Article 201"], ["content", "Article 207 content"], ["created_at", "2016-05-05 14:08:38.417394"], ["updated_at", "2016-05-05 14:08:38.417394"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "unique-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "Article 202"], ["content", "Article 208 content"], ["blog_id", 1], ["handle", "Unique handle"], ["slug", "unique-handle"], ["created_at", "2016-05-05 14:08:38.419764"], ["updated_at", "2016-05-05 14:08:38.419764"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "Article 202"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "ChangedC handle"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "Article 202"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "ChangedC handle"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::ChangeArticleTest: test_should_not_update_article_with_existing_title_when_blog_is_changed
-----------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:38.434196"], ["updated_at", "2016-05-05 14:08:38.434196"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 35"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.436300"], ["updated_at", "2016-05-05 14:08:38.436300"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 36"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.438066"], ["updated_at", "2016-05-05 14:08:38.438066"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "myhandle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "mytitle"], ["content", "Article 209 content"], ["blog_id", 2], ["handle", "myhandle"], ["slug", "myhandle"], ["created_at", "2016-05-05 14:08:38.440622"], ["updated_at", "2016-05-05 14:08:38.440622"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Article 203"], ["content", "Article 210 content"], ["created_at", "2016-05-05 14:08:38.443254"], ["updated_at", "2016-05-05 14:08:38.443254"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.1ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "unique-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Article 204"], ["content", "Article 211 content"], ["blog_id", 1], ["handle", "Unique handle"], ["slug", "unique-handle"], ["created_at", "2016-05-05 14:08:38.447601"], ["updated_at", "2016-05-05 14:08:38.447601"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 2], ["title", "mytitle"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 2], ["handle", "handle"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 2], ["title", "mytitle"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 2], ["handle", "handle"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::ChangeArticleTest: test_should_update_article_with_some_blank_params
-------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:38.461399"], ["updated_at", "2016-05-05 14:08:38.461399"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 37"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.464102"], ["updated_at", "2016-05-05 14:08:38.464102"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 38"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.466313"], ["updated_at", "2016-05-05 14:08:38.466313"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.1ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "myhandle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "mytitle"], ["content", "Article 212 content"], ["blog_id", 2], ["handle", "myhandle"], ["slug", "myhandle"], ["created_at", "2016-05-05 14:08:38.469594"], ["updated_at", "2016-05-05 14:08:38.469594"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Article 205"], ["content", "Article 213 content"], ["created_at", "2016-05-05 14:08:38.471439"], ["updated_at", "2016-05-05 14:08:38.471439"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "unique-handle"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "Article 206"], ["content", "Article 214 content"], ["blog_id", 1], ["handle", "Unique handle"], ["slug", "unique-handle"], ["created_at", "2016-05-05 14:08:38.473984"], ["updated_at", "2016-05-05 14:08:38.473984"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "3"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "3"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "3"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "3"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "3"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Article Exists (0.1ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" != ?) AND "articles"."slug" = ? LIMIT 1  [["id", 3], ["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "articles" SET "content" = ?, "page_title" = ?, "handle" = ?, "meta_description" = ?, "slug" = ?, "updated_at" = ? WHERE "articles"."id" = ?[0m  [["content", ""], ["page_title", ""], ["handle", ""], ["meta_description", ""], ["slug", ""], ["updated_at", "2016-05-05 14:08:38.482349"], ["id", 3]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::ChangeArticleTest: test_should_update_article_with_valid_params
--------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:38.486599"], ["updated_at", "2016-05-05 14:08:38.486599"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 39"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.488602"], ["updated_at", "2016-05-05 14:08:38.488602"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 40"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.490355"], ["updated_at", "2016-05-05 14:08:38.490355"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "myhandle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "mytitle"], ["content", "Article 215 content"], ["blog_id", 2], ["handle", "myhandle"], ["slug", "myhandle"], ["created_at", "2016-05-05 14:08:38.493027"], ["updated_at", "2016-05-05 14:08:38.493027"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Article 207"], ["content", "Article 216 content"], ["created_at", "2016-05-05 14:08:38.495203"], ["updated_at", "2016-05-05 14:08:38.495203"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "unique-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "Article 208"], ["content", "Article 217 content"], ["blog_id", 1], ["handle", "Unique handle"], ["slug", "unique-handle"], ["created_at", "2016-05-05 14:08:38.498178"], ["updated_at", "2016-05-05 14:08:38.498178"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "Changed title"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "ChangedC handle"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" != ?) AND "articles"."slug" = ? LIMIT 1  [["id", 2], ["slug", "changedc-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "articles" SET "title" = ?, "content" = ?, "page_title" = ?, "handle" = ?, "meta_description" = ?, "blog_id" = ?, "slug" = ?, "updated_at" = ? WHERE "articles"."id" = ?[0m  [["title", "Changed title"], ["content", "Changed content"], ["page_title", "Changed page_title"], ["handle", "ChangedC handle"], ["meta_description", "Changed meta_description"], ["blog_id", 1], ["slug", "changedc-handle"], ["updated_at", "2016-05-05 14:08:38.504670"], ["id", 2]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::AddSubscriberNotificationTest: test_shoul_not_add_subscriber_notification_with_existing_email
-----------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:38.510605"], ["updated_at", "2016-05-05 14:08:38.510605"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["notification_method", "email 5"], ["subscription_address", "some15@here.run"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.513760"], ["updated_at", "2016-05-05 14:08:38.513760"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."subscription_address" = ?[0m  [["shop_id", 1], ["subscription_address", "some15@here.run"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."subscription_address" = ?  [["shop_id", 1], ["subscription_address", "some15@here.run"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::AddSubscriberNotificationTest: test_shoul_not_add_subscriber_notification_with_invalid_email
----------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:38.523339"], ["updated_at", "2016-05-05 14:08:38.523339"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["notification_method", "email 6"], ["subscription_address", "some16@here.run"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.525717"], ["updated_at", "2016-05-05 14:08:38.525717"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."subscription_address" = ?  [["shop_id", 1], ["subscription_address", "wrong email"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."subscription_address" = ?[0m  [["shop_id", 1], ["subscription_address", "wrong email"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::AddSubscriberNotificationTest: test_shoul_not_add_subscriber_notification_with_invalid_phone
----------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:38.535970"], ["updated_at", "2016-05-05 14:08:38.535970"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["notification_method", "email 7"], ["subscription_address", "some17@here.run"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.538287"], ["updated_at", "2016-05-05 14:08:38.538287"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::AddSubscriberNotificationTest: test_shoul_not_add_subscriber_notification_with_too_long_email
-----------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:38.546498"], ["updated_at", "2016-05-05 14:08:38.546498"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["notification_method", "email 8"], ["subscription_address", "some18@here.run"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.548772"], ["updated_at", "2016-05-05 14:08:38.548772"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."subscription_address" = ?  [["shop_id", 1], ["subscription_address", "loooooooooooooooooong@email.com"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."subscription_address" = ?[0m  [["shop_id", 1], ["subscription_address", "loooooooooooooooooong@email.com"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::AddSubscriberNotificationTest: test_should_add_subscriber_notification_with_valid_email_params
------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:38.558086"], ["updated_at", "2016-05-05 14:08:38.558086"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["notification_method", "email 9"], ["subscription_address", "some19@here.run"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.560407"], ["updated_at", "2016-05-05 14:08:38.560407"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."subscription_address" = ?[0m  [["shop_id", 1], ["subscription_address", "valid@email.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["notification_method", "email"], ["subscription_address", "valid@email.com"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.563826"], ["updated_at", "2016-05-05 14:08:38.563826"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::SubscriberNotification Load (0.1ms)[0m  SELECT  "order_subscriptions".* FROM "order_subscriptions" WHERE "order_subscriptions"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions"[0m
  [1m[35mMagazCore::SubscriberNotification Load (0.0ms)[0m  SELECT  "order_subscriptions".* FROM "order_subscriptions" WHERE "order_subscriptions"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::AddSubscriberNotificationTest: test_should_add_subscriber_notification_with_valid_phone_params
------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:38.569411"], ["updated_at", "2016-05-05 14:08:38.569411"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["notification_method", "email 10"], ["subscription_address", "some110@here.run"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.571347"], ["updated_at", "2016-05-05 14:08:38.571347"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["notification_method", "phone"], ["subscription_address", "9379992"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.574397"], ["updated_at", "2016-05-05 14:08:38.574397"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::SubscriberNotification Load (0.1ms)[0m  [1mSELECT  "order_subscriptions".* FROM "order_subscriptions" WHERE "order_subscriptions"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36mMagazCore::SubscriberNotification Load (0.1ms)[0m  [1mSELECT  "order_subscriptions".* FROM "order_subscriptions" WHERE "order_subscriptions"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::AddSubscriberNotificationTest: test_should_not_add_subscriber_notification_with_blank_params
----------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:38.580714"], ["updated_at", "2016-05-05 14:08:38.580714"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["notification_method", "email 11"], ["subscription_address", "some111@here.run"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.583090"], ["updated_at", "2016-05-05 14:08:38.583090"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ProductImage::DeleteProductImageTest: test_should_delete_image_with_valid_params
----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:38.591193"], ["updated_at", "2016-05-05 14:08:38.591193"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 276' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 276"], ["description", "Example 278 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.594791"], ["updated_at", "2016-05-05 14:08:38.594791"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "product_images" ("product_id", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["product_id", 1], ["image", "tapir.jpg"], ["created_at", "2016-05-05 14:08:38.602979"], ["updated_at", "2016-05-05 14:08:38.602979"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "product_images"
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ProductImage Load (0.0ms)[0m  [1mSELECT  "product_images".* FROM "product_images" WHERE "product_images"."product_id" = ? AND "product_images"."id" = ? LIMIT 1[0m  [["product_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "product_images" WHERE "product_images"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "product_images"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------
MagazCore::BlogTest: test_two_blogs_with_same_handle_and_different_shops
------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-05 14:08:38.614886"], ["updated_at", "2016-05-05 14:08:38.614886"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop2' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop2"], ["subdomain", "shop2"], ["created_at", "2016-05-05 14:08:38.618409"], ["updated_at", "2016-05-05 14:08:38.618409"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", "blog-handle"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "blogs" ("title", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "blog"], ["handle", "blog-handle"], ["shop_id", 1], ["slug", "blog-handle"], ["created_at", "2016-05-05 14:08:38.622720"], ["updated_at", "2016-05-05 14:08:38.622720"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 2 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", "blog-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "blog"], ["handle", "blog-handle"], ["shop_id", 2], ["slug", "blog-handle"], ["created_at", "2016-05-05 14:08:38.626558"], ["updated_at", "2016-05-05 14:08:38.626558"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------
MagazCore::BlogTest: test_two_blogs_with_same_handle_and_same_shop
------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-05 14:08:38.632413"], ["updated_at", "2016-05-05 14:08:38.632413"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", "blog-handle"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "blogs" ("title", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "blog1"], ["handle", "blog-handle"], ["shop_id", 1], ["slug", "blog-handle"], ["created_at", "2016-05-05 14:08:38.636214"], ["updated_at", "2016-05-05 14:08:38.636214"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", "blog-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "blog2"], ["handle", "blog-handle"], ["shop_id", 1], ["slug", "blog-handle-2dfb2d99-f780-4299-9be1-3ac55963ba61"], ["created_at", "2016-05-05 14:08:38.640514"], ["updated_at", "2016-05-05 14:08:38.640514"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::DeleteTaxOverrideTest: test_should_destroy_tax_override_with_valid_ids
-------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example52' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example52"], ["subdomain", "example52"], ["created_at", "2016-05-05 14:08:38.645985"], ["updated_at", "2016-05-05 14:08:38.645985"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "handle1"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Collection 245"], ["description", "Collection 247 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:38.649408"], ["updated_at", "2016-05-05 14:08:38.649408"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "28"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "tax_overrides" ("rate", "shipping_country_id") VALUES (?, ?)  [["rate", 1.0], ["shipping_country_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "tax_overrides"
  [1m[36mMagazCore::TaxOverride Load (0.1ms)[0m  [1mSELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "tax_overrides" WHERE "tax_overrides"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::TaxOverride Load (0.0ms)[0m  [1mSELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "tax_overrides"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::DeleteTaxOverrideTest: test_should_not_destroy_tax_override_with_blank_ids
-----------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example53' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example53"], ["subdomain", "example53"], ["created_at", "2016-05-05 14:08:38.662343"], ["updated_at", "2016-05-05 14:08:38.662343"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 246"], ["description", "Collection 248 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:38.665739"], ["updated_at", "2016-05-05 14:08:38.665739"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "29"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tax_overrides" ("rate", "shipping_country_id") VALUES (?, ?)[0m  [["rate", 2.0], ["shipping_country_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "tax_overrides"[0m
  [1m[35mMagazCore::TaxOverride Load (0.1ms)[0m  SELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "tax_overrides"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::DeletePageTest: test_should_delete_page_with_valid_id
-------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:38.681891"], ["updated_at", "2016-05-05 14:08:38.681891"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 190"], ["content", "Content 192"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.684026"], ["updated_at", "2016-05-05 14:08:38.684026"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.1ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "pages" WHERE "pages"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "pages"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::DeletePageTest: test_should_not_delete_page_with_blank_id
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:38.692594"], ["updated_at", "2016-05-05 14:08:38.692594"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 191"], ["content", "Content 193"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:38.694860"], ["updated_at", "2016-05-05 14:08:38.694860"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "pages"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::ChangeShippingCountryTest: test_should_not_update_shipping_country_with_blank_params
-------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example54' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example54"], ["subdomain", "example54"], ["created_at", "2016-05-05 14:08:38.703234"], ["updated_at", "2016-05-05 14:08:38.703234"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "30"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "AF"], ["tax", "31"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::ChangeShippingCountryTest: test_should_not_update_shipping_country_with_invalid_tax
------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example55' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example55"], ["subdomain", "example55"], ["created_at", "2016-05-05 14:08:38.732929"], ["updated_at", "2016-05-05 14:08:38.732929"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "32"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "AF"], ["tax", "33"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?  [["shop_id", 1], ["name", "AL"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?[0m  [["shop_id", 1], ["name", "AL"]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::ChangeShippingCountryTest: test_should_not_update_shipping_country_with_same_country_title
-------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example56' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example56"], ["subdomain", "example56"], ["created_at", "2016-05-05 14:08:38.747320"], ["updated_at", "2016-05-05 14:08:38.747320"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "34"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "AF"], ["tax", "35"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?[0m  [["shop_id", 1], ["name", "AF"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?  [["shop_id", 1], ["name", "AF"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::ChangeShippingCountryTest: test_should_update_shipping_country_with_valid_params
---------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example57' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example57"], ["subdomain", "example57"], ["created_at", "2016-05-05 14:08:38.760888"], ["updated_at", "2016-05-05 14:08:38.760888"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "36"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "AF"], ["tax", "37"], ["shop_id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?  [["shop_id", 1], ["name", "AL"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "shipping_countries" SET "name" = ?, "tax" = ? WHERE "shipping_countries"."id" = ?  [["name", "AL"], ["tax", "69"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangePaymentSettingsTest: test_should_update_authorization_settings_to_nil_with_wrong_value
----------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:38.774146"], ["updated_at", "2016-05-05 14:08:38.774146"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangePaymentSettingsTest: test_should_update_shop_with_valid_params
----------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:38.781980"], ["updated_at", "2016-05-05 14:08:38.781980"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "shops" SET "authorization_settings" = ?, "updated_at" = ? WHERE "shops"."id" = ?[0m  [["authorization_settings", "authorize_and_charge"], ["updated_at", "2016-05-05 14:08:38.784612"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::DeleteCustomerTest: test_should_delete_customer_with_valid_id
-------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:38.789295"], ["updated_at", "2016-05-05 14:08:38.789295"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 21 "], ["last_name", "Last Name 21"], ["email", "customer21@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 22 "], ["last_name", "Last Name 22"], ["email", "customer22@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.1ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.0ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::DeleteCustomerTest: test_should_not_delete_customer_with_valid_blank_id
-----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:38.801427"], ["updated_at", "2016-05-05 14:08:38.801427"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 23 "], ["last_name", "Last Name 23"], ["email", "customer23@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 24 "], ["last_name", "Last Name 24"], ["email", "customer24@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::DeleteLinkTest: test_should_delete_link_with_valid_id
-------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:38.815590"], ["updated_at", "2016-05-05 14:08:38.815590"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 18"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)  [["name", "Link 10"], ["link_list_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links"
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Link Load (0.1ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1[0m  [["link_list_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "links" WHERE "links"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "links"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::DeleteLinkTest: test_should_not_delete_link_with_blank_id
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-05 14:08:38.828583"], ["updated_at", "2016-05-05 14:08:38.828583"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 19"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)  [["name", "Link 11"], ["link_list_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "links"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "links"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------
MagazCore::AdminServices::ImportCustomersFromCsvTest: test_import_customers
---------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example58' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example58"], ["subdomain", "example58"], ["created_at", "2016-05-05 14:08:38.840126"], ["updated_at", "2016-05-05 14:08:38.840126"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.0ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT 1  [["id", 20]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "customers" ("id", "first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?, ?)  [["id", 20], ["first_name", "FirstNameOne"], ["last_name", "LastNameOne"], ["email", "test1customer@mail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Customer Load (0.0ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT 1  [["id", 30]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("id", "first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?, ?)  [["id", 30], ["first_name", "FirstNameTwo"], ["last_name", "LastNameTwo"], ["email", "test2customer@mail.com"], ["shop_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::ChangeTaxOverrideTest: test_should_change_override_with_valid_params
-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example59' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example59"], ["subdomain", "example59"], ["created_at", "2016-05-05 14:08:38.868621"], ["updated_at", "2016-05-05 14:08:38.868621"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example36.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example36.com"], ["first_name", "First Name 36 "], ["last_name", "Last Name 36"], ["password_salt", "$2a$10$/69ZwZjASzqMdS8mU9IZ7e"], ["password_digest", "$2a$10$/69ZwZjASzqMdS8mU9IZ7eapmnpw1cSdPjoj9sMyQs2ECq7yMg9Wy"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:39.027396"], ["updated_at", "2016-05-05 14:08:39.027396"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 247"], ["description", "Collection 249 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:39.031651"], ["updated_at", "2016-05-05 14:08:39.031651"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "38"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tax_overrides" ("rate", "shipping_country_id") VALUES (?, ?)[0m  [["rate", 3.0], ["shipping_country_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::TaxOverride Load (0.1ms)[0m  [1mSELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "tax_overrides" SET "collection_id" = ?, "rate" = ? WHERE "tax_overrides"."id" = ?[0m  [["collection_id", 1], ["rate", 48.0], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::ChangeTaxOverrideTest: test_should_not_change_override_with_blank_params
---------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example60' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example60"], ["subdomain", "example60"], ["created_at", "2016-05-05 14:08:39.047389"], ["updated_at", "2016-05-05 14:08:39.047389"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example37.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example37.com"], ["first_name", "First Name 37 "], ["last_name", "Last Name 37"], ["password_salt", "$2a$10$yAXvIGUvh7TEiuy2Lz24/O"], ["password_digest", "$2a$10$yAXvIGUvh7TEiuy2Lz24/OvBZm2S3iinE7sFKU4EeHzxjTcZQOeYW"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:39.204297"], ["updated_at", "2016-05-05 14:08:39.204297"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 248"], ["description", "Collection 250 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-05 14:08:39.208175"], ["updated_at", "2016-05-05 14:08:39.208175"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "39"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tax_overrides" ("rate", "shipping_country_id") VALUES (?, ?)[0m  [["rate", 4.0], ["shipping_country_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Product::AddProductTest: test_should_create_product_with_some_blank_params
----------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:39.236001"], ["updated_at", "2016-05-05 14:08:39.236001"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 249"], ["description", "Collection 251 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:39.238209"], ["updated_at", "2016-05-05 14:08:39.238209"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products" WHERE "products"."shop_id" = ? AND "products"."name" = ?[0m  [["shop_id", 1], ["name", "T-shirt"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Product Exists (0.0ms)[0m  SELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 1 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'T-shirt' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "shop_id", "description", "handle", "page_title", "meta_description", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "T-shirt"], ["shop_id", 1], ["description", ""], ["handle", ""], ["page_title", ""], ["meta_description", ""], ["slug", ""], ["created_at", "2016-05-05 14:08:39.248005"], ["updated_at", "2016-05-05 14:08:39.248005"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Product::AddProductTest: test_should_create_product_with_valid_params
-----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:39.253375"], ["updated_at", "2016-05-05 14:08:39.253375"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 250"], ["description", "Collection 252 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:39.255366"], ["updated_at", "2016-05-05 14:08:39.255366"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "products" WHERE "products"."shop_id" = ? AND "products"."name" = ?  [["shop_id", 1], ["name", "T-shirt"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Product Exists (0.0ms)[0m  SELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 1 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1  [["slug", "clothes"]]
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'T-shirt' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "shop_id", "description", "handle", "page_title", "meta_description", "price", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "T-shirt"], ["shop_id", 1], ["description", "Red T-shirt"], ["handle", "clothes"], ["page_title", "Red T-shirt"], ["meta_description", "T-shirt"], ["price", 10.0], ["slug", "clothes"], ["created_at", "2016-05-05 14:08:39.267755"], ["updated_at", "2016-05-05 14:08:39.267755"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections_products" ("collection_id", "product_id") VALUES (?, ?)[0m  [["collection_id", 1], ["product_id", 1]]
  [1m[35mMagazCore::Product Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Product Load (0.1ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "product_images" ("product_id", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["product_id", 1], ["image", "tapir.jpg"], ["created_at", "2016-05-05 14:08:39.278843"], ["updated_at", "2016-05-05 14:08:39.278843"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Product::AddProductTest: test_should_not_create_product_with_blank_params
---------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:39.286857"], ["updated_at", "2016-05-05 14:08:39.286857"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 251"], ["description", "Collection 253 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:39.289571"], ["updated_at", "2016-05-05 14:08:39.289571"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Product::AddProductTest: test_should_not_create_product_with_invalid_image
----------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:39.300491"], ["updated_at", "2016-05-05 14:08:39.300491"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 252"], ["description", "Collection 254 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:39.302591"], ["updated_at", "2016-05-05 14:08:39.302591"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "products" WHERE "products"."shop_id" = ? AND "products"."name" = ?[0m  [["shop_id", 1], ["name", "T-shirt"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Product Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 1 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1[0m  [["slug", "clothes"]]
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'T-shirt' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "shop_id", "description", "handle", "page_title", "meta_description", "price", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "T-shirt"], ["shop_id", 1], ["description", "Red T-shirt"], ["handle", "clothes"], ["page_title", "Red T-shirt"], ["meta_description", "T-shirt"], ["price", 10.0], ["slug", "clothes"], ["created_at", "2016-05-05 14:08:39.309134"], ["updated_at", "2016-05-05 14:08:39.309134"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections_products" ("collection_id", "product_id") VALUES (?, ?)  [["collection_id", 1], ["product_id", 1]]
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Product::AddProductTest: test_should_not_create_product_with_same_name
------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-05 14:08:39.316597"], ["updated_at", "2016-05-05 14:08:39.316597"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 253"], ["description", "Collection 255 description"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:39.319118"], ["updated_at", "2016-05-05 14:08:39.319118"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "products" WHERE "products"."shop_id" = ? AND "products"."name" = ?  [["shop_id", 1], ["name", "T-shirt"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 1 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1  [["slug", "clothes"]]
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'T-shirt' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "shop_id", "description", "handle", "page_title", "meta_description", "price", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "T-shirt"], ["shop_id", 1], ["description", "Red T-shirt"], ["handle", "clothes"], ["page_title", "Red T-shirt"], ["meta_description", "T-shirt"], ["price", 10.0], ["slug", "clothes"], ["created_at", "2016-05-05 14:08:39.327424"], ["updated_at", "2016-05-05 14:08:39.327424"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections_products" ("collection_id", "product_id") VALUES (?, ?)[0m  [["collection_id", 1], ["product_id", 1]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "product_images" ("product_id", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["product_id", 1], ["image", "tapir.jpg"], ["created_at", "2016-05-05 14:08:39.335953"], ["updated_at", "2016-05-05 14:08:39.335953"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "products" WHERE "products"."shop_id" = ? AND "products"."name" = ?  [["shop_id", 1], ["name", "T-shirt"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "products" WHERE "products"."shop_id" = ? AND "products"."name" = ?[0m  [["shop_id", 1], ["name", "T-shirt"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::AddCustomeromerTest: test_should_create_customer_with_valid_params
------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:39.343123"], ["updated_at", "2016-05-05 14:08:39.343123"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?[0m  [["shop_id", 1], ["email", "test@test.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("shop_id", "first_name", "last_name", "email") VALUES (?, ?, ?, ?)  [["shop_id", 1], ["first_name", "Test first name"], ["last_name", "Test last name"], ["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Customer Load (0.0ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::AddCustomeromerTest: test_should_not_create_customer_with_blank_params
----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:39.352517"], ["updated_at", "2016-05-05 14:08:39.352517"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?  [["shop_id", 1], ["email", ""]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?  [["shop_id", 1], ["email", ""]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::AddCustomeromerTest: test_should_not_create_customer_with_same_params
---------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:39.362626"], ["updated_at", "2016-05-05 14:08:39.362626"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?[0m  [["shop_id", 1], ["email", "test@test.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("shop_id", "first_name", "last_name", "email") VALUES (?, ?, ?, ?)  [["shop_id", 1], ["first_name", "Test first name"], ["last_name", "Test last name"], ["email", "test@test.com"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?  [["shop_id", 1], ["email", "test@test.com"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?  [["shop_id", 1], ["email", "test@test.com"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------
MagazCoreTest: test_truth
-------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::ChangePageTest: test_should_not_update_page_with_existing_handle
------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:39.374482"], ["updated_at", "2016-05-05 14:08:39.374482"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 192"], ["content", "Content 194"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:39.376652"], ["updated_at", "2016-05-05 14:08:39.376652"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", "handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "Title 193"], ["content", "Content 195"], ["shop_id", 1], ["handle", "Handle"], ["slug", "handle"], ["created_at", "2016-05-05 14:08:39.379436"], ["updated_at", "2016-05-05 14:08:39.379436"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Load (0.2ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", "ChangedTitle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?  [["shop_id", 1], ["handle", "Handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", "ChangedTitle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?  [["shop_id", 1], ["handle", "Handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::ChangePageTest: test_should_not_update_page_with_existing_title
-----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:39.397946"], ["updated_at", "2016-05-05 14:08:39.397946"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 194"], ["content", "Content 196"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:39.400669"], ["updated_at", "2016-05-05 14:08:39.400669"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Exists (0.0ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", "handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Title 195"], ["content", "Content 197"], ["shop_id", 1], ["handle", "Handle"], ["slug", "handle"], ["created_at", "2016-05-05 14:08:39.404029"], ["updated_at", "2016-05-05 14:08:39.404029"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "Title 195"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?[0m  [["shop_id", 1], ["handle", "ChangedC handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "Title 195"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?[0m  [["shop_id", 1], ["handle", "ChangedC handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::ChangePageTest: test_should_update_page_with_some_blank_params
----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:39.419824"], ["updated_at", "2016-05-05 14:08:39.419824"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 196"], ["content", "Content 198"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:39.421850"], ["updated_at", "2016-05-05 14:08:39.421850"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", "handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "Title 197"], ["content", "Content 199"], ["shop_id", 1], ["handle", "Handle"], ["slug", "handle"], ["created_at", "2016-05-05 14:08:39.424395"], ["updated_at", "2016-05-05 14:08:39.424395"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "2"]]
  [1m[35mMagazCore::Page Load (0.1ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 2]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "2"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 2]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" != ?) AND "pages"."slug" = ? LIMIT 1[0m  [["id", 2], ["slug", ""]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "pages" SET "content" = ?, "page_title" = ?, "meta_description" = ?, "handle" = ?, "slug" = ?, "updated_at" = ? WHERE "pages"."id" = ?  [["content", ""], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["updated_at", "2016-05-05 14:08:39.430860"], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::ChangePageTest: test_should_update_page_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-05 14:08:39.435703"], ["updated_at", "2016-05-05 14:08:39.435703"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 198"], ["content", "Content 200"], ["shop_id", 1], ["created_at", "2016-05-05 14:08:39.437720"], ["updated_at", "2016-05-05 14:08:39.437720"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Exists (0.0ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", "handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Title 199"], ["content", "Content 201"], ["shop_id", 1], ["handle", "Handle"], ["slug", "handle"], ["created_at", "2016-05-05 14:08:39.440241"], ["updated_at", "2016-05-05 14:08:39.440241"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "Changed title"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?[0m  [["shop_id", 1], ["handle", "Changed handle"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.1ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Exists (0.1ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" != ?) AND "pages"."slug" = ? LIMIT 1  [["id", 1], ["slug", "changed-handle"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "pages" SET "title" = ?, "content" = ?, "page_title" = ?, "meta_description" = ?, "handle" = ?, "slug" = ?, "updated_at" = ? WHERE "pages"."id" = ?[0m  [["title", "Changed title"], ["content", "Changed content"], ["page_title", "Changed page_title"], ["meta_description", "Changed meta_description"], ["handle", "Changed handle"], ["slug", "changed-handle"], ["updated_at", "2016-05-05 14:08:39.448405"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
[SKYLIGHT] [0.9.4] authentication token required; disabling Skylight agent
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::DeleteTaxOverrideTest: test_should_destroy_tax_override_with_valid_ids
-------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.7ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example1' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example1"], ["subdomain", "example1"], ["created_at", "2016-05-06 10:07:06.903137"], ["updated_at", "2016-05-06 10:07:06.903137"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.8ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 1"], ["description", "Collection 1 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:06.932736"], ["updated_at", "2016-05-06 10:07:06.932736"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "1"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "tax_overrides" ("rate", "shipping_country_id") VALUES (?, ?)[0m  [["rate", 1.0], ["shipping_country_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "tax_overrides"[0m
  [1m[35mMagazCore::TaxOverride Load (0.1ms)[0m  SELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "tax_overrides" WHERE "tax_overrides"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::TaxOverride Load (0.0ms)[0m  SELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "tax_overrides"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::DeleteTaxOverrideTest: test_should_not_destroy_tax_override_with_blank_ids
-----------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example2' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example2"], ["subdomain", "example2"], ["created_at", "2016-05-06 10:07:06.953001"], ["updated_at", "2016-05-06 10:07:06.953001"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "handle1"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Collection 2"], ["description", "Collection 2 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:06.955748"], ["updated_at", "2016-05-06 10:07:06.955748"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "2"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tax_overrides" ("rate", "shipping_country_id") VALUES (?, ?)  [["rate", 2.0], ["shipping_country_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "tax_overrides"
  [1m[36mMagazCore::TaxOverride Load (0.0ms)[0m  [1mSELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "tax_overrides"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::File::DeleteFileTest: test_should_delete_file_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:06.965484"], ["updated_at", "2016-05-06 10:07:06.965484"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "files" ("name", "shop_id", "file", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "File 1"], ["shop_id", 1], ["file", "tapir.jpg"], ["created_at", "2016-05-06 10:07:06.985162"], ["updated_at", "2016-05-06 10:07:06.985162"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "files"
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::File Load (0.1ms)[0m  SELECT  "files".* FROM "files" WHERE "files"."shop_id" = ? AND "files"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "files" WHERE "files"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "files"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------
MagazCore::AdminServices::File::DeleteFileTest: test_should_not_delete_file_with_blank_params
---------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:07.010015"], ["updated_at", "2016-05-06 10:07:07.010015"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "files" ("name", "shop_id", "file", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "File 2"], ["shop_id", 1], ["file", "tapir.jpg"], ["created_at", "2016-05-06 10:07:07.017228"], ["updated_at", "2016-05-06 10:07:07.017228"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "files"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "files"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ProductImage::DeleteProductImageTest: test_should_delete_image_with_valid_params
----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:07.028035"], ["updated_at", "2016-05-06 10:07:07.028035"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 1' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 1"], ["description", "Example 1 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:07.038587"], ["updated_at", "2016-05-06 10:07:07.038587"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "product_images" ("product_id", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["product_id", 1], ["image", "tapir.jpg"], ["created_at", "2016-05-06 10:07:07.052257"], ["updated_at", "2016-05-06 10:07:07.052257"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "product_images"
  [1m[36mMagazCore::Product Load (0.2ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.3ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ProductImage Load (0.1ms)[0m  [1mSELECT  "product_images".* FROM "product_images" WHERE "product_images"."product_id" = ? AND "product_images"."id" = ? LIMIT 1[0m  [["product_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "product_images" WHERE "product_images"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "product_images"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangeDefaultCollectionTest: test_should_not_update_shop_with_blank_params
----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:07.066910"], ["updated_at", "2016-05-06 10:07:07.066910"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 3"], ["description", "Collection 3 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:07.068896"], ["updated_at", "2016-05-06 10:07:07.068896"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangeDefaultCollectionTest: test_should_update_shop_with_valid_params
------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:07.079648"], ["updated_at", "2016-05-06 10:07:07.079648"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 4"], ["description", "Collection 4 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:07.081701"], ["updated_at", "2016-05-06 10:07:07.081701"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Load (0.1ms)[0m  SELECT "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ?  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "shops" SET "eu_digital_goods_collection_id" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["eu_digital_goods_collection_id", 1], ["updated_at", "2016-05-06 10:07:07.084474"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::DeleteCollectionTest: test_should_delete_collection_with_valid_id
-------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:07.089418"], ["updated_at", "2016-05-06 10:07:07.089418"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 5"], ["description", "Collection 5 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:07.091344"], ["updated_at", "2016-05-06 10:07:07.091344"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.1ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Collection Load (0.1ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Collection Load (0.1ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "collections_products" WHERE "collections_products"."collection_id" = ?  [["collection_id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "collections" WHERE "collections"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "collections"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::DeleteCollectionTest: test_should_not_delet_collection_with_blank_id
----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:07.110875"], ["updated_at", "2016-05-06 10:07:07.110875"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 6"], ["description", "Collection 6 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:07.112973"], ["updated_at", "2016-05-06 10:07:07.112973"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "collections"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::DeleteShippingCountryTest: test_should_delete_shipping_country_with_valid_ids
------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example3' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example3"], ["subdomain", "example3"], ["created_at", "2016-05-06 10:07:07.120826"], ["updated_at", "2016-05-06 10:07:07.120826"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example4' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example4"], ["subdomain", "example4"], ["created_at", "2016-05-06 10:07:07.123970"], ["updated_at", "2016-05-06 10:07:07.123970"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "3"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.1ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ShippingRate Load (0.7ms)[0m  SELECT "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."shipping_country_id" = ?  [["shipping_country_id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "shipping_countries" WHERE "shipping_countries"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::ShippingCountry Load (0.1ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::DeleteShippingCountryTest: test_should_not_delete_shipping_country_with_blank_ids
----------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example5' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example5"], ["subdomain", "example5"], ["created_at", "2016-05-06 10:07:07.142335"], ["updated_at", "2016-05-06 10:07:07.142335"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example6' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example6"], ["subdomain", "example6"], ["created_at", "2016-05-06 10:07:07.145306"], ["updated_at", "2016-05-06 10:07:07.145306"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "4"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::DeleteShippingCountryTest: test_should_not_delete_shipping_country_with_invalid_ids
------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example7' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example7"], ["subdomain", "example7"], ["created_at", "2016-05-06 10:07:07.155934"], ["updated_at", "2016-05-06 10:07:07.155934"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example8' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example8"], ["subdomain", "example8"], ["created_at", "2016-05-06 10:07:07.159025"], ["updated_at", "2016-05-06 10:07:07.159025"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "5"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------
MagazCore::AdminServices::ImportCustomersFromCsvTest: test_import_customers
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example9' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example9"], ["subdomain", "example9"], ["created_at", "2016-05-06 10:07:07.167288"], ["updated_at", "2016-05-06 10:07:07.167288"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (1.9ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.1ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT 1[0m  [["id", 20]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "customers" ("id", "first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?, ?)[0m  [["id", 20], ["first_name", "FirstNameOne"], ["last_name", "LastNameOne"], ["email", "test1customer@mail.com"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT 1[0m  [["id", 30]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("id", "first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?, ?)[0m  [["id", 30], ["first_name", "FirstNameTwo"], ["last_name", "LastNameTwo"], ["email", "test2customer@mail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::DeletePageTest: test_should_delete_page_with_valid_id
-------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:07.199422"], ["updated_at", "2016-05-06 10:07:07.199422"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 1"], ["content", "Content 1"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:07.208834"], ["updated_at", "2016-05-06 10:07:07.208834"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.1ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "pages" WHERE "pages"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "pages"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::DeletePageTest: test_should_not_delete_page_with_blank_id
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:07.219544"], ["updated_at", "2016-05-06 10:07:07.219544"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 2"], ["content", "Content 2"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:07.221585"], ["updated_at", "2016-05-06 10:07:07.221585"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "pages"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------
MagazCore::CollectionTest: test_basic_visibility_functionality
--------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Collection 7"], ["description", "Collection 7 description"], ["created_at", "2016-05-06 10:07:07.228671"], ["updated_at", "2016-05-06 10:07:07.228671"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 8"], ["description", "Collection 8 description"], ["published_at", "2016-05-06 10:06:07.229915"], ["created_at", "2016-05-06 10:07:07.230525"], ["updated_at", "2016-05-06 10:07:07.230525"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 9"], ["description", "Collection 9 description"], ["published_at", "2016-05-06 10:06:07.229915"], ["created_at", "2016-05-06 10:07:07.232103"], ["updated_at", "2016-05-06 10:07:07.232103"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 10"], ["description", "Collection 10 description"], ["published_at", "2016-05-06 10:06:07.229915"], ["created_at", "2016-05-06 10:07:07.233940"], ["updated_at", "2016-05-06 10:07:07.233940"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 11"], ["description", "Collection 11 description"], ["published_at", "2016-05-06 10:06:07.229915"], ["created_at", "2016-05-06 10:07:07.235379"], ["updated_at", "2016-05-06 10:07:07.235379"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 12"], ["description", "Collection 12 description"], ["published_at", "2016-05-06 10:06:07.229915"], ["created_at", "2016-05-06 10:07:07.236764"], ["updated_at", "2016-05-06 10:07:07.236764"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 13"], ["description", "Collection 13 description"], ["published_at", "2016-05-06 10:06:07.229915"], ["created_at", "2016-05-06 10:07:07.238078"], ["updated_at", "2016-05-06 10:07:07.238078"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 14"], ["description", "Collection 14 description"], ["published_at", "2016-05-06 10:06:07.229915"], ["created_at", "2016-05-06 10:07:07.239405"], ["updated_at", "2016-05-06 10:07:07.239405"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 15"], ["description", "Collection 15 description"], ["published_at", "2016-05-06 10:06:07.229915"], ["created_at", "2016-05-06 10:07:07.240801"], ["updated_at", "2016-05-06 10:07:07.240801"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 16"], ["description", "Collection 16 description"], ["published_at", "2016-05-06 10:06:07.229915"], ["created_at", "2016-05-06 10:07:07.243039"], ["updated_at", "2016-05-06 10:07:07.243039"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 17"], ["description", "Collection 17 description"], ["published_at", "2016-05-06 10:06:07.229915"], ["created_at", "2016-05-06 10:07:07.244512"], ["updated_at", "2016-05-06 10:07:07.244512"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 18"], ["description", "Collection 18 description"], ["publish_on", "2016-05-07 10:07:07.245397"], ["created_at", "2016-05-06 10:07:07.253056"], ["updated_at", "2016-05-06 10:07:07.253056"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 19"], ["description", "Collection 19 description"], ["publish_on", "2016-05-07 10:07:07.245397"], ["created_at", "2016-05-06 10:07:07.256784"], ["updated_at", "2016-05-06 10:07:07.256784"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 20"], ["description", "Collection 20 description"], ["publish_on", "2016-05-07 10:07:07.245397"], ["created_at", "2016-05-06 10:07:07.258451"], ["updated_at", "2016-05-06 10:07:07.258451"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 21"], ["description", "Collection 21 description"], ["publish_on", "2016-05-07 10:07:07.245397"], ["created_at", "2016-05-06 10:07:07.259953"], ["updated_at", "2016-05-06 10:07:07.259953"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 22"], ["description", "Collection 22 description"], ["publish_on", "2016-05-07 10:07:07.245397"], ["created_at", "2016-05-06 10:07:07.261409"], ["updated_at", "2016-05-06 10:07:07.261409"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 23"], ["description", "Collection 23 description"], ["publish_on", "2016-05-07 10:07:07.245397"], ["created_at", "2016-05-06 10:07:07.262845"], ["updated_at", "2016-05-06 10:07:07.262845"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 24"], ["description", "Collection 24 description"], ["publish_on", "2016-05-07 10:07:07.245397"], ["created_at", "2016-05-06 10:07:07.264376"], ["updated_at", "2016-05-06 10:07:07.264376"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 25"], ["description", "Collection 25 description"], ["publish_on", "2016-05-07 10:07:07.245397"], ["created_at", "2016-05-06 10:07:07.265876"], ["updated_at", "2016-05-06 10:07:07.265876"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 26"], ["description", "Collection 26 description"], ["publish_on", "2016-05-07 10:07:07.245397"], ["created_at", "2016-05-06 10:07:07.267360"], ["updated_at", "2016-05-06 10:07:07.267360"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 27"], ["description", "Collection 27 description"], ["publish_on", "2016-05-07 10:07:07.245397"], ["created_at", "2016-05-06 10:07:07.268829"], ["updated_at", "2016-05-06 10:07:07.268829"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 28"], ["description", "Collection 28 description"], ["publish_on", "2016-05-06 10:06:07.269787"], ["created_at", "2016-05-06 10:07:07.270336"], ["updated_at", "2016-05-06 10:07:07.270336"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 29"], ["description", "Collection 29 description"], ["publish_on", "2016-05-06 10:06:07.269787"], ["created_at", "2016-05-06 10:07:07.271766"], ["updated_at", "2016-05-06 10:07:07.271766"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 30"], ["description", "Collection 30 description"], ["publish_on", "2016-05-06 10:06:07.269787"], ["created_at", "2016-05-06 10:07:07.273221"], ["updated_at", "2016-05-06 10:07:07.273221"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 31"], ["description", "Collection 31 description"], ["publish_on", "2016-05-06 10:06:07.269787"], ["created_at", "2016-05-06 10:07:07.274665"], ["updated_at", "2016-05-06 10:07:07.274665"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 32"], ["description", "Collection 32 description"], ["publish_on", "2016-05-06 10:06:07.269787"], ["created_at", "2016-05-06 10:07:07.276148"], ["updated_at", "2016-05-06 10:07:07.276148"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 33"], ["description", "Collection 33 description"], ["publish_on", "2016-05-06 10:06:07.269787"], ["created_at", "2016-05-06 10:07:07.277610"], ["updated_at", "2016-05-06 10:07:07.277610"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 34"], ["description", "Collection 34 description"], ["publish_on", "2016-05-06 10:06:07.269787"], ["created_at", "2016-05-06 10:07:07.279068"], ["updated_at", "2016-05-06 10:07:07.279068"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 35"], ["description", "Collection 35 description"], ["publish_on", "2016-05-06 10:06:07.269787"], ["created_at", "2016-05-06 10:07:07.280614"], ["updated_at", "2016-05-06 10:07:07.280614"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 36"], ["description", "Collection 36 description"], ["publish_on", "2016-05-06 10:06:07.269787"], ["created_at", "2016-05-06 10:07:07.282063"], ["updated_at", "2016-05-06 10:07:07.282063"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 37"], ["description", "Collection 37 description"], ["publish_on", "2016-05-06 10:06:07.269787"], ["created_at", "2016-05-06 10:07:07.283529"], ["updated_at", "2016-05-06 10:07:07.283529"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "collections" SET "publish_on" = ?, "updated_at" = ? WHERE "collections"."id" = ?  [["publish_on", "2016-05-08 10:07:07.285584"], ["updated_at", "2016-05-06 10:07:07.285978"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "collections" SET "publish_on" = ?, "published_at" = ?, "updated_at" = ? WHERE "collections"."id" = ?[0m  [["publish_on", nil], ["published_at", "2016-05-04 10:07:07.287043"], ["updated_at", "2016-05-06 10:07:07.287450"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------
MagazCore::CollectionTest: test_two_collections_with_same_handle_and_different_shops
------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Collection 38"], ["description", "Collection 38 description"], ["created_at", "2016-05-06 10:07:07.291646"], ["updated_at", "2016-05-06 10:07:07.291646"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 39"], ["description", "Collection 39 description"], ["published_at", "2016-05-06 10:06:07.292863"], ["created_at", "2016-05-06 10:07:07.293420"], ["updated_at", "2016-05-06 10:07:07.293420"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 40"], ["description", "Collection 40 description"], ["published_at", "2016-05-06 10:06:07.292863"], ["created_at", "2016-05-06 10:07:07.294949"], ["updated_at", "2016-05-06 10:07:07.294949"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 41"], ["description", "Collection 41 description"], ["published_at", "2016-05-06 10:06:07.292863"], ["created_at", "2016-05-06 10:07:07.308509"], ["updated_at", "2016-05-06 10:07:07.308509"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 42"], ["description", "Collection 42 description"], ["published_at", "2016-05-06 10:06:07.292863"], ["created_at", "2016-05-06 10:07:07.310257"], ["updated_at", "2016-05-06 10:07:07.310257"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 43"], ["description", "Collection 43 description"], ["published_at", "2016-05-06 10:06:07.292863"], ["created_at", "2016-05-06 10:07:07.311642"], ["updated_at", "2016-05-06 10:07:07.311642"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 44"], ["description", "Collection 44 description"], ["published_at", "2016-05-06 10:06:07.292863"], ["created_at", "2016-05-06 10:07:07.313039"], ["updated_at", "2016-05-06 10:07:07.313039"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 45"], ["description", "Collection 45 description"], ["published_at", "2016-05-06 10:06:07.292863"], ["created_at", "2016-05-06 10:07:07.314454"], ["updated_at", "2016-05-06 10:07:07.314454"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 46"], ["description", "Collection 46 description"], ["published_at", "2016-05-06 10:06:07.292863"], ["created_at", "2016-05-06 10:07:07.315903"], ["updated_at", "2016-05-06 10:07:07.315903"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 47"], ["description", "Collection 47 description"], ["published_at", "2016-05-06 10:06:07.292863"], ["created_at", "2016-05-06 10:07:07.317226"], ["updated_at", "2016-05-06 10:07:07.317226"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 48"], ["description", "Collection 48 description"], ["published_at", "2016-05-06 10:06:07.292863"], ["created_at", "2016-05-06 10:07:07.318573"], ["updated_at", "2016-05-06 10:07:07.318573"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 49"], ["description", "Collection 49 description"], ["publish_on", "2016-05-07 10:07:07.319386"], ["created_at", "2016-05-06 10:07:07.319963"], ["updated_at", "2016-05-06 10:07:07.319963"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 50"], ["description", "Collection 50 description"], ["publish_on", "2016-05-07 10:07:07.319386"], ["created_at", "2016-05-06 10:07:07.321400"], ["updated_at", "2016-05-06 10:07:07.321400"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 51"], ["description", "Collection 51 description"], ["publish_on", "2016-05-07 10:07:07.319386"], ["created_at", "2016-05-06 10:07:07.322815"], ["updated_at", "2016-05-06 10:07:07.322815"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 52"], ["description", "Collection 52 description"], ["publish_on", "2016-05-07 10:07:07.319386"], ["created_at", "2016-05-06 10:07:07.324295"], ["updated_at", "2016-05-06 10:07:07.324295"]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 53"], ["description", "Collection 53 description"], ["publish_on", "2016-05-07 10:07:07.319386"], ["created_at", "2016-05-06 10:07:07.328496"], ["updated_at", "2016-05-06 10:07:07.328496"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 54"], ["description", "Collection 54 description"], ["publish_on", "2016-05-07 10:07:07.319386"], ["created_at", "2016-05-06 10:07:07.330762"], ["updated_at", "2016-05-06 10:07:07.330762"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 55"], ["description", "Collection 55 description"], ["publish_on", "2016-05-07 10:07:07.319386"], ["created_at", "2016-05-06 10:07:07.332841"], ["updated_at", "2016-05-06 10:07:07.332841"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 56"], ["description", "Collection 56 description"], ["publish_on", "2016-05-07 10:07:07.319386"], ["created_at", "2016-05-06 10:07:07.334906"], ["updated_at", "2016-05-06 10:07:07.334906"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 57"], ["description", "Collection 57 description"], ["publish_on", "2016-05-07 10:07:07.319386"], ["created_at", "2016-05-06 10:07:07.337199"], ["updated_at", "2016-05-06 10:07:07.337199"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 58"], ["description", "Collection 58 description"], ["publish_on", "2016-05-07 10:07:07.319386"], ["created_at", "2016-05-06 10:07:07.339380"], ["updated_at", "2016-05-06 10:07:07.339380"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 59"], ["description", "Collection 59 description"], ["publish_on", "2016-05-06 10:06:07.340754"], ["created_at", "2016-05-06 10:07:07.341509"], ["updated_at", "2016-05-06 10:07:07.341509"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 60"], ["description", "Collection 60 description"], ["publish_on", "2016-05-06 10:06:07.340754"], ["created_at", "2016-05-06 10:07:07.344466"], ["updated_at", "2016-05-06 10:07:07.344466"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 61"], ["description", "Collection 61 description"], ["publish_on", "2016-05-06 10:06:07.340754"], ["created_at", "2016-05-06 10:07:07.346538"], ["updated_at", "2016-05-06 10:07:07.346538"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 62"], ["description", "Collection 62 description"], ["publish_on", "2016-05-06 10:06:07.340754"], ["created_at", "2016-05-06 10:07:07.348536"], ["updated_at", "2016-05-06 10:07:07.348536"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 63"], ["description", "Collection 63 description"], ["publish_on", "2016-05-06 10:06:07.340754"], ["created_at", "2016-05-06 10:07:07.350252"], ["updated_at", "2016-05-06 10:07:07.350252"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 64"], ["description", "Collection 64 description"], ["publish_on", "2016-05-06 10:06:07.340754"], ["created_at", "2016-05-06 10:07:07.351913"], ["updated_at", "2016-05-06 10:07:07.351913"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 65"], ["description", "Collection 65 description"], ["publish_on", "2016-05-06 10:06:07.340754"], ["created_at", "2016-05-06 10:07:07.353463"], ["updated_at", "2016-05-06 10:07:07.353463"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 66"], ["description", "Collection 66 description"], ["publish_on", "2016-05-06 10:06:07.340754"], ["created_at", "2016-05-06 10:07:07.354873"], ["updated_at", "2016-05-06 10:07:07.354873"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 67"], ["description", "Collection 67 description"], ["publish_on", "2016-05-06 10:06:07.340754"], ["created_at", "2016-05-06 10:07:07.356279"], ["updated_at", "2016-05-06 10:07:07.356279"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 68"], ["description", "Collection 68 description"], ["publish_on", "2016-05-06 10:06:07.340754"], ["created_at", "2016-05-06 10:07:07.357761"], ["updated_at", "2016-05-06 10:07:07.357761"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-06 10:07:07.360080"], ["updated_at", "2016-05-06 10:07:07.360080"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop2' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop2"], ["subdomain", "shop2"], ["created_at", "2016-05-06 10:07:07.362195"], ["updated_at", "2016-05-06 10:07:07.362195"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "collection-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "collection"], ["description", "Collection 69 description"], ["handle", "collection-handle"], ["shop_id", 1], ["slug", "collection-handle"], ["created_at", "2016-05-06 10:07:07.364758"], ["updated_at", "2016-05-06 10:07:07.364758"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 2 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "collection-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["name", "collection"], ["handle", "collection-handle"], ["shop_id", 2], ["slug", "collection-handle"], ["created_at", "2016-05-06 10:07:07.367306"], ["updated_at", "2016-05-06 10:07:07.367306"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------
MagazCore::CollectionTest: test_two_collections_with_same_handle_and_same_shop
------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Collection 69"], ["description", "Collection 70 description"], ["created_at", "2016-05-06 10:07:07.371680"], ["updated_at", "2016-05-06 10:07:07.371680"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 70"], ["description", "Collection 71 description"], ["published_at", "2016-05-06 10:06:07.372940"], ["created_at", "2016-05-06 10:07:07.373501"], ["updated_at", "2016-05-06 10:07:07.373501"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 71"], ["description", "Collection 72 description"], ["published_at", "2016-05-06 10:06:07.372940"], ["created_at", "2016-05-06 10:07:07.375075"], ["updated_at", "2016-05-06 10:07:07.375075"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 72"], ["description", "Collection 73 description"], ["published_at", "2016-05-06 10:06:07.372940"], ["created_at", "2016-05-06 10:07:07.376367"], ["updated_at", "2016-05-06 10:07:07.376367"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 73"], ["description", "Collection 74 description"], ["published_at", "2016-05-06 10:06:07.372940"], ["created_at", "2016-05-06 10:07:07.377694"], ["updated_at", "2016-05-06 10:07:07.377694"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 74"], ["description", "Collection 75 description"], ["published_at", "2016-05-06 10:06:07.372940"], ["created_at", "2016-05-06 10:07:07.379044"], ["updated_at", "2016-05-06 10:07:07.379044"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 75"], ["description", "Collection 76 description"], ["published_at", "2016-05-06 10:06:07.372940"], ["created_at", "2016-05-06 10:07:07.380535"], ["updated_at", "2016-05-06 10:07:07.380535"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 76"], ["description", "Collection 77 description"], ["published_at", "2016-05-06 10:06:07.372940"], ["created_at", "2016-05-06 10:07:07.381941"], ["updated_at", "2016-05-06 10:07:07.381941"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 77"], ["description", "Collection 78 description"], ["published_at", "2016-05-06 10:06:07.372940"], ["created_at", "2016-05-06 10:07:07.383300"], ["updated_at", "2016-05-06 10:07:07.383300"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 78"], ["description", "Collection 79 description"], ["published_at", "2016-05-06 10:06:07.372940"], ["created_at", "2016-05-06 10:07:07.386147"], ["updated_at", "2016-05-06 10:07:07.386147"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 79"], ["description", "Collection 80 description"], ["published_at", "2016-05-06 10:06:07.372940"], ["created_at", "2016-05-06 10:07:07.387903"], ["updated_at", "2016-05-06 10:07:07.387903"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 80"], ["description", "Collection 81 description"], ["publish_on", "2016-05-07 10:07:07.388765"], ["created_at", "2016-05-06 10:07:07.389379"], ["updated_at", "2016-05-06 10:07:07.389379"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 81"], ["description", "Collection 82 description"], ["publish_on", "2016-05-07 10:07:07.388765"], ["created_at", "2016-05-06 10:07:07.390890"], ["updated_at", "2016-05-06 10:07:07.390890"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 82"], ["description", "Collection 83 description"], ["publish_on", "2016-05-07 10:07:07.388765"], ["created_at", "2016-05-06 10:07:07.392309"], ["updated_at", "2016-05-06 10:07:07.392309"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 83"], ["description", "Collection 84 description"], ["publish_on", "2016-05-07 10:07:07.388765"], ["created_at", "2016-05-06 10:07:07.393700"], ["updated_at", "2016-05-06 10:07:07.393700"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 84"], ["description", "Collection 85 description"], ["publish_on", "2016-05-07 10:07:07.388765"], ["created_at", "2016-05-06 10:07:07.395104"], ["updated_at", "2016-05-06 10:07:07.395104"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 85"], ["description", "Collection 86 description"], ["publish_on", "2016-05-07 10:07:07.388765"], ["created_at", "2016-05-06 10:07:07.396732"], ["updated_at", "2016-05-06 10:07:07.396732"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 86"], ["description", "Collection 87 description"], ["publish_on", "2016-05-07 10:07:07.388765"], ["created_at", "2016-05-06 10:07:07.398200"], ["updated_at", "2016-05-06 10:07:07.398200"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 87"], ["description", "Collection 88 description"], ["publish_on", "2016-05-07 10:07:07.388765"], ["created_at", "2016-05-06 10:07:07.399638"], ["updated_at", "2016-05-06 10:07:07.399638"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 88"], ["description", "Collection 89 description"], ["publish_on", "2016-05-07 10:07:07.388765"], ["created_at", "2016-05-06 10:07:07.401037"], ["updated_at", "2016-05-06 10:07:07.401037"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 89"], ["description", "Collection 90 description"], ["publish_on", "2016-05-07 10:07:07.388765"], ["created_at", "2016-05-06 10:07:07.402449"], ["updated_at", "2016-05-06 10:07:07.402449"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 90"], ["description", "Collection 91 description"], ["publish_on", "2016-05-06 10:06:07.403358"], ["created_at", "2016-05-06 10:07:07.403875"], ["updated_at", "2016-05-06 10:07:07.403875"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 91"], ["description", "Collection 92 description"], ["publish_on", "2016-05-06 10:06:07.403358"], ["created_at", "2016-05-06 10:07:07.405345"], ["updated_at", "2016-05-06 10:07:07.405345"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 92"], ["description", "Collection 93 description"], ["publish_on", "2016-05-06 10:06:07.403358"], ["created_at", "2016-05-06 10:07:07.408193"], ["updated_at", "2016-05-06 10:07:07.408193"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 93"], ["description", "Collection 94 description"], ["publish_on", "2016-05-06 10:06:07.403358"], ["created_at", "2016-05-06 10:07:07.412139"], ["updated_at", "2016-05-06 10:07:07.412139"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 94"], ["description", "Collection 95 description"], ["publish_on", "2016-05-06 10:06:07.403358"], ["created_at", "2016-05-06 10:07:07.414324"], ["updated_at", "2016-05-06 10:07:07.414324"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 95"], ["description", "Collection 96 description"], ["publish_on", "2016-05-06 10:06:07.403358"], ["created_at", "2016-05-06 10:07:07.415790"], ["updated_at", "2016-05-06 10:07:07.415790"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 96"], ["description", "Collection 97 description"], ["publish_on", "2016-05-06 10:06:07.403358"], ["created_at", "2016-05-06 10:07:07.417221"], ["updated_at", "2016-05-06 10:07:07.417221"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 97"], ["description", "Collection 98 description"], ["publish_on", "2016-05-06 10:06:07.403358"], ["created_at", "2016-05-06 10:07:07.418637"], ["updated_at", "2016-05-06 10:07:07.418637"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 98"], ["description", "Collection 99 description"], ["publish_on", "2016-05-06 10:06:07.403358"], ["created_at", "2016-05-06 10:07:07.420061"], ["updated_at", "2016-05-06 10:07:07.420061"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 99"], ["description", "Collection 100 description"], ["publish_on", "2016-05-06 10:06:07.403358"], ["created_at", "2016-05-06 10:07:07.421479"], ["updated_at", "2016-05-06 10:07:07.421479"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-06 10:07:07.424180"], ["updated_at", "2016-05-06 10:07:07.424180"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "collection-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "collection1"], ["description", "Collection 101 description"], ["handle", "collection-handle"], ["shop_id", 1], ["slug", "collection-handle"], ["created_at", "2016-05-06 10:07:07.426834"], ["updated_at", "2016-05-06 10:07:07.426834"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "collection-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "collection2"], ["handle", "collection-handle"], ["shop_id", 1], ["slug", "collection-handle-0bf1ef86-2907-4d08-8053-1322e8027f1b"], ["created_at", "2016-05-06 10:07:07.429350"], ["updated_at", "2016-05-06 10:07:07.429350"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------
MagazCore::CollectionTest: test_validation_scenarios
----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Collection 100"], ["description", "Collection 102 description"], ["created_at", "2016-05-06 10:07:07.434792"], ["updated_at", "2016-05-06 10:07:07.434792"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 101"], ["description", "Collection 103 description"], ["published_at", "2016-05-06 10:06:07.436455"], ["created_at", "2016-05-06 10:07:07.437230"], ["updated_at", "2016-05-06 10:07:07.437230"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 102"], ["description", "Collection 104 description"], ["published_at", "2016-05-06 10:06:07.436455"], ["created_at", "2016-05-06 10:07:07.439346"], ["updated_at", "2016-05-06 10:07:07.439346"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 103"], ["description", "Collection 105 description"], ["published_at", "2016-05-06 10:06:07.436455"], ["created_at", "2016-05-06 10:07:07.441274"], ["updated_at", "2016-05-06 10:07:07.441274"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 104"], ["description", "Collection 106 description"], ["published_at", "2016-05-06 10:06:07.436455"], ["created_at", "2016-05-06 10:07:07.443260"], ["updated_at", "2016-05-06 10:07:07.443260"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 105"], ["description", "Collection 107 description"], ["published_at", "2016-05-06 10:06:07.436455"], ["created_at", "2016-05-06 10:07:07.446523"], ["updated_at", "2016-05-06 10:07:07.446523"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 106"], ["description", "Collection 108 description"], ["published_at", "2016-05-06 10:06:07.436455"], ["created_at", "2016-05-06 10:07:07.448287"], ["updated_at", "2016-05-06 10:07:07.448287"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 107"], ["description", "Collection 109 description"], ["published_at", "2016-05-06 10:06:07.436455"], ["created_at", "2016-05-06 10:07:07.449684"], ["updated_at", "2016-05-06 10:07:07.449684"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 108"], ["description", "Collection 110 description"], ["published_at", "2016-05-06 10:06:07.436455"], ["created_at", "2016-05-06 10:07:07.451017"], ["updated_at", "2016-05-06 10:07:07.451017"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 109"], ["description", "Collection 111 description"], ["published_at", "2016-05-06 10:06:07.436455"], ["created_at", "2016-05-06 10:07:07.452357"], ["updated_at", "2016-05-06 10:07:07.452357"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 110"], ["description", "Collection 112 description"], ["published_at", "2016-05-06 10:06:07.436455"], ["created_at", "2016-05-06 10:07:07.453658"], ["updated_at", "2016-05-06 10:07:07.453658"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 111"], ["description", "Collection 113 description"], ["publish_on", "2016-05-07 10:07:07.454517"], ["created_at", "2016-05-06 10:07:07.455085"], ["updated_at", "2016-05-06 10:07:07.455085"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 112"], ["description", "Collection 114 description"], ["publish_on", "2016-05-07 10:07:07.454517"], ["created_at", "2016-05-06 10:07:07.456833"], ["updated_at", "2016-05-06 10:07:07.456833"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 113"], ["description", "Collection 115 description"], ["publish_on", "2016-05-07 10:07:07.454517"], ["created_at", "2016-05-06 10:07:07.458374"], ["updated_at", "2016-05-06 10:07:07.458374"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 114"], ["description", "Collection 116 description"], ["publish_on", "2016-05-07 10:07:07.454517"], ["created_at", "2016-05-06 10:07:07.459864"], ["updated_at", "2016-05-06 10:07:07.459864"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 115"], ["description", "Collection 117 description"], ["publish_on", "2016-05-07 10:07:07.454517"], ["created_at", "2016-05-06 10:07:07.461330"], ["updated_at", "2016-05-06 10:07:07.461330"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 116"], ["description", "Collection 118 description"], ["publish_on", "2016-05-07 10:07:07.454517"], ["created_at", "2016-05-06 10:07:07.462765"], ["updated_at", "2016-05-06 10:07:07.462765"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 117"], ["description", "Collection 119 description"], ["publish_on", "2016-05-07 10:07:07.454517"], ["created_at", "2016-05-06 10:07:07.464261"], ["updated_at", "2016-05-06 10:07:07.464261"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 118"], ["description", "Collection 120 description"], ["publish_on", "2016-05-07 10:07:07.454517"], ["created_at", "2016-05-06 10:07:07.465973"], ["updated_at", "2016-05-06 10:07:07.465973"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 119"], ["description", "Collection 121 description"], ["publish_on", "2016-05-07 10:07:07.454517"], ["created_at", "2016-05-06 10:07:07.467547"], ["updated_at", "2016-05-06 10:07:07.467547"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 120"], ["description", "Collection 122 description"], ["publish_on", "2016-05-07 10:07:07.454517"], ["created_at", "2016-05-06 10:07:07.469279"], ["updated_at", "2016-05-06 10:07:07.469279"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 121"], ["description", "Collection 123 description"], ["publish_on", "2016-05-06 10:06:07.470305"], ["created_at", "2016-05-06 10:07:07.470908"], ["updated_at", "2016-05-06 10:07:07.470908"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 122"], ["description", "Collection 124 description"], ["publish_on", "2016-05-06 10:06:07.470305"], ["created_at", "2016-05-06 10:07:07.472440"], ["updated_at", "2016-05-06 10:07:07.472440"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 123"], ["description", "Collection 125 description"], ["publish_on", "2016-05-06 10:06:07.470305"], ["created_at", "2016-05-06 10:07:07.473915"], ["updated_at", "2016-05-06 10:07:07.473915"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 124"], ["description", "Collection 126 description"], ["publish_on", "2016-05-06 10:06:07.470305"], ["created_at", "2016-05-06 10:07:07.475413"], ["updated_at", "2016-05-06 10:07:07.475413"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 125"], ["description", "Collection 127 description"], ["publish_on", "2016-05-06 10:06:07.470305"], ["created_at", "2016-05-06 10:07:07.478012"], ["updated_at", "2016-05-06 10:07:07.478012"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 126"], ["description", "Collection 128 description"], ["publish_on", "2016-05-06 10:06:07.470305"], ["created_at", "2016-05-06 10:07:07.480193"], ["updated_at", "2016-05-06 10:07:07.480193"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 127"], ["description", "Collection 129 description"], ["publish_on", "2016-05-06 10:06:07.470305"], ["created_at", "2016-05-06 10:07:07.482195"], ["updated_at", "2016-05-06 10:07:07.482195"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 128"], ["description", "Collection 130 description"], ["publish_on", "2016-05-06 10:06:07.470305"], ["created_at", "2016-05-06 10:07:07.484275"], ["updated_at", "2016-05-06 10:07:07.484275"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 129"], ["description", "Collection 131 description"], ["publish_on", "2016-05-06 10:06:07.470305"], ["created_at", "2016-05-06 10:07:07.486228"], ["updated_at", "2016-05-06 10:07:07.486228"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 130"], ["description", "Collection 132 description"], ["publish_on", "2016-05-06 10:06:07.470305"], ["created_at", "2016-05-06 10:07:07.487923"], ["updated_at", "2016-05-06 10:07:07.487923"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------
MagazCore::CollectionTest: test_visibility_scopes
-------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Collection 131"], ["description", "Collection 133 description"], ["created_at", "2016-05-06 10:07:07.492637"], ["updated_at", "2016-05-06 10:07:07.492637"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 132"], ["description", "Collection 134 description"], ["published_at", "2016-05-06 10:06:07.493855"], ["created_at", "2016-05-06 10:07:07.494465"], ["updated_at", "2016-05-06 10:07:07.494465"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 133"], ["description", "Collection 135 description"], ["published_at", "2016-05-06 10:06:07.493855"], ["created_at", "2016-05-06 10:07:07.496017"], ["updated_at", "2016-05-06 10:07:07.496017"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 134"], ["description", "Collection 136 description"], ["published_at", "2016-05-06 10:06:07.493855"], ["created_at", "2016-05-06 10:07:07.497444"], ["updated_at", "2016-05-06 10:07:07.497444"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 135"], ["description", "Collection 137 description"], ["published_at", "2016-05-06 10:06:07.493855"], ["created_at", "2016-05-06 10:07:07.498779"], ["updated_at", "2016-05-06 10:07:07.498779"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 136"], ["description", "Collection 138 description"], ["published_at", "2016-05-06 10:06:07.493855"], ["created_at", "2016-05-06 10:07:07.500119"], ["updated_at", "2016-05-06 10:07:07.500119"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 137"], ["description", "Collection 139 description"], ["published_at", "2016-05-06 10:06:07.493855"], ["created_at", "2016-05-06 10:07:07.501853"], ["updated_at", "2016-05-06 10:07:07.501853"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 138"], ["description", "Collection 140 description"], ["published_at", "2016-05-06 10:06:07.493855"], ["created_at", "2016-05-06 10:07:07.503328"], ["updated_at", "2016-05-06 10:07:07.503328"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 139"], ["description", "Collection 141 description"], ["published_at", "2016-05-06 10:06:07.493855"], ["created_at", "2016-05-06 10:07:07.504715"], ["updated_at", "2016-05-06 10:07:07.504715"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 140"], ["description", "Collection 142 description"], ["published_at", "2016-05-06 10:06:07.493855"], ["created_at", "2016-05-06 10:07:07.506035"], ["updated_at", "2016-05-06 10:07:07.506035"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 141"], ["description", "Collection 143 description"], ["published_at", "2016-05-06 10:06:07.493855"], ["created_at", "2016-05-06 10:07:07.507374"], ["updated_at", "2016-05-06 10:07:07.507374"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 142"], ["description", "Collection 144 description"], ["publish_on", "2016-05-07 10:07:07.508235"], ["created_at", "2016-05-06 10:07:07.508838"], ["updated_at", "2016-05-06 10:07:07.508838"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 143"], ["description", "Collection 145 description"], ["publish_on", "2016-05-07 10:07:07.508235"], ["created_at", "2016-05-06 10:07:07.510322"], ["updated_at", "2016-05-06 10:07:07.510322"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 144"], ["description", "Collection 146 description"], ["publish_on", "2016-05-07 10:07:07.508235"], ["created_at", "2016-05-06 10:07:07.511759"], ["updated_at", "2016-05-06 10:07:07.511759"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 145"], ["description", "Collection 147 description"], ["publish_on", "2016-05-07 10:07:07.508235"], ["created_at", "2016-05-06 10:07:07.513140"], ["updated_at", "2016-05-06 10:07:07.513140"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 146"], ["description", "Collection 148 description"], ["publish_on", "2016-05-07 10:07:07.508235"], ["created_at", "2016-05-06 10:07:07.514612"], ["updated_at", "2016-05-06 10:07:07.514612"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 147"], ["description", "Collection 149 description"], ["publish_on", "2016-05-07 10:07:07.508235"], ["created_at", "2016-05-06 10:07:07.516058"], ["updated_at", "2016-05-06 10:07:07.516058"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 148"], ["description", "Collection 150 description"], ["publish_on", "2016-05-07 10:07:07.508235"], ["created_at", "2016-05-06 10:07:07.517432"], ["updated_at", "2016-05-06 10:07:07.517432"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 149"], ["description", "Collection 151 description"], ["publish_on", "2016-05-07 10:07:07.508235"], ["created_at", "2016-05-06 10:07:07.518845"], ["updated_at", "2016-05-06 10:07:07.518845"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 150"], ["description", "Collection 152 description"], ["publish_on", "2016-05-07 10:07:07.508235"], ["created_at", "2016-05-06 10:07:07.520313"], ["updated_at", "2016-05-06 10:07:07.520313"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 151"], ["description", "Collection 153 description"], ["publish_on", "2016-05-07 10:07:07.508235"], ["created_at", "2016-05-06 10:07:07.521765"], ["updated_at", "2016-05-06 10:07:07.521765"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 152"], ["description", "Collection 154 description"], ["publish_on", "2016-05-06 10:06:07.522708"], ["created_at", "2016-05-06 10:07:07.523238"], ["updated_at", "2016-05-06 10:07:07.523238"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 153"], ["description", "Collection 155 description"], ["publish_on", "2016-05-06 10:06:07.522708"], ["created_at", "2016-05-06 10:07:07.524715"], ["updated_at", "2016-05-06 10:07:07.524715"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 154"], ["description", "Collection 156 description"], ["publish_on", "2016-05-06 10:06:07.522708"], ["created_at", "2016-05-06 10:07:07.526188"], ["updated_at", "2016-05-06 10:07:07.526188"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 155"], ["description", "Collection 157 description"], ["publish_on", "2016-05-06 10:06:07.522708"], ["created_at", "2016-05-06 10:07:07.527863"], ["updated_at", "2016-05-06 10:07:07.527863"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 156"], ["description", "Collection 158 description"], ["publish_on", "2016-05-06 10:06:07.522708"], ["created_at", "2016-05-06 10:07:07.529402"], ["updated_at", "2016-05-06 10:07:07.529402"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 157"], ["description", "Collection 159 description"], ["publish_on", "2016-05-06 10:06:07.522708"], ["created_at", "2016-05-06 10:07:07.530887"], ["updated_at", "2016-05-06 10:07:07.530887"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 158"], ["description", "Collection 160 description"], ["publish_on", "2016-05-06 10:06:07.522708"], ["created_at", "2016-05-06 10:07:07.532448"], ["updated_at", "2016-05-06 10:07:07.532448"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 159"], ["description", "Collection 161 description"], ["publish_on", "2016-05-06 10:06:07.522708"], ["created_at", "2016-05-06 10:07:07.533893"], ["updated_at", "2016-05-06 10:07:07.533893"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 160"], ["description", "Collection 162 description"], ["publish_on", "2016-05-06 10:06:07.522708"], ["created_at", "2016-05-06 10:07:07.535348"], ["updated_at", "2016-05-06 10:07:07.535348"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 161"], ["description", "Collection 163 description"], ["publish_on", "2016-05-06 10:06:07.522708"], ["created_at", "2016-05-06 10:07:07.536734"], ["updated_at", "2016-05-06 10:07:07.536734"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.2ms)[0m  [1mSELECT "collections".* FROM "collections" WHERE "collections"."publish_on" IS NULL AND ("collections"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-06 10:07:07.537721')[0m
  [1m[35mMagazCore::Collection Load (0.1ms)[0m  SELECT "collections".* FROM "collections" WHERE (publish_on >= '2016-05-06 10:07:07.538928') AND "collections"."published_at" IS NULL
  [1m[36mMagazCore::Collection Load (0.1ms)[0m  [1mSELECT "collections".* FROM "collections" WHERE (publish_on <= '2016-05-06 10:07:07.539504') AND "collections"."published_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------
MagazCore::CollectionTest: test_visibility_scopes_and_methods
-------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Collection 162"], ["description", "Collection 164 description"], ["created_at", "2016-05-06 10:07:07.543526"], ["updated_at", "2016-05-06 10:07:07.543526"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 163"], ["description", "Collection 165 description"], ["published_at", "2016-05-06 10:06:07.544759"], ["created_at", "2016-05-06 10:07:07.545343"], ["updated_at", "2016-05-06 10:07:07.545343"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 164"], ["description", "Collection 166 description"], ["published_at", "2016-05-06 10:06:07.544759"], ["created_at", "2016-05-06 10:07:07.546897"], ["updated_at", "2016-05-06 10:07:07.546897"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 165"], ["description", "Collection 167 description"], ["published_at", "2016-05-06 10:06:07.544759"], ["created_at", "2016-05-06 10:07:07.548267"], ["updated_at", "2016-05-06 10:07:07.548267"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 166"], ["description", "Collection 168 description"], ["published_at", "2016-05-06 10:06:07.544759"], ["created_at", "2016-05-06 10:07:07.549601"], ["updated_at", "2016-05-06 10:07:07.549601"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 167"], ["description", "Collection 169 description"], ["published_at", "2016-05-06 10:06:07.544759"], ["created_at", "2016-05-06 10:07:07.550928"], ["updated_at", "2016-05-06 10:07:07.550928"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 168"], ["description", "Collection 170 description"], ["published_at", "2016-05-06 10:06:07.544759"], ["created_at", "2016-05-06 10:07:07.552755"], ["updated_at", "2016-05-06 10:07:07.552755"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 169"], ["description", "Collection 171 description"], ["published_at", "2016-05-06 10:06:07.544759"], ["created_at", "2016-05-06 10:07:07.555124"], ["updated_at", "2016-05-06 10:07:07.555124"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 170"], ["description", "Collection 172 description"], ["published_at", "2016-05-06 10:06:07.544759"], ["created_at", "2016-05-06 10:07:07.557123"], ["updated_at", "2016-05-06 10:07:07.557123"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 171"], ["description", "Collection 173 description"], ["published_at", "2016-05-06 10:06:07.544759"], ["created_at", "2016-05-06 10:07:07.559106"], ["updated_at", "2016-05-06 10:07:07.559106"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 172"], ["description", "Collection 174 description"], ["published_at", "2016-05-06 10:06:07.544759"], ["created_at", "2016-05-06 10:07:07.561037"], ["updated_at", "2016-05-06 10:07:07.561037"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 173"], ["description", "Collection 175 description"], ["publish_on", "2016-05-07 10:07:07.562268"], ["created_at", "2016-05-06 10:07:07.562970"], ["updated_at", "2016-05-06 10:07:07.562970"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 174"], ["description", "Collection 176 description"], ["publish_on", "2016-05-07 10:07:07.562268"], ["created_at", "2016-05-06 10:07:07.564729"], ["updated_at", "2016-05-06 10:07:07.564729"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 175"], ["description", "Collection 177 description"], ["publish_on", "2016-05-07 10:07:07.562268"], ["created_at", "2016-05-06 10:07:07.566684"], ["updated_at", "2016-05-06 10:07:07.566684"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 176"], ["description", "Collection 178 description"], ["publish_on", "2016-05-07 10:07:07.562268"], ["created_at", "2016-05-06 10:07:07.568435"], ["updated_at", "2016-05-06 10:07:07.568435"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 177"], ["description", "Collection 179 description"], ["publish_on", "2016-05-07 10:07:07.562268"], ["created_at", "2016-05-06 10:07:07.570127"], ["updated_at", "2016-05-06 10:07:07.570127"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 178"], ["description", "Collection 180 description"], ["publish_on", "2016-05-07 10:07:07.562268"], ["created_at", "2016-05-06 10:07:07.571638"], ["updated_at", "2016-05-06 10:07:07.571638"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 179"], ["description", "Collection 181 description"], ["publish_on", "2016-05-07 10:07:07.562268"], ["created_at", "2016-05-06 10:07:07.573141"], ["updated_at", "2016-05-06 10:07:07.573141"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 180"], ["description", "Collection 182 description"], ["publish_on", "2016-05-07 10:07:07.562268"], ["created_at", "2016-05-06 10:07:07.574665"], ["updated_at", "2016-05-06 10:07:07.574665"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 181"], ["description", "Collection 183 description"], ["publish_on", "2016-05-07 10:07:07.562268"], ["created_at", "2016-05-06 10:07:07.576156"], ["updated_at", "2016-05-06 10:07:07.576156"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 182"], ["description", "Collection 184 description"], ["publish_on", "2016-05-07 10:07:07.562268"], ["created_at", "2016-05-06 10:07:07.577700"], ["updated_at", "2016-05-06 10:07:07.577700"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 183"], ["description", "Collection 185 description"], ["publish_on", "2016-05-06 10:06:07.578894"], ["created_at", "2016-05-06 10:07:07.579490"], ["updated_at", "2016-05-06 10:07:07.579490"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 184"], ["description", "Collection 186 description"], ["publish_on", "2016-05-06 10:06:07.578894"], ["created_at", "2016-05-06 10:07:07.581032"], ["updated_at", "2016-05-06 10:07:07.581032"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 185"], ["description", "Collection 187 description"], ["publish_on", "2016-05-06 10:06:07.578894"], ["created_at", "2016-05-06 10:07:07.582538"], ["updated_at", "2016-05-06 10:07:07.582538"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 186"], ["description", "Collection 188 description"], ["publish_on", "2016-05-06 10:06:07.578894"], ["created_at", "2016-05-06 10:07:07.584014"], ["updated_at", "2016-05-06 10:07:07.584014"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 187"], ["description", "Collection 189 description"], ["publish_on", "2016-05-06 10:06:07.578894"], ["created_at", "2016-05-06 10:07:07.585473"], ["updated_at", "2016-05-06 10:07:07.585473"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 188"], ["description", "Collection 190 description"], ["publish_on", "2016-05-06 10:06:07.578894"], ["created_at", "2016-05-06 10:07:07.586943"], ["updated_at", "2016-05-06 10:07:07.586943"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 189"], ["description", "Collection 191 description"], ["publish_on", "2016-05-06 10:06:07.578894"], ["created_at", "2016-05-06 10:07:07.588831"], ["updated_at", "2016-05-06 10:07:07.588831"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 190"], ["description", "Collection 192 description"], ["publish_on", "2016-05-06 10:06:07.578894"], ["created_at", "2016-05-06 10:07:07.590991"], ["updated_at", "2016-05-06 10:07:07.590991"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 191"], ["description", "Collection 193 description"], ["publish_on", "2016-05-06 10:06:07.578894"], ["created_at", "2016-05-06 10:07:07.593894"], ["updated_at", "2016-05-06 10:07:07.593894"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 192"], ["description", "Collection 194 description"], ["publish_on", "2016-05-06 10:06:07.578894"], ["created_at", "2016-05-06 10:07:07.596003"], ["updated_at", "2016-05-06 10:07:07.596003"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.4ms)[0m  [1mSELECT "collections".* FROM "collections" WHERE "collections"."publish_on" IS NULL AND ("collections"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-06 10:07:07.597444')[0m
  [1m[35mMagazCore::Collection Load (0.2ms)[0m  SELECT "collections".* FROM "collections" WHERE (publish_on >= '2016-05-06 10:07:07.599482') AND "collections"."published_at" IS NULL
  [1m[36mMagazCore::Collection Load (0.1ms)[0m  [1mSELECT "collections".* FROM "collections" WHERE (publish_on <= '2016-05-06 10:07:07.600451') AND "collections"."published_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
MagazCore::CollectionTest: test_worker_created
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Collection 193"], ["description", "Collection 195 description"], ["created_at", "2016-05-06 10:07:07.604724"], ["updated_at", "2016-05-06 10:07:07.604724"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 194"], ["description", "Collection 196 description"], ["published_at", "2016-05-06 10:06:07.606124"], ["created_at", "2016-05-06 10:07:07.606737"], ["updated_at", "2016-05-06 10:07:07.606737"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 195"], ["description", "Collection 197 description"], ["published_at", "2016-05-06 10:06:07.606124"], ["created_at", "2016-05-06 10:07:07.608313"], ["updated_at", "2016-05-06 10:07:07.608313"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 196"], ["description", "Collection 198 description"], ["published_at", "2016-05-06 10:06:07.606124"], ["created_at", "2016-05-06 10:07:07.609657"], ["updated_at", "2016-05-06 10:07:07.609657"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 197"], ["description", "Collection 199 description"], ["published_at", "2016-05-06 10:06:07.606124"], ["created_at", "2016-05-06 10:07:07.610993"], ["updated_at", "2016-05-06 10:07:07.610993"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 198"], ["description", "Collection 200 description"], ["published_at", "2016-05-06 10:06:07.606124"], ["created_at", "2016-05-06 10:07:07.612329"], ["updated_at", "2016-05-06 10:07:07.612329"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 199"], ["description", "Collection 201 description"], ["published_at", "2016-05-06 10:06:07.606124"], ["created_at", "2016-05-06 10:07:07.614514"], ["updated_at", "2016-05-06 10:07:07.614514"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 200"], ["description", "Collection 202 description"], ["published_at", "2016-05-06 10:06:07.606124"], ["created_at", "2016-05-06 10:07:07.616551"], ["updated_at", "2016-05-06 10:07:07.616551"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 201"], ["description", "Collection 203 description"], ["published_at", "2016-05-06 10:06:07.606124"], ["created_at", "2016-05-06 10:07:07.618508"], ["updated_at", "2016-05-06 10:07:07.618508"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 202"], ["description", "Collection 204 description"], ["published_at", "2016-05-06 10:06:07.606124"], ["created_at", "2016-05-06 10:07:07.620461"], ["updated_at", "2016-05-06 10:07:07.620461"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 203"], ["description", "Collection 205 description"], ["published_at", "2016-05-06 10:06:07.606124"], ["created_at", "2016-05-06 10:07:07.622360"], ["updated_at", "2016-05-06 10:07:07.622360"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 204"], ["description", "Collection 206 description"], ["publish_on", "2016-05-07 10:07:07.623609"], ["created_at", "2016-05-06 10:07:07.624305"], ["updated_at", "2016-05-06 10:07:07.624305"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 205"], ["description", "Collection 207 description"], ["publish_on", "2016-05-07 10:07:07.623609"], ["created_at", "2016-05-06 10:07:07.626055"], ["updated_at", "2016-05-06 10:07:07.626055"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 206"], ["description", "Collection 208 description"], ["publish_on", "2016-05-07 10:07:07.623609"], ["created_at", "2016-05-06 10:07:07.627754"], ["updated_at", "2016-05-06 10:07:07.627754"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 207"], ["description", "Collection 209 description"], ["publish_on", "2016-05-07 10:07:07.623609"], ["created_at", "2016-05-06 10:07:07.629208"], ["updated_at", "2016-05-06 10:07:07.629208"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 208"], ["description", "Collection 210 description"], ["publish_on", "2016-05-07 10:07:07.623609"], ["created_at", "2016-05-06 10:07:07.630644"], ["updated_at", "2016-05-06 10:07:07.630644"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 209"], ["description", "Collection 211 description"], ["publish_on", "2016-05-07 10:07:07.623609"], ["created_at", "2016-05-06 10:07:07.632068"], ["updated_at", "2016-05-06 10:07:07.632068"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 210"], ["description", "Collection 212 description"], ["publish_on", "2016-05-07 10:07:07.623609"], ["created_at", "2016-05-06 10:07:07.633526"], ["updated_at", "2016-05-06 10:07:07.633526"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 211"], ["description", "Collection 213 description"], ["publish_on", "2016-05-07 10:07:07.623609"], ["created_at", "2016-05-06 10:07:07.634959"], ["updated_at", "2016-05-06 10:07:07.634959"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 212"], ["description", "Collection 214 description"], ["publish_on", "2016-05-07 10:07:07.623609"], ["created_at", "2016-05-06 10:07:07.636400"], ["updated_at", "2016-05-06 10:07:07.636400"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 213"], ["description", "Collection 215 description"], ["publish_on", "2016-05-07 10:07:07.623609"], ["created_at", "2016-05-06 10:07:07.637899"], ["updated_at", "2016-05-06 10:07:07.637899"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 214"], ["description", "Collection 216 description"], ["publish_on", "2016-05-06 10:06:07.638892"], ["created_at", "2016-05-06 10:07:07.639584"], ["updated_at", "2016-05-06 10:07:07.639584"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 215"], ["description", "Collection 217 description"], ["publish_on", "2016-05-06 10:06:07.638892"], ["created_at", "2016-05-06 10:07:07.641136"], ["updated_at", "2016-05-06 10:07:07.641136"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 216"], ["description", "Collection 218 description"], ["publish_on", "2016-05-06 10:06:07.638892"], ["created_at", "2016-05-06 10:07:07.642740"], ["updated_at", "2016-05-06 10:07:07.642740"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 217"], ["description", "Collection 219 description"], ["publish_on", "2016-05-06 10:06:07.638892"], ["created_at", "2016-05-06 10:07:07.644409"], ["updated_at", "2016-05-06 10:07:07.644409"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 218"], ["description", "Collection 220 description"], ["publish_on", "2016-05-06 10:06:07.638892"], ["created_at", "2016-05-06 10:07:07.645961"], ["updated_at", "2016-05-06 10:07:07.645961"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 219"], ["description", "Collection 221 description"], ["publish_on", "2016-05-06 10:06:07.638892"], ["created_at", "2016-05-06 10:07:07.647492"], ["updated_at", "2016-05-06 10:07:07.647492"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 220"], ["description", "Collection 222 description"], ["publish_on", "2016-05-06 10:06:07.638892"], ["created_at", "2016-05-06 10:07:07.648892"], ["updated_at", "2016-05-06 10:07:07.648892"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 221"], ["description", "Collection 223 description"], ["publish_on", "2016-05-06 10:06:07.638892"], ["created_at", "2016-05-06 10:07:07.650323"], ["updated_at", "2016-05-06 10:07:07.650323"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 222"], ["description", "Collection 224 description"], ["publish_on", "2016-05-06 10:06:07.638892"], ["created_at", "2016-05-06 10:07:07.651762"], ["updated_at", "2016-05-06 10:07:07.651762"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 223"], ["description", "Collection 225 description"], ["publish_on", "2016-05-06 10:06:07.638892"], ["created_at", "2016-05-06 10:07:07.653186"], ["updated_at", "2016-05-06 10:07:07.653186"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "collections" SET "publish_on" = ?, "updated_at" = ? WHERE "collections"."id" = ?  [["publish_on", "2016-05-08 10:07:07.654187"], ["updated_at", "2016-05-06 10:07:07.654655"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::EnableEuDigitalGoodsTest: test_should_create_new_default_collection_for_shop
------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:07.671963"], ["updated_at", "2016-05-06 10:07:07.671963"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "handle1"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Collection 224"], ["description", "Collection 226 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:07.675479"], ["updated_at", "2016-05-06 10:07:07.675479"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "handle2"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Collection 225"], ["description", "Collection 227 description"], ["shop_id", 1], ["handle", "handle2"], ["slug", "handle2"], ["created_at", "2016-05-06 10:07:07.678582"], ["updated_at", "2016-05-06 10:07:07.678582"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Collection Load (0.1ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ? LIMIT 1[0m  [["shop_id", 1], ["name", "New name"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New name"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:07.683267"], ["updated_at", "2016-05-06 10:07:07.683267"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "shops" SET "eu_digital_goods_collection_id" = ?, "updated_at" = ? WHERE "shops"."id" = ?[0m  [["eu_digital_goods_collection_id", 3], ["updated_at", "2016-05-06 10:07:07.685573"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::EnableEuDigitalGoodsTest: test_should_not_update_shop_default_collection_with_blank_name
------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:07.691250"], ["updated_at", "2016-05-06 10:07:07.691250"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "handle1"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Collection 226"], ["description", "Collection 228 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:07.695116"], ["updated_at", "2016-05-06 10:07:07.695116"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "handle2"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Collection 227"], ["description", "Collection 229 description"], ["shop_id", 1], ["handle", "handle2"], ["slug", "handle2"], ["created_at", "2016-05-06 10:07:07.698658"], ["updated_at", "2016-05-06 10:07:07.698658"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::EnableEuDigitalGoodsTest: test_should_update_shop_default_collection_with_valid_params
----------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:07.705972"], ["updated_at", "2016-05-06 10:07:07.705972"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "handle1"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Collection 228"], ["description", "Collection 230 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:07.709100"], ["updated_at", "2016-05-06 10:07:07.709100"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "handle2"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Collection 229"], ["description", "Collection 231 description"], ["shop_id", 1], ["handle", "handle2"], ["slug", "handle2"], ["created_at", "2016-05-06 10:07:07.712249"], ["updated_at", "2016-05-06 10:07:07.712249"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Collection Load (0.1ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ? LIMIT 1[0m  [["shop_id", 1], ["name", "Collection 228"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ? LIMIT 1  [["shop_id", 1], ["name", "Collection 228"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "shops" SET "eu_digital_goods_collection_id" = ?, "updated_at" = ? WHERE "shops"."id" = ?[0m  [["eu_digital_goods_collection_id", 1], ["updated_at", "2016-05-06 10:07:07.716154"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
MagazCore::PageTest: test_basic_visibility_functionality
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "pages" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Title 3"], ["content", "Content 3"], ["created_at", "2016-05-06 10:07:07.719830"], ["updated_at", "2016-05-06 10:07:07.719830"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 4"], ["content", "Content 4"], ["published_at", "2016-05-06 10:06:07.720922"], ["created_at", "2016-05-06 10:07:07.721523"], ["updated_at", "2016-05-06 10:07:07.721523"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 5"], ["content", "Content 5"], ["published_at", "2016-05-06 10:06:07.720922"], ["created_at", "2016-05-06 10:07:07.723019"], ["updated_at", "2016-05-06 10:07:07.723019"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 6"], ["content", "Content 6"], ["published_at", "2016-05-06 10:06:07.720922"], ["created_at", "2016-05-06 10:07:07.724456"], ["updated_at", "2016-05-06 10:07:07.724456"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 7"], ["content", "Content 7"], ["published_at", "2016-05-06 10:06:07.720922"], ["created_at", "2016-05-06 10:07:07.726031"], ["updated_at", "2016-05-06 10:07:07.726031"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 8"], ["content", "Content 8"], ["published_at", "2016-05-06 10:06:07.720922"], ["created_at", "2016-05-06 10:07:07.727707"], ["updated_at", "2016-05-06 10:07:07.727707"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 9"], ["content", "Content 9"], ["published_at", "2016-05-06 10:06:07.720922"], ["created_at", "2016-05-06 10:07:07.729532"], ["updated_at", "2016-05-06 10:07:07.729532"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 10"], ["content", "Content 10"], ["published_at", "2016-05-06 10:06:07.720922"], ["created_at", "2016-05-06 10:07:07.731035"], ["updated_at", "2016-05-06 10:07:07.731035"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 11"], ["content", "Content 11"], ["published_at", "2016-05-06 10:06:07.720922"], ["created_at", "2016-05-06 10:07:07.732518"], ["updated_at", "2016-05-06 10:07:07.732518"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 12"], ["content", "Content 12"], ["published_at", "2016-05-06 10:06:07.720922"], ["created_at", "2016-05-06 10:07:07.734008"], ["updated_at", "2016-05-06 10:07:07.734008"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 13"], ["content", "Content 13"], ["published_at", "2016-05-06 10:06:07.720922"], ["created_at", "2016-05-06 10:07:07.735403"], ["updated_at", "2016-05-06 10:07:07.735403"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 14"], ["content", "Content 14"], ["publish_on", "2016-05-07 10:07:07.736260"], ["created_at", "2016-05-06 10:07:07.736891"], ["updated_at", "2016-05-06 10:07:07.736891"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 15"], ["content", "Content 15"], ["publish_on", "2016-05-07 10:07:07.736260"], ["created_at", "2016-05-06 10:07:07.738585"], ["updated_at", "2016-05-06 10:07:07.738585"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 16"], ["content", "Content 16"], ["publish_on", "2016-05-07 10:07:07.736260"], ["created_at", "2016-05-06 10:07:07.740260"], ["updated_at", "2016-05-06 10:07:07.740260"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 17"], ["content", "Content 17"], ["publish_on", "2016-05-07 10:07:07.736260"], ["created_at", "2016-05-06 10:07:07.741865"], ["updated_at", "2016-05-06 10:07:07.741865"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 18"], ["content", "Content 18"], ["publish_on", "2016-05-07 10:07:07.736260"], ["created_at", "2016-05-06 10:07:07.744080"], ["updated_at", "2016-05-06 10:07:07.744080"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 19"], ["content", "Content 19"], ["publish_on", "2016-05-07 10:07:07.736260"], ["created_at", "2016-05-06 10:07:07.745756"], ["updated_at", "2016-05-06 10:07:07.745756"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 20"], ["content", "Content 20"], ["publish_on", "2016-05-07 10:07:07.736260"], ["created_at", "2016-05-06 10:07:07.747377"], ["updated_at", "2016-05-06 10:07:07.747377"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 21"], ["content", "Content 21"], ["publish_on", "2016-05-07 10:07:07.736260"], ["created_at", "2016-05-06 10:07:07.748924"], ["updated_at", "2016-05-06 10:07:07.748924"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 22"], ["content", "Content 22"], ["publish_on", "2016-05-07 10:07:07.736260"], ["created_at", "2016-05-06 10:07:07.750430"], ["updated_at", "2016-05-06 10:07:07.750430"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 23"], ["content", "Content 23"], ["publish_on", "2016-05-07 10:07:07.736260"], ["created_at", "2016-05-06 10:07:07.751926"], ["updated_at", "2016-05-06 10:07:07.751926"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 24"], ["content", "Content 24"], ["publish_on", "2016-05-06 10:06:07.752903"], ["created_at", "2016-05-06 10:07:07.753444"], ["updated_at", "2016-05-06 10:07:07.753444"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 25"], ["content", "Content 25"], ["publish_on", "2016-05-06 10:06:07.752903"], ["created_at", "2016-05-06 10:07:07.754950"], ["updated_at", "2016-05-06 10:07:07.754950"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 26"], ["content", "Content 26"], ["publish_on", "2016-05-06 10:06:07.752903"], ["created_at", "2016-05-06 10:07:07.756421"], ["updated_at", "2016-05-06 10:07:07.756421"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 27"], ["content", "Content 27"], ["publish_on", "2016-05-06 10:06:07.752903"], ["created_at", "2016-05-06 10:07:07.757924"], ["updated_at", "2016-05-06 10:07:07.757924"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 28"], ["content", "Content 28"], ["publish_on", "2016-05-06 10:06:07.752903"], ["created_at", "2016-05-06 10:07:07.759425"], ["updated_at", "2016-05-06 10:07:07.759425"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 29"], ["content", "Content 29"], ["publish_on", "2016-05-06 10:06:07.752903"], ["created_at", "2016-05-06 10:07:07.761002"], ["updated_at", "2016-05-06 10:07:07.761002"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 30"], ["content", "Content 30"], ["publish_on", "2016-05-06 10:06:07.752903"], ["created_at", "2016-05-06 10:07:07.762574"], ["updated_at", "2016-05-06 10:07:07.762574"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 31"], ["content", "Content 31"], ["publish_on", "2016-05-06 10:06:07.752903"], ["created_at", "2016-05-06 10:07:07.764136"], ["updated_at", "2016-05-06 10:07:07.764136"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 32"], ["content", "Content 32"], ["publish_on", "2016-05-06 10:06:07.752903"], ["created_at", "2016-05-06 10:07:07.765666"], ["updated_at", "2016-05-06 10:07:07.765666"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 33"], ["content", "Content 33"], ["publish_on", "2016-05-06 10:06:07.752903"], ["created_at", "2016-05-06 10:07:07.767166"], ["updated_at", "2016-05-06 10:07:07.767166"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "pages" SET "publish_on" = ?, "updated_at" = ? WHERE "pages"."id" = ?[0m  [["publish_on", "2016-05-08 10:07:07.768854"], ["updated_at", "2016-05-06 10:07:07.769200"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "pages" SET "publish_on" = ?, "published_at" = ?, "updated_at" = ? WHERE "pages"."id" = ?  [["publish_on", nil], ["published_at", "2016-05-04 10:07:07.770278"], ["updated_at", "2016-05-06 10:07:07.770620"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------
MagazCore::PageTest: test_two_pages_with_same_handle_and_different_shops
------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "pages" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Title 34"], ["content", "Content 34"], ["created_at", "2016-05-06 10:07:07.774175"], ["updated_at", "2016-05-06 10:07:07.774175"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 35"], ["content", "Content 35"], ["published_at", "2016-05-06 10:06:07.775244"], ["created_at", "2016-05-06 10:07:07.775835"], ["updated_at", "2016-05-06 10:07:07.775835"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 36"], ["content", "Content 36"], ["published_at", "2016-05-06 10:06:07.775244"], ["created_at", "2016-05-06 10:07:07.777453"], ["updated_at", "2016-05-06 10:07:07.777453"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 37"], ["content", "Content 37"], ["published_at", "2016-05-06 10:06:07.775244"], ["created_at", "2016-05-06 10:07:07.778850"], ["updated_at", "2016-05-06 10:07:07.778850"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 38"], ["content", "Content 38"], ["published_at", "2016-05-06 10:06:07.775244"], ["created_at", "2016-05-06 10:07:07.780149"], ["updated_at", "2016-05-06 10:07:07.780149"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 39"], ["content", "Content 39"], ["published_at", "2016-05-06 10:06:07.775244"], ["created_at", "2016-05-06 10:07:07.781506"], ["updated_at", "2016-05-06 10:07:07.781506"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 40"], ["content", "Content 40"], ["published_at", "2016-05-06 10:06:07.775244"], ["created_at", "2016-05-06 10:07:07.783479"], ["updated_at", "2016-05-06 10:07:07.783479"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 41"], ["content", "Content 41"], ["published_at", "2016-05-06 10:06:07.775244"], ["created_at", "2016-05-06 10:07:07.785697"], ["updated_at", "2016-05-06 10:07:07.785697"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 42"], ["content", "Content 42"], ["published_at", "2016-05-06 10:06:07.775244"], ["created_at", "2016-05-06 10:07:07.787743"], ["updated_at", "2016-05-06 10:07:07.787743"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 43"], ["content", "Content 43"], ["published_at", "2016-05-06 10:06:07.775244"], ["created_at", "2016-05-06 10:07:07.789727"], ["updated_at", "2016-05-06 10:07:07.789727"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 44"], ["content", "Content 44"], ["published_at", "2016-05-06 10:06:07.775244"], ["created_at", "2016-05-06 10:07:07.791781"], ["updated_at", "2016-05-06 10:07:07.791781"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 45"], ["content", "Content 45"], ["publish_on", "2016-05-07 10:07:07.792959"], ["created_at", "2016-05-06 10:07:07.793819"], ["updated_at", "2016-05-06 10:07:07.793819"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 46"], ["content", "Content 46"], ["publish_on", "2016-05-07 10:07:07.792959"], ["created_at", "2016-05-06 10:07:07.795646"], ["updated_at", "2016-05-06 10:07:07.795646"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 47"], ["content", "Content 47"], ["publish_on", "2016-05-07 10:07:07.792959"], ["created_at", "2016-05-06 10:07:07.797438"], ["updated_at", "2016-05-06 10:07:07.797438"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 48"], ["content", "Content 48"], ["publish_on", "2016-05-07 10:07:07.792959"], ["created_at", "2016-05-06 10:07:07.799011"], ["updated_at", "2016-05-06 10:07:07.799011"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 49"], ["content", "Content 49"], ["publish_on", "2016-05-07 10:07:07.792959"], ["created_at", "2016-05-06 10:07:07.800531"], ["updated_at", "2016-05-06 10:07:07.800531"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 50"], ["content", "Content 50"], ["publish_on", "2016-05-07 10:07:07.792959"], ["created_at", "2016-05-06 10:07:07.802066"], ["updated_at", "2016-05-06 10:07:07.802066"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 51"], ["content", "Content 51"], ["publish_on", "2016-05-07 10:07:07.792959"], ["created_at", "2016-05-06 10:07:07.803620"], ["updated_at", "2016-05-06 10:07:07.803620"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 52"], ["content", "Content 52"], ["publish_on", "2016-05-07 10:07:07.792959"], ["created_at", "2016-05-06 10:07:07.805194"], ["updated_at", "2016-05-06 10:07:07.805194"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 53"], ["content", "Content 53"], ["publish_on", "2016-05-07 10:07:07.792959"], ["created_at", "2016-05-06 10:07:07.806783"], ["updated_at", "2016-05-06 10:07:07.806783"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 54"], ["content", "Content 54"], ["publish_on", "2016-05-07 10:07:07.792959"], ["created_at", "2016-05-06 10:07:07.808406"], ["updated_at", "2016-05-06 10:07:07.808406"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 55"], ["content", "Content 55"], ["publish_on", "2016-05-06 10:06:07.809550"], ["created_at", "2016-05-06 10:07:07.810170"], ["updated_at", "2016-05-06 10:07:07.810170"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 56"], ["content", "Content 56"], ["publish_on", "2016-05-06 10:06:07.809550"], ["created_at", "2016-05-06 10:07:07.811775"], ["updated_at", "2016-05-06 10:07:07.811775"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 57"], ["content", "Content 57"], ["publish_on", "2016-05-06 10:06:07.809550"], ["created_at", "2016-05-06 10:07:07.813367"], ["updated_at", "2016-05-06 10:07:07.813367"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 58"], ["content", "Content 58"], ["publish_on", "2016-05-06 10:06:07.809550"], ["created_at", "2016-05-06 10:07:07.814944"], ["updated_at", "2016-05-06 10:07:07.814944"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 59"], ["content", "Content 59"], ["publish_on", "2016-05-06 10:06:07.809550"], ["created_at", "2016-05-06 10:07:07.816508"], ["updated_at", "2016-05-06 10:07:07.816508"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 60"], ["content", "Content 60"], ["publish_on", "2016-05-06 10:06:07.809550"], ["created_at", "2016-05-06 10:07:07.818078"], ["updated_at", "2016-05-06 10:07:07.818078"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 61"], ["content", "Content 61"], ["publish_on", "2016-05-06 10:06:07.809550"], ["created_at", "2016-05-06 10:07:07.819601"], ["updated_at", "2016-05-06 10:07:07.819601"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 62"], ["content", "Content 62"], ["publish_on", "2016-05-06 10:06:07.809550"], ["created_at", "2016-05-06 10:07:07.821232"], ["updated_at", "2016-05-06 10:07:07.821232"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 63"], ["content", "Content 63"], ["publish_on", "2016-05-06 10:06:07.809550"], ["created_at", "2016-05-06 10:07:07.822726"], ["updated_at", "2016-05-06 10:07:07.822726"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 64"], ["content", "Content 64"], ["publish_on", "2016-05-06 10:06:07.809550"], ["created_at", "2016-05-06 10:07:07.824273"], ["updated_at", "2016-05-06 10:07:07.824273"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-06 10:07:07.827538"], ["updated_at", "2016-05-06 10:07:07.827538"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop2' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop2"], ["subdomain", "shop2"], ["created_at", "2016-05-06 10:07:07.830673"], ["updated_at", "2016-05-06 10:07:07.830673"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Exists (0.1ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", "page-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "page"], ["content", "Content 65"], ["handle", "page-handle"], ["shop_id", 1], ["slug", "page-handle"], ["created_at", "2016-05-06 10:07:07.835101"], ["updated_at", "2016-05-06 10:07:07.835101"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Exists (0.1ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 2 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", "page-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "page"], ["handle", "page-handle"], ["shop_id", 2], ["slug", "page-handle"], ["created_at", "2016-05-06 10:07:07.838097"], ["updated_at", "2016-05-06 10:07:07.838097"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------
MagazCore::PageTest: test_two_pages_with_same_handle_and_same_shop
------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Title 65"], ["content", "Content 66"], ["created_at", "2016-05-06 10:07:07.842365"], ["updated_at", "2016-05-06 10:07:07.842365"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 66"], ["content", "Content 67"], ["published_at", "2016-05-06 10:06:07.843832"], ["created_at", "2016-05-06 10:07:07.844767"], ["updated_at", "2016-05-06 10:07:07.844767"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 67"], ["content", "Content 68"], ["published_at", "2016-05-06 10:06:07.843832"], ["created_at", "2016-05-06 10:07:07.847570"], ["updated_at", "2016-05-06 10:07:07.847570"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 68"], ["content", "Content 69"], ["published_at", "2016-05-06 10:06:07.843832"], ["created_at", "2016-05-06 10:07:07.849923"], ["updated_at", "2016-05-06 10:07:07.849923"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 69"], ["content", "Content 70"], ["published_at", "2016-05-06 10:06:07.843832"], ["created_at", "2016-05-06 10:07:07.852545"], ["updated_at", "2016-05-06 10:07:07.852545"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 70"], ["content", "Content 71"], ["published_at", "2016-05-06 10:06:07.843832"], ["created_at", "2016-05-06 10:07:07.854921"], ["updated_at", "2016-05-06 10:07:07.854921"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 71"], ["content", "Content 72"], ["published_at", "2016-05-06 10:06:07.843832"], ["created_at", "2016-05-06 10:07:07.857238"], ["updated_at", "2016-05-06 10:07:07.857238"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 72"], ["content", "Content 73"], ["published_at", "2016-05-06 10:06:07.843832"], ["created_at", "2016-05-06 10:07:07.859229"], ["updated_at", "2016-05-06 10:07:07.859229"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 73"], ["content", "Content 74"], ["published_at", "2016-05-06 10:06:07.843832"], ["created_at", "2016-05-06 10:07:07.861171"], ["updated_at", "2016-05-06 10:07:07.861171"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 74"], ["content", "Content 75"], ["published_at", "2016-05-06 10:06:07.843832"], ["created_at", "2016-05-06 10:07:07.862879"], ["updated_at", "2016-05-06 10:07:07.862879"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 75"], ["content", "Content 76"], ["published_at", "2016-05-06 10:06:07.843832"], ["created_at", "2016-05-06 10:07:07.864602"], ["updated_at", "2016-05-06 10:07:07.864602"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 76"], ["content", "Content 77"], ["publish_on", "2016-05-07 10:07:07.865620"], ["created_at", "2016-05-06 10:07:07.866384"], ["updated_at", "2016-05-06 10:07:07.866384"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 77"], ["content", "Content 78"], ["publish_on", "2016-05-07 10:07:07.865620"], ["created_at", "2016-05-06 10:07:07.868211"], ["updated_at", "2016-05-06 10:07:07.868211"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 78"], ["content", "Content 79"], ["publish_on", "2016-05-07 10:07:07.865620"], ["created_at", "2016-05-06 10:07:07.869990"], ["updated_at", "2016-05-06 10:07:07.869990"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 79"], ["content", "Content 80"], ["publish_on", "2016-05-07 10:07:07.865620"], ["created_at", "2016-05-06 10:07:07.871838"], ["updated_at", "2016-05-06 10:07:07.871838"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 80"], ["content", "Content 81"], ["publish_on", "2016-05-07 10:07:07.865620"], ["created_at", "2016-05-06 10:07:07.873632"], ["updated_at", "2016-05-06 10:07:07.873632"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 81"], ["content", "Content 82"], ["publish_on", "2016-05-07 10:07:07.865620"], ["created_at", "2016-05-06 10:07:07.875861"], ["updated_at", "2016-05-06 10:07:07.875861"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 82"], ["content", "Content 83"], ["publish_on", "2016-05-07 10:07:07.865620"], ["created_at", "2016-05-06 10:07:07.878614"], ["updated_at", "2016-05-06 10:07:07.878614"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 83"], ["content", "Content 84"], ["publish_on", "2016-05-07 10:07:07.865620"], ["created_at", "2016-05-06 10:07:07.881293"], ["updated_at", "2016-05-06 10:07:07.881293"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 84"], ["content", "Content 85"], ["publish_on", "2016-05-07 10:07:07.865620"], ["created_at", "2016-05-06 10:07:07.883776"], ["updated_at", "2016-05-06 10:07:07.883776"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 85"], ["content", "Content 86"], ["publish_on", "2016-05-07 10:07:07.865620"], ["created_at", "2016-05-06 10:07:07.886604"], ["updated_at", "2016-05-06 10:07:07.886604"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 86"], ["content", "Content 87"], ["publish_on", "2016-05-06 10:06:07.887993"], ["created_at", "2016-05-06 10:07:07.888852"], ["updated_at", "2016-05-06 10:07:07.888852"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 87"], ["content", "Content 88"], ["publish_on", "2016-05-06 10:06:07.887993"], ["created_at", "2016-05-06 10:07:07.891020"], ["updated_at", "2016-05-06 10:07:07.891020"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 88"], ["content", "Content 89"], ["publish_on", "2016-05-06 10:06:07.887993"], ["created_at", "2016-05-06 10:07:07.893413"], ["updated_at", "2016-05-06 10:07:07.893413"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 89"], ["content", "Content 90"], ["publish_on", "2016-05-06 10:06:07.887993"], ["created_at", "2016-05-06 10:07:07.895937"], ["updated_at", "2016-05-06 10:07:07.895937"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 90"], ["content", "Content 91"], ["publish_on", "2016-05-06 10:06:07.887993"], ["created_at", "2016-05-06 10:07:07.897898"], ["updated_at", "2016-05-06 10:07:07.897898"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 91"], ["content", "Content 92"], ["publish_on", "2016-05-06 10:06:07.887993"], ["created_at", "2016-05-06 10:07:07.899777"], ["updated_at", "2016-05-06 10:07:07.899777"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 92"], ["content", "Content 93"], ["publish_on", "2016-05-06 10:06:07.887993"], ["created_at", "2016-05-06 10:07:07.901635"], ["updated_at", "2016-05-06 10:07:07.901635"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 93"], ["content", "Content 94"], ["publish_on", "2016-05-06 10:06:07.887993"], ["created_at", "2016-05-06 10:07:07.903618"], ["updated_at", "2016-05-06 10:07:07.903618"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 94"], ["content", "Content 95"], ["publish_on", "2016-05-06 10:06:07.887993"], ["created_at", "2016-05-06 10:07:07.905428"], ["updated_at", "2016-05-06 10:07:07.905428"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 95"], ["content", "Content 96"], ["publish_on", "2016-05-06 10:06:07.887993"], ["created_at", "2016-05-06 10:07:07.907196"], ["updated_at", "2016-05-06 10:07:07.907196"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-06 10:07:07.911150"], ["updated_at", "2016-05-06 10:07:07.911150"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", "page-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "page1"], ["content", "Content 97"], ["handle", "page-handle"], ["shop_id", 1], ["slug", "page-handle"], ["created_at", "2016-05-06 10:07:07.915996"], ["updated_at", "2016-05-06 10:07:07.915996"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", "page-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "page2"], ["handle", "page-handle"], ["shop_id", 1], ["slug", "page-handle-78cfbbe7-7327-413c-90d8-66193cb710a4"], ["created_at", "2016-05-06 10:07:07.919581"], ["updated_at", "2016-05-06 10:07:07.919581"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
MagazCore::PageTest: test_visibility_scopes
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "pages" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Title 96"], ["content", "Content 98"], ["created_at", "2016-05-06 10:07:07.925391"], ["updated_at", "2016-05-06 10:07:07.925391"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 97"], ["content", "Content 99"], ["published_at", "2016-05-06 10:06:07.926950"], ["created_at", "2016-05-06 10:07:07.927544"], ["updated_at", "2016-05-06 10:07:07.927544"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 98"], ["content", "Content 100"], ["published_at", "2016-05-06 10:06:07.926950"], ["created_at", "2016-05-06 10:07:07.929348"], ["updated_at", "2016-05-06 10:07:07.929348"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 99"], ["content", "Content 101"], ["published_at", "2016-05-06 10:06:07.926950"], ["created_at", "2016-05-06 10:07:07.930757"], ["updated_at", "2016-05-06 10:07:07.930757"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 100"], ["content", "Content 102"], ["published_at", "2016-05-06 10:06:07.926950"], ["created_at", "2016-05-06 10:07:07.932289"], ["updated_at", "2016-05-06 10:07:07.932289"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 101"], ["content", "Content 103"], ["published_at", "2016-05-06 10:06:07.926950"], ["created_at", "2016-05-06 10:07:07.934062"], ["updated_at", "2016-05-06 10:07:07.934062"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 102"], ["content", "Content 104"], ["published_at", "2016-05-06 10:06:07.926950"], ["created_at", "2016-05-06 10:07:07.935597"], ["updated_at", "2016-05-06 10:07:07.935597"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 103"], ["content", "Content 105"], ["published_at", "2016-05-06 10:06:07.926950"], ["created_at", "2016-05-06 10:07:07.937040"], ["updated_at", "2016-05-06 10:07:07.937040"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 104"], ["content", "Content 106"], ["published_at", "2016-05-06 10:06:07.926950"], ["created_at", "2016-05-06 10:07:07.938642"], ["updated_at", "2016-05-06 10:07:07.938642"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 105"], ["content", "Content 107"], ["published_at", "2016-05-06 10:06:07.926950"], ["created_at", "2016-05-06 10:07:07.940056"], ["updated_at", "2016-05-06 10:07:07.940056"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 106"], ["content", "Content 108"], ["published_at", "2016-05-06 10:06:07.926950"], ["created_at", "2016-05-06 10:07:07.941621"], ["updated_at", "2016-05-06 10:07:07.941621"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 107"], ["content", "Content 109"], ["publish_on", "2016-05-07 10:07:07.942581"], ["created_at", "2016-05-06 10:07:07.943132"], ["updated_at", "2016-05-06 10:07:07.943132"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 108"], ["content", "Content 110"], ["publish_on", "2016-05-07 10:07:07.942581"], ["created_at", "2016-05-06 10:07:07.944850"], ["updated_at", "2016-05-06 10:07:07.944850"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 109"], ["content", "Content 111"], ["publish_on", "2016-05-07 10:07:07.942581"], ["created_at", "2016-05-06 10:07:07.946491"], ["updated_at", "2016-05-06 10:07:07.946491"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 110"], ["content", "Content 112"], ["publish_on", "2016-05-07 10:07:07.942581"], ["created_at", "2016-05-06 10:07:07.948088"], ["updated_at", "2016-05-06 10:07:07.948088"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 111"], ["content", "Content 113"], ["publish_on", "2016-05-07 10:07:07.942581"], ["created_at", "2016-05-06 10:07:07.949681"], ["updated_at", "2016-05-06 10:07:07.949681"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 112"], ["content", "Content 114"], ["publish_on", "2016-05-07 10:07:07.942581"], ["created_at", "2016-05-06 10:07:07.951287"], ["updated_at", "2016-05-06 10:07:07.951287"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 113"], ["content", "Content 115"], ["publish_on", "2016-05-07 10:07:07.942581"], ["created_at", "2016-05-06 10:07:07.952920"], ["updated_at", "2016-05-06 10:07:07.952920"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 114"], ["content", "Content 116"], ["publish_on", "2016-05-07 10:07:07.942581"], ["created_at", "2016-05-06 10:07:07.954557"], ["updated_at", "2016-05-06 10:07:07.954557"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 115"], ["content", "Content 117"], ["publish_on", "2016-05-07 10:07:07.942581"], ["created_at", "2016-05-06 10:07:07.956358"], ["updated_at", "2016-05-06 10:07:07.956358"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 116"], ["content", "Content 118"], ["publish_on", "2016-05-07 10:07:07.942581"], ["created_at", "2016-05-06 10:07:07.958002"], ["updated_at", "2016-05-06 10:07:07.958002"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 117"], ["content", "Content 119"], ["publish_on", "2016-05-06 10:06:07.959112"], ["created_at", "2016-05-06 10:07:07.959997"], ["updated_at", "2016-05-06 10:07:07.959997"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 118"], ["content", "Content 120"], ["publish_on", "2016-05-06 10:06:07.959112"], ["created_at", "2016-05-06 10:07:07.962724"], ["updated_at", "2016-05-06 10:07:07.962724"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 119"], ["content", "Content 121"], ["publish_on", "2016-05-06 10:06:07.959112"], ["created_at", "2016-05-06 10:07:07.965266"], ["updated_at", "2016-05-06 10:07:07.965266"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 120"], ["content", "Content 122"], ["publish_on", "2016-05-06 10:06:07.959112"], ["created_at", "2016-05-06 10:07:07.967734"], ["updated_at", "2016-05-06 10:07:07.967734"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 121"], ["content", "Content 123"], ["publish_on", "2016-05-06 10:06:07.959112"], ["created_at", "2016-05-06 10:07:07.970418"], ["updated_at", "2016-05-06 10:07:07.970418"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 122"], ["content", "Content 124"], ["publish_on", "2016-05-06 10:06:07.959112"], ["created_at", "2016-05-06 10:07:07.973482"], ["updated_at", "2016-05-06 10:07:07.973482"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 123"], ["content", "Content 125"], ["publish_on", "2016-05-06 10:06:07.959112"], ["created_at", "2016-05-06 10:07:07.975687"], ["updated_at", "2016-05-06 10:07:07.975687"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 124"], ["content", "Content 126"], ["publish_on", "2016-05-06 10:06:07.959112"], ["created_at", "2016-05-06 10:07:07.978105"], ["updated_at", "2016-05-06 10:07:07.978105"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 125"], ["content", "Content 127"], ["publish_on", "2016-05-06 10:06:07.959112"], ["created_at", "2016-05-06 10:07:07.980754"], ["updated_at", "2016-05-06 10:07:07.980754"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 126"], ["content", "Content 128"], ["publish_on", "2016-05-06 10:06:07.959112"], ["created_at", "2016-05-06 10:07:07.982825"], ["updated_at", "2016-05-06 10:07:07.982825"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT "pages".* FROM "pages" WHERE "pages"."publish_on" IS NULL AND ("pages"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-06 10:07:07.984168')[0m
  [1m[35mMagazCore::Page Load (0.1ms)[0m  SELECT "pages".* FROM "pages" WHERE (publish_on >= '2016-05-06 10:07:07.985226') AND "pages"."published_at" IS NULL
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT "pages".* FROM "pages" WHERE (publish_on <= '2016-05-06 10:07:07.985957') AND "pages"."published_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MagazCore::PageTest: test_visibility_scopes_and_methods
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pages" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Title 127"], ["content", "Content 129"], ["created_at", "2016-05-06 10:07:07.990716"], ["updated_at", "2016-05-06 10:07:07.990716"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 128"], ["content", "Content 130"], ["published_at", "2016-05-06 10:06:07.992663"], ["created_at", "2016-05-06 10:07:07.993664"], ["updated_at", "2016-05-06 10:07:07.993664"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 129"], ["content", "Content 131"], ["published_at", "2016-05-06 10:06:07.992663"], ["created_at", "2016-05-06 10:07:07.996285"], ["updated_at", "2016-05-06 10:07:07.996285"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 130"], ["content", "Content 132"], ["published_at", "2016-05-06 10:06:07.992663"], ["created_at", "2016-05-06 10:07:07.998956"], ["updated_at", "2016-05-06 10:07:07.998956"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 131"], ["content", "Content 133"], ["published_at", "2016-05-06 10:06:07.992663"], ["created_at", "2016-05-06 10:07:08.001139"], ["updated_at", "2016-05-06 10:07:08.001139"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 132"], ["content", "Content 134"], ["published_at", "2016-05-06 10:06:07.992663"], ["created_at", "2016-05-06 10:07:08.003430"], ["updated_at", "2016-05-06 10:07:08.003430"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 133"], ["content", "Content 135"], ["published_at", "2016-05-06 10:06:07.992663"], ["created_at", "2016-05-06 10:07:08.005542"], ["updated_at", "2016-05-06 10:07:08.005542"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 134"], ["content", "Content 136"], ["published_at", "2016-05-06 10:06:07.992663"], ["created_at", "2016-05-06 10:07:08.007223"], ["updated_at", "2016-05-06 10:07:08.007223"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 135"], ["content", "Content 137"], ["published_at", "2016-05-06 10:06:07.992663"], ["created_at", "2016-05-06 10:07:08.008987"], ["updated_at", "2016-05-06 10:07:08.008987"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 136"], ["content", "Content 138"], ["published_at", "2016-05-06 10:06:07.992663"], ["created_at", "2016-05-06 10:07:08.010373"], ["updated_at", "2016-05-06 10:07:08.010373"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 137"], ["content", "Content 139"], ["published_at", "2016-05-06 10:06:07.992663"], ["created_at", "2016-05-06 10:07:08.011884"], ["updated_at", "2016-05-06 10:07:08.011884"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 138"], ["content", "Content 140"], ["publish_on", "2016-05-07 10:07:08.012907"], ["created_at", "2016-05-06 10:07:08.013452"], ["updated_at", "2016-05-06 10:07:08.013452"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 139"], ["content", "Content 141"], ["publish_on", "2016-05-07 10:07:08.012907"], ["created_at", "2016-05-06 10:07:08.015311"], ["updated_at", "2016-05-06 10:07:08.015311"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 140"], ["content", "Content 142"], ["publish_on", "2016-05-07 10:07:08.012907"], ["created_at", "2016-05-06 10:07:08.017043"], ["updated_at", "2016-05-06 10:07:08.017043"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 141"], ["content", "Content 143"], ["publish_on", "2016-05-07 10:07:08.012907"], ["created_at", "2016-05-06 10:07:08.018562"], ["updated_at", "2016-05-06 10:07:08.018562"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 142"], ["content", "Content 144"], ["publish_on", "2016-05-07 10:07:08.012907"], ["created_at", "2016-05-06 10:07:08.021465"], ["updated_at", "2016-05-06 10:07:08.021465"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 143"], ["content", "Content 145"], ["publish_on", "2016-05-07 10:07:08.012907"], ["created_at", "2016-05-06 10:07:08.022883"], ["updated_at", "2016-05-06 10:07:08.022883"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 144"], ["content", "Content 146"], ["publish_on", "2016-05-07 10:07:08.012907"], ["created_at", "2016-05-06 10:07:08.024418"], ["updated_at", "2016-05-06 10:07:08.024418"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 145"], ["content", "Content 147"], ["publish_on", "2016-05-07 10:07:08.012907"], ["created_at", "2016-05-06 10:07:08.026693"], ["updated_at", "2016-05-06 10:07:08.026693"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 146"], ["content", "Content 148"], ["publish_on", "2016-05-07 10:07:08.012907"], ["created_at", "2016-05-06 10:07:08.028888"], ["updated_at", "2016-05-06 10:07:08.028888"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 147"], ["content", "Content 149"], ["publish_on", "2016-05-07 10:07:08.012907"], ["created_at", "2016-05-06 10:07:08.031100"], ["updated_at", "2016-05-06 10:07:08.031100"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 148"], ["content", "Content 150"], ["publish_on", "2016-05-06 10:06:08.032474"], ["created_at", "2016-05-06 10:07:08.033327"], ["updated_at", "2016-05-06 10:07:08.033327"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 149"], ["content", "Content 151"], ["publish_on", "2016-05-06 10:06:08.032474"], ["created_at", "2016-05-06 10:07:08.035796"], ["updated_at", "2016-05-06 10:07:08.035796"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 150"], ["content", "Content 152"], ["publish_on", "2016-05-06 10:06:08.032474"], ["created_at", "2016-05-06 10:07:08.038222"], ["updated_at", "2016-05-06 10:07:08.038222"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 151"], ["content", "Content 153"], ["publish_on", "2016-05-06 10:06:08.032474"], ["created_at", "2016-05-06 10:07:08.040681"], ["updated_at", "2016-05-06 10:07:08.040681"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 152"], ["content", "Content 154"], ["publish_on", "2016-05-06 10:06:08.032474"], ["created_at", "2016-05-06 10:07:08.042521"], ["updated_at", "2016-05-06 10:07:08.042521"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 153"], ["content", "Content 155"], ["publish_on", "2016-05-06 10:06:08.032474"], ["created_at", "2016-05-06 10:07:08.045448"], ["updated_at", "2016-05-06 10:07:08.045448"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 154"], ["content", "Content 156"], ["publish_on", "2016-05-06 10:06:08.032474"], ["created_at", "2016-05-06 10:07:08.047344"], ["updated_at", "2016-05-06 10:07:08.047344"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 155"], ["content", "Content 157"], ["publish_on", "2016-05-06 10:06:08.032474"], ["created_at", "2016-05-06 10:07:08.048988"], ["updated_at", "2016-05-06 10:07:08.048988"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 156"], ["content", "Content 158"], ["publish_on", "2016-05-06 10:06:08.032474"], ["created_at", "2016-05-06 10:07:08.050785"], ["updated_at", "2016-05-06 10:07:08.050785"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 157"], ["content", "Content 159"], ["publish_on", "2016-05-06 10:06:08.032474"], ["created_at", "2016-05-06 10:07:08.052526"], ["updated_at", "2016-05-06 10:07:08.052526"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT "pages".* FROM "pages" WHERE "pages"."publish_on" IS NULL AND ("pages"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-06 10:07:08.053862')[0m
  [1m[35mMagazCore::Page Load (0.1ms)[0m  SELECT "pages".* FROM "pages" WHERE (publish_on >= '2016-05-06 10:07:08.055179') AND "pages"."published_at" IS NULL
  [1m[36mMagazCore::Page Load (0.3ms)[0m  [1mSELECT "pages".* FROM "pages" WHERE (publish_on <= '2016-05-06 10:07:08.055990') AND "pages"."published_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
MagazCore::PageTest: test_worker_created
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pages" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Title 158"], ["content", "Content 160"], ["created_at", "2016-05-06 10:07:08.073970"], ["updated_at", "2016-05-06 10:07:08.073970"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 159"], ["content", "Content 161"], ["published_at", "2016-05-06 10:06:08.075575"], ["created_at", "2016-05-06 10:07:08.076401"], ["updated_at", "2016-05-06 10:07:08.076401"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 160"], ["content", "Content 162"], ["published_at", "2016-05-06 10:06:08.075575"], ["created_at", "2016-05-06 10:07:08.078502"], ["updated_at", "2016-05-06 10:07:08.078502"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 161"], ["content", "Content 163"], ["published_at", "2016-05-06 10:06:08.075575"], ["created_at", "2016-05-06 10:07:08.080158"], ["updated_at", "2016-05-06 10:07:08.080158"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 162"], ["content", "Content 164"], ["published_at", "2016-05-06 10:06:08.075575"], ["created_at", "2016-05-06 10:07:08.081791"], ["updated_at", "2016-05-06 10:07:08.081791"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 163"], ["content", "Content 165"], ["published_at", "2016-05-06 10:06:08.075575"], ["created_at", "2016-05-06 10:07:08.083325"], ["updated_at", "2016-05-06 10:07:08.083325"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 164"], ["content", "Content 166"], ["published_at", "2016-05-06 10:06:08.075575"], ["created_at", "2016-05-06 10:07:08.084700"], ["updated_at", "2016-05-06 10:07:08.084700"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 165"], ["content", "Content 167"], ["published_at", "2016-05-06 10:06:08.075575"], ["created_at", "2016-05-06 10:07:08.086109"], ["updated_at", "2016-05-06 10:07:08.086109"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 166"], ["content", "Content 168"], ["published_at", "2016-05-06 10:06:08.075575"], ["created_at", "2016-05-06 10:07:08.087685"], ["updated_at", "2016-05-06 10:07:08.087685"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 167"], ["content", "Content 169"], ["published_at", "2016-05-06 10:06:08.075575"], ["created_at", "2016-05-06 10:07:08.089121"], ["updated_at", "2016-05-06 10:07:08.089121"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 168"], ["content", "Content 170"], ["published_at", "2016-05-06 10:06:08.075575"], ["created_at", "2016-05-06 10:07:08.090543"], ["updated_at", "2016-05-06 10:07:08.090543"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 169"], ["content", "Content 171"], ["publish_on", "2016-05-07 10:07:08.091359"], ["created_at", "2016-05-06 10:07:08.091953"], ["updated_at", "2016-05-06 10:07:08.091953"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 170"], ["content", "Content 172"], ["publish_on", "2016-05-07 10:07:08.091359"], ["created_at", "2016-05-06 10:07:08.093442"], ["updated_at", "2016-05-06 10:07:08.093442"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 171"], ["content", "Content 173"], ["publish_on", "2016-05-07 10:07:08.091359"], ["created_at", "2016-05-06 10:07:08.094882"], ["updated_at", "2016-05-06 10:07:08.094882"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 172"], ["content", "Content 174"], ["publish_on", "2016-05-07 10:07:08.091359"], ["created_at", "2016-05-06 10:07:08.096276"], ["updated_at", "2016-05-06 10:07:08.096276"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 173"], ["content", "Content 175"], ["publish_on", "2016-05-07 10:07:08.091359"], ["created_at", "2016-05-06 10:07:08.097672"], ["updated_at", "2016-05-06 10:07:08.097672"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 174"], ["content", "Content 176"], ["publish_on", "2016-05-07 10:07:08.091359"], ["created_at", "2016-05-06 10:07:08.099106"], ["updated_at", "2016-05-06 10:07:08.099106"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 175"], ["content", "Content 177"], ["publish_on", "2016-05-07 10:07:08.091359"], ["created_at", "2016-05-06 10:07:08.100496"], ["updated_at", "2016-05-06 10:07:08.100496"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 176"], ["content", "Content 178"], ["publish_on", "2016-05-07 10:07:08.091359"], ["created_at", "2016-05-06 10:07:08.101928"], ["updated_at", "2016-05-06 10:07:08.101928"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 177"], ["content", "Content 179"], ["publish_on", "2016-05-07 10:07:08.091359"], ["created_at", "2016-05-06 10:07:08.103373"], ["updated_at", "2016-05-06 10:07:08.103373"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 178"], ["content", "Content 180"], ["publish_on", "2016-05-07 10:07:08.091359"], ["created_at", "2016-05-06 10:07:08.104769"], ["updated_at", "2016-05-06 10:07:08.104769"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 179"], ["content", "Content 181"], ["publish_on", "2016-05-06 10:06:08.105706"], ["created_at", "2016-05-06 10:07:08.106269"], ["updated_at", "2016-05-06 10:07:08.106269"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 180"], ["content", "Content 182"], ["publish_on", "2016-05-06 10:06:08.105706"], ["created_at", "2016-05-06 10:07:08.107732"], ["updated_at", "2016-05-06 10:07:08.107732"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 181"], ["content", "Content 183"], ["publish_on", "2016-05-06 10:06:08.105706"], ["created_at", "2016-05-06 10:07:08.109948"], ["updated_at", "2016-05-06 10:07:08.109948"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 182"], ["content", "Content 184"], ["publish_on", "2016-05-06 10:06:08.105706"], ["created_at", "2016-05-06 10:07:08.112499"], ["updated_at", "2016-05-06 10:07:08.112499"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 183"], ["content", "Content 185"], ["publish_on", "2016-05-06 10:06:08.105706"], ["created_at", "2016-05-06 10:07:08.114559"], ["updated_at", "2016-05-06 10:07:08.114559"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 184"], ["content", "Content 186"], ["publish_on", "2016-05-06 10:06:08.105706"], ["created_at", "2016-05-06 10:07:08.116613"], ["updated_at", "2016-05-06 10:07:08.116613"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 185"], ["content", "Content 187"], ["publish_on", "2016-05-06 10:06:08.105706"], ["created_at", "2016-05-06 10:07:08.118662"], ["updated_at", "2016-05-06 10:07:08.118662"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 186"], ["content", "Content 188"], ["publish_on", "2016-05-06 10:06:08.105706"], ["created_at", "2016-05-06 10:07:08.120305"], ["updated_at", "2016-05-06 10:07:08.120305"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 187"], ["content", "Content 189"], ["publish_on", "2016-05-06 10:06:08.105706"], ["created_at", "2016-05-06 10:07:08.122023"], ["updated_at", "2016-05-06 10:07:08.122023"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 188"], ["content", "Content 190"], ["publish_on", "2016-05-06 10:06:08.105706"], ["created_at", "2016-05-06 10:07:08.123537"], ["updated_at", "2016-05-06 10:07:08.123537"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "pages" SET "publish_on" = ?, "updated_at" = ? WHERE "pages"."id" = ?  [["publish_on", "2016-05-08 10:07:08.124556"], ["updated_at", "2016-05-06 10:07:08.124993"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::ChangeTaxOverrideTest: test_should_change_override_with_valid_params
-----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example10' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example10"], ["subdomain", "example10"], ["created_at", "2016-05-06 10:07:08.130759"], ["updated_at", "2016-05-06 10:07:08.130759"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example1.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example1.com"], ["first_name", "First Name 1 "], ["last_name", "Last Name 1"], ["password_salt", "$2a$10$1brJ5KnbsYGTjEn686rfhu"], ["password_digest", "$2a$10$1brJ5KnbsYGTjEn686rfhui9F6vbw4DAALp7NY4NxTM7vtRsY0c.i"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:08.285834"], ["updated_at", "2016-05-06 10:07:08.285834"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "handle1"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Collection 230"], ["description", "Collection 232 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:08.289425"], ["updated_at", "2016-05-06 10:07:08.289425"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "6"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tax_overrides" ("rate", "shipping_country_id") VALUES (?, ?)  [["rate", 3.0], ["shipping_country_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::TaxOverride Load (0.0ms)[0m  SELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "tax_overrides" SET "collection_id" = ?, "rate" = ? WHERE "tax_overrides"."id" = ?  [["collection_id", 1], ["rate", 48.0], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::ChangeTaxOverrideTest: test_should_not_change_override_with_blank_params
---------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example11' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example11"], ["subdomain", "example11"], ["created_at", "2016-05-06 10:07:08.298094"], ["updated_at", "2016-05-06 10:07:08.298094"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example2.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example2.com"], ["first_name", "First Name 2 "], ["last_name", "Last Name 2"], ["password_salt", "$2a$10$SYm/Wn7oaZlYMdIAJ03gie"], ["password_digest", "$2a$10$SYm/Wn7oaZlYMdIAJ03gieRsi0ujfjqn9ddMICf0b4UtR2m/XtsDq"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:08.439263"], ["updated_at", "2016-05-06 10:07:08.439263"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "handle1"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Collection 231"], ["description", "Collection 233 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:08.442266"], ["updated_at", "2016-05-06 10:07:08.442266"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "7"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tax_overrides" ("rate", "shipping_country_id") VALUES (?, ?)  [["rate", 4.0], ["shipping_country_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::DeleteWebhookTest: test_should_delete_webhook_with_valid_ids
-----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example12' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example12"], ["subdomain", "example12"], ["created_at", "2016-05-06 10:07:08.465395"], ["updated_at", "2016-05-06 10:07:08.465395"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:08.475434"], ["updated_at", "2016-05-06 10:07:08.475434"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:08.477679"], ["updated_at", "2016-05-06 10:07:08.477679"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "webhooks"
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Webhook Load (0.1ms)[0m  SELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."shop_id" = ? AND "webhooks"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "webhooks" WHERE "webhooks"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Webhook Load (0.1ms)[0m  SELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Webhook Load (0.0ms)[0m  [1mSELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "webhooks"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::DeleteWebhookTest: test_should_not_delete_webhook_with_blank_ids
---------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example13' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example13"], ["subdomain", "example13"], ["created_at", "2016-05-06 10:07:08.485822"], ["updated_at", "2016-05-06 10:07:08.485822"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:08.487748"], ["updated_at", "2016-05-06 10:07:08.487748"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:08.489439"], ["updated_at", "2016-05-06 10:07:08.489439"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "webhooks"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::AddUserTest: test_should_create_user_with_some_blank_params
-------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:08.498610"], ["updated_at", "2016-05-06 10:07:08.498610"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example3.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example3.com"], ["first_name", "First Name 3 "], ["last_name", "Last Name 3"], ["password_salt", "$2a$10$PMGJFvcVnMXbtpe15qN31O"], ["password_digest", "$2a$10$PMGJFvcVnMXbtpe15qN31OirBgFD8U0PF5aSDJVLeb8cSUCM2g5Q6"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:08.634771"], ["updated_at", "2016-05-06 10:07:08.634771"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1  [["shop_id", 1], ["email", "new@email.com"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'new@email.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("shop_id", "first_name", "last_name", "email", "permissions", "account_owner", "password_salt", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["first_name", "New first_name"], ["last_name", "New last_name"], ["email", "new@email.com"], ["permissions", nil], ["account_owner", "t"], ["password_salt", "$2a$10$Ji3Af8/.GwTiDi3OsCseHe"], ["password_digest", "$2a$10$Ji3Af8/.GwTiDi3OsCseHenEdT1ZAfzz8jMzmk9XoM.KaUxS8EEMq"], ["created_at", "2016-05-06 10:07:08.712602"], ["updated_at", "2016-05-06 10:07:08.712602"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------
MagazCore::AdminServices::User::AddUserTest: test_should_create_user_with_valid_params
--------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:08.717254"], ["updated_at", "2016-05-06 10:07:08.717254"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example4.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example4.com"], ["first_name", "First Name 4 "], ["last_name", "Last Name 4"], ["password_salt", "$2a$10$FfKORgN0ftNgJ4quZkb6i."], ["password_digest", "$2a$10$FfKORgN0ftNgJ4quZkb6i..3QZGTKimS5Vrdg9Xhp.WiGLTJX4FUG"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:08.854773"], ["updated_at", "2016-05-06 10:07:08.854773"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1  [["shop_id", 1], ["email", "new@email.com"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'new@email.com' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("shop_id", "first_name", "last_name", "email", "permissions", "account_owner", "password_salt", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["first_name", "New first_name"], ["last_name", "New last_name"], ["email", "new@email.com"], ["permissions", "[\"God\", \"Mode\"]"], ["account_owner", "t"], ["password_salt", "$2a$10$cMoVcU3vuzFMhg0CeBgOXO"], ["password_digest", "$2a$10$cMoVcU3vuzFMhg0CeBgOXOgeSf7O1JHML/Z4Gse0eMCX20fen9daq"], ["created_at", "2016-05-06 10:07:08.922634"], ["updated_at", "2016-05-06 10:07:08.922634"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::AddUserTest: test_should_not_create_user_with_blank_params
------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:08.930329"], ["updated_at", "2016-05-06 10:07:08.930329"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example5.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example5.com"], ["first_name", "First Name 5 "], ["last_name", "Last Name 5"], ["password_salt", "$2a$10$JDS9GKYzxu5Padb/y8InIO"], ["password_digest", "$2a$10$JDS9GKYzxu5Padb/y8InIO5RGBhMCt5tDUTTbQxmV4Kgp2skMoBFu"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:09.072630"], ["updated_at", "2016-05-06 10:07:09.072630"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::AddUserTest: test_should_not_create_user_with_existing_email
--------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:09.086513"], ["updated_at", "2016-05-06 10:07:09.086513"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example6.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example6.com"], ["first_name", "First Name 6 "], ["last_name", "Last Name 6"], ["password_salt", "$2a$10$65cmJyO3gYzgLZKNxUlBqu"], ["password_digest", "$2a$10$65cmJyO3gYzgLZKNxUlBqu2A/AQ5t0OGrOflcrpNo6Lj5WRyA5lGa"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:09.223630"], ["updated_at", "2016-05-06 10:07:09.223630"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1[0m  [["shop_id", 1], ["email", "staff_user@example6.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1[0m  [["shop_id", 1], ["email", "staff_user@example6.com"]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::AddUserTest: test_should_not_create_user_with_invalid_email
-------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:09.232258"], ["updated_at", "2016-05-06 10:07:09.232258"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example7.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example7.com"], ["first_name", "First Name 7 "], ["last_name", "Last Name 7"], ["password_salt", "$2a$10$6bE1X2MA.fPNvK.flZfvBu"], ["password_digest", "$2a$10$6bE1X2MA.fPNvK.flZfvBuOOjdMN2KyVMoFFJS7BLc6JwUBV.VY3m"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:09.370068"], ["updated_at", "2016-05-06 10:07:09.370068"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1[0m  [["shop_id", 1], ["email", "email"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1[0m  [["shop_id", 1], ["email", "email"]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::ChangeBlogTest: test_should_not_update_blog_with_existing_handle
------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:09.379949"], ["updated_at", "2016-05-06 10:07:09.379949"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 1"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:09.389731"], ["updated_at", "2016-05-06 10:07:09.389731"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.2ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "handle"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 2"], ["shop_id", 1], ["handle", "handle"], ["slug", "handle"], ["created_at", "2016-05-06 10:07:09.394886"], ["updated_at", "2016-05-06 10:07:09.394886"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.1ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.2ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "some title"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?  [["shop_id", 1], ["handle", "handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?[0m  [["shop_id", 1], ["title", "some title"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?[0m  [["shop_id", 1], ["handle", "handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::ChangeBlogTest: test_should_not_update_blog_with_existing_title
-----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:09.416114"], ["updated_at", "2016-05-06 10:07:09.416114"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 3"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:09.418023"], ["updated_at", "2016-05-06 10:07:09.418023"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", "handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "Blog 4"], ["shop_id", 1], ["handle", "handle"], ["slug", "handle"], ["created_at", "2016-05-06 10:07:09.420297"], ["updated_at", "2016-05-06 10:07:09.420297"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?[0m  [["shop_id", 1], ["title", "Blog 4"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?[0m  [["shop_id", 1], ["handle", "ChangedC handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "Blog 4"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?  [["shop_id", 1], ["handle", "ChangedC handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::ChangeBlogTest: test_should_update_blog_with_some_blank_params
----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:09.437685"], ["updated_at", "2016-05-06 10:07:09.437685"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 5"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:09.440169"], ["updated_at", "2016-05-06 10:07:09.440169"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.1ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 6"], ["shop_id", 1], ["handle", "handle"], ["slug", "handle"], ["created_at", "2016-05-06 10:07:09.443331"], ["updated_at", "2016-05-06 10:07:09.443331"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.1ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "2"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 2]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "2"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 2]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "2"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 2]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" != ?) AND "blogs"."slug" = ? LIMIT 1[0m  [["id", 2], ["slug", ""]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "blogs" SET "page_title" = ?, "handle" = ?, "meta_description" = ?, "slug" = ?, "updated_at" = ? WHERE "blogs"."id" = ?  [["page_title", ""], ["handle", ""], ["meta_description", ""], ["slug", ""], ["updated_at", "2016-05-06 10:07:09.450862"], ["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "2"]]
  [1m[35mMagazCore::Blog Load (0.1ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 2]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "2"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 2]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::ChangeBlogTest: test_should_update_blog_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:09.457718"], ["updated_at", "2016-05-06 10:07:09.457718"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 7"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:09.459573"], ["updated_at", "2016-05-06 10:07:09.459573"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 8"], ["shop_id", 1], ["handle", "handle"], ["slug", "handle"], ["created_at", "2016-05-06 10:07:09.461966"], ["updated_at", "2016-05-06 10:07:09.461966"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.1ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "Changed title"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?  [["shop_id", 1], ["handle", "Changed handle"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" != ?) AND "blogs"."slug" = ? LIMIT 1[0m  [["id", 1], ["slug", "changed-handle"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "blogs" SET "title" = ?, "page_title" = ?, "handle" = ?, "meta_description" = ?, "slug" = ?, "updated_at" = ? WHERE "blogs"."id" = ?  [["title", "Changed title"], ["page_title", "Changed page_title"], ["handle", "Changed handle"], ["meta_description", "Changed meta_description"], ["slug", "changed-handle"], ["updated_at", "2016-05-06 10:07:09.472221"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Load (0.1ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------
MagazCore::ThemeServices::ActivateTest: test_activate_theme
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example14' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example14"], ["subdomain", "example14"], ["created_at", "2016-05-06 10:07:09.479066"], ["updated_at", "2016-05-06 10:07:09.479066"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme1"], ["created_at", "2016-05-06 10:07:09.637547"], ["updated_at", "2016-05-06 10:07:09.637547"]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.639506"], ["updated_at", "2016-05-06 10:07:09.639506"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.641907"], ["updated_at", "2016-05-06 10:07:09.641907"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.643286"], ["updated_at", "2016-05-06 10:07:09.643286"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.644291"], ["updated_at", "2016-05-06 10:07:09.644291"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.645286"], ["updated_at", "2016-05-06 10:07:09.645286"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.646316"], ["updated_at", "2016-05-06 10:07:09.646316"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.647292"], ["updated_at", "2016-05-06 10:07:09.647292"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.648294"], ["updated_at", "2016-05-06 10:07:09.648294"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.649319"], ["updated_at", "2016-05-06 10:07:09.649319"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.650352"], ["updated_at", "2016-05-06 10:07:09.650352"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.651263"], ["updated_at", "2016-05-06 10:07:09.651263"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.652070"], ["updated_at", "2016-05-06 10:07:09.652070"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.652934"], ["updated_at", "2016-05-06 10:07:09.652934"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.653747"], ["updated_at", "2016-05-06 10:07:09.653747"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.654450"], ["updated_at", "2016-05-06 10:07:09.654450"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.655178"], ["updated_at", "2016-05-06 10:07:09.655178"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.655927"], ["updated_at", "2016-05-06 10:07:09.655927"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.656689"], ["updated_at", "2016-05-06 10:07:09.656689"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.657396"], ["updated_at", "2016-05-06 10:07:09.657396"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.658113"], ["updated_at", "2016-05-06 10:07:09.658113"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.658834"], ["updated_at", "2016-05-06 10:07:09.658834"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.659572"], ["updated_at", "2016-05-06 10:07:09.659572"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.660303"], ["updated_at", "2016-05-06 10:07:09.660303"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.661027"], ["updated_at", "2016-05-06 10:07:09.661027"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.661750"], ["updated_at", "2016-05-06 10:07:09.661750"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.662438"], ["updated_at", "2016-05-06 10:07:09.662438"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.663156"], ["updated_at", "2016-05-06 10:07:09.663156"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.663856"], ["updated_at", "2016-05-06 10:07:09.663856"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.664568"], ["updated_at", "2016-05-06 10:07:09.664568"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.665289"], ["updated_at", "2016-05-06 10:07:09.665289"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.665975"], ["updated_at", "2016-05-06 10:07:09.665975"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.666678"], ["updated_at", "2016-05-06 10:07:09.666678"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.667393"], ["updated_at", "2016-05-06 10:07:09.667393"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.668070"], ["updated_at", "2016-05-06 10:07:09.668070"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.668782"], ["updated_at", "2016-05-06 10:07:09.668782"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.669485"], ["updated_at", "2016-05-06 10:07:09.669485"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.670185"], ["updated_at", "2016-05-06 10:07:09.670185"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.670893"], ["updated_at", "2016-05-06 10:07:09.670893"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.671604"], ["updated_at", "2016-05-06 10:07:09.671604"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.672287"], ["updated_at", "2016-05-06 10:07:09.672287"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.673004"], ["updated_at", "2016-05-06 10:07:09.673004"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.673691"], ["updated_at", "2016-05-06 10:07:09.673691"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.674388"], ["updated_at", "2016-05-06 10:07:09.674388"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.675099"], ["updated_at", "2016-05-06 10:07:09.675099"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.675840"], ["updated_at", "2016-05-06 10:07:09.675840"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.676555"], ["updated_at", "2016-05-06 10:07:09.676555"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.677254"], ["updated_at", "2016-05-06 10:07:09.677254"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.677982"], ["updated_at", "2016-05-06 10:07:09.677982"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.678820"], ["updated_at", "2016-05-06 10:07:09.678820"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:09.679572"], ["updated_at", "2016-05-06 10:07:09.679572"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.1ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Asset Load (0.2ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme1"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-06 10:07:09.721501"], ["updated_at", "2016-05-06 10:07:09.721501"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-06 10:07:09.639506"], ["updated_at", "2016-05-06 10:07:09.639506"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-06 10:07:09.641907"], ["updated_at", "2016-05-06 10:07:09.641907"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-06 10:07:09.643286"], ["updated_at", "2016-05-06 10:07:09.643286"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-06 10:07:09.644291"], ["updated_at", "2016-05-06 10:07:09.644291"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-06 10:07:09.645286"], ["updated_at", "2016-05-06 10:07:09.645286"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-06 10:07:09.646316"], ["updated_at", "2016-05-06 10:07:09.646316"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-06 10:07:09.647292"], ["updated_at", "2016-05-06 10:07:09.647292"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-06 10:07:09.648294"], ["updated_at", "2016-05-06 10:07:09.648294"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-06 10:07:09.649319"], ["updated_at", "2016-05-06 10:07:09.649319"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-06 10:07:09.650352"], ["updated_at", "2016-05-06 10:07:09.650352"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-06 10:07:09.651263"], ["updated_at", "2016-05-06 10:07:09.651263"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-06 10:07:09.652070"], ["updated_at", "2016-05-06 10:07:09.652070"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-06 10:07:09.652934"], ["updated_at", "2016-05-06 10:07:09.652934"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-06 10:07:09.653747"], ["updated_at", "2016-05-06 10:07:09.653747"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-06 10:07:09.654450"], ["updated_at", "2016-05-06 10:07:09.654450"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-06 10:07:09.655178"], ["updated_at", "2016-05-06 10:07:09.655178"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-06 10:07:09.655927"], ["updated_at", "2016-05-06 10:07:09.655927"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-06 10:07:09.656689"], ["updated_at", "2016-05-06 10:07:09.656689"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-06 10:07:09.657396"], ["updated_at", "2016-05-06 10:07:09.657396"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-06 10:07:09.658113"], ["updated_at", "2016-05-06 10:07:09.658113"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-06 10:07:09.658834"], ["updated_at", "2016-05-06 10:07:09.658834"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-06 10:07:09.659572"], ["updated_at", "2016-05-06 10:07:09.659572"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-06 10:07:09.660303"], ["updated_at", "2016-05-06 10:07:09.660303"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-06 10:07:09.661027"], ["updated_at", "2016-05-06 10:07:09.661027"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-06 10:07:09.661750"], ["updated_at", "2016-05-06 10:07:09.661750"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-06 10:07:09.662438"], ["updated_at", "2016-05-06 10:07:09.662438"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-06 10:07:09.663156"], ["updated_at", "2016-05-06 10:07:09.663156"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-06 10:07:09.663856"], ["updated_at", "2016-05-06 10:07:09.663856"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-06 10:07:09.664568"], ["updated_at", "2016-05-06 10:07:09.664568"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-06 10:07:09.665289"], ["updated_at", "2016-05-06 10:07:09.665289"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-06 10:07:09.665975"], ["updated_at", "2016-05-06 10:07:09.665975"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-06 10:07:09.666678"], ["updated_at", "2016-05-06 10:07:09.666678"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-06 10:07:09.667393"], ["updated_at", "2016-05-06 10:07:09.667393"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-06 10:07:09.668070"], ["updated_at", "2016-05-06 10:07:09.668070"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-06 10:07:09.668782"], ["updated_at", "2016-05-06 10:07:09.668782"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-06 10:07:09.669485"], ["updated_at", "2016-05-06 10:07:09.669485"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-06 10:07:09.670185"], ["updated_at", "2016-05-06 10:07:09.670185"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-06 10:07:09.670893"], ["updated_at", "2016-05-06 10:07:09.670893"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-06 10:07:09.671604"], ["updated_at", "2016-05-06 10:07:09.671604"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-06 10:07:09.672287"], ["updated_at", "2016-05-06 10:07:09.672287"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-06 10:07:09.673004"], ["updated_at", "2016-05-06 10:07:09.673004"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-06 10:07:09.673691"], ["updated_at", "2016-05-06 10:07:09.673691"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-06 10:07:09.674388"], ["updated_at", "2016-05-06 10:07:09.674388"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-06 10:07:09.675099"], ["updated_at", "2016-05-06 10:07:09.675099"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-06 10:07:09.675840"], ["updated_at", "2016-05-06 10:07:09.675840"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-06 10:07:09.676555"], ["updated_at", "2016-05-06 10:07:09.676555"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-06 10:07:09.677254"], ["updated_at", "2016-05-06 10:07:09.677254"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-06 10:07:09.677982"], ["updated_at", "2016-05-06 10:07:09.677982"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-06 10:07:09.678820"], ["updated_at", "2016-05-06 10:07:09.678820"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-06 10:07:09.679572"], ["updated_at", "2016-05-06 10:07:09.679572"], ["theme_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Theme Load (0.1ms)[0m  SELECT "themes".* FROM "themes" WHERE "themes"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Asset Load (0.2ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "themes" SET "role" = ?, "updated_at" = ? WHERE "themes"."id" = ?  [["role", "unpublished"], ["updated_at", "2016-05-06 10:07:09.766916"], ["id", 2]]
  [1m[36mMagazCore::Asset Load (0.2ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "themes" SET "role" = ?, "updated_at" = ? WHERE "themes"."id" = ?  [["role", "main"], ["updated_at", "2016-05-06 10:07:09.770851"], ["id", 2]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."shop_id" = ? AND "themes"."role" = ?  ORDER BY "themes"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["role", "main"]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::ChangeUserTest: test_should_not_update_user_with_blank_params
---------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:09.776716"], ["updated_at", "2016-05-06 10:07:09.776716"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example8.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example8.com"], ["first_name", "First Name 8 "], ["last_name", "Last Name 8"], ["password_salt", "$2a$10$U9tDrWneA7pA64nokz6R8."], ["password_digest", "$2a$10$U9tDrWneA7pA64nokz6R8.ucUCwnR8SdsBIrExR.ADYGLC1U0zmNW"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:09.916465"], ["updated_at", "2016-05-06 10:07:09.916465"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example9.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example9.com"], ["first_name", "First Name 9 "], ["last_name", "Last Name 9"], ["password_salt", "$2a$10$FlSJIjvmR10h045sTAfGn."], ["password_digest", "$2a$10$FlSJIjvmR10h045sTAfGn.9ytqDk09eDXfNLx1teXQ0x3so5ot1/6"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:10.048072"], ["updated_at", "2016-05-06 10:07:10.048072"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::ChangeUserTest: test_should_not_update_user_with_existing_email
-----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:10.063627"], ["updated_at", "2016-05-06 10:07:10.063627"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example10.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example10.com"], ["first_name", "First Name 10 "], ["last_name", "Last Name 10"], ["password_salt", "$2a$10$GCG3Ej931eTkzuXBtjYQqO"], ["password_digest", "$2a$10$GCG3Ej931eTkzuXBtjYQqO7vkeoC6hhCeQmaJmve9KZx.CVNXKXP."], ["shop_id", 1], ["created_at", "2016-05-06 10:07:10.198991"], ["updated_at", "2016-05-06 10:07:10.198991"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example11.com' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example11.com"], ["first_name", "First Name 11 "], ["last_name", "Last Name 11"], ["password_salt", "$2a$10$iD6NBEiiPdyIF6Go43dsWu"], ["password_digest", "$2a$10$iD6NBEiiPdyIF6Go43dsWu5yL08qmbIZW0ieUQH3v.URjuZWOViOG"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:10.331381"], ["updated_at", "2016-05-06 10:07:10.331381"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ?[0m  [["shop_id", 1], ["email", "staff_user@example11.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::User Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ?[0m  [["shop_id", 1], ["email", "staff_user@example11.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::ChangeUserTest: test_should_not_update_user_with_invalid_email
----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:10.343511"], ["updated_at", "2016-05-06 10:07:10.343511"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example12.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example12.com"], ["first_name", "First Name 12 "], ["last_name", "Last Name 12"], ["password_salt", "$2a$10$ZwsFWHcii3COGykgQxvcrO"], ["password_digest", "$2a$10$ZwsFWHcii3COGykgQxvcrONEvzdQ5QYQ4BrColbldgh3ymKlH3PsO"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:10.483211"], ["updated_at", "2016-05-06 10:07:10.483211"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example13.com' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example13.com"], ["first_name", "First Name 13 "], ["last_name", "Last Name 13"], ["password_salt", "$2a$10$NdRk3WlTO4wZ7O60dsMCPe"], ["password_digest", "$2a$10$NdRk3WlTO4wZ7O60dsMCPex4OLhmsvG19cOufCtQMA90pZinEbpYK"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:10.619403"], ["updated_at", "2016-05-06 10:07:10.619403"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::ChangeUserTest: test_should_update_user_with_some_blank_params
----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:10.630561"], ["updated_at", "2016-05-06 10:07:10.630561"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example14.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example14.com"], ["first_name", "First Name 14 "], ["last_name", "Last Name 14"], ["password_salt", "$2a$10$NEi.RsY/s1B9dOfH8mrK7u"], ["password_digest", "$2a$10$NEi.RsY/s1B9dOfH8mrK7uzQ8zglkzciycaPhUIJwTtH/Ms8haSR6"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:10.780806"], ["updated_at", "2016-05-06 10:07:10.780806"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example15.com' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example15.com"], ["first_name", "First Name 15 "], ["last_name", "Last Name 15"], ["password_salt", "$2a$10$X814ocpK6EKxOELV5rLSP."], ["password_digest", "$2a$10$X814ocpK6EKxOELV5rLSP.MGYmHaAUVPH4cypvHN4jc82JtjeX.Ci"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:10.913744"], ["updated_at", "2016-05-06 10:07:10.913744"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ?  [["shop_id", 1], ["email", "new@email.com"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE ("users"."email" = 'new@email.com' AND "users"."id" != 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "first_name" = ?, "last_name" = ?, "email" = ?, "permissions" = ?, "password_salt" = ?, "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["first_name", "New first_name"], ["last_name", "New last_name"], ["email", "new@email.com"], ["permissions", nil], ["password_salt", "$2a$10$cNJZO9CALNQeXm7HafHrke"], ["password_digest", "$2a$10$cNJZO9CALNQeXm7HafHrkerW2JzL/11l0zS6UVan.bYp24tQB3AYi"], ["updated_at", "2016-05-06 10:07:10.982107"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::User::ChangeUserTest: test_should_update_user_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:10.989695"], ["updated_at", "2016-05-06 10:07:10.989695"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example16.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example16.com"], ["first_name", "First Name 16 "], ["last_name", "Last Name 16"], ["password_salt", "$2a$10$7nKbwvSD3yJvfrIhgHFHiu"], ["password_digest", "$2a$10$7nKbwvSD3yJvfrIhgHFHiuTJvtZLIiTKP.8XtBzNpZQ/Fj/JDhi9K"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:11.133108"], ["updated_at", "2016-05-06 10:07:11.133108"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example17.com' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example17.com"], ["first_name", "First Name 17 "], ["last_name", "Last Name 17"], ["password_salt", "$2a$10$eIwYihvLMbGGFw7bwmHGue"], ["password_digest", "$2a$10$eIwYihvLMbGGFw7bwmHGue5NhsHIANeYL5F.ZBcFcLA53iE45HkfC"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:11.268872"], ["updated_at", "2016-05-06 10:07:11.268872"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::User Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ?[0m  [["shop_id", 1], ["email", "new@email.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."email" = 'new@email.com' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "first_name" = ?, "last_name" = ?, "email" = ?, "permissions" = ?, "password_salt" = ?, "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["first_name", "New first_name"], ["last_name", "New last_name"], ["email", "new@email.com"], ["permissions", "[\"God\", \"Mode\"]"], ["password_salt", "$2a$10$CmrJuBa8Ued7WMlVkBlcj."], ["password_digest", "$2a$10$CmrJuBa8Ued7WMlVkBlcj.4E6RfyGMvYeW46dMUR0YZMuPn3NCE3y"], ["updated_at", "2016-05-06 10:07:11.337569"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
MagazCoreTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::DeleteShippingRateTest: test_should_delete_shipping_rate_with_valid_id
--------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:11.346587"], ["updated_at", "2016-05-06 10:07:11.346587"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "8"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Shipping Rate 1"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-06 10:07:11.359873"], ["updated_at", "2016-05-06 10:07:11.359873"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Shipping Rate 2"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-06 10:07:11.361595"], ["updated_at", "2016-05-06 10:07:11.361595"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates" WHERE "shipping_rates"."shipping_country_id" = ?[0m  [["shipping_country_id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingRate Load (0.1ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."shipping_country_id" = ? AND "shipping_rates"."id" = ? LIMIT 1[0m  [["shipping_country_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "shipping_rates" WHERE "shipping_rates"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::ShippingRate Load (0.1ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingRate Load (0.0ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates" WHERE "shipping_rates"."shipping_country_id" = ?[0m  [["shipping_country_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::DeleteShippingRateTest: test_should_not_delete_shipping_rate_with_blank_id
------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:11.370505"], ["updated_at", "2016-05-06 10:07:11.370505"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "9"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Shipping Rate 3"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-06 10:07:11.373562"], ["updated_at", "2016-05-06 10:07:11.373562"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Shipping Rate 4"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-06 10:07:11.374814"], ["updated_at", "2016-05-06 10:07:11.374814"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates" WHERE "shipping_rates"."shipping_country_id" = ?[0m  [["shipping_country_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_rates" WHERE "shipping_rates"."shipping_country_id" = ?  [["shipping_country_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
MagazCore::User::PasswordAuthenticableTest: test_authentic_password?
--------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example15' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example15"], ["subdomain", "example15"], ["created_at", "2016-05-06 10:07:11.385725"], ["updated_at", "2016-05-06 10:07:11.385725"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example18.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example18.com"], ["first_name", "First Name 18 "], ["last_name", "Last Name 18"], ["password_salt", "$2a$10$RJqunKP.BWc/7UDGk6845."], ["password_digest", "$2a$10$RJqunKP.BWc/7UDGk6845.DjuD9aqzrkfEPdlB2uY0dqXwQSPOIKG"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:11.532217"], ["updated_at", "2016-05-06 10:07:11.532217"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
MagazCore::User::PasswordAuthenticableTest: test_validation_email_presence
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------
MagazCore::User::PasswordAuthenticableTest: test_validation_email_uniqueness
----------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'example@example.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("first_name", "last_name", "email", "password_salt", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["first_name", "New user"], ["last_name", "number One"], ["email", "example@example.com"], ["password_salt", "$2a$10$4RE/6rLBvr6YyuRqh9leMu"], ["password_digest", "$2a$10$4RE/6rLBvr6YyuRqh9leMu/yBG4fwTnUTVSUYcPMnrjbLg4sNxY7a"], ["created_at", "2016-05-06 10:07:11.809591"], ["updated_at", "2016-05-06 10:07:11.809591"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE ("users"."email" = 'example@example.com' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'example@example.com' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'example@example.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------
MagazCore::User::PasswordAuthenticableTest: test_validation_password_presence
-----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'example@example.com' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::DeleteLinkTest: test_should_delete_link_with_valid_id
-------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:11.819972"], ["updated_at", "2016-05-06 10:07:11.819972"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 1"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)  [["name", "Link 1"], ["link_list_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "links"
  [1m[36mMagazCore::LinkList Load (0.2ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Link Load (0.1ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1[0m  [["link_list_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "links" WHERE "links"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "links"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::DeleteLinkTest: test_should_not_delete_link_with_blank_id
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:11.845964"], ["updated_at", "2016-05-06 10:07:11.845964"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 2"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)  [["name", "Link 2"], ["link_list_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "links"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "links"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangeCheckoutSettingsTest: test_should_update_shop_with_valid_blank_params
-----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:11.857298"], ["updated_at", "2016-05-06 10:07:11.857298"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangeCheckoutSettingsTest: test_should_update_shop_with_valid_success_params
-------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:11.880311"], ["updated_at", "2016-05-06 10:07:11.880311"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "shops" SET "billing_address_is_shipping_too" = ?, "enable_multipass_login" = ?, "notify_customers_of_their_shipment" = ?, "automatically_fulfill_all_orders" = ?, "after_order_fulfilled_and_paid" = ?, "account_type_choice" = ?, "abandoned_checkout_time_delay" = ?, "email_marketing_choice" = ?, "after_order_paid" = ?, "checkout_refund_policy" = ?, "checkout_privacy_policy" = ?, "checkout_term_of_service" = ?, "updated_at" = ? WHERE "shops"."id" = ?[0m  [["billing_address_is_shipping_too", "f"], ["enable_multipass_login", "f"], ["notify_customers_of_their_shipment", "f"], ["automatically_fulfill_all_orders", "f"], ["after_order_fulfilled_and_paid", "f"], ["account_type_choice", "disabled"], ["abandoned_checkout_time_delay", "never"], ["email_marketing_choice", "customer_agrees"], ["after_order_paid", "automatically_fulfill"], ["checkout_refund_policy", "checkout_refund_policy"], ["checkout_privacy_policy", "checkout_privacy_policy"], ["checkout_term_of_service", "checkout_term_of_service"], ["updated_at", "2016-05-06 10:07:11.884332"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::ChangeShippingRateTest: test_shoul_update_shipping_rate_with_some_blank_params
----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:11.890489"], ["updated_at", "2016-05-06 10:07:11.890489"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "10"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Shipping Rate 5"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-06 10:07:11.894322"], ["updated_at", "2016-05-06 10:07:11.894322"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35mMagazCore::ShippingRate Load (0.1ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "shipping_rates" SET "name" = ?, "criteria" = ?, "shipping_price" = ?, "updated_at" = ? WHERE "shipping_rates"."id" = ?  [["name", "Updated name"], ["criteria", "weight"], ["shipping_price", 5.0], ["updated_at", "2016-05-06 10:07:11.899088"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ShippingRate Load (0.1ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingRate Load (0.1ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingRate Load (0.1ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::ChangeShippingRateTest: test_should_not_update_shipping_rate_with_blank_params
----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:11.904427"], ["updated_at", "2016-05-06 10:07:11.904427"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "11"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Shipping Rate 6"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-06 10:07:11.907512"], ["updated_at", "2016-05-06 10:07:11.907512"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::ChangeShippingRateTest: test_should_not_update_shipping_rate_with_wrong_comparison
--------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:11.915378"], ["updated_at", "2016-05-06 10:07:11.915378"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "12"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Shipping Rate 7"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-06 10:07:11.918443"], ["updated_at", "2016-05-06 10:07:11.918443"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::ChangeShippingRateTest: test_should_not_update_shipping_rate_with_wrong_criteria
------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:11.922304"], ["updated_at", "2016-05-06 10:07:11.922304"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "13"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Shipping Rate 8"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-06 10:07:11.925489"], ["updated_at", "2016-05-06 10:07:11.925489"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::ChangeShippingRateTest: test_should_not_update_shipping_rate_with_wrong_weight
----------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:11.929588"], ["updated_at", "2016-05-06 10:07:11.929588"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "14"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Shipping Rate 9"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-06 10:07:11.932749"], ["updated_at", "2016-05-06 10:07:11.932749"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::ChangeShippingRateTest: test_should_update_shipping_rate_with_valid_params
------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:11.939106"], ["updated_at", "2016-05-06 10:07:11.939106"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "15"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_rates" ("name", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Shipping Rate 10"], ["shipping_price", 123.0], ["shipping_country_id", 1], ["created_at", "2016-05-06 10:07:11.942424"], ["updated_at", "2016-05-06 10:07:11.942424"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36mMagazCore::ShippingRate Load (0.0ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "shipping_rates" SET "name" = ?, "price_from" = ?, "price_to" = ?, "weight_from" = ?, "weight_to" = ?, "criteria" = ?, "shipping_price" = ?, "updated_at" = ? WHERE "shipping_rates"."id" = ?[0m  [["name", "Updated name"], ["price_from", 15.7], ["price_to", 20.5], ["weight_from", 3.1], ["weight_to", 5.5], ["criteria", "weight"], ["shipping_price", 5.0], ["updated_at", "2016-05-06 10:07:11.944462"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::ShippingRate Load (0.0ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingRate Load (0.1ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingRate Load (0.0ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::ChangeArticleTest: test_should_not_update_article_with_blank_params
------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:11.950254"], ["updated_at", "2016-05-06 10:07:11.950254"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 9"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:11.953741"], ["updated_at", "2016-05-06 10:07:11.953741"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 10"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:11.955810"], ["updated_at", "2016-05-06 10:07:11.955810"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "myhandle"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "mytitle"], ["content", "Article 1 content"], ["blog_id", 2], ["handle", "myhandle"], ["slug", "myhandle"], ["created_at", "2016-05-06 10:07:11.971521"], ["updated_at", "2016-05-06 10:07:11.971521"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Article 1"], ["content", "Article 2 content"], ["created_at", "2016-05-06 10:07:11.973965"], ["updated_at", "2016-05-06 10:07:11.973965"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.1ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "unique-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Article 2"], ["content", "Article 3 content"], ["blog_id", 1], ["handle", "Unique handle"], ["slug", "unique-handle"], ["created_at", "2016-05-06 10:07:11.976856"], ["updated_at", "2016-05-06 10:07:11.976856"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Load (0.3ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "3"]]
  [1m[35mMagazCore::Article Load (0.2ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "3"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::ChangeArticleTest: test_should_not_update_article_with_existing_handle
---------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:11.991680"], ["updated_at", "2016-05-06 10:07:11.991680"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 11"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:11.994277"], ["updated_at", "2016-05-06 10:07:11.994277"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 12"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:11.996006"], ["updated_at", "2016-05-06 10:07:11.996006"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.1ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "myhandle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "mytitle"], ["content", "Article 4 content"], ["blog_id", 2], ["handle", "myhandle"], ["slug", "myhandle"], ["created_at", "2016-05-06 10:07:11.998743"], ["updated_at", "2016-05-06 10:07:11.998743"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Article 3"], ["content", "Article 5 content"], ["created_at", "2016-05-06 10:07:12.000330"], ["updated_at", "2016-05-06 10:07:12.000330"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "unique-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "Article 4"], ["content", "Article 6 content"], ["blog_id", 1], ["handle", "Unique handle"], ["slug", "unique-handle"], ["created_at", "2016-05-06 10:07:12.002528"], ["updated_at", "2016-05-06 10:07:12.002528"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "New title"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "Unique handle"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "New title"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "Unique handle"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::ChangeArticleTest: test_should_not_update_article_with_existing_handle_when_blog_is_changed
------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:12.014655"], ["updated_at", "2016-05-06 10:07:12.014655"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 13"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.017372"], ["updated_at", "2016-05-06 10:07:12.017372"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 14"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.019463"], ["updated_at", "2016-05-06 10:07:12.019463"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "myhandle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "mytitle"], ["content", "Article 7 content"], ["blog_id", 2], ["handle", "myhandle"], ["slug", "myhandle"], ["created_at", "2016-05-06 10:07:12.022862"], ["updated_at", "2016-05-06 10:07:12.022862"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Article 5"], ["content", "Article 8 content"], ["created_at", "2016-05-06 10:07:12.024763"], ["updated_at", "2016-05-06 10:07:12.024763"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "unique-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Article 6"], ["content", "Article 9 content"], ["blog_id", 1], ["handle", "Unique handle"], ["slug", "unique-handle"], ["created_at", "2016-05-06 10:07:12.027379"], ["updated_at", "2016-05-06 10:07:12.027379"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 2], ["title", "New title"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 2], ["handle", "myhandle"]]
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 2], ["title", "New title"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 2], ["handle", "myhandle"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::ChangeArticleTest: test_should_not_update_article_with_existing_title
--------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:12.039352"], ["updated_at", "2016-05-06 10:07:12.039352"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 15"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.041310"], ["updated_at", "2016-05-06 10:07:12.041310"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 16"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.042766"], ["updated_at", "2016-05-06 10:07:12.042766"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "myhandle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "mytitle"], ["content", "Article 10 content"], ["blog_id", 2], ["handle", "myhandle"], ["slug", "myhandle"], ["created_at", "2016-05-06 10:07:12.045007"], ["updated_at", "2016-05-06 10:07:12.045007"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Article 7"], ["content", "Article 11 content"], ["created_at", "2016-05-06 10:07:12.046355"], ["updated_at", "2016-05-06 10:07:12.046355"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "unique-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "Article 8"], ["content", "Article 12 content"], ["blog_id", 1], ["handle", "Unique handle"], ["slug", "unique-handle"], ["created_at", "2016-05-06 10:07:12.049709"], ["updated_at", "2016-05-06 10:07:12.049709"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "Article 8"]]
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "ChangedC handle"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "Article 8"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "ChangedC handle"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::ChangeArticleTest: test_should_not_update_article_with_existing_title_when_blog_is_changed
-----------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:12.062964"], ["updated_at", "2016-05-06 10:07:12.062964"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 17"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.064888"], ["updated_at", "2016-05-06 10:07:12.064888"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 18"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.066398"], ["updated_at", "2016-05-06 10:07:12.066398"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "myhandle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "mytitle"], ["content", "Article 13 content"], ["blog_id", 2], ["handle", "myhandle"], ["slug", "myhandle"], ["created_at", "2016-05-06 10:07:12.068643"], ["updated_at", "2016-05-06 10:07:12.068643"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Article 9"], ["content", "Article 14 content"], ["created_at", "2016-05-06 10:07:12.070048"], ["updated_at", "2016-05-06 10:07:12.070048"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.1ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "unique-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Article 10"], ["content", "Article 15 content"], ["blog_id", 1], ["handle", "Unique handle"], ["slug", "unique-handle"], ["created_at", "2016-05-06 10:07:12.072892"], ["updated_at", "2016-05-06 10:07:12.072892"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 2], ["title", "mytitle"]]
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 2], ["handle", "handle"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 2], ["title", "mytitle"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 2], ["handle", "handle"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::ChangeArticleTest: test_should_update_article_with_some_blank_params
-------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:12.085598"], ["updated_at", "2016-05-06 10:07:12.085598"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 19"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.087993"], ["updated_at", "2016-05-06 10:07:12.087993"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 20"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.089548"], ["updated_at", "2016-05-06 10:07:12.089548"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "myhandle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "mytitle"], ["content", "Article 16 content"], ["blog_id", 2], ["handle", "myhandle"], ["slug", "myhandle"], ["created_at", "2016-05-06 10:07:12.091871"], ["updated_at", "2016-05-06 10:07:12.091871"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Article 11"], ["content", "Article 17 content"], ["created_at", "2016-05-06 10:07:12.093335"], ["updated_at", "2016-05-06 10:07:12.093335"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "unique-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "Article 12"], ["content", "Article 18 content"], ["blog_id", 1], ["handle", "Unique handle"], ["slug", "unique-handle"], ["created_at", "2016-05-06 10:07:12.095680"], ["updated_at", "2016-05-06 10:07:12.095680"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "3"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "3"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "3"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "3"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "3"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Article Exists (0.1ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" != ?) AND "articles"."slug" = ? LIMIT 1  [["id", 3], ["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "articles" SET "content" = ?, "page_title" = ?, "handle" = ?, "meta_description" = ?, "slug" = ?, "updated_at" = ? WHERE "articles"."id" = ?[0m  [["content", ""], ["page_title", ""], ["handle", ""], ["meta_description", ""], ["slug", ""], ["updated_at", "2016-05-06 10:07:12.102474"], ["id", 3]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::ChangeArticleTest: test_should_update_article_with_valid_params
--------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:12.106662"], ["updated_at", "2016-05-06 10:07:12.106662"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 21"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.108484"], ["updated_at", "2016-05-06 10:07:12.108484"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 22"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.109964"], ["updated_at", "2016-05-06 10:07:12.109964"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "myhandle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "mytitle"], ["content", "Article 19 content"], ["blog_id", 2], ["handle", "myhandle"], ["slug", "myhandle"], ["created_at", "2016-05-06 10:07:12.112175"], ["updated_at", "2016-05-06 10:07:12.112175"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Article 13"], ["content", "Article 20 content"], ["created_at", "2016-05-06 10:07:12.113506"], ["updated_at", "2016-05-06 10:07:12.113506"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "unique-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "Article 14"], ["content", "Article 21 content"], ["blog_id", 1], ["handle", "Unique handle"], ["slug", "unique-handle"], ["created_at", "2016-05-06 10:07:12.115903"], ["updated_at", "2016-05-06 10:07:12.115903"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "Changed title"]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "ChangedC handle"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Load (0.1ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Article Exists (0.1ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" != ?) AND "articles"."slug" = ? LIMIT 1  [["id", 2], ["slug", "changedc-handle"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "articles" SET "title" = ?, "content" = ?, "page_title" = ?, "handle" = ?, "meta_description" = ?, "blog_id" = ?, "slug" = ?, "updated_at" = ? WHERE "articles"."id" = ?[0m  [["title", "Changed title"], ["content", "Changed content"], ["page_title", "Changed page_title"], ["handle", "ChangedC handle"], ["meta_description", "Changed meta_description"], ["blog_id", 1], ["slug", "changedc-handle"], ["updated_at", "2016-05-06 10:07:12.123408"], ["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::AddLinkTest: test_should_create_link_with_valid_params
--------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:12.130253"], ["updated_at", "2016-05-06 10:07:12.130253"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)  [["name", "List 3"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Test name"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("link_list_id", "name", "link_type", "position") VALUES (?, ?, ?, ?)  [["link_list_id", 1], ["name", "Test name"], ["link_type", "link_type"], ["position", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Link Load (0.1ms)[0m  SELECT  "links".* FROM "links" WHERE "links"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ?[0m  [["link_list_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::AddLinkTest: test_should_not_create_link_with_blank_params
------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:12.151177"], ["updated_at", "2016-05-06 10:07:12.151177"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 4"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 1], ["name", ""]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", ""]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ?[0m  [["link_list_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::AddLinkTest: test_should_not_create_link_with_same_params
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:12.170566"], ["updated_at", "2016-05-06 10:07:12.170566"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 5"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 1], ["name", "Test name"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type", "position") VALUES (?, ?, ?, ?)[0m  [["link_list_id", 1], ["name", "Test name"], ["link_type", "link_type"], ["position", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 1], ["name", "Test name"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Test name"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ?[0m  [["link_list_id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::AddCustomeromerTest: test_should_create_customer_with_valid_params
------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:12.185419"], ["updated_at", "2016-05-06 10:07:12.185419"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?  [["shop_id", 1], ["email", "test@test.com"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("shop_id", "first_name", "last_name", "email") VALUES (?, ?, ?, ?)[0m  [["shop_id", 1], ["first_name", "Test first name"], ["last_name", "Test last name"], ["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::AddCustomeromerTest: test_should_not_create_customer_with_blank_params
----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:12.196039"], ["updated_at", "2016-05-06 10:07:12.196039"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?[0m  [["shop_id", 1], ["email", ""]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?[0m  [["shop_id", 1], ["email", ""]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::AddCustomeromerTest: test_should_not_create_customer_with_same_params
---------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:12.205942"], ["updated_at", "2016-05-06 10:07:12.205942"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?  [["shop_id", 1], ["email", "test@test.com"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("shop_id", "first_name", "last_name", "email") VALUES (?, ?, ?, ?)[0m  [["shop_id", 1], ["first_name", "Test first name"], ["last_name", "Test last name"], ["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?[0m  [["shop_id", 1], ["email", "test@test.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?[0m  [["shop_id", 1], ["email", "test@test.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::AddCollectionTest: test_should_create_collection_with_valid_params
--------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:12.215606"], ["updated_at", "2016-05-06 10:07:12.215606"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 232"], ["description", "Collection 234 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.218026"], ["updated_at", "2016-05-06 10:07:12.218026"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?  [["shop_id", 1], ["name", "Test name"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.1ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "test-handle"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("shop_id", "name", "description", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Test name"], ["description", "Test description"], ["page_title", "Test page_title"], ["meta_description", "Test meta_description"], ["handle", "Test handle"], ["slug", "test-handle"], ["created_at", "2016-05-06 10:07:12.227169"], ["updated_at", "2016-05-06 10:07:12.227169"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.1ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::AddCollectionTest: test_should_not_create_collection_with_blank_params
------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:12.233396"], ["updated_at", "2016-05-06 10:07:12.233396"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 233"], ["description", "Collection 235 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.236055"], ["updated_at", "2016-05-06 10:07:12.236055"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?[0m  [["shop_id", 1], ["name", ""]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?[0m  [["shop_id", 1], ["name", ""]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::AddCollectionTest: test_should_not_create_collection_with_same_params
-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:12.247527"], ["updated_at", "2016-05-06 10:07:12.247527"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 234"], ["description", "Collection 236 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.249420"], ["updated_at", "2016-05-06 10:07:12.249420"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?  [["shop_id", 1], ["name", "Test name"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "test-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("shop_id", "name", "description", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Test name"], ["description", "Test description"], ["page_title", "Test page_title"], ["meta_description", "Test meta_description"], ["handle", "Test handle"], ["slug", "test-handle"], ["created_at", "2016-05-06 10:07:12.253853"], ["updated_at", "2016-05-06 10:07:12.253853"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?  [["shop_id", 1], ["name", "Test name"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?[0m  [["shop_id", 1], ["name", "Test name"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
MagazCore::CheckoutTest: test_attributes
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example16' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example16"], ["subdomain", "example16"], ["created_at", "2016-05-06 10:07:12.267163"], ["updated_at", "2016-05-06 10:07:12.267163"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 1 "], ["last_name", "Last Name 1"], ["email", "customer1@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 1], ["created_at", "2016-05-06 10:07:12.279634"], ["updated_at", "2016-05-06 10:07:12.279634"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 2' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 2"], ["description", "Example 2 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.282742"], ["updated_at", "2016-05-06 10:07:12.282742"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 3' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 3"], ["description", "Example 3 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.284743"], ["updated_at", "2016-05-06 10:07:12.284743"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
MagazCore::CheckoutTest: test_items
-----------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example17' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example17"], ["subdomain", "example17"], ["created_at", "2016-05-06 10:07:12.288873"], ["updated_at", "2016-05-06 10:07:12.288873"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 2 "], ["last_name", "Last Name 2"], ["email", "customer2@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 1], ["created_at", "2016-05-06 10:07:12.292031"], ["updated_at", "2016-05-06 10:07:12.292031"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 4' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 4"], ["description", "Example 4 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.293932"], ["updated_at", "2016-05-06 10:07:12.293932"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 5' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 5"], ["description", "Example 5 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.295752"], ["updated_at", "2016-05-06 10:07:12.295752"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."checkout_id" = ?  [["checkout_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------
MagazCore::CheckoutTest: test_note
----------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example18' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example18"], ["subdomain", "example18"], ["created_at", "2016-05-06 10:07:12.304836"], ["updated_at", "2016-05-06 10:07:12.304836"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 3 "], ["last_name", "Last Name 3"], ["email", "customer3@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["customer_id", 1], ["created_at", "2016-05-06 10:07:12.309221"], ["updated_at", "2016-05-06 10:07:12.309221"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 6' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 6"], ["description", "Example 6 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.311734"], ["updated_at", "2016-05-06 10:07:12.311734"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 7' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 7"], ["description", "Example 7 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.314328"], ["updated_at", "2016-05-06 10:07:12.314328"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MagazCore::CheckoutTest: test_total_price
-----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example19' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example19"], ["subdomain", "example19"], ["created_at", "2016-05-06 10:07:12.318440"], ["updated_at", "2016-05-06 10:07:12.318440"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 4 "], ["last_name", "Last Name 4"], ["email", "customer4@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["customer_id", 1], ["created_at", "2016-05-06 10:07:12.321567"], ["updated_at", "2016-05-06 10:07:12.321567"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 8' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 8"], ["description", "Example 8 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.323732"], ["updated_at", "2016-05-06 10:07:12.323732"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 9' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 9"], ["description", "Example 9 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.325660"], ["updated_at", "2016-05-06 10:07:12.325660"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::LineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."checkout_id" = ?[0m  [["checkout_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
MagazCore::CheckoutTest: test_total_weight
------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example20' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example20"], ["subdomain", "example20"], ["created_at", "2016-05-06 10:07:12.330336"], ["updated_at", "2016-05-06 10:07:12.330336"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 5 "], ["last_name", "Last Name 5"], ["email", "customer5@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 1], ["created_at", "2016-05-06 10:07:12.333476"], ["updated_at", "2016-05-06 10:07:12.333476"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 10' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 10"], ["description", "Example 10 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.336262"], ["updated_at", "2016-05-06 10:07:12.336262"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 11' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 11"], ["description", "Example 11 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.338683"], ["updated_at", "2016-05-06 10:07:12.338683"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."checkout_id" = ?  [["checkout_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------
MagazCore::StoreServices::CreateEventCreateEventTest: test_create_event_with_Webhook
------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example21' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example21"], ["subdomain", "example21"], ["created_at", "2016-05-06 10:07:12.344474"], ["updated_at", "2016-05-06 10:07:12.344474"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example19.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example19.com"], ["first_name", "First Name 19 "], ["last_name", "Last Name 19"], ["password_salt", "$2a$10$PQ3Eathr7Ri4R/zvMmRfzu"], ["password_digest", "$2a$10$PQ3Eathr7Ri4R/zvMmRfzugqYIq7UmIm207pN4bBsB4WlTD9LfU.K"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.480679"], ["updated_at", "2016-05-06 10:07:12.480679"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 23"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:12.483504"], ["updated_at", "2016-05-06 10:07:12.483504"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 12' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 12"], ["description", "Example 12 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.485460"], ["updated_at", "2016-05-06 10:07:12.485460"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Article 15"], ["content", "Article 22 content"], ["blog_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:12.487684"], ["updated_at", "2016-05-06 10:07:12.487684"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 235"], ["description", "Collection 237 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:12.489977"], ["updated_at", "2016-05-06 10:07:12.489977"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.491536"], ["updated_at", "2016-05-06 10:07:12.491536"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "events" ("subject_id", "subject_type", "arguments", "message", "shop_id", "verb", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["subject_id", 1], ["subject_type", "MagazCore::Webhook"], ["arguments", "[]"], ["message", "First name 19  Last name 19 created a webhook: "], ["shop_id", 1], ["verb", "create"], ["created_at", "2016-05-06 10:07:12.507818"], ["updated_at", "2016-05-06 10:07:12.507818"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------
MagazCore::StoreServices::CreateEventCreateEventTest: test_create_event_with_article
------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example22' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example22"], ["subdomain", "example22"], ["created_at", "2016-05-06 10:07:12.514870"], ["updated_at", "2016-05-06 10:07:12.514870"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example20.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example20.com"], ["first_name", "First Name 20 "], ["last_name", "Last Name 20"], ["password_salt", "$2a$10$q4XrKzvB2PkPLi8xZ6OPSu"], ["password_digest", "$2a$10$q4XrKzvB2PkPLi8xZ6OPSui5Rdm8pvbyYFRFDzMcJepVsBkWWZ7em"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.651377"], ["updated_at", "2016-05-06 10:07:12.651377"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 24"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:12.654327"], ["updated_at", "2016-05-06 10:07:12.654327"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 13' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 13"], ["description", "Example 13 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.656298"], ["updated_at", "2016-05-06 10:07:12.656298"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Article 16"], ["content", "Article 23 content"], ["blog_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:12.658635"], ["updated_at", "2016-05-06 10:07:12.658635"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 236"], ["description", "Collection 238 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:12.661049"], ["updated_at", "2016-05-06 10:07:12.661049"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.662615"], ["updated_at", "2016-05-06 10:07:12.662615"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("subject_id", "subject_type", "arguments", "message", "shop_id", "verb", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["subject_id", 1], ["subject_type", "MagazCore::Article"], ["arguments", "[\"Article 16\"]"], ["message", "First name 20  Last name 20 created a article: "], ["shop_id", 1], ["verb", "create"], ["created_at", "2016-05-06 10:07:12.666227"], ["updated_at", "2016-05-06 10:07:12.666227"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------
MagazCore::StoreServices::CreateEventCreateEventTest: test_create_event_with_collection
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example23' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example23"], ["subdomain", "example23"], ["created_at", "2016-05-06 10:07:12.674220"], ["updated_at", "2016-05-06 10:07:12.674220"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example21.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example21.com"], ["first_name", "First Name 21 "], ["last_name", "Last Name 21"], ["password_salt", "$2a$10$l9o9OQYlouaUjtFxa8xrlu"], ["password_digest", "$2a$10$l9o9OQYlouaUjtFxa8xrluzKzpHIVY4FiYYYrKS2ErA1eCtAoH/r."], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.819259"], ["updated_at", "2016-05-06 10:07:12.819259"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 25"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:12.822376"], ["updated_at", "2016-05-06 10:07:12.822376"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 14' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 14"], ["description", "Example 14 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.824618"], ["updated_at", "2016-05-06 10:07:12.824618"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Article 17"], ["content", "Article 24 content"], ["blog_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:12.826991"], ["updated_at", "2016-05-06 10:07:12.826991"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 237"], ["description", "Collection 239 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:12.829383"], ["updated_at", "2016-05-06 10:07:12.829383"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.830917"], ["updated_at", "2016-05-06 10:07:12.830917"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("subject_id", "subject_type", "arguments", "message", "shop_id", "verb", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["subject_id", 1], ["subject_type", "MagazCore::Collection"], ["arguments", "[\"Collection 237\"]"], ["message", "First name 21  Last name 21 created a collection: "], ["shop_id", 1], ["verb", "create"], ["created_at", "2016-05-06 10:07:12.834768"], ["updated_at", "2016-05-06 10:07:12.834768"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------
MagazCore::StoreServices::CreateEventCreateEventTest: test_create_event_with_product
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example24' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example24"], ["subdomain", "example24"], ["created_at", "2016-05-06 10:07:12.842733"], ["updated_at", "2016-05-06 10:07:12.842733"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example22.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example22.com"], ["first_name", "First Name 22 "], ["last_name", "Last Name 22"], ["password_salt", "$2a$10$2VPoM8A36ILWR8nDKcjP1u"], ["password_digest", "$2a$10$2VPoM8A36ILWR8nDKcjP1ug.lCD8/ixKq9gjGss9C8MlGqmfGydtq"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.978944"], ["updated_at", "2016-05-06 10:07:12.978944"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 26"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:12.981843"], ["updated_at", "2016-05-06 10:07:12.981843"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 15' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 15"], ["description", "Example 15 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.983852"], ["updated_at", "2016-05-06 10:07:12.983852"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Article 18"], ["content", "Article 25 content"], ["blog_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:12.986223"], ["updated_at", "2016-05-06 10:07:12.986223"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 238"], ["description", "Collection 240 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:12.988636"], ["updated_at", "2016-05-06 10:07:12.988636"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:12.990140"], ["updated_at", "2016-05-06 10:07:12.990140"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("subject_id", "subject_type", "arguments", "message", "shop_id", "verb", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["subject_id", 1], ["subject_type", "MagazCore::Product"], ["arguments", "[\"Example 15\"]"], ["message", "First name 22  Last name 22 created a product: "], ["shop_id", 1], ["verb", "create"], ["created_at", "2016-05-06 10:07:12.992775"], ["updated_at", "2016-05-06 10:07:12.992775"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::AddWebhookTest: test_should_create_webhook_with_valid_params
-----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example25' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example25"], ["subdomain", "example25"], ["created_at", "2016-05-06 10:07:13.000408"], ["updated_at", "2016-05-06 10:07:13.000408"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "webhooks" ("shop_id", "topic", "address", "format", "metafield_namespaces", "fields", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["topic", "create_product_event"], ["address", "https://www.examplee.com"], ["format", "JSON"], ["metafield_namespaces", nil], ["fields", nil], ["created_at", "2016-05-06 10:07:13.005392"], ["updated_at", "2016-05-06 10:07:13.005392"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Webhook Load (0.1ms)[0m  [1mSELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Webhook Load (0.0ms)[0m  SELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::AddWebhookTest: test_should_not_create_webhook_with_blank_params
---------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example26' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example26"], ["subdomain", "example26"], ["created_at", "2016-05-06 10:07:13.011504"], ["updated_at", "2016-05-06 10:07:13.011504"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "webhooks"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::AddWebhookTest: test_should_not_create_webhook_with_invalid_address
------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example27' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example27"], ["subdomain", "example27"], ["created_at", "2016-05-06 10:07:13.018806"], ["updated_at", "2016-05-06 10:07:13.018806"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "webhooks"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::User::DeleteUserTest: test_should_delete_user_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:13.027269"], ["updated_at", "2016-05-06 10:07:13.027269"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example23.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "account_owner", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example23.com"], ["first_name", "First Name 23 "], ["last_name", "Last Name 23"], ["password_salt", "$2a$10$mxA2Rp7/zyYxIxjtMPRo4e"], ["password_digest", "$2a$10$mxA2Rp7/zyYxIxjtMPRo4e/RUxiHqflyKTV9SOvHfDoIh7.kT6SaC"], ["shop_id", 1], ["account_owner", "t"], ["created_at", "2016-05-06 10:07:13.162829"], ["updated_at", "2016-05-06 10:07:13.162829"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example24.com' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example24.com"], ["first_name", "First Name 24 "], ["last_name", "Last Name 24"], ["password_salt", "$2a$10$eV3d.Vdxc0473uGc5KwPq."], ["password_digest", "$2a$10$eV3d.Vdxc0473uGc5KwPq.weghfbBBf2fthHZZMK3MQR2cpEScjVm"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:13.298863"], ["updated_at", "2016-05-06 10:07:13.298863"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36mMagazCore::User Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::User Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------
MagazCore::AdminServices::User::DeleteUserTest: test_should_not_delete_shop_owner
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:13.309368"], ["updated_at", "2016-05-06 10:07:13.309368"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example25.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "account_owner", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example25.com"], ["first_name", "First Name 25 "], ["last_name", "Last Name 25"], ["password_salt", "$2a$10$MOaDyLngSA1PRcAwAayeXO"], ["password_digest", "$2a$10$MOaDyLngSA1PRcAwAayeXO907hHb7dskFvyrif/rRoH8OnHG3PycG"], ["shop_id", 1], ["account_owner", "t"], ["created_at", "2016-05-06 10:07:13.445744"], ["updated_at", "2016-05-06 10:07:13.445744"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example26.com' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example26.com"], ["first_name", "First Name 26 "], ["last_name", "Last Name 26"], ["password_salt", "$2a$10$FEGeP7.iuiIeIcCncFbM8O"], ["password_digest", "$2a$10$FEGeP7.iuiIeIcCncFbM8OiX.FCUPNjU.pzDeqHHOxnqo7mWTbmX6"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:13.577314"], ["updated_at", "2016-05-06 10:07:13.577314"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::User::DeleteUserTest: test_should_not_delete_user_with_invalid_params
-----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:13.593014"], ["updated_at", "2016-05-06 10:07:13.593014"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example27.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "account_owner", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example27.com"], ["first_name", "First Name 27 "], ["last_name", "Last Name 27"], ["password_salt", "$2a$10$pA8Qzbrk5JybQ5OWtEGdBe"], ["password_digest", "$2a$10$pA8Qzbrk5JybQ5OWtEGdBevhSz7RvIamXO1TnOc6mRlSVUCQAeumi"], ["shop_id", 1], ["account_owner", "t"], ["created_at", "2016-05-06 10:07:13.727295"], ["updated_at", "2016-05-06 10:07:13.727295"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example28.com' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example28.com"], ["first_name", "First Name 28 "], ["last_name", "Last Name 28"], ["password_salt", "$2a$10$26QSkQy8kb6oKKNWOfxohO"], ["password_digest", "$2a$10$26QSkQy8kb6oKKNWOfxohOAh5sxcHpfuvjMUOESgevLFWuu.bmCrO"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:13.863607"], ["updated_at", "2016-05-06 10:07:13.863607"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::AddSubscriberNotificationTest: test_shoul_not_add_subscriber_notification_with_existing_email
-----------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:13.875811"], ["updated_at", "2016-05-06 10:07:13.875811"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["notification_method", "email 1"], ["subscription_address", "some11@here.run"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:13.883538"], ["updated_at", "2016-05-06 10:07:13.883538"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."subscription_address" = ?[0m  [["shop_id", 1], ["subscription_address", "some11@here.run"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."subscription_address" = ?  [["shop_id", 1], ["subscription_address", "some11@here.run"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::AddSubscriberNotificationTest: test_shoul_not_add_subscriber_notification_with_invalid_email
----------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:13.892870"], ["updated_at", "2016-05-06 10:07:13.892870"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["notification_method", "email 2"], ["subscription_address", "some12@here.run"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:13.895161"], ["updated_at", "2016-05-06 10:07:13.895161"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."subscription_address" = ?  [["shop_id", 1], ["subscription_address", "wrong email"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."subscription_address" = ?[0m  [["shop_id", 1], ["subscription_address", "wrong email"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::AddSubscriberNotificationTest: test_shoul_not_add_subscriber_notification_with_invalid_phone
----------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:13.904677"], ["updated_at", "2016-05-06 10:07:13.904677"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["notification_method", "email 3"], ["subscription_address", "some13@here.run"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:13.906884"], ["updated_at", "2016-05-06 10:07:13.906884"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::AddSubscriberNotificationTest: test_shoul_not_add_subscriber_notification_with_too_long_email
-----------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:13.914612"], ["updated_at", "2016-05-06 10:07:13.914612"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["notification_method", "email 4"], ["subscription_address", "some14@here.run"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:13.916708"], ["updated_at", "2016-05-06 10:07:13.916708"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."subscription_address" = ?  [["shop_id", 1], ["subscription_address", "loooooooooooooooooong@email.com"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."subscription_address" = ?[0m  [["shop_id", 1], ["subscription_address", "loooooooooooooooooong@email.com"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::AddSubscriberNotificationTest: test_should_add_subscriber_notification_with_valid_email_params
------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:13.925920"], ["updated_at", "2016-05-06 10:07:13.925920"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["notification_method", "email 5"], ["subscription_address", "some15@here.run"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:13.927869"], ["updated_at", "2016-05-06 10:07:13.927869"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."subscription_address" = ?[0m  [["shop_id", 1], ["subscription_address", "valid@email.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["notification_method", "email"], ["subscription_address", "valid@email.com"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:13.931598"], ["updated_at", "2016-05-06 10:07:13.931598"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::SubscriberNotification Load (0.1ms)[0m  SELECT  "order_subscriptions".* FROM "order_subscriptions" WHERE "order_subscriptions"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions"[0m
  [1m[35mMagazCore::SubscriberNotification Load (0.0ms)[0m  SELECT  "order_subscriptions".* FROM "order_subscriptions" WHERE "order_subscriptions"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::AddSubscriberNotificationTest: test_should_add_subscriber_notification_with_valid_phone_params
------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:13.936343"], ["updated_at", "2016-05-06 10:07:13.936343"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["notification_method", "email 6"], ["subscription_address", "some16@here.run"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:13.938233"], ["updated_at", "2016-05-06 10:07:13.938233"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["notification_method", "phone"], ["subscription_address", "9379992"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:13.940667"], ["updated_at", "2016-05-06 10:07:13.940667"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::SubscriberNotification Load (0.0ms)[0m  [1mSELECT  "order_subscriptions".* FROM "order_subscriptions" WHERE "order_subscriptions"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36mMagazCore::SubscriberNotification Load (0.0ms)[0m  [1mSELECT  "order_subscriptions".* FROM "order_subscriptions" WHERE "order_subscriptions"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::AddSubscriberNotificationTest: test_should_not_add_subscriber_notification_with_blank_params
----------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:13.944918"], ["updated_at", "2016-05-06 10:07:13.944918"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["notification_method", "email 7"], ["subscription_address", "some17@here.run"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:13.946893"], ["updated_at", "2016-05-06 10:07:13.946893"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::ChangePageTest: test_should_not_update_page_with_existing_handle
------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:13.954096"], ["updated_at", "2016-05-06 10:07:13.954096"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 189"], ["content", "Content 191"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:13.956586"], ["updated_at", "2016-05-06 10:07:13.956586"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", "handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "Title 190"], ["content", "Content 192"], ["shop_id", 1], ["handle", "Handle"], ["slug", "handle"], ["created_at", "2016-05-06 10:07:13.960163"], ["updated_at", "2016-05-06 10:07:13.960163"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Load (0.2ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", "ChangedTitle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?  [["shop_id", 1], ["handle", "Handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", "ChangedTitle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?  [["shop_id", 1], ["handle", "Handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::ChangePageTest: test_should_not_update_page_with_existing_title
-----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:13.978857"], ["updated_at", "2016-05-06 10:07:13.978857"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 191"], ["content", "Content 193"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:13.980942"], ["updated_at", "2016-05-06 10:07:13.980942"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Exists (0.0ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", "handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Title 192"], ["content", "Content 194"], ["shop_id", 1], ["handle", "Handle"], ["slug", "handle"], ["created_at", "2016-05-06 10:07:13.983568"], ["updated_at", "2016-05-06 10:07:13.983568"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "Title 192"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?[0m  [["shop_id", 1], ["handle", "ChangedC handle"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.1ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "Title 192"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?[0m  [["shop_id", 1], ["handle", "ChangedC handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::ChangePageTest: test_should_update_page_with_some_blank_params
----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:14.001986"], ["updated_at", "2016-05-06 10:07:14.001986"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 193"], ["content", "Content 195"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:14.004193"], ["updated_at", "2016-05-06 10:07:14.004193"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", "handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("title", "content", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "Title 194"], ["content", "Content 196"], ["shop_id", 1], ["handle", "Handle"], ["slug", "handle"], ["created_at", "2016-05-06 10:07:14.007229"], ["updated_at", "2016-05-06 10:07:14.007229"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "2"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 2]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "2"]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 2]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" != ?) AND "pages"."slug" = ? LIMIT 1[0m  [["id", 2], ["slug", ""]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "pages" SET "content" = ?, "page_title" = ?, "meta_description" = ?, "handle" = ?, "slug" = ?, "updated_at" = ? WHERE "pages"."id" = ?  [["content", ""], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["updated_at", "2016-05-06 10:07:14.013745"], ["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::ChangePageTest: test_should_update_page_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:14.017942"], ["updated_at", "2016-05-06 10:07:14.017942"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 195"], ["content", "Content 197"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:14.019892"], ["updated_at", "2016-05-06 10:07:14.019892"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Exists (0.0ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", "handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("title", "content", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Title 196"], ["content", "Content 198"], ["shop_id", 1], ["handle", "Handle"], ["slug", "handle"], ["created_at", "2016-05-06 10:07:14.022396"], ["updated_at", "2016-05-06 10:07:14.022396"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "Changed title"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?[0m  [["shop_id", 1], ["handle", "Changed handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."slug" = ?  ORDER BY "pages"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Exists (0.0ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" != ?) AND "pages"."slug" = ? LIMIT 1  [["id", 1], ["slug", "changed-handle"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "pages" SET "title" = ?, "content" = ?, "page_title" = ?, "meta_description" = ?, "handle" = ?, "slug" = ?, "updated_at" = ? WHERE "pages"."id" = ?[0m  [["title", "Changed title"], ["content", "Changed content"], ["page_title", "Changed page_title"], ["meta_description", "Changed meta_description"], ["handle", "Changed handle"], ["slug", "changed-handle"], ["updated_at", "2016-05-06 10:07:14.030269"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Load (0.0ms)[0m  [1mSELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
MagazCore::ThemeTest: test_#activate!
-------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example28' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example28"], ["subdomain", "example28"], ["created_at", "2016-05-06 10:07:14.037210"], ["updated_at", "2016-05-06 10:07:14.037210"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme2"], ["created_at", "2016-05-06 10:07:14.090107"], ["updated_at", "2016-05-06 10:07:14.090107"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.091707"], ["updated_at", "2016-05-06 10:07:14.091707"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.092829"], ["updated_at", "2016-05-06 10:07:14.092829"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.093808"], ["updated_at", "2016-05-06 10:07:14.093808"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.094701"], ["updated_at", "2016-05-06 10:07:14.094701"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.095585"], ["updated_at", "2016-05-06 10:07:14.095585"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.096376"], ["updated_at", "2016-05-06 10:07:14.096376"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.097152"], ["updated_at", "2016-05-06 10:07:14.097152"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.097890"], ["updated_at", "2016-05-06 10:07:14.097890"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.098621"], ["updated_at", "2016-05-06 10:07:14.098621"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.099384"], ["updated_at", "2016-05-06 10:07:14.099384"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.100112"], ["updated_at", "2016-05-06 10:07:14.100112"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.100858"], ["updated_at", "2016-05-06 10:07:14.100858"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.101613"], ["updated_at", "2016-05-06 10:07:14.101613"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.102475"], ["updated_at", "2016-05-06 10:07:14.102475"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.103422"], ["updated_at", "2016-05-06 10:07:14.103422"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.104316"], ["updated_at", "2016-05-06 10:07:14.104316"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.105187"], ["updated_at", "2016-05-06 10:07:14.105187"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.106000"], ["updated_at", "2016-05-06 10:07:14.106000"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.106852"], ["updated_at", "2016-05-06 10:07:14.106852"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.107640"], ["updated_at", "2016-05-06 10:07:14.107640"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.108406"], ["updated_at", "2016-05-06 10:07:14.108406"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.109167"], ["updated_at", "2016-05-06 10:07:14.109167"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.109938"], ["updated_at", "2016-05-06 10:07:14.109938"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.110674"], ["updated_at", "2016-05-06 10:07:14.110674"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.111447"], ["updated_at", "2016-05-06 10:07:14.111447"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.112193"], ["updated_at", "2016-05-06 10:07:14.112193"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.112931"], ["updated_at", "2016-05-06 10:07:14.112931"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.113692"], ["updated_at", "2016-05-06 10:07:14.113692"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.114471"], ["updated_at", "2016-05-06 10:07:14.114471"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.115199"], ["updated_at", "2016-05-06 10:07:14.115199"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.115944"], ["updated_at", "2016-05-06 10:07:14.115944"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.116701"], ["updated_at", "2016-05-06 10:07:14.116701"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.117440"], ["updated_at", "2016-05-06 10:07:14.117440"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.118178"], ["updated_at", "2016-05-06 10:07:14.118178"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.118926"], ["updated_at", "2016-05-06 10:07:14.118926"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.119643"], ["updated_at", "2016-05-06 10:07:14.119643"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.120384"], ["updated_at", "2016-05-06 10:07:14.120384"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.121153"], ["updated_at", "2016-05-06 10:07:14.121153"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.121869"], ["updated_at", "2016-05-06 10:07:14.121869"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.122646"], ["updated_at", "2016-05-06 10:07:14.122646"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.123421"], ["updated_at", "2016-05-06 10:07:14.123421"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.124158"], ["updated_at", "2016-05-06 10:07:14.124158"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.124882"], ["updated_at", "2016-05-06 10:07:14.124882"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.125644"], ["updated_at", "2016-05-06 10:07:14.125644"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.126485"], ["updated_at", "2016-05-06 10:07:14.126485"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.127223"], ["updated_at", "2016-05-06 10:07:14.127223"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.127998"], ["updated_at", "2016-05-06 10:07:14.127998"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.128789"], ["updated_at", "2016-05-06 10:07:14.128789"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.129560"], ["updated_at", "2016-05-06 10:07:14.129560"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.130355"], ["updated_at", "2016-05-06 10:07:14.130355"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Theme Load (0.0ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Asset Load (0.2ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?  [["theme_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Theme2"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-06 10:07:14.172348"], ["updated_at", "2016-05-06 10:07:14.172348"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-06 10:07:14.091707"], ["updated_at", "2016-05-06 10:07:14.091707"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-06 10:07:14.092829"], ["updated_at", "2016-05-06 10:07:14.092829"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-06 10:07:14.093808"], ["updated_at", "2016-05-06 10:07:14.093808"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-06 10:07:14.094701"], ["updated_at", "2016-05-06 10:07:14.094701"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-06 10:07:14.095585"], ["updated_at", "2016-05-06 10:07:14.095585"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-06 10:07:14.096376"], ["updated_at", "2016-05-06 10:07:14.096376"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["created_at", "2016-05-06 10:07:14.097152"], ["updated_at", "2016-05-06 10:07:14.097152"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["created_at", "2016-05-06 10:07:14.097890"], ["updated_at", "2016-05-06 10:07:14.097890"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["created_at", "2016-05-06 10:07:14.098621"], ["updated_at", "2016-05-06 10:07:14.098621"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["created_at", "2016-05-06 10:07:14.099384"], ["updated_at", "2016-05-06 10:07:14.099384"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["created_at", "2016-05-06 10:07:14.100112"], ["updated_at", "2016-05-06 10:07:14.100112"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["created_at", "2016-05-06 10:07:14.100858"], ["updated_at", "2016-05-06 10:07:14.100858"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["created_at", "2016-05-06 10:07:14.101613"], ["updated_at", "2016-05-06 10:07:14.101613"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-06 10:07:14.102475"], ["updated_at", "2016-05-06 10:07:14.102475"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-06 10:07:14.103422"], ["updated_at", "2016-05-06 10:07:14.103422"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-06 10:07:14.104316"], ["updated_at", "2016-05-06 10:07:14.104316"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-06 10:07:14.105187"], ["updated_at", "2016-05-06 10:07:14.105187"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-06 10:07:14.106000"], ["updated_at", "2016-05-06 10:07:14.106000"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-06 10:07:14.106852"], ["updated_at", "2016-05-06 10:07:14.106852"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-06 10:07:14.107640"], ["updated_at", "2016-05-06 10:07:14.107640"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-06 10:07:14.108406"], ["updated_at", "2016-05-06 10:07:14.108406"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-06 10:07:14.109167"], ["updated_at", "2016-05-06 10:07:14.109167"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-06 10:07:14.109938"], ["updated_at", "2016-05-06 10:07:14.109938"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-06 10:07:14.110674"], ["updated_at", "2016-05-06 10:07:14.110674"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-06 10:07:14.111447"], ["updated_at", "2016-05-06 10:07:14.111447"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-06 10:07:14.112193"], ["updated_at", "2016-05-06 10:07:14.112193"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-06 10:07:14.112931"], ["updated_at", "2016-05-06 10:07:14.112931"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-06 10:07:14.113692"], ["updated_at", "2016-05-06 10:07:14.113692"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-06 10:07:14.114471"], ["updated_at", "2016-05-06 10:07:14.114471"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-06 10:07:14.115199"], ["updated_at", "2016-05-06 10:07:14.115199"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-06 10:07:14.115944"], ["updated_at", "2016-05-06 10:07:14.115944"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["created_at", "2016-05-06 10:07:14.116701"], ["updated_at", "2016-05-06 10:07:14.116701"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["created_at", "2016-05-06 10:07:14.117440"], ["updated_at", "2016-05-06 10:07:14.117440"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["created_at", "2016-05-06 10:07:14.118178"], ["updated_at", "2016-05-06 10:07:14.118178"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["created_at", "2016-05-06 10:07:14.118926"], ["updated_at", "2016-05-06 10:07:14.118926"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["created_at", "2016-05-06 10:07:14.119643"], ["updated_at", "2016-05-06 10:07:14.119643"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-06 10:07:14.120384"], ["updated_at", "2016-05-06 10:07:14.120384"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-06 10:07:14.121153"], ["updated_at", "2016-05-06 10:07:14.121153"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-06 10:07:14.121869"], ["updated_at", "2016-05-06 10:07:14.121869"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-06 10:07:14.122646"], ["updated_at", "2016-05-06 10:07:14.122646"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-06 10:07:14.123421"], ["updated_at", "2016-05-06 10:07:14.123421"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-06 10:07:14.124158"], ["updated_at", "2016-05-06 10:07:14.124158"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-06 10:07:14.124882"], ["updated_at", "2016-05-06 10:07:14.124882"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-06 10:07:14.125644"], ["updated_at", "2016-05-06 10:07:14.125644"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["created_at", "2016-05-06 10:07:14.126485"], ["updated_at", "2016-05-06 10:07:14.126485"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-06 10:07:14.127223"], ["updated_at", "2016-05-06 10:07:14.127223"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-06 10:07:14.127998"], ["updated_at", "2016-05-06 10:07:14.127998"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["created_at", "2016-05-06 10:07:14.128789"], ["updated_at", "2016-05-06 10:07:14.128789"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["created_at", "2016-05-06 10:07:14.129560"], ["updated_at", "2016-05-06 10:07:14.129560"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["created_at", "2016-05-06 10:07:14.130355"], ["updated_at", "2016-05-06 10:07:14.130355"], ["theme_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "themes" SET "role" = ?, "updated_at" = ? WHERE "themes"."id" = ?[0m  [["role", "main"], ["updated_at", "2016-05-06 10:07:14.215950"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Theme Load (0.0ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------
MagazCore::ThemeTest: test_#deactivate!
---------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example29' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example29"], ["subdomain", "example29"], ["created_at", "2016-05-06 10:07:14.222768"], ["updated_at", "2016-05-06 10:07:14.222768"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme3"], ["created_at", "2016-05-06 10:07:14.269159"], ["updated_at", "2016-05-06 10:07:14.269159"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.270243"], ["updated_at", "2016-05-06 10:07:14.270243"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.271071"], ["updated_at", "2016-05-06 10:07:14.271071"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.271844"], ["updated_at", "2016-05-06 10:07:14.271844"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.272630"], ["updated_at", "2016-05-06 10:07:14.272630"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.273408"], ["updated_at", "2016-05-06 10:07:14.273408"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.274136"], ["updated_at", "2016-05-06 10:07:14.274136"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.274896"], ["updated_at", "2016-05-06 10:07:14.274896"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.275652"], ["updated_at", "2016-05-06 10:07:14.275652"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.276382"], ["updated_at", "2016-05-06 10:07:14.276382"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.277115"], ["updated_at", "2016-05-06 10:07:14.277115"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.277856"], ["updated_at", "2016-05-06 10:07:14.277856"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.278526"], ["updated_at", "2016-05-06 10:07:14.278526"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.279224"], ["updated_at", "2016-05-06 10:07:14.279224"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.279898"], ["updated_at", "2016-05-06 10:07:14.279898"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.280587"], ["updated_at", "2016-05-06 10:07:14.280587"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.281754"], ["updated_at", "2016-05-06 10:07:14.281754"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.282847"], ["updated_at", "2016-05-06 10:07:14.282847"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.283887"], ["updated_at", "2016-05-06 10:07:14.283887"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.284956"], ["updated_at", "2016-05-06 10:07:14.284956"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.285966"], ["updated_at", "2016-05-06 10:07:14.285966"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.286977"], ["updated_at", "2016-05-06 10:07:14.286977"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.287990"], ["updated_at", "2016-05-06 10:07:14.287990"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.288988"], ["updated_at", "2016-05-06 10:07:14.288988"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.289983"], ["updated_at", "2016-05-06 10:07:14.289983"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.290992"], ["updated_at", "2016-05-06 10:07:14.290992"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.291912"], ["updated_at", "2016-05-06 10:07:14.291912"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.292743"], ["updated_at", "2016-05-06 10:07:14.292743"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.293580"], ["updated_at", "2016-05-06 10:07:14.293580"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.294413"], ["updated_at", "2016-05-06 10:07:14.294413"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.295225"], ["updated_at", "2016-05-06 10:07:14.295225"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.295974"], ["updated_at", "2016-05-06 10:07:14.295974"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.296675"], ["updated_at", "2016-05-06 10:07:14.296675"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.297362"], ["updated_at", "2016-05-06 10:07:14.297362"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.298085"], ["updated_at", "2016-05-06 10:07:14.298085"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.298776"], ["updated_at", "2016-05-06 10:07:14.298776"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.299495"], ["updated_at", "2016-05-06 10:07:14.299495"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.300189"], ["updated_at", "2016-05-06 10:07:14.300189"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.300888"], ["updated_at", "2016-05-06 10:07:14.300888"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.301596"], ["updated_at", "2016-05-06 10:07:14.301596"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.302325"], ["updated_at", "2016-05-06 10:07:14.302325"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.303045"], ["updated_at", "2016-05-06 10:07:14.303045"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.303747"], ["updated_at", "2016-05-06 10:07:14.303747"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.304460"], ["updated_at", "2016-05-06 10:07:14.304460"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.305180"], ["updated_at", "2016-05-06 10:07:14.305180"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.305918"], ["updated_at", "2016-05-06 10:07:14.305918"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.306627"], ["updated_at", "2016-05-06 10:07:14.306627"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.307343"], ["updated_at", "2016-05-06 10:07:14.307343"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.308042"], ["updated_at", "2016-05-06 10:07:14.308042"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.308754"], ["updated_at", "2016-05-06 10:07:14.308754"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.309449"], ["updated_at", "2016-05-06 10:07:14.309449"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Theme Load (0.0ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Asset Load (0.2ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?  [["theme_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Theme3"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-06 10:07:14.345475"], ["updated_at", "2016-05-06 10:07:14.345475"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-06 10:07:14.270243"], ["updated_at", "2016-05-06 10:07:14.270243"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-06 10:07:14.271071"], ["updated_at", "2016-05-06 10:07:14.271071"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-06 10:07:14.271844"], ["updated_at", "2016-05-06 10:07:14.271844"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-06 10:07:14.272630"], ["updated_at", "2016-05-06 10:07:14.272630"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-06 10:07:14.273408"], ["updated_at", "2016-05-06 10:07:14.273408"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-06 10:07:14.274136"], ["updated_at", "2016-05-06 10:07:14.274136"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["created_at", "2016-05-06 10:07:14.274896"], ["updated_at", "2016-05-06 10:07:14.274896"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["created_at", "2016-05-06 10:07:14.275652"], ["updated_at", "2016-05-06 10:07:14.275652"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["created_at", "2016-05-06 10:07:14.276382"], ["updated_at", "2016-05-06 10:07:14.276382"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["created_at", "2016-05-06 10:07:14.277115"], ["updated_at", "2016-05-06 10:07:14.277115"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["created_at", "2016-05-06 10:07:14.277856"], ["updated_at", "2016-05-06 10:07:14.277856"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["created_at", "2016-05-06 10:07:14.278526"], ["updated_at", "2016-05-06 10:07:14.278526"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["created_at", "2016-05-06 10:07:14.279224"], ["updated_at", "2016-05-06 10:07:14.279224"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-06 10:07:14.279898"], ["updated_at", "2016-05-06 10:07:14.279898"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-06 10:07:14.280587"], ["updated_at", "2016-05-06 10:07:14.280587"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-06 10:07:14.281754"], ["updated_at", "2016-05-06 10:07:14.281754"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-06 10:07:14.282847"], ["updated_at", "2016-05-06 10:07:14.282847"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-06 10:07:14.283887"], ["updated_at", "2016-05-06 10:07:14.283887"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-06 10:07:14.284956"], ["updated_at", "2016-05-06 10:07:14.284956"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-06 10:07:14.285966"], ["updated_at", "2016-05-06 10:07:14.285966"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-06 10:07:14.286977"], ["updated_at", "2016-05-06 10:07:14.286977"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-06 10:07:14.287990"], ["updated_at", "2016-05-06 10:07:14.287990"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-06 10:07:14.288988"], ["updated_at", "2016-05-06 10:07:14.288988"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-06 10:07:14.289983"], ["updated_at", "2016-05-06 10:07:14.289983"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-06 10:07:14.290992"], ["updated_at", "2016-05-06 10:07:14.290992"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-06 10:07:14.291912"], ["updated_at", "2016-05-06 10:07:14.291912"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-06 10:07:14.292743"], ["updated_at", "2016-05-06 10:07:14.292743"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-06 10:07:14.293580"], ["updated_at", "2016-05-06 10:07:14.293580"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-06 10:07:14.294413"], ["updated_at", "2016-05-06 10:07:14.294413"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-06 10:07:14.295225"], ["updated_at", "2016-05-06 10:07:14.295225"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-06 10:07:14.295974"], ["updated_at", "2016-05-06 10:07:14.295974"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["created_at", "2016-05-06 10:07:14.296675"], ["updated_at", "2016-05-06 10:07:14.296675"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["created_at", "2016-05-06 10:07:14.297362"], ["updated_at", "2016-05-06 10:07:14.297362"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["created_at", "2016-05-06 10:07:14.298085"], ["updated_at", "2016-05-06 10:07:14.298085"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["created_at", "2016-05-06 10:07:14.298776"], ["updated_at", "2016-05-06 10:07:14.298776"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["created_at", "2016-05-06 10:07:14.299495"], ["updated_at", "2016-05-06 10:07:14.299495"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-06 10:07:14.300189"], ["updated_at", "2016-05-06 10:07:14.300189"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-06 10:07:14.300888"], ["updated_at", "2016-05-06 10:07:14.300888"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-06 10:07:14.301596"], ["updated_at", "2016-05-06 10:07:14.301596"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-06 10:07:14.302325"], ["updated_at", "2016-05-06 10:07:14.302325"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-06 10:07:14.303045"], ["updated_at", "2016-05-06 10:07:14.303045"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-06 10:07:14.303747"], ["updated_at", "2016-05-06 10:07:14.303747"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-06 10:07:14.304460"], ["updated_at", "2016-05-06 10:07:14.304460"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-06 10:07:14.305180"], ["updated_at", "2016-05-06 10:07:14.305180"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["created_at", "2016-05-06 10:07:14.305918"], ["updated_at", "2016-05-06 10:07:14.305918"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-06 10:07:14.306627"], ["updated_at", "2016-05-06 10:07:14.306627"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-06 10:07:14.307343"], ["updated_at", "2016-05-06 10:07:14.307343"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["created_at", "2016-05-06 10:07:14.308042"], ["updated_at", "2016-05-06 10:07:14.308042"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["created_at", "2016-05-06 10:07:14.308754"], ["updated_at", "2016-05-06 10:07:14.308754"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["created_at", "2016-05-06 10:07:14.309449"], ["updated_at", "2016-05-06 10:07:14.309449"], ["theme_id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "themes" SET "role" = ?, "updated_at" = ? WHERE "themes"."id" = ?[0m  [["role", "unpublished"], ["updated_at", "2016-05-06 10:07:14.379855"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Theme Load (0.0ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------
MagazCore::ThemeTest: test_finder_of_source_associations
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example30' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example30"], ["subdomain", "example30"], ["created_at", "2016-05-06 10:07:14.386926"], ["updated_at", "2016-05-06 10:07:14.386926"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme4"], ["created_at", "2016-05-06 10:07:14.434554"], ["updated_at", "2016-05-06 10:07:14.434554"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.435621"], ["updated_at", "2016-05-06 10:07:14.435621"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.436415"], ["updated_at", "2016-05-06 10:07:14.436415"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.437135"], ["updated_at", "2016-05-06 10:07:14.437135"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.437910"], ["updated_at", "2016-05-06 10:07:14.437910"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.438622"], ["updated_at", "2016-05-06 10:07:14.438622"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.439342"], ["updated_at", "2016-05-06 10:07:14.439342"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.440048"], ["updated_at", "2016-05-06 10:07:14.440048"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.440774"], ["updated_at", "2016-05-06 10:07:14.440774"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.441497"], ["updated_at", "2016-05-06 10:07:14.441497"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.442194"], ["updated_at", "2016-05-06 10:07:14.442194"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.442920"], ["updated_at", "2016-05-06 10:07:14.442920"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.443644"], ["updated_at", "2016-05-06 10:07:14.443644"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.444361"], ["updated_at", "2016-05-06 10:07:14.444361"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.445077"], ["updated_at", "2016-05-06 10:07:14.445077"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.445803"], ["updated_at", "2016-05-06 10:07:14.445803"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.446716"], ["updated_at", "2016-05-06 10:07:14.446716"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.447832"], ["updated_at", "2016-05-06 10:07:14.447832"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.448925"], ["updated_at", "2016-05-06 10:07:14.448925"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.450023"], ["updated_at", "2016-05-06 10:07:14.450023"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.451114"], ["updated_at", "2016-05-06 10:07:14.451114"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.452156"], ["updated_at", "2016-05-06 10:07:14.452156"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.453169"], ["updated_at", "2016-05-06 10:07:14.453169"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.454189"], ["updated_at", "2016-05-06 10:07:14.454189"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.455230"], ["updated_at", "2016-05-06 10:07:14.455230"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.456251"], ["updated_at", "2016-05-06 10:07:14.456251"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.457260"], ["updated_at", "2016-05-06 10:07:14.457260"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.458098"], ["updated_at", "2016-05-06 10:07:14.458098"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.458958"], ["updated_at", "2016-05-06 10:07:14.458958"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.459800"], ["updated_at", "2016-05-06 10:07:14.459800"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.460641"], ["updated_at", "2016-05-06 10:07:14.460641"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.461424"], ["updated_at", "2016-05-06 10:07:14.461424"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.462143"], ["updated_at", "2016-05-06 10:07:14.462143"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.462852"], ["updated_at", "2016-05-06 10:07:14.462852"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.463580"], ["updated_at", "2016-05-06 10:07:14.463580"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.464317"], ["updated_at", "2016-05-06 10:07:14.464317"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.465032"], ["updated_at", "2016-05-06 10:07:14.465032"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.465738"], ["updated_at", "2016-05-06 10:07:14.465738"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.466464"], ["updated_at", "2016-05-06 10:07:14.466464"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.467191"], ["updated_at", "2016-05-06 10:07:14.467191"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.467886"], ["updated_at", "2016-05-06 10:07:14.467886"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.468613"], ["updated_at", "2016-05-06 10:07:14.468613"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.469319"], ["updated_at", "2016-05-06 10:07:14.469319"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.470025"], ["updated_at", "2016-05-06 10:07:14.470025"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.470789"], ["updated_at", "2016-05-06 10:07:14.470789"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.471549"], ["updated_at", "2016-05-06 10:07:14.471549"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.472238"], ["updated_at", "2016-05-06 10:07:14.472238"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.472944"], ["updated_at", "2016-05-06 10:07:14.472944"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.473640"], ["updated_at", "2016-05-06 10:07:14.473640"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.474340"], ["updated_at", "2016-05-06 10:07:14.474340"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.475050"], ["updated_at", "2016-05-06 10:07:14.475050"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Theme Load (0.0ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Asset Load (0.2ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?  [["theme_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Theme4"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-06 10:07:14.522783"], ["updated_at", "2016-05-06 10:07:14.522783"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-06 10:07:14.435621"], ["updated_at", "2016-05-06 10:07:14.435621"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-06 10:07:14.436415"], ["updated_at", "2016-05-06 10:07:14.436415"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-06 10:07:14.437135"], ["updated_at", "2016-05-06 10:07:14.437135"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-06 10:07:14.437910"], ["updated_at", "2016-05-06 10:07:14.437910"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-06 10:07:14.438622"], ["updated_at", "2016-05-06 10:07:14.438622"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-06 10:07:14.439342"], ["updated_at", "2016-05-06 10:07:14.439342"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["created_at", "2016-05-06 10:07:14.440048"], ["updated_at", "2016-05-06 10:07:14.440048"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["created_at", "2016-05-06 10:07:14.440774"], ["updated_at", "2016-05-06 10:07:14.440774"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["created_at", "2016-05-06 10:07:14.441497"], ["updated_at", "2016-05-06 10:07:14.441497"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["created_at", "2016-05-06 10:07:14.442194"], ["updated_at", "2016-05-06 10:07:14.442194"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["created_at", "2016-05-06 10:07:14.442920"], ["updated_at", "2016-05-06 10:07:14.442920"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["created_at", "2016-05-06 10:07:14.443644"], ["updated_at", "2016-05-06 10:07:14.443644"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["created_at", "2016-05-06 10:07:14.444361"], ["updated_at", "2016-05-06 10:07:14.444361"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-06 10:07:14.445077"], ["updated_at", "2016-05-06 10:07:14.445077"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-06 10:07:14.445803"], ["updated_at", "2016-05-06 10:07:14.445803"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-06 10:07:14.446716"], ["updated_at", "2016-05-06 10:07:14.446716"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-06 10:07:14.447832"], ["updated_at", "2016-05-06 10:07:14.447832"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-06 10:07:14.448925"], ["updated_at", "2016-05-06 10:07:14.448925"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-06 10:07:14.450023"], ["updated_at", "2016-05-06 10:07:14.450023"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-06 10:07:14.451114"], ["updated_at", "2016-05-06 10:07:14.451114"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-06 10:07:14.452156"], ["updated_at", "2016-05-06 10:07:14.452156"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-06 10:07:14.453169"], ["updated_at", "2016-05-06 10:07:14.453169"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-06 10:07:14.454189"], ["updated_at", "2016-05-06 10:07:14.454189"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-06 10:07:14.455230"], ["updated_at", "2016-05-06 10:07:14.455230"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-06 10:07:14.456251"], ["updated_at", "2016-05-06 10:07:14.456251"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-06 10:07:14.457260"], ["updated_at", "2016-05-06 10:07:14.457260"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-06 10:07:14.458098"], ["updated_at", "2016-05-06 10:07:14.458098"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-06 10:07:14.458958"], ["updated_at", "2016-05-06 10:07:14.458958"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-06 10:07:14.459800"], ["updated_at", "2016-05-06 10:07:14.459800"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-06 10:07:14.460641"], ["updated_at", "2016-05-06 10:07:14.460641"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-06 10:07:14.461424"], ["updated_at", "2016-05-06 10:07:14.461424"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["created_at", "2016-05-06 10:07:14.462143"], ["updated_at", "2016-05-06 10:07:14.462143"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["created_at", "2016-05-06 10:07:14.462852"], ["updated_at", "2016-05-06 10:07:14.462852"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["created_at", "2016-05-06 10:07:14.463580"], ["updated_at", "2016-05-06 10:07:14.463580"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["created_at", "2016-05-06 10:07:14.464317"], ["updated_at", "2016-05-06 10:07:14.464317"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["created_at", "2016-05-06 10:07:14.465032"], ["updated_at", "2016-05-06 10:07:14.465032"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-06 10:07:14.465738"], ["updated_at", "2016-05-06 10:07:14.465738"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-06 10:07:14.466464"], ["updated_at", "2016-05-06 10:07:14.466464"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-06 10:07:14.467191"], ["updated_at", "2016-05-06 10:07:14.467191"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-06 10:07:14.467886"], ["updated_at", "2016-05-06 10:07:14.467886"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-06 10:07:14.468613"], ["updated_at", "2016-05-06 10:07:14.468613"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-06 10:07:14.469319"], ["updated_at", "2016-05-06 10:07:14.469319"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-06 10:07:14.470025"], ["updated_at", "2016-05-06 10:07:14.470025"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-06 10:07:14.470789"], ["updated_at", "2016-05-06 10:07:14.470789"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["created_at", "2016-05-06 10:07:14.471549"], ["updated_at", "2016-05-06 10:07:14.471549"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-06 10:07:14.472238"], ["updated_at", "2016-05-06 10:07:14.472238"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-06 10:07:14.472944"], ["updated_at", "2016-05-06 10:07:14.472944"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["created_at", "2016-05-06 10:07:14.473640"], ["updated_at", "2016-05-06 10:07:14.473640"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["created_at", "2016-05-06 10:07:14.474340"], ["updated_at", "2016-05-06 10:07:14.474340"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["created_at", "2016-05-06 10:07:14.475050"], ["updated_at", "2016-05-06 10:07:14.475050"], ["theme_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Theme Load (0.1ms)[0m  SELECT "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MagazCore::ThemeTest: test_self_referencing_association
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example31' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example31"], ["subdomain", "example31"], ["created_at", "2016-05-06 10:07:14.565096"], ["updated_at", "2016-05-06 10:07:14.565096"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme5"], ["created_at", "2016-05-06 10:07:14.618171"], ["updated_at", "2016-05-06 10:07:14.618171"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.619320"], ["updated_at", "2016-05-06 10:07:14.619320"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.620309"], ["updated_at", "2016-05-06 10:07:14.620309"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.621083"], ["updated_at", "2016-05-06 10:07:14.621083"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.621927"], ["updated_at", "2016-05-06 10:07:14.621927"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.622706"], ["updated_at", "2016-05-06 10:07:14.622706"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.623505"], ["updated_at", "2016-05-06 10:07:14.623505"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.624302"], ["updated_at", "2016-05-06 10:07:14.624302"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.625065"], ["updated_at", "2016-05-06 10:07:14.625065"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.625852"], ["updated_at", "2016-05-06 10:07:14.625852"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.626618"], ["updated_at", "2016-05-06 10:07:14.626618"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.627357"], ["updated_at", "2016-05-06 10:07:14.627357"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.628092"], ["updated_at", "2016-05-06 10:07:14.628092"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.628843"], ["updated_at", "2016-05-06 10:07:14.628843"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.629578"], ["updated_at", "2016-05-06 10:07:14.629578"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.630433"], ["updated_at", "2016-05-06 10:07:14.630433"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.631219"], ["updated_at", "2016-05-06 10:07:14.631219"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.631980"], ["updated_at", "2016-05-06 10:07:14.631980"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.632751"], ["updated_at", "2016-05-06 10:07:14.632751"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.633505"], ["updated_at", "2016-05-06 10:07:14.633505"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.634262"], ["updated_at", "2016-05-06 10:07:14.634262"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.635024"], ["updated_at", "2016-05-06 10:07:14.635024"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.635794"], ["updated_at", "2016-05-06 10:07:14.635794"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.636555"], ["updated_at", "2016-05-06 10:07:14.636555"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.637302"], ["updated_at", "2016-05-06 10:07:14.637302"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.638050"], ["updated_at", "2016-05-06 10:07:14.638050"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.638778"], ["updated_at", "2016-05-06 10:07:14.638778"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.639512"], ["updated_at", "2016-05-06 10:07:14.639512"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.640233"], ["updated_at", "2016-05-06 10:07:14.640233"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.640982"], ["updated_at", "2016-05-06 10:07:14.640982"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.641739"], ["updated_at", "2016-05-06 10:07:14.641739"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.642494"], ["updated_at", "2016-05-06 10:07:14.642494"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.643247"], ["updated_at", "2016-05-06 10:07:14.643247"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.643988"], ["updated_at", "2016-05-06 10:07:14.643988"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.644760"], ["updated_at", "2016-05-06 10:07:14.644760"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.645551"], ["updated_at", "2016-05-06 10:07:14.645551"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.646366"], ["updated_at", "2016-05-06 10:07:14.646366"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.647676"], ["updated_at", "2016-05-06 10:07:14.647676"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.648706"], ["updated_at", "2016-05-06 10:07:14.648706"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.649681"], ["updated_at", "2016-05-06 10:07:14.649681"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.650657"], ["updated_at", "2016-05-06 10:07:14.650657"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.651624"], ["updated_at", "2016-05-06 10:07:14.651624"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.652587"], ["updated_at", "2016-05-06 10:07:14.652587"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.653556"], ["updated_at", "2016-05-06 10:07:14.653556"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.654600"], ["updated_at", "2016-05-06 10:07:14.654600"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.655693"], ["updated_at", "2016-05-06 10:07:14.655693"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.656766"], ["updated_at", "2016-05-06 10:07:14.656766"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.658147"], ["updated_at", "2016-05-06 10:07:14.658147"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.658859"], ["updated_at", "2016-05-06 10:07:14.658859"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.659836"], ["updated_at", "2016-05-06 10:07:14.659836"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.660778"], ["updated_at", "2016-05-06 10:07:14.660778"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Theme Load (0.0ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Asset Load (0.5ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?  [["theme_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Theme5"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-06 10:07:14.711806"], ["updated_at", "2016-05-06 10:07:14.711806"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-06 10:07:14.619320"], ["updated_at", "2016-05-06 10:07:14.619320"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-06 10:07:14.620309"], ["updated_at", "2016-05-06 10:07:14.620309"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-06 10:07:14.621083"], ["updated_at", "2016-05-06 10:07:14.621083"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-06 10:07:14.621927"], ["updated_at", "2016-05-06 10:07:14.621927"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-06 10:07:14.622706"], ["updated_at", "2016-05-06 10:07:14.622706"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-06 10:07:14.623505"], ["updated_at", "2016-05-06 10:07:14.623505"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["created_at", "2016-05-06 10:07:14.624302"], ["updated_at", "2016-05-06 10:07:14.624302"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["created_at", "2016-05-06 10:07:14.625065"], ["updated_at", "2016-05-06 10:07:14.625065"], ["theme_id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["created_at", "2016-05-06 10:07:14.625852"], ["updated_at", "2016-05-06 10:07:14.625852"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["created_at", "2016-05-06 10:07:14.626618"], ["updated_at", "2016-05-06 10:07:14.626618"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["created_at", "2016-05-06 10:07:14.627357"], ["updated_at", "2016-05-06 10:07:14.627357"], ["theme_id", 2]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["created_at", "2016-05-06 10:07:14.628092"], ["updated_at", "2016-05-06 10:07:14.628092"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["created_at", "2016-05-06 10:07:14.628843"], ["updated_at", "2016-05-06 10:07:14.628843"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-06 10:07:14.629578"], ["updated_at", "2016-05-06 10:07:14.629578"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-06 10:07:14.630433"], ["updated_at", "2016-05-06 10:07:14.630433"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-06 10:07:14.631219"], ["updated_at", "2016-05-06 10:07:14.631219"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-06 10:07:14.631980"], ["updated_at", "2016-05-06 10:07:14.631980"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-06 10:07:14.632751"], ["updated_at", "2016-05-06 10:07:14.632751"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-06 10:07:14.633505"], ["updated_at", "2016-05-06 10:07:14.633505"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-06 10:07:14.634262"], ["updated_at", "2016-05-06 10:07:14.634262"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-06 10:07:14.635024"], ["updated_at", "2016-05-06 10:07:14.635024"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-06 10:07:14.635794"], ["updated_at", "2016-05-06 10:07:14.635794"], ["theme_id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-06 10:07:14.636555"], ["updated_at", "2016-05-06 10:07:14.636555"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-06 10:07:14.637302"], ["updated_at", "2016-05-06 10:07:14.637302"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-06 10:07:14.638050"], ["updated_at", "2016-05-06 10:07:14.638050"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-06 10:07:14.638778"], ["updated_at", "2016-05-06 10:07:14.638778"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-06 10:07:14.639512"], ["updated_at", "2016-05-06 10:07:14.639512"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-06 10:07:14.640233"], ["updated_at", "2016-05-06 10:07:14.640233"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-06 10:07:14.640982"], ["updated_at", "2016-05-06 10:07:14.640982"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-06 10:07:14.641739"], ["updated_at", "2016-05-06 10:07:14.641739"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-06 10:07:14.642494"], ["updated_at", "2016-05-06 10:07:14.642494"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["created_at", "2016-05-06 10:07:14.643247"], ["updated_at", "2016-05-06 10:07:14.643247"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["created_at", "2016-05-06 10:07:14.643988"], ["updated_at", "2016-05-06 10:07:14.643988"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["created_at", "2016-05-06 10:07:14.644760"], ["updated_at", "2016-05-06 10:07:14.644760"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["created_at", "2016-05-06 10:07:14.645551"], ["updated_at", "2016-05-06 10:07:14.645551"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["created_at", "2016-05-06 10:07:14.646366"], ["updated_at", "2016-05-06 10:07:14.646366"], ["theme_id", 2]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-06 10:07:14.647676"], ["updated_at", "2016-05-06 10:07:14.647676"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-06 10:07:14.648706"], ["updated_at", "2016-05-06 10:07:14.648706"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-06 10:07:14.649681"], ["updated_at", "2016-05-06 10:07:14.649681"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-06 10:07:14.650657"], ["updated_at", "2016-05-06 10:07:14.650657"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-06 10:07:14.651624"], ["updated_at", "2016-05-06 10:07:14.651624"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-06 10:07:14.652587"], ["updated_at", "2016-05-06 10:07:14.652587"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-06 10:07:14.653556"], ["updated_at", "2016-05-06 10:07:14.653556"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-06 10:07:14.654600"], ["updated_at", "2016-05-06 10:07:14.654600"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["created_at", "2016-05-06 10:07:14.655693"], ["updated_at", "2016-05-06 10:07:14.655693"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-06 10:07:14.656766"], ["updated_at", "2016-05-06 10:07:14.656766"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-06 10:07:14.658147"], ["updated_at", "2016-05-06 10:07:14.658147"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["created_at", "2016-05-06 10:07:14.658859"], ["updated_at", "2016-05-06 10:07:14.658859"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["created_at", "2016-05-06 10:07:14.659836"], ["updated_at", "2016-05-06 10:07:14.659836"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["created_at", "2016-05-06 10:07:14.660778"], ["updated_at", "2016-05-06 10:07:14.660778"], ["theme_id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Theme Exists (0.1ms)[0m  SELECT  1 AS one FROM "themes" WHERE "themes"."source_theme_id" = ? AND "themes"."id" = ? LIMIT 1  [["source_theme_id", 1], ["id", 2]]
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
MagazCore::ThemeTest: test_validates_default_config_presence
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example32' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example32"], ["subdomain", "example32"], ["created_at", "2016-05-06 10:07:14.761747"], ["updated_at", "2016-05-06 10:07:14.761747"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme6"], ["created_at", "2016-05-06 10:07:14.823882"], ["updated_at", "2016-05-06 10:07:14.823882"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.825192"], ["updated_at", "2016-05-06 10:07:14.825192"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.826219"], ["updated_at", "2016-05-06 10:07:14.826219"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.839753"], ["updated_at", "2016-05-06 10:07:14.839753"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.841257"], ["updated_at", "2016-05-06 10:07:14.841257"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.842273"], ["updated_at", "2016-05-06 10:07:14.842273"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.843325"], ["updated_at", "2016-05-06 10:07:14.843325"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.844348"], ["updated_at", "2016-05-06 10:07:14.844348"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.845375"], ["updated_at", "2016-05-06 10:07:14.845375"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.846395"], ["updated_at", "2016-05-06 10:07:14.846395"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.847298"], ["updated_at", "2016-05-06 10:07:14.847298"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.848131"], ["updated_at", "2016-05-06 10:07:14.848131"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.848953"], ["updated_at", "2016-05-06 10:07:14.848953"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.849785"], ["updated_at", "2016-05-06 10:07:14.849785"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.850650"], ["updated_at", "2016-05-06 10:07:14.850650"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.851361"], ["updated_at", "2016-05-06 10:07:14.851361"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.852067"], ["updated_at", "2016-05-06 10:07:14.852067"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.852786"], ["updated_at", "2016-05-06 10:07:14.852786"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.853505"], ["updated_at", "2016-05-06 10:07:14.853505"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.854180"], ["updated_at", "2016-05-06 10:07:14.854180"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.854903"], ["updated_at", "2016-05-06 10:07:14.854903"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.855632"], ["updated_at", "2016-05-06 10:07:14.855632"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.856350"], ["updated_at", "2016-05-06 10:07:14.856350"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.857047"], ["updated_at", "2016-05-06 10:07:14.857047"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.857763"], ["updated_at", "2016-05-06 10:07:14.857763"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.858476"], ["updated_at", "2016-05-06 10:07:14.858476"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.859190"], ["updated_at", "2016-05-06 10:07:14.859190"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.859868"], ["updated_at", "2016-05-06 10:07:14.859868"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.860585"], ["updated_at", "2016-05-06 10:07:14.860585"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.861290"], ["updated_at", "2016-05-06 10:07:14.861290"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.861977"], ["updated_at", "2016-05-06 10:07:14.861977"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.862680"], ["updated_at", "2016-05-06 10:07:14.862680"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.863380"], ["updated_at", "2016-05-06 10:07:14.863380"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.864073"], ["updated_at", "2016-05-06 10:07:14.864073"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.864786"], ["updated_at", "2016-05-06 10:07:14.864786"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.865468"], ["updated_at", "2016-05-06 10:07:14.865468"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.866187"], ["updated_at", "2016-05-06 10:07:14.866187"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.866888"], ["updated_at", "2016-05-06 10:07:14.866888"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.867558"], ["updated_at", "2016-05-06 10:07:14.867558"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.868257"], ["updated_at", "2016-05-06 10:07:14.868257"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.868952"], ["updated_at", "2016-05-06 10:07:14.868952"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.869657"], ["updated_at", "2016-05-06 10:07:14.869657"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.870362"], ["updated_at", "2016-05-06 10:07:14.870362"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.871040"], ["updated_at", "2016-05-06 10:07:14.871040"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.871727"], ["updated_at", "2016-05-06 10:07:14.871727"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.872512"], ["updated_at", "2016-05-06 10:07:14.872512"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.873223"], ["updated_at", "2016-05-06 10:07:14.873223"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.873903"], ["updated_at", "2016-05-06 10:07:14.873903"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.874615"], ["updated_at", "2016-05-06 10:07:14.874615"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.875297"], ["updated_at", "2016-05-06 10:07:14.875297"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:14.876006"], ["updated_at", "2016-05-06 10:07:14.876006"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Asset Load (0.2ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme6"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-06 10:07:14.916167"], ["updated_at", "2016-05-06 10:07:14.916167"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-06 10:07:14.825192"], ["updated_at", "2016-05-06 10:07:14.825192"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-06 10:07:14.826219"], ["updated_at", "2016-05-06 10:07:14.826219"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-06 10:07:14.839753"], ["updated_at", "2016-05-06 10:07:14.839753"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-06 10:07:14.841257"], ["updated_at", "2016-05-06 10:07:14.841257"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-06 10:07:14.842273"], ["updated_at", "2016-05-06 10:07:14.842273"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-06 10:07:14.843325"], ["updated_at", "2016-05-06 10:07:14.843325"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-06 10:07:14.844348"], ["updated_at", "2016-05-06 10:07:14.844348"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-06 10:07:14.845375"], ["updated_at", "2016-05-06 10:07:14.845375"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-06 10:07:14.846395"], ["updated_at", "2016-05-06 10:07:14.846395"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-06 10:07:14.847298"], ["updated_at", "2016-05-06 10:07:14.847298"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-06 10:07:14.848131"], ["updated_at", "2016-05-06 10:07:14.848131"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-06 10:07:14.848953"], ["updated_at", "2016-05-06 10:07:14.848953"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-06 10:07:14.849785"], ["updated_at", "2016-05-06 10:07:14.849785"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-06 10:07:14.850650"], ["updated_at", "2016-05-06 10:07:14.850650"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-06 10:07:14.851361"], ["updated_at", "2016-05-06 10:07:14.851361"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-06 10:07:14.852067"], ["updated_at", "2016-05-06 10:07:14.852067"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-06 10:07:14.852786"], ["updated_at", "2016-05-06 10:07:14.852786"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-06 10:07:14.853505"], ["updated_at", "2016-05-06 10:07:14.853505"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-06 10:07:14.854180"], ["updated_at", "2016-05-06 10:07:14.854180"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-06 10:07:14.854903"], ["updated_at", "2016-05-06 10:07:14.854903"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-06 10:07:14.855632"], ["updated_at", "2016-05-06 10:07:14.855632"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-06 10:07:14.856350"], ["updated_at", "2016-05-06 10:07:14.856350"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-06 10:07:14.857047"], ["updated_at", "2016-05-06 10:07:14.857047"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-06 10:07:14.857763"], ["updated_at", "2016-05-06 10:07:14.857763"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-06 10:07:14.858476"], ["updated_at", "2016-05-06 10:07:14.858476"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-06 10:07:14.859190"], ["updated_at", "2016-05-06 10:07:14.859190"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-06 10:07:14.859868"], ["updated_at", "2016-05-06 10:07:14.859868"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-06 10:07:14.860585"], ["updated_at", "2016-05-06 10:07:14.860585"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-06 10:07:14.861290"], ["updated_at", "2016-05-06 10:07:14.861290"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-06 10:07:14.861977"], ["updated_at", "2016-05-06 10:07:14.861977"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-06 10:07:14.862680"], ["updated_at", "2016-05-06 10:07:14.862680"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-06 10:07:14.863380"], ["updated_at", "2016-05-06 10:07:14.863380"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-06 10:07:14.864073"], ["updated_at", "2016-05-06 10:07:14.864073"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-06 10:07:14.864786"], ["updated_at", "2016-05-06 10:07:14.864786"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-06 10:07:14.865468"], ["updated_at", "2016-05-06 10:07:14.865468"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-06 10:07:14.866187"], ["updated_at", "2016-05-06 10:07:14.866187"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-06 10:07:14.866888"], ["updated_at", "2016-05-06 10:07:14.866888"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-06 10:07:14.867558"], ["updated_at", "2016-05-06 10:07:14.867558"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-06 10:07:14.868257"], ["updated_at", "2016-05-06 10:07:14.868257"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-06 10:07:14.868952"], ["updated_at", "2016-05-06 10:07:14.868952"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-06 10:07:14.869657"], ["updated_at", "2016-05-06 10:07:14.869657"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-06 10:07:14.870362"], ["updated_at", "2016-05-06 10:07:14.870362"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-06 10:07:14.871040"], ["updated_at", "2016-05-06 10:07:14.871040"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-06 10:07:14.871727"], ["updated_at", "2016-05-06 10:07:14.871727"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-06 10:07:14.872512"], ["updated_at", "2016-05-06 10:07:14.872512"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-06 10:07:14.873223"], ["updated_at", "2016-05-06 10:07:14.873223"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-06 10:07:14.873903"], ["updated_at", "2016-05-06 10:07:14.873903"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-06 10:07:14.874615"], ["updated_at", "2016-05-06 10:07:14.874615"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-06 10:07:14.875297"], ["updated_at", "2016-05-06 10:07:14.875297"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-06 10:07:14.876006"], ["updated_at", "2016-05-06 10:07:14.876006"], ["theme_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------
MagazCore::ThemeTest: test_validates_default_directories_presence
-----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example33' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example33"], ["subdomain", "example33"], ["created_at", "2016-05-06 10:07:14.957496"], ["updated_at", "2016-05-06 10:07:14.957496"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme7"], ["created_at", "2016-05-06 10:07:15.003601"], ["updated_at", "2016-05-06 10:07:15.003601"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.004703"], ["updated_at", "2016-05-06 10:07:15.004703"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.005528"], ["updated_at", "2016-05-06 10:07:15.005528"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.006289"], ["updated_at", "2016-05-06 10:07:15.006289"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.007481"], ["updated_at", "2016-05-06 10:07:15.007481"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.008765"], ["updated_at", "2016-05-06 10:07:15.008765"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.009892"], ["updated_at", "2016-05-06 10:07:15.009892"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.010903"], ["updated_at", "2016-05-06 10:07:15.010903"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.011943"], ["updated_at", "2016-05-06 10:07:15.011943"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.012934"], ["updated_at", "2016-05-06 10:07:15.012934"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.013943"], ["updated_at", "2016-05-06 10:07:15.013943"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.014965"], ["updated_at", "2016-05-06 10:07:15.014965"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.016142"], ["updated_at", "2016-05-06 10:07:15.016142"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.017228"], ["updated_at", "2016-05-06 10:07:15.017228"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.018250"], ["updated_at", "2016-05-06 10:07:15.018250"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.019311"], ["updated_at", "2016-05-06 10:07:15.019311"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.020291"], ["updated_at", "2016-05-06 10:07:15.020291"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.021335"], ["updated_at", "2016-05-06 10:07:15.021335"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.022306"], ["updated_at", "2016-05-06 10:07:15.022306"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.023109"], ["updated_at", "2016-05-06 10:07:15.023109"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.023970"], ["updated_at", "2016-05-06 10:07:15.023970"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.024783"], ["updated_at", "2016-05-06 10:07:15.024783"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.025633"], ["updated_at", "2016-05-06 10:07:15.025633"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.026372"], ["updated_at", "2016-05-06 10:07:15.026372"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.027043"], ["updated_at", "2016-05-06 10:07:15.027043"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.027784"], ["updated_at", "2016-05-06 10:07:15.027784"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.028464"], ["updated_at", "2016-05-06 10:07:15.028464"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.029149"], ["updated_at", "2016-05-06 10:07:15.029149"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.029835"], ["updated_at", "2016-05-06 10:07:15.029835"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.030517"], ["updated_at", "2016-05-06 10:07:15.030517"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.031238"], ["updated_at", "2016-05-06 10:07:15.031238"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.031948"], ["updated_at", "2016-05-06 10:07:15.031948"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.032695"], ["updated_at", "2016-05-06 10:07:15.032695"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.033417"], ["updated_at", "2016-05-06 10:07:15.033417"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.034119"], ["updated_at", "2016-05-06 10:07:15.034119"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.034856"], ["updated_at", "2016-05-06 10:07:15.034856"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.035598"], ["updated_at", "2016-05-06 10:07:15.035598"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.036327"], ["updated_at", "2016-05-06 10:07:15.036327"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.037055"], ["updated_at", "2016-05-06 10:07:15.037055"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.037759"], ["updated_at", "2016-05-06 10:07:15.037759"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.038596"], ["updated_at", "2016-05-06 10:07:15.038596"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.039360"], ["updated_at", "2016-05-06 10:07:15.039360"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.040095"], ["updated_at", "2016-05-06 10:07:15.040095"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.040809"], ["updated_at", "2016-05-06 10:07:15.040809"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.041556"], ["updated_at", "2016-05-06 10:07:15.041556"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.042305"], ["updated_at", "2016-05-06 10:07:15.042305"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.043044"], ["updated_at", "2016-05-06 10:07:15.043044"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.043769"], ["updated_at", "2016-05-06 10:07:15.043769"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.044499"], ["updated_at", "2016-05-06 10:07:15.044499"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.045209"], ["updated_at", "2016-05-06 10:07:15.045209"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.045923"], ["updated_at", "2016-05-06 10:07:15.045923"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Asset Load (0.2ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme7"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-06 10:07:15.087531"], ["updated_at", "2016-05-06 10:07:15.087531"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-06 10:07:15.004703"], ["updated_at", "2016-05-06 10:07:15.004703"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-06 10:07:15.005528"], ["updated_at", "2016-05-06 10:07:15.005528"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-06 10:07:15.006289"], ["updated_at", "2016-05-06 10:07:15.006289"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-06 10:07:15.007481"], ["updated_at", "2016-05-06 10:07:15.007481"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-06 10:07:15.008765"], ["updated_at", "2016-05-06 10:07:15.008765"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-06 10:07:15.009892"], ["updated_at", "2016-05-06 10:07:15.009892"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-06 10:07:15.010903"], ["updated_at", "2016-05-06 10:07:15.010903"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-06 10:07:15.011943"], ["updated_at", "2016-05-06 10:07:15.011943"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-06 10:07:15.012934"], ["updated_at", "2016-05-06 10:07:15.012934"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-06 10:07:15.013943"], ["updated_at", "2016-05-06 10:07:15.013943"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-06 10:07:15.014965"], ["updated_at", "2016-05-06 10:07:15.014965"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-06 10:07:15.016142"], ["updated_at", "2016-05-06 10:07:15.016142"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-06 10:07:15.017228"], ["updated_at", "2016-05-06 10:07:15.017228"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-06 10:07:15.018250"], ["updated_at", "2016-05-06 10:07:15.018250"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-06 10:07:15.019311"], ["updated_at", "2016-05-06 10:07:15.019311"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-06 10:07:15.020291"], ["updated_at", "2016-05-06 10:07:15.020291"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-06 10:07:15.021335"], ["updated_at", "2016-05-06 10:07:15.021335"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-06 10:07:15.022306"], ["updated_at", "2016-05-06 10:07:15.022306"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-06 10:07:15.023109"], ["updated_at", "2016-05-06 10:07:15.023109"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-06 10:07:15.023970"], ["updated_at", "2016-05-06 10:07:15.023970"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-06 10:07:15.024783"], ["updated_at", "2016-05-06 10:07:15.024783"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-06 10:07:15.025633"], ["updated_at", "2016-05-06 10:07:15.025633"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-06 10:07:15.026372"], ["updated_at", "2016-05-06 10:07:15.026372"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-06 10:07:15.027043"], ["updated_at", "2016-05-06 10:07:15.027043"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-06 10:07:15.027784"], ["updated_at", "2016-05-06 10:07:15.027784"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-06 10:07:15.028464"], ["updated_at", "2016-05-06 10:07:15.028464"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-06 10:07:15.029149"], ["updated_at", "2016-05-06 10:07:15.029149"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-06 10:07:15.029835"], ["updated_at", "2016-05-06 10:07:15.029835"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-06 10:07:15.030517"], ["updated_at", "2016-05-06 10:07:15.030517"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-06 10:07:15.031238"], ["updated_at", "2016-05-06 10:07:15.031238"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-06 10:07:15.031948"], ["updated_at", "2016-05-06 10:07:15.031948"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-06 10:07:15.032695"], ["updated_at", "2016-05-06 10:07:15.032695"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-06 10:07:15.033417"], ["updated_at", "2016-05-06 10:07:15.033417"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-06 10:07:15.034119"], ["updated_at", "2016-05-06 10:07:15.034119"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-06 10:07:15.034856"], ["updated_at", "2016-05-06 10:07:15.034856"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-06 10:07:15.035598"], ["updated_at", "2016-05-06 10:07:15.035598"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-06 10:07:15.036327"], ["updated_at", "2016-05-06 10:07:15.036327"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-06 10:07:15.037055"], ["updated_at", "2016-05-06 10:07:15.037055"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-06 10:07:15.037759"], ["updated_at", "2016-05-06 10:07:15.037759"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-06 10:07:15.038596"], ["updated_at", "2016-05-06 10:07:15.038596"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-06 10:07:15.039360"], ["updated_at", "2016-05-06 10:07:15.039360"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-06 10:07:15.040095"], ["updated_at", "2016-05-06 10:07:15.040095"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-06 10:07:15.040809"], ["updated_at", "2016-05-06 10:07:15.040809"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-06 10:07:15.041556"], ["updated_at", "2016-05-06 10:07:15.041556"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-06 10:07:15.042305"], ["updated_at", "2016-05-06 10:07:15.042305"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-06 10:07:15.043044"], ["updated_at", "2016-05-06 10:07:15.043044"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-06 10:07:15.043769"], ["updated_at", "2016-05-06 10:07:15.043769"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-06 10:07:15.044499"], ["updated_at", "2016-05-06 10:07:15.044499"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-06 10:07:15.045209"], ["updated_at", "2016-05-06 10:07:15.045209"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-06 10:07:15.045923"], ["updated_at", "2016-05-06 10:07:15.045923"], ["theme_id", 2]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
MagazCore::ThemeTest: test_validates_default_layout_presence
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example34' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example34"], ["subdomain", "example34"], ["created_at", "2016-05-06 10:07:15.127019"], ["updated_at", "2016-05-06 10:07:15.127019"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme8"], ["created_at", "2016-05-06 10:07:15.182062"], ["updated_at", "2016-05-06 10:07:15.182062"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.183259"], ["updated_at", "2016-05-06 10:07:15.183259"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.184113"], ["updated_at", "2016-05-06 10:07:15.184113"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.184806"], ["updated_at", "2016-05-06 10:07:15.184806"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.185491"], ["updated_at", "2016-05-06 10:07:15.185491"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.186165"], ["updated_at", "2016-05-06 10:07:15.186165"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.186859"], ["updated_at", "2016-05-06 10:07:15.186859"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.187525"], ["updated_at", "2016-05-06 10:07:15.187525"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.188205"], ["updated_at", "2016-05-06 10:07:15.188205"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.188896"], ["updated_at", "2016-05-06 10:07:15.188896"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.189601"], ["updated_at", "2016-05-06 10:07:15.189601"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.190298"], ["updated_at", "2016-05-06 10:07:15.190298"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.190972"], ["updated_at", "2016-05-06 10:07:15.190972"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.191653"], ["updated_at", "2016-05-06 10:07:15.191653"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.192350"], ["updated_at", "2016-05-06 10:07:15.192350"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.193053"], ["updated_at", "2016-05-06 10:07:15.193053"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.193749"], ["updated_at", "2016-05-06 10:07:15.193749"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.194815"], ["updated_at", "2016-05-06 10:07:15.194815"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.195936"], ["updated_at", "2016-05-06 10:07:15.195936"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.197053"], ["updated_at", "2016-05-06 10:07:15.197053"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.198123"], ["updated_at", "2016-05-06 10:07:15.198123"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.199161"], ["updated_at", "2016-05-06 10:07:15.199161"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.200204"], ["updated_at", "2016-05-06 10:07:15.200204"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.201188"], ["updated_at", "2016-05-06 10:07:15.201188"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.202228"], ["updated_at", "2016-05-06 10:07:15.202228"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.203207"], ["updated_at", "2016-05-06 10:07:15.203207"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.204241"], ["updated_at", "2016-05-06 10:07:15.204241"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.205127"], ["updated_at", "2016-05-06 10:07:15.205127"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.205969"], ["updated_at", "2016-05-06 10:07:15.205969"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.206818"], ["updated_at", "2016-05-06 10:07:15.206818"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.207691"], ["updated_at", "2016-05-06 10:07:15.207691"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.208500"], ["updated_at", "2016-05-06 10:07:15.208500"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.209250"], ["updated_at", "2016-05-06 10:07:15.209250"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.209951"], ["updated_at", "2016-05-06 10:07:15.209951"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.210651"], ["updated_at", "2016-05-06 10:07:15.210651"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.211339"], ["updated_at", "2016-05-06 10:07:15.211339"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.212046"], ["updated_at", "2016-05-06 10:07:15.212046"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.212746"], ["updated_at", "2016-05-06 10:07:15.212746"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.213445"], ["updated_at", "2016-05-06 10:07:15.213445"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.214130"], ["updated_at", "2016-05-06 10:07:15.214130"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.214845"], ["updated_at", "2016-05-06 10:07:15.214845"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.215526"], ["updated_at", "2016-05-06 10:07:15.215526"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.216240"], ["updated_at", "2016-05-06 10:07:15.216240"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.216925"], ["updated_at", "2016-05-06 10:07:15.216925"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.217625"], ["updated_at", "2016-05-06 10:07:15.217625"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.218348"], ["updated_at", "2016-05-06 10:07:15.218348"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.219059"], ["updated_at", "2016-05-06 10:07:15.219059"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.219740"], ["updated_at", "2016-05-06 10:07:15.219740"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.220450"], ["updated_at", "2016-05-06 10:07:15.220450"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.221168"], ["updated_at", "2016-05-06 10:07:15.221168"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.221901"], ["updated_at", "2016-05-06 10:07:15.221901"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Asset Load (0.2ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme8"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-06 10:07:15.263356"], ["updated_at", "2016-05-06 10:07:15.263356"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-06 10:07:15.183259"], ["updated_at", "2016-05-06 10:07:15.183259"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-06 10:07:15.184113"], ["updated_at", "2016-05-06 10:07:15.184113"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-06 10:07:15.184806"], ["updated_at", "2016-05-06 10:07:15.184806"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-06 10:07:15.185491"], ["updated_at", "2016-05-06 10:07:15.185491"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-06 10:07:15.186165"], ["updated_at", "2016-05-06 10:07:15.186165"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-06 10:07:15.186859"], ["updated_at", "2016-05-06 10:07:15.186859"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-06 10:07:15.187525"], ["updated_at", "2016-05-06 10:07:15.187525"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-06 10:07:15.188205"], ["updated_at", "2016-05-06 10:07:15.188205"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-06 10:07:15.188896"], ["updated_at", "2016-05-06 10:07:15.188896"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-06 10:07:15.189601"], ["updated_at", "2016-05-06 10:07:15.189601"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-06 10:07:15.190298"], ["updated_at", "2016-05-06 10:07:15.190298"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-06 10:07:15.190972"], ["updated_at", "2016-05-06 10:07:15.190972"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-06 10:07:15.191653"], ["updated_at", "2016-05-06 10:07:15.191653"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-06 10:07:15.192350"], ["updated_at", "2016-05-06 10:07:15.192350"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-06 10:07:15.193053"], ["updated_at", "2016-05-06 10:07:15.193053"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-06 10:07:15.193749"], ["updated_at", "2016-05-06 10:07:15.193749"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-06 10:07:15.194815"], ["updated_at", "2016-05-06 10:07:15.194815"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-06 10:07:15.195936"], ["updated_at", "2016-05-06 10:07:15.195936"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-06 10:07:15.197053"], ["updated_at", "2016-05-06 10:07:15.197053"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-06 10:07:15.198123"], ["updated_at", "2016-05-06 10:07:15.198123"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-06 10:07:15.199161"], ["updated_at", "2016-05-06 10:07:15.199161"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-06 10:07:15.200204"], ["updated_at", "2016-05-06 10:07:15.200204"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-06 10:07:15.201188"], ["updated_at", "2016-05-06 10:07:15.201188"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-06 10:07:15.202228"], ["updated_at", "2016-05-06 10:07:15.202228"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-06 10:07:15.203207"], ["updated_at", "2016-05-06 10:07:15.203207"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-06 10:07:15.204241"], ["updated_at", "2016-05-06 10:07:15.204241"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-06 10:07:15.205127"], ["updated_at", "2016-05-06 10:07:15.205127"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-06 10:07:15.205969"], ["updated_at", "2016-05-06 10:07:15.205969"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-06 10:07:15.206818"], ["updated_at", "2016-05-06 10:07:15.206818"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-06 10:07:15.207691"], ["updated_at", "2016-05-06 10:07:15.207691"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-06 10:07:15.208500"], ["updated_at", "2016-05-06 10:07:15.208500"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-06 10:07:15.209250"], ["updated_at", "2016-05-06 10:07:15.209250"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-06 10:07:15.209951"], ["updated_at", "2016-05-06 10:07:15.209951"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-06 10:07:15.210651"], ["updated_at", "2016-05-06 10:07:15.210651"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-06 10:07:15.211339"], ["updated_at", "2016-05-06 10:07:15.211339"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-06 10:07:15.212046"], ["updated_at", "2016-05-06 10:07:15.212046"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-06 10:07:15.212746"], ["updated_at", "2016-05-06 10:07:15.212746"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-06 10:07:15.213445"], ["updated_at", "2016-05-06 10:07:15.213445"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-06 10:07:15.214130"], ["updated_at", "2016-05-06 10:07:15.214130"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-06 10:07:15.214845"], ["updated_at", "2016-05-06 10:07:15.214845"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-06 10:07:15.215526"], ["updated_at", "2016-05-06 10:07:15.215526"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-06 10:07:15.216240"], ["updated_at", "2016-05-06 10:07:15.216240"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-06 10:07:15.216925"], ["updated_at", "2016-05-06 10:07:15.216925"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-06 10:07:15.217625"], ["updated_at", "2016-05-06 10:07:15.217625"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-06 10:07:15.218348"], ["updated_at", "2016-05-06 10:07:15.218348"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-06 10:07:15.219059"], ["updated_at", "2016-05-06 10:07:15.219059"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-06 10:07:15.219740"], ["updated_at", "2016-05-06 10:07:15.219740"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-06 10:07:15.220450"], ["updated_at", "2016-05-06 10:07:15.220450"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-06 10:07:15.221168"], ["updated_at", "2016-05-06 10:07:15.221168"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-06 10:07:15.221901"], ["updated_at", "2016-05-06 10:07:15.221901"], ["theme_id", 2]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
MagazCore::ThemeTest: test_validates_default_templates_presence
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example35' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example35"], ["subdomain", "example35"], ["created_at", "2016-05-06 10:07:15.302591"], ["updated_at", "2016-05-06 10:07:15.302591"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme9"], ["created_at", "2016-05-06 10:07:15.349196"], ["updated_at", "2016-05-06 10:07:15.349196"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.350270"], ["updated_at", "2016-05-06 10:07:15.350270"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.351039"], ["updated_at", "2016-05-06 10:07:15.351039"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.351748"], ["updated_at", "2016-05-06 10:07:15.351748"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.352450"], ["updated_at", "2016-05-06 10:07:15.352450"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.353145"], ["updated_at", "2016-05-06 10:07:15.353145"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.353844"], ["updated_at", "2016-05-06 10:07:15.353844"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.354534"], ["updated_at", "2016-05-06 10:07:15.354534"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.355234"], ["updated_at", "2016-05-06 10:07:15.355234"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.355983"], ["updated_at", "2016-05-06 10:07:15.355983"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.356710"], ["updated_at", "2016-05-06 10:07:15.356710"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.357416"], ["updated_at", "2016-05-06 10:07:15.357416"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.358374"], ["updated_at", "2016-05-06 10:07:15.358374"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.359102"], ["updated_at", "2016-05-06 10:07:15.359102"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.359822"], ["updated_at", "2016-05-06 10:07:15.359822"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.360536"], ["updated_at", "2016-05-06 10:07:15.360536"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.361581"], ["updated_at", "2016-05-06 10:07:15.361581"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.362413"], ["updated_at", "2016-05-06 10:07:15.362413"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.363227"], ["updated_at", "2016-05-06 10:07:15.363227"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.364016"], ["updated_at", "2016-05-06 10:07:15.364016"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.364807"], ["updated_at", "2016-05-06 10:07:15.364807"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.365563"], ["updated_at", "2016-05-06 10:07:15.365563"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.366286"], ["updated_at", "2016-05-06 10:07:15.366286"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.367052"], ["updated_at", "2016-05-06 10:07:15.367052"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.367821"], ["updated_at", "2016-05-06 10:07:15.367821"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.368563"], ["updated_at", "2016-05-06 10:07:15.368563"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.369290"], ["updated_at", "2016-05-06 10:07:15.369290"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.370026"], ["updated_at", "2016-05-06 10:07:15.370026"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.370751"], ["updated_at", "2016-05-06 10:07:15.370751"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.371484"], ["updated_at", "2016-05-06 10:07:15.371484"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.372233"], ["updated_at", "2016-05-06 10:07:15.372233"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.372976"], ["updated_at", "2016-05-06 10:07:15.372976"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.373704"], ["updated_at", "2016-05-06 10:07:15.373704"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.374435"], ["updated_at", "2016-05-06 10:07:15.374435"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.375170"], ["updated_at", "2016-05-06 10:07:15.375170"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.375892"], ["updated_at", "2016-05-06 10:07:15.375892"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.376626"], ["updated_at", "2016-05-06 10:07:15.376626"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.377344"], ["updated_at", "2016-05-06 10:07:15.377344"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.378089"], ["updated_at", "2016-05-06 10:07:15.378089"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.378795"], ["updated_at", "2016-05-06 10:07:15.378795"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.379534"], ["updated_at", "2016-05-06 10:07:15.379534"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.380245"], ["updated_at", "2016-05-06 10:07:15.380245"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.380955"], ["updated_at", "2016-05-06 10:07:15.380955"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.381687"], ["updated_at", "2016-05-06 10:07:15.381687"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.382410"], ["updated_at", "2016-05-06 10:07:15.382410"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.383183"], ["updated_at", "2016-05-06 10:07:15.383183"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.383895"], ["updated_at", "2016-05-06 10:07:15.383895"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.384621"], ["updated_at", "2016-05-06 10:07:15.384621"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.385334"], ["updated_at", "2016-05-06 10:07:15.385334"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.386062"], ["updated_at", "2016-05-06 10:07:15.386062"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.386793"], ["updated_at", "2016-05-06 10:07:15.386793"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Asset Load (0.2ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme9"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-06 10:07:15.427635"], ["updated_at", "2016-05-06 10:07:15.427635"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-06 10:07:15.350270"], ["updated_at", "2016-05-06 10:07:15.350270"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-06 10:07:15.351039"], ["updated_at", "2016-05-06 10:07:15.351039"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-06 10:07:15.351748"], ["updated_at", "2016-05-06 10:07:15.351748"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-06 10:07:15.352450"], ["updated_at", "2016-05-06 10:07:15.352450"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-06 10:07:15.353145"], ["updated_at", "2016-05-06 10:07:15.353145"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-06 10:07:15.353844"], ["updated_at", "2016-05-06 10:07:15.353844"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-06 10:07:15.354534"], ["updated_at", "2016-05-06 10:07:15.354534"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-06 10:07:15.355234"], ["updated_at", "2016-05-06 10:07:15.355234"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-06 10:07:15.355983"], ["updated_at", "2016-05-06 10:07:15.355983"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-06 10:07:15.356710"], ["updated_at", "2016-05-06 10:07:15.356710"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-06 10:07:15.357416"], ["updated_at", "2016-05-06 10:07:15.357416"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-06 10:07:15.358374"], ["updated_at", "2016-05-06 10:07:15.358374"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-06 10:07:15.359102"], ["updated_at", "2016-05-06 10:07:15.359102"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-06 10:07:15.359822"], ["updated_at", "2016-05-06 10:07:15.359822"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-06 10:07:15.360536"], ["updated_at", "2016-05-06 10:07:15.360536"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-06 10:07:15.361581"], ["updated_at", "2016-05-06 10:07:15.361581"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-06 10:07:15.362413"], ["updated_at", "2016-05-06 10:07:15.362413"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-06 10:07:15.363227"], ["updated_at", "2016-05-06 10:07:15.363227"], ["theme_id", 2]]
  [1m[35mSQL (7.3ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-06 10:07:15.364016"], ["updated_at", "2016-05-06 10:07:15.364016"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-06 10:07:15.364807"], ["updated_at", "2016-05-06 10:07:15.364807"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-06 10:07:15.365563"], ["updated_at", "2016-05-06 10:07:15.365563"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-06 10:07:15.366286"], ["updated_at", "2016-05-06 10:07:15.366286"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-06 10:07:15.367052"], ["updated_at", "2016-05-06 10:07:15.367052"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-06 10:07:15.367821"], ["updated_at", "2016-05-06 10:07:15.367821"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-06 10:07:15.368563"], ["updated_at", "2016-05-06 10:07:15.368563"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-06 10:07:15.369290"], ["updated_at", "2016-05-06 10:07:15.369290"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-06 10:07:15.370026"], ["updated_at", "2016-05-06 10:07:15.370026"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-06 10:07:15.370751"], ["updated_at", "2016-05-06 10:07:15.370751"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-06 10:07:15.371484"], ["updated_at", "2016-05-06 10:07:15.371484"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-06 10:07:15.372233"], ["updated_at", "2016-05-06 10:07:15.372233"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-06 10:07:15.372976"], ["updated_at", "2016-05-06 10:07:15.372976"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-06 10:07:15.373704"], ["updated_at", "2016-05-06 10:07:15.373704"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-06 10:07:15.374435"], ["updated_at", "2016-05-06 10:07:15.374435"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-06 10:07:15.375170"], ["updated_at", "2016-05-06 10:07:15.375170"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-06 10:07:15.375892"], ["updated_at", "2016-05-06 10:07:15.375892"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-06 10:07:15.376626"], ["updated_at", "2016-05-06 10:07:15.376626"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-06 10:07:15.377344"], ["updated_at", "2016-05-06 10:07:15.377344"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-06 10:07:15.378089"], ["updated_at", "2016-05-06 10:07:15.378089"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-06 10:07:15.378795"], ["updated_at", "2016-05-06 10:07:15.378795"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-06 10:07:15.379534"], ["updated_at", "2016-05-06 10:07:15.379534"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-06 10:07:15.380245"], ["updated_at", "2016-05-06 10:07:15.380245"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-06 10:07:15.380955"], ["updated_at", "2016-05-06 10:07:15.380955"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-06 10:07:15.381687"], ["updated_at", "2016-05-06 10:07:15.381687"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-06 10:07:15.382410"], ["updated_at", "2016-05-06 10:07:15.382410"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-06 10:07:15.383183"], ["updated_at", "2016-05-06 10:07:15.383183"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-06 10:07:15.383895"], ["updated_at", "2016-05-06 10:07:15.383895"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-06 10:07:15.384621"], ["updated_at", "2016-05-06 10:07:15.384621"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-06 10:07:15.385334"], ["updated_at", "2016-05-06 10:07:15.385334"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-06 10:07:15.386062"], ["updated_at", "2016-05-06 10:07:15.386062"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-06 10:07:15.386793"], ["updated_at", "2016-05-06 10:07:15.386793"], ["theme_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------
MagazCore::BlogTest: test_two_blogs_with_same_handle_and_different_shops
------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-06 10:07:15.473012"], ["updated_at", "2016-05-06 10:07:15.473012"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop2' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop2"], ["subdomain", "shop2"], ["created_at", "2016-05-06 10:07:15.475261"], ["updated_at", "2016-05-06 10:07:15.475261"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "blog-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "blog"], ["handle", "blog-handle"], ["shop_id", 1], ["slug", "blog-handle"], ["created_at", "2016-05-06 10:07:15.477783"], ["updated_at", "2016-05-06 10:07:15.477783"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.1ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 2 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "blog-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "blog"], ["handle", "blog-handle"], ["shop_id", 2], ["slug", "blog-handle"], ["created_at", "2016-05-06 10:07:15.481166"], ["updated_at", "2016-05-06 10:07:15.481166"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------
MagazCore::BlogTest: test_two_blogs_with_same_handle_and_same_shop
------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-06 10:07:15.486191"], ["updated_at", "2016-05-06 10:07:15.486191"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "blog-handle"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "blog1"], ["handle", "blog-handle"], ["shop_id", 1], ["slug", "blog-handle"], ["created_at", "2016-05-06 10:07:15.489608"], ["updated_at", "2016-05-06 10:07:15.489608"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "blog-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "blog2"], ["handle", "blog-handle"], ["shop_id", 1], ["slug", "blog-handle-7c77107d-e0ca-4980-8018-1a95bb8fec77"], ["created_at", "2016-05-06 10:07:15.493020"], ["updated_at", "2016-05-06 10:07:15.493020"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Checkout::DeleteCheckoutTest: test_should_delete_checkout_with_valid_id
-------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:15.498239"], ["updated_at", "2016-05-06 10:07:15.498239"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 6 "], ["last_name", "Last Name 6"], ["email", "customer6@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_id", 1], ["email", "Some Uniq Email"], ["created_at", "2016-05-06 10:07:15.501252"], ["updated_at", "2016-05-06 10:07:15.501252"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "checkouts" INNER JOIN "customers" ON "checkouts"."customer_id" = "customers"."id" WHERE "customers"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35mMagazCore::Checkout Load (0.1ms)[0m  SELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "checkouts" WHERE "checkouts"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Checkout Load (0.0ms)[0m  SELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "checkouts" INNER JOIN "customers" ON "checkouts"."customer_id" = "customers"."id" WHERE "customers"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Checkout::DeleteCheckoutTest: test_should_not_checkout_blog_with_blank_id
---------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:15.510870"], ["updated_at", "2016-05-06 10:07:15.510870"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 7 "], ["last_name", "Last Name 7"], ["email", "customer7@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["customer_id", 1], ["email", "Some Uniq Email"], ["created_at", "2016-05-06 10:07:15.514048"], ["updated_at", "2016-05-06 10:07:15.514048"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "checkouts" INNER JOIN "customers" ON "checkouts"."customer_id" = "customers"."id" WHERE "customers"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "checkouts" INNER JOIN "customers" ON "checkouts"."customer_id" = "customers"."id" WHERE "customers"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangeTaxesSettingsTest: test_should_update_authorization_settings_to_nil_with_blank_params
---------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:15.521246"], ["updated_at", "2016-05-06 10:07:15.521246"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangeTaxesSettingsTest: test_should_update_shop_with_valid_params
--------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:15.531909"], ["updated_at", "2016-05-06 10:07:15.531909"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "shops" SET "all_taxes_are_included" = ?, "charge_taxes_on_shipping_rates" = ?, "updated_at" = ? WHERE "shops"."id" = ?[0m  [["all_taxes_are_included", "f"], ["charge_taxes_on_shipping_rates", "t"], ["updated_at", "2016-05-06 10:07:15.534457"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangeShopTest: test_should_update_shop_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:15.538716"], ["updated_at", "2016-05-06 10:07:15.538716"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shops" WHERE "shops"."id" = ? AND "shops"."name" = ?  [["id", 1], ["name", "Name"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "shops" SET "name" = ?, "address" = ?, "business_name" = ?, "city" = ?, "country" = ?, "meta_description" = ?, "currency" = ?, "customer_email" = ?, "phone" = ?, "timezone" = ?, "unit_system" = ?, "zip" = ?, "page_title" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["name", "Name"], ["address", "address"], ["business_name", "business_name"], ["city", "city"], ["country", "USA"], ["meta_description", "meta_description"], ["currency", "USD"], ["customer_email", "some@email.com"], ["phone", "phone"], ["timezone", "American Samoa"], ["unit_system", "metric"], ["zip", 0], ["page_title", "page_title"], ["updated_at", "2016-05-06 10:07:15.543756"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------
MagazCore::ThemeServices::ImportFromArchiveTest: test_imports_from_valid_archive
--------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "themes" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2016-05-06 10:07:15.590268"], ["updated_at", "2016-05-06 10:07:15.590268"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.591416"], ["updated_at", "2016-05-06 10:07:15.591416"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.592418"], ["updated_at", "2016-05-06 10:07:15.592418"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.593193"], ["updated_at", "2016-05-06 10:07:15.593193"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.593926"], ["updated_at", "2016-05-06 10:07:15.593926"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.594660"], ["updated_at", "2016-05-06 10:07:15.594660"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.595365"], ["updated_at", "2016-05-06 10:07:15.595365"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.596071"], ["updated_at", "2016-05-06 10:07:15.596071"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.596776"], ["updated_at", "2016-05-06 10:07:15.596776"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.597488"], ["updated_at", "2016-05-06 10:07:15.597488"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.598176"], ["updated_at", "2016-05-06 10:07:15.598176"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.598825"], ["updated_at", "2016-05-06 10:07:15.598825"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.599489"], ["updated_at", "2016-05-06 10:07:15.599489"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.600179"], ["updated_at", "2016-05-06 10:07:15.600179"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.600937"], ["updated_at", "2016-05-06 10:07:15.600937"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.601626"], ["updated_at", "2016-05-06 10:07:15.601626"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.602687"], ["updated_at", "2016-05-06 10:07:15.602687"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.603757"], ["updated_at", "2016-05-06 10:07:15.603757"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.604833"], ["updated_at", "2016-05-06 10:07:15.604833"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.605817"], ["updated_at", "2016-05-06 10:07:15.605817"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.606849"], ["updated_at", "2016-05-06 10:07:15.606849"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.607831"], ["updated_at", "2016-05-06 10:07:15.607831"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.608761"], ["updated_at", "2016-05-06 10:07:15.608761"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.609769"], ["updated_at", "2016-05-06 10:07:15.609769"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.610736"], ["updated_at", "2016-05-06 10:07:15.610736"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.611722"], ["updated_at", "2016-05-06 10:07:15.611722"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.612681"], ["updated_at", "2016-05-06 10:07:15.612681"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.613494"], ["updated_at", "2016-05-06 10:07:15.613494"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.614291"], ["updated_at", "2016-05-06 10:07:15.614291"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.615054"], ["updated_at", "2016-05-06 10:07:15.615054"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.615859"], ["updated_at", "2016-05-06 10:07:15.615859"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.616678"], ["updated_at", "2016-05-06 10:07:15.616678"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.617328"], ["updated_at", "2016-05-06 10:07:15.617328"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.618007"], ["updated_at", "2016-05-06 10:07:15.618007"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.618688"], ["updated_at", "2016-05-06 10:07:15.618688"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.619340"], ["updated_at", "2016-05-06 10:07:15.619340"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.620018"], ["updated_at", "2016-05-06 10:07:15.620018"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.620699"], ["updated_at", "2016-05-06 10:07:15.620699"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.621382"], ["updated_at", "2016-05-06 10:07:15.621382"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.622030"], ["updated_at", "2016-05-06 10:07:15.622030"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.622707"], ["updated_at", "2016-05-06 10:07:15.622707"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.623406"], ["updated_at", "2016-05-06 10:07:15.623406"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.624047"], ["updated_at", "2016-05-06 10:07:15.624047"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.624720"], ["updated_at", "2016-05-06 10:07:15.624720"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.625391"], ["updated_at", "2016-05-06 10:07:15.625391"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.626082"], ["updated_at", "2016-05-06 10:07:15.626082"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.626766"], ["updated_at", "2016-05-06 10:07:15.626766"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.627442"], ["updated_at", "2016-05-06 10:07:15.627442"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.628118"], ["updated_at", "2016-05-06 10:07:15.628118"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.628762"], ["updated_at", "2016-05-06 10:07:15.628762"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.629787"], ["updated_at", "2016-05-06 10:07:15.629787"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
MagazCore::ThemeServices::InstallThemeTest: test_should_install_theme_with_valid_params_and_theme_in_system
-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example36' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example36"], ["subdomain", "example36"], ["created_at", "2016-05-06 10:07:15.642213"], ["updated_at", "2016-05-06 10:07:15.642213"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme10"], ["created_at", "2016-05-06 10:07:15.698236"], ["updated_at", "2016-05-06 10:07:15.698236"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.699281"], ["updated_at", "2016-05-06 10:07:15.699281"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.700055"], ["updated_at", "2016-05-06 10:07:15.700055"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.700738"], ["updated_at", "2016-05-06 10:07:15.700738"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.701421"], ["updated_at", "2016-05-06 10:07:15.701421"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.702098"], ["updated_at", "2016-05-06 10:07:15.702098"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.702780"], ["updated_at", "2016-05-06 10:07:15.702780"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.703455"], ["updated_at", "2016-05-06 10:07:15.703455"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.704133"], ["updated_at", "2016-05-06 10:07:15.704133"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.704810"], ["updated_at", "2016-05-06 10:07:15.704810"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.705491"], ["updated_at", "2016-05-06 10:07:15.705491"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.706166"], ["updated_at", "2016-05-06 10:07:15.706166"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.706853"], ["updated_at", "2016-05-06 10:07:15.706853"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.707558"], ["updated_at", "2016-05-06 10:07:15.707558"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.708230"], ["updated_at", "2016-05-06 10:07:15.708230"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.708932"], ["updated_at", "2016-05-06 10:07:15.708932"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.709620"], ["updated_at", "2016-05-06 10:07:15.709620"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.710372"], ["updated_at", "2016-05-06 10:07:15.710372"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.711093"], ["updated_at", "2016-05-06 10:07:15.711093"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.711794"], ["updated_at", "2016-05-06 10:07:15.711794"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.712467"], ["updated_at", "2016-05-06 10:07:15.712467"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.713143"], ["updated_at", "2016-05-06 10:07:15.713143"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.713813"], ["updated_at", "2016-05-06 10:07:15.713813"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.714481"], ["updated_at", "2016-05-06 10:07:15.714481"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.715155"], ["updated_at", "2016-05-06 10:07:15.715155"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.715833"], ["updated_at", "2016-05-06 10:07:15.715833"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.716509"], ["updated_at", "2016-05-06 10:07:15.716509"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.717189"], ["updated_at", "2016-05-06 10:07:15.717189"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.717869"], ["updated_at", "2016-05-06 10:07:15.717869"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.718545"], ["updated_at", "2016-05-06 10:07:15.718545"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.719224"], ["updated_at", "2016-05-06 10:07:15.719224"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.719894"], ["updated_at", "2016-05-06 10:07:15.719894"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.720569"], ["updated_at", "2016-05-06 10:07:15.720569"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.721242"], ["updated_at", "2016-05-06 10:07:15.721242"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.721912"], ["updated_at", "2016-05-06 10:07:15.721912"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.722579"], ["updated_at", "2016-05-06 10:07:15.722579"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.723264"], ["updated_at", "2016-05-06 10:07:15.723264"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.724026"], ["updated_at", "2016-05-06 10:07:15.724026"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.724815"], ["updated_at", "2016-05-06 10:07:15.724815"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.725563"], ["updated_at", "2016-05-06 10:07:15.725563"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.726345"], ["updated_at", "2016-05-06 10:07:15.726345"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.727141"], ["updated_at", "2016-05-06 10:07:15.727141"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.727913"], ["updated_at", "2016-05-06 10:07:15.727913"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.728664"], ["updated_at", "2016-05-06 10:07:15.728664"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.729381"], ["updated_at", "2016-05-06 10:07:15.729381"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.730158"], ["updated_at", "2016-05-06 10:07:15.730158"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.730878"], ["updated_at", "2016-05-06 10:07:15.730878"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.731593"], ["updated_at", "2016-05-06 10:07:15.731593"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.732308"], ["updated_at", "2016-05-06 10:07:15.732308"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.732998"], ["updated_at", "2016-05-06 10:07:15.732998"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.733691"], ["updated_at", "2016-05-06 10:07:15.733691"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Asset Load (0.2ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme10"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-06 10:07:15.768836"], ["updated_at", "2016-05-06 10:07:15.768836"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-06 10:07:15.699281"], ["updated_at", "2016-05-06 10:07:15.699281"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-06 10:07:15.700055"], ["updated_at", "2016-05-06 10:07:15.700055"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-06 10:07:15.700738"], ["updated_at", "2016-05-06 10:07:15.700738"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-06 10:07:15.701421"], ["updated_at", "2016-05-06 10:07:15.701421"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-06 10:07:15.702098"], ["updated_at", "2016-05-06 10:07:15.702098"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-06 10:07:15.702780"], ["updated_at", "2016-05-06 10:07:15.702780"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-06 10:07:15.703455"], ["updated_at", "2016-05-06 10:07:15.703455"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-06 10:07:15.704133"], ["updated_at", "2016-05-06 10:07:15.704133"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-06 10:07:15.704810"], ["updated_at", "2016-05-06 10:07:15.704810"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-06 10:07:15.705491"], ["updated_at", "2016-05-06 10:07:15.705491"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-06 10:07:15.706166"], ["updated_at", "2016-05-06 10:07:15.706166"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-06 10:07:15.706853"], ["updated_at", "2016-05-06 10:07:15.706853"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-06 10:07:15.707558"], ["updated_at", "2016-05-06 10:07:15.707558"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-06 10:07:15.708230"], ["updated_at", "2016-05-06 10:07:15.708230"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-06 10:07:15.708932"], ["updated_at", "2016-05-06 10:07:15.708932"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-06 10:07:15.709620"], ["updated_at", "2016-05-06 10:07:15.709620"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-06 10:07:15.710372"], ["updated_at", "2016-05-06 10:07:15.710372"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-06 10:07:15.711093"], ["updated_at", "2016-05-06 10:07:15.711093"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-06 10:07:15.711794"], ["updated_at", "2016-05-06 10:07:15.711794"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-06 10:07:15.712467"], ["updated_at", "2016-05-06 10:07:15.712467"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-06 10:07:15.713143"], ["updated_at", "2016-05-06 10:07:15.713143"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-06 10:07:15.713813"], ["updated_at", "2016-05-06 10:07:15.713813"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-06 10:07:15.714481"], ["updated_at", "2016-05-06 10:07:15.714481"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-06 10:07:15.715155"], ["updated_at", "2016-05-06 10:07:15.715155"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-06 10:07:15.715833"], ["updated_at", "2016-05-06 10:07:15.715833"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-06 10:07:15.716509"], ["updated_at", "2016-05-06 10:07:15.716509"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-06 10:07:15.717189"], ["updated_at", "2016-05-06 10:07:15.717189"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-06 10:07:15.717869"], ["updated_at", "2016-05-06 10:07:15.717869"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-06 10:07:15.718545"], ["updated_at", "2016-05-06 10:07:15.718545"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-06 10:07:15.719224"], ["updated_at", "2016-05-06 10:07:15.719224"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-06 10:07:15.719894"], ["updated_at", "2016-05-06 10:07:15.719894"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-06 10:07:15.720569"], ["updated_at", "2016-05-06 10:07:15.720569"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-06 10:07:15.721242"], ["updated_at", "2016-05-06 10:07:15.721242"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-06 10:07:15.721912"], ["updated_at", "2016-05-06 10:07:15.721912"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-06 10:07:15.722579"], ["updated_at", "2016-05-06 10:07:15.722579"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-06 10:07:15.723264"], ["updated_at", "2016-05-06 10:07:15.723264"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-06 10:07:15.724026"], ["updated_at", "2016-05-06 10:07:15.724026"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-06 10:07:15.724815"], ["updated_at", "2016-05-06 10:07:15.724815"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-06 10:07:15.725563"], ["updated_at", "2016-05-06 10:07:15.725563"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-06 10:07:15.726345"], ["updated_at", "2016-05-06 10:07:15.726345"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-06 10:07:15.727141"], ["updated_at", "2016-05-06 10:07:15.727141"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-06 10:07:15.727913"], ["updated_at", "2016-05-06 10:07:15.727913"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-06 10:07:15.728664"], ["updated_at", "2016-05-06 10:07:15.728664"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-06 10:07:15.729381"], ["updated_at", "2016-05-06 10:07:15.729381"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-06 10:07:15.730158"], ["updated_at", "2016-05-06 10:07:15.730158"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-06 10:07:15.730878"], ["updated_at", "2016-05-06 10:07:15.730878"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-06 10:07:15.731593"], ["updated_at", "2016-05-06 10:07:15.731593"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-06 10:07:15.732308"], ["updated_at", "2016-05-06 10:07:15.732308"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-06 10:07:15.732998"], ["updated_at", "2016-05-06 10:07:15.732998"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-06 10:07:15.733691"], ["updated_at", "2016-05-06 10:07:15.733691"], ["theme_id", 2]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT "themes".* FROM "themes" WHERE "themes"."shop_id" = ? AND (source_theme_id IS NOT NULL)[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------
MagazCore::ThemeServices::InstallThemeTest: test_should_not_install_theme_with_invalid_shop_id
----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example37' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example37"], ["subdomain", "example37"], ["created_at", "2016-05-06 10:07:15.806119"], ["updated_at", "2016-05-06 10:07:15.806119"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme11"], ["created_at", "2016-05-06 10:07:15.863418"], ["updated_at", "2016-05-06 10:07:15.863418"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.864622"], ["updated_at", "2016-05-06 10:07:15.864622"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.865379"], ["updated_at", "2016-05-06 10:07:15.865379"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.866177"], ["updated_at", "2016-05-06 10:07:15.866177"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.866842"], ["updated_at", "2016-05-06 10:07:15.866842"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.867718"], ["updated_at", "2016-05-06 10:07:15.867718"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.868597"], ["updated_at", "2016-05-06 10:07:15.868597"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.869257"], ["updated_at", "2016-05-06 10:07:15.869257"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.870115"], ["updated_at", "2016-05-06 10:07:15.870115"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.870778"], ["updated_at", "2016-05-06 10:07:15.870778"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.871557"], ["updated_at", "2016-05-06 10:07:15.871557"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.872313"], ["updated_at", "2016-05-06 10:07:15.872313"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.872973"], ["updated_at", "2016-05-06 10:07:15.872973"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.873705"], ["updated_at", "2016-05-06 10:07:15.873705"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.874369"], ["updated_at", "2016-05-06 10:07:15.874369"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.875064"], ["updated_at", "2016-05-06 10:07:15.875064"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.875995"], ["updated_at", "2016-05-06 10:07:15.875995"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.877163"], ["updated_at", "2016-05-06 10:07:15.877163"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.878185"], ["updated_at", "2016-05-06 10:07:15.878185"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.879163"], ["updated_at", "2016-05-06 10:07:15.879163"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.880173"], ["updated_at", "2016-05-06 10:07:15.880173"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.881159"], ["updated_at", "2016-05-06 10:07:15.881159"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.882094"], ["updated_at", "2016-05-06 10:07:15.882094"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.883193"], ["updated_at", "2016-05-06 10:07:15.883193"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.884132"], ["updated_at", "2016-05-06 10:07:15.884132"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.885107"], ["updated_at", "2016-05-06 10:07:15.885107"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.886060"], ["updated_at", "2016-05-06 10:07:15.886060"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.886902"], ["updated_at", "2016-05-06 10:07:15.886902"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.887850"], ["updated_at", "2016-05-06 10:07:15.887850"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.888618"], ["updated_at", "2016-05-06 10:07:15.888618"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.889586"], ["updated_at", "2016-05-06 10:07:15.889586"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.890316"], ["updated_at", "2016-05-06 10:07:15.890316"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.891057"], ["updated_at", "2016-05-06 10:07:15.891057"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.891775"], ["updated_at", "2016-05-06 10:07:15.891775"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.892442"], ["updated_at", "2016-05-06 10:07:15.892442"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.893200"], ["updated_at", "2016-05-06 10:07:15.893200"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.893875"], ["updated_at", "2016-05-06 10:07:15.893875"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.894664"], ["updated_at", "2016-05-06 10:07:15.894664"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.895356"], ["updated_at", "2016-05-06 10:07:15.895356"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.896001"], ["updated_at", "2016-05-06 10:07:15.896001"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.896783"], ["updated_at", "2016-05-06 10:07:15.896783"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.897430"], ["updated_at", "2016-05-06 10:07:15.897430"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.898244"], ["updated_at", "2016-05-06 10:07:15.898244"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.898925"], ["updated_at", "2016-05-06 10:07:15.898925"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.899594"], ["updated_at", "2016-05-06 10:07:15.899594"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.900337"], ["updated_at", "2016-05-06 10:07:15.900337"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.901002"], ["updated_at", "2016-05-06 10:07:15.901002"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.901765"], ["updated_at", "2016-05-06 10:07:15.901765"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.902447"], ["updated_at", "2016-05-06 10:07:15.902447"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.903112"], ["updated_at", "2016-05-06 10:07:15.903112"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:15.903814"], ["updated_at", "2016-05-06 10:07:15.903814"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 111]]
  [1m[35mMagazCore::Shop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 111]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (9.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::ChangeShippingCountryTest: test_should_not_update_shipping_country_with_blank_params
-------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example38' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example38"], ["subdomain", "example38"], ["created_at", "2016-05-06 10:07:15.924111"], ["updated_at", "2016-05-06 10:07:15.924111"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "16"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "AF"], ["tax", "17"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?  [["shop_id", 1], ["name", ""]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?[0m  [["shop_id", 1], ["name", ""]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::ChangeShippingCountryTest: test_should_not_update_shipping_country_with_invalid_tax
------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example39' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example39"], ["subdomain", "example39"], ["created_at", "2016-05-06 10:07:15.951312"], ["updated_at", "2016-05-06 10:07:15.951312"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "18"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "AF"], ["tax", "19"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.1ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?[0m  [["shop_id", 1], ["name", "AL"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.1ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?  [["shop_id", 1], ["name", "AL"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::ChangeShippingCountryTest: test_should_not_update_shipping_country_with_same_country_title
-------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example40' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example40"], ["subdomain", "example40"], ["created_at", "2016-05-06 10:07:15.970576"], ["updated_at", "2016-05-06 10:07:15.970576"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "20"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "AF"], ["tax", "21"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.1ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?  [["shop_id", 1], ["name", "AF"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?[0m  [["shop_id", 1], ["name", "AF"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::ChangeShippingCountryTest: test_should_update_shipping_country_with_valid_params
---------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example41' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example41"], ["subdomain", "example41"], ["created_at", "2016-05-06 10:07:15.985663"], ["updated_at", "2016-05-06 10:07:15.985663"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "22"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "AF"], ["tax", "23"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?[0m  [["shop_id", 1], ["name", "AL"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "shipping_countries" SET "name" = ?, "tax" = ? WHERE "shipping_countries"."id" = ?[0m  [["name", "AL"], ["tax", "69"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------
MagazCore::AdminServices::File::AddFileTest: test_should_add_file_with_valid_params
-----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:15.997181"], ["updated_at", "2016-05-06 10:07:15.997181"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "files" ("shop_id", "file", "name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["shop_id", 1], ["file", "test.txt"], ["name", "New file"], ["created_at", "2016-05-06 10:07:16.003428"], ["updated_at", "2016-05-06 10:07:16.003428"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::File Load (0.1ms)[0m  SELECT  "files".* FROM "files" WHERE "files"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------
MagazCore::AdminServices::File::AddFileTest: test_should_not_add_file_with_blank_file
-------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:16.009309"], ["updated_at", "2016-05-06 10:07:16.009309"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "files"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------
MagazCore::AdminServices::File::AddFileTest: test_should_not_add_file_with_blank_name
-------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:16.018432"], ["updated_at", "2016-05-06 10:07:16.018432"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "files"
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------
MagazCore::AdminServices::File::AddFileTest: test_should_not_add_file_with_blank_shop_id
----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:16.029235"], ["updated_at", "2016-05-06 10:07:16.029235"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "files"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "files"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::DeleteSubscriberNotificationTest: test_should_delete_subscriber_notification_with_valid_ids
---------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:16.037577"], ["updated_at", "2016-05-06 10:07:16.037577"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["notification_method", "email 8"], ["subscription_address", "some18@here.run"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.039413"], ["updated_at", "2016-05-06 10:07:16.039413"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["notification_method", "email 9"], ["subscription_address", "some19@here.run"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.040778"], ["updated_at", "2016-05-06 10:07:16.040778"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::SubscriberNotification Load (0.1ms)[0m  SELECT  "order_subscriptions".* FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ? AND "order_subscriptions"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "order_subscriptions" WHERE "order_subscriptions"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::SubscriberNotification Load (0.0ms)[0m  SELECT  "order_subscriptions".* FROM "order_subscriptions" WHERE "order_subscriptions"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::SubscriberNotification Load (0.0ms)[0m  [1mSELECT  "order_subscriptions".* FROM "order_subscriptions" WHERE "order_subscriptions"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::SubscriberNotification::DeleteSubscriberNotificationTest: test_should_not_delete_subscriber_notification_with_blank_ids
-------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:16.050012"], ["updated_at", "2016-05-06 10:07:16.050012"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["notification_method", "email 10"], ["subscription_address", "some110@here.run"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.051888"], ["updated_at", "2016-05-06 10:07:16.051888"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "order_subscriptions" ("notification_method", "subscription_address", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["notification_method", "email 11"], ["subscription_address", "some111@here.run"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.053313"], ["updated_at", "2016-05-06 10:07:16.053313"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "order_subscriptions" WHERE "order_subscriptions"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
MagazCore::EmailTemplateTest: test_should_have_default_values_after_create
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example42' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example42"], ["subdomain", "example42"], ["created_at", "2016-05-06 10:07:16.064149"], ["updated_at", "2016-05-06 10:07:16.064149"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "email_templates" ("name", "title", "body", "template_type", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["name", "Order Notification"], ["title", "New order"], ["body", "You have a new order"], ["template_type", "new_order_notification"], ["description", "some description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.071570"], ["updated_at", "2016-05-06 10:07:16.071570"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::AddTaxOverrideTest: test_create_override_with_second_valid_params
--------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example43' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example43"], ["subdomain", "example43"], ["created_at", "2016-05-06 10:07:16.078045"], ["updated_at", "2016-05-06 10:07:16.078045"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example29.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example29.com"], ["first_name", "First Name 29 "], ["last_name", "Last Name 29"], ["password_salt", "$2a$10$bSMxz9.aetfAThZEslNL/u"], ["password_digest", "$2a$10$bSMxz9.aetfAThZEslNL/u9EtaAqp9F23Giqgfm0dMK/1KfbEwhpS"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.210130"], ["updated_at", "2016-05-06 10:07:16.210130"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "handle1"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Collection 239"], ["description", "Collection 241 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:16.212993"], ["updated_at", "2016-05-06 10:07:16.212993"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "24"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::TaxOverride Load (0.1ms)[0m  SELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."shipping_country_id" = ? AND "tax_overrides"."is_shipping" = ? LIMIT 1  [["shipping_country_id", 1], ["is_shipping", "t"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tax_overrides" ("rate", "shipping_country_id", "is_shipping") VALUES (?, ?, ?)  [["rate", 5.4], ["shipping_country_id", 1], ["is_shipping", "t"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::AddTaxOverrideTest: test_create_override_with_valid_params_and_already_existing_one
--------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example44' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example44"], ["subdomain", "example44"], ["created_at", "2016-05-06 10:07:16.224129"], ["updated_at", "2016-05-06 10:07:16.224129"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example30.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example30.com"], ["first_name", "First Name 30 "], ["last_name", "Last Name 30"], ["password_salt", "$2a$10$KOlMlv/pnGLo6x1A8Ulu.e"], ["password_digest", "$2a$10$KOlMlv/pnGLo6x1A8Ulu.eRThriFJ3Mj47eY07eSiJxi9U94mbZxq"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.361782"], ["updated_at", "2016-05-06 10:07:16.361782"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "handle1"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Collection 240"], ["description", "Collection 242 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:16.364661"], ["updated_at", "2016-05-06 10:07:16.364661"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "25"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::ShippingCountry Load (0.0ms)[0m  [1mSELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::TaxOverride Load (0.1ms)[0m  SELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."shipping_country_id" = ? AND "tax_overrides"."collection_id" = ? LIMIT 1  [["shipping_country_id", 1], ["collection_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tax_overrides" ("rate", "collection_id", "shipping_country_id") VALUES (?, ?, ?)  [["rate", 48.0], ["collection_id", 1], ["shipping_country_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::TaxOverride Load (0.0ms)[0m  [1mSELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."shipping_country_id" = ? AND "tax_overrides"."collection_id" = ? LIMIT 1[0m  [["shipping_country_id", 1], ["collection_id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::TaxOverride Load (0.0ms)[0m  [1mSELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."shipping_country_id" = ? AND "tax_overrides"."collection_id" = ? LIMIT 1[0m  [["shipping_country_id", 1], ["collection_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::AddTaxOverrideTest: test_fails_to_create_tax_override_with_blank_params_params
---------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example45' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example45"], ["subdomain", "example45"], ["created_at", "2016-05-06 10:07:16.375477"], ["updated_at", "2016-05-06 10:07:16.375477"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example31.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example31.com"], ["first_name", "First Name 31 "], ["last_name", "Last Name 31"], ["password_salt", "$2a$10$456gGvtgPyfe4Uf0.7AFDO"], ["password_digest", "$2a$10$456gGvtgPyfe4Uf0.7AFDOnrHcvgWpEgzl0supuyLArh.bbPnUfs."], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.511377"], ["updated_at", "2016-05-06 10:07:16.511377"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", "handle1"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Collection 241"], ["description", "Collection 243 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:16.514320"], ["updated_at", "2016-05-06 10:07:16.514320"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "26"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::TaxOverride::AddTaxOverrideTest: test_fails_to_create_tax_override_with_wrong_params
--------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example46' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example46"], ["subdomain", "example46"], ["created_at", "2016-05-06 10:07:16.526501"], ["updated_at", "2016-05-06 10:07:16.526501"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example32.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example32.com"], ["first_name", "First Name 32 "], ["last_name", "Last Name 32"], ["password_salt", "$2a$10$b9MbOhBrezE15LD9NcmrPO"], ["password_digest", "$2a$10$b9MbOhBrezE15LD9NcmrPO.H/BNmUzlMTtz/hRpeBUSeDU6wgosgS"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.662906"], ["updated_at", "2016-05-06 10:07:16.662906"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", "handle1"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Collection 242"], ["description", "Collection 244 description"], ["shop_id", 1], ["handle", "handle1"], ["slug", "handle1"], ["created_at", "2016-05-06 10:07:16.665672"], ["updated_at", "2016-05-06 10:07:16.665672"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "27"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::TaxOverride Load (0.1ms)[0m  [1mSELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."shipping_country_id" = ? AND "tax_overrides"."collection_id" IS NULL LIMIT 1[0m  [["shipping_country_id", 1]]
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::TaxOverride Load (0.0ms)[0m  [1mSELECT  "tax_overrides".* FROM "tax_overrides" WHERE "tax_overrides"."shipping_country_id" = ? AND "tax_overrides"."collection_id" IS NULL LIMIT 1[0m  [["shipping_country_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Product::AddProductTest: test_should_create_product_with_some_blank_params
----------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:16.675005"], ["updated_at", "2016-05-06 10:07:16.675005"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 243"], ["description", "Collection 245 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.677011"], ["updated_at", "2016-05-06 10:07:16.677011"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products" WHERE "products"."shop_id" = ? AND "products"."name" = ?  [["shop_id", 1], ["name", "T-shirt"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 1 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'T-shirt' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "shop_id", "description", "handle", "page_title", "meta_description", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "T-shirt"], ["shop_id", 1], ["description", ""], ["handle", ""], ["page_title", ""], ["meta_description", ""], ["slug", ""], ["created_at", "2016-05-06 10:07:16.689437"], ["updated_at", "2016-05-06 10:07:16.689437"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Load (0.1ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Product::AddProductTest: test_should_create_product_with_valid_params
-----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:16.695515"], ["updated_at", "2016-05-06 10:07:16.695515"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 244"], ["description", "Collection 246 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.697590"], ["updated_at", "2016-05-06 10:07:16.697590"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "products" WHERE "products"."shop_id" = ? AND "products"."name" = ?[0m  [["shop_id", 1], ["name", "T-shirt"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Product Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 1 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1[0m  [["slug", "clothes"]]
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'T-shirt' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "shop_id", "description", "handle", "page_title", "meta_description", "price", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "T-shirt"], ["shop_id", 1], ["description", "Red T-shirt"], ["handle", "clothes"], ["page_title", "Red T-shirt"], ["meta_description", "T-shirt"], ["price", 10.0], ["slug", "clothes"], ["created_at", "2016-05-06 10:07:16.709435"], ["updated_at", "2016-05-06 10:07:16.709435"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections_products" ("collection_id", "product_id") VALUES (?, ?)  [["collection_id", 1], ["product_id", 1]]
  [1m[36mMagazCore::Product Load (0.1ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "product_images" ("product_id", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 1], ["image", "tapir.jpg"], ["created_at", "2016-05-06 10:07:16.721124"], ["updated_at", "2016-05-06 10:07:16.721124"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Product::AddProductTest: test_should_not_create_product_with_blank_params
---------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:16.726529"], ["updated_at", "2016-05-06 10:07:16.726529"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 245"], ["description", "Collection 247 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.728924"], ["updated_at", "2016-05-06 10:07:16.728924"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Product::AddProductTest: test_should_not_create_product_with_invalid_image
----------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:16.738828"], ["updated_at", "2016-05-06 10:07:16.738828"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 246"], ["description", "Collection 248 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.740638"], ["updated_at", "2016-05-06 10:07:16.740638"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "products" WHERE "products"."shop_id" = ? AND "products"."name" = ?  [["shop_id", 1], ["name", "T-shirt"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Product Exists (0.0ms)[0m  SELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 1 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1  [["slug", "clothes"]]
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'T-shirt' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "shop_id", "description", "handle", "page_title", "meta_description", "price", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "T-shirt"], ["shop_id", 1], ["description", "Red T-shirt"], ["handle", "clothes"], ["page_title", "Red T-shirt"], ["meta_description", "T-shirt"], ["price", 10.0], ["slug", "clothes"], ["created_at", "2016-05-06 10:07:16.747099"], ["updated_at", "2016-05-06 10:07:16.747099"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections_products" ("collection_id", "product_id") VALUES (?, ?)[0m  [["collection_id", 1], ["product_id", 1]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Product::AddProductTest: test_should_not_create_product_with_same_name
------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:16.754072"], ["updated_at", "2016-05-06 10:07:16.754072"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 247"], ["description", "Collection 249 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.755919"], ["updated_at", "2016-05-06 10:07:16.755919"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "products" WHERE "products"."shop_id" = ? AND "products"."name" = ?[0m  [["shop_id", 1], ["name", "T-shirt"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 1 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1[0m  [["slug", "clothes"]]
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'T-shirt' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "shop_id", "description", "handle", "page_title", "meta_description", "price", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "T-shirt"], ["shop_id", 1], ["description", "Red T-shirt"], ["handle", "clothes"], ["page_title", "Red T-shirt"], ["meta_description", "T-shirt"], ["price", 10.0], ["slug", "clothes"], ["created_at", "2016-05-06 10:07:16.762782"], ["updated_at", "2016-05-06 10:07:16.762782"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections_products" ("collection_id", "product_id") VALUES (?, ?)  [["collection_id", 1], ["product_id", 1]]
  [1m[36mMagazCore::Product Load (0.1ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "product_images" ("product_id", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 1], ["image", "tapir.jpg"], ["created_at", "2016-05-06 10:07:16.770777"], ["updated_at", "2016-05-06 10:07:16.770777"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "products" WHERE "products"."shop_id" = ? AND "products"."name" = ?[0m  [["shop_id", 1], ["name", "T-shirt"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "products" WHERE "products"."shop_id" = ? AND "products"."name" = ?  [["shop_id", 1], ["name", "T-shirt"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------
MagazCore::ArticleTest: test_basic_visibility_functionality
-----------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Article 19"], ["content", "Article 26 content"], ["created_at", "2016-05-06 10:07:16.776350"], ["updated_at", "2016-05-06 10:07:16.776350"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 20"], ["content", "Article 27 content"], ["published_at", "2016-05-06 10:06:16.777994"], ["created_at", "2016-05-06 10:07:16.778847"], ["updated_at", "2016-05-06 10:07:16.778847"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 21"], ["content", "Article 28 content"], ["published_at", "2016-05-06 10:06:16.777994"], ["created_at", "2016-05-06 10:07:16.780556"], ["updated_at", "2016-05-06 10:07:16.780556"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 22"], ["content", "Article 29 content"], ["published_at", "2016-05-06 10:06:16.777994"], ["created_at", "2016-05-06 10:07:16.781949"], ["updated_at", "2016-05-06 10:07:16.781949"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 23"], ["content", "Article 30 content"], ["published_at", "2016-05-06 10:06:16.777994"], ["created_at", "2016-05-06 10:07:16.783196"], ["updated_at", "2016-05-06 10:07:16.783196"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 24"], ["content", "Article 31 content"], ["published_at", "2016-05-06 10:06:16.777994"], ["created_at", "2016-05-06 10:07:16.784409"], ["updated_at", "2016-05-06 10:07:16.784409"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 25"], ["content", "Article 32 content"], ["published_at", "2016-05-06 10:06:16.777994"], ["created_at", "2016-05-06 10:07:16.785633"], ["updated_at", "2016-05-06 10:07:16.785633"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 26"], ["content", "Article 33 content"], ["published_at", "2016-05-06 10:06:16.777994"], ["created_at", "2016-05-06 10:07:16.786850"], ["updated_at", "2016-05-06 10:07:16.786850"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 27"], ["content", "Article 34 content"], ["published_at", "2016-05-06 10:06:16.777994"], ["created_at", "2016-05-06 10:07:16.788068"], ["updated_at", "2016-05-06 10:07:16.788068"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 28"], ["content", "Article 35 content"], ["published_at", "2016-05-06 10:06:16.777994"], ["created_at", "2016-05-06 10:07:16.789265"], ["updated_at", "2016-05-06 10:07:16.789265"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 29"], ["content", "Article 36 content"], ["published_at", "2016-05-06 10:06:16.777994"], ["created_at", "2016-05-06 10:07:16.790473"], ["updated_at", "2016-05-06 10:07:16.790473"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 30"], ["content", "Article 37 content"], ["publish_on", "2016-05-07 10:07:16.791906"], ["created_at", "2016-05-06 10:07:16.792793"], ["updated_at", "2016-05-06 10:07:16.792793"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 31"], ["content", "Article 38 content"], ["publish_on", "2016-05-07 10:07:16.791906"], ["created_at", "2016-05-06 10:07:16.795022"], ["updated_at", "2016-05-06 10:07:16.795022"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 32"], ["content", "Article 39 content"], ["publish_on", "2016-05-07 10:07:16.791906"], ["created_at", "2016-05-06 10:07:16.796929"], ["updated_at", "2016-05-06 10:07:16.796929"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 33"], ["content", "Article 40 content"], ["publish_on", "2016-05-07 10:07:16.791906"], ["created_at", "2016-05-06 10:07:16.798838"], ["updated_at", "2016-05-06 10:07:16.798838"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 34"], ["content", "Article 41 content"], ["publish_on", "2016-05-07 10:07:16.791906"], ["created_at", "2016-05-06 10:07:16.800747"], ["updated_at", "2016-05-06 10:07:16.800747"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 35"], ["content", "Article 42 content"], ["publish_on", "2016-05-07 10:07:16.791906"], ["created_at", "2016-05-06 10:07:16.802433"], ["updated_at", "2016-05-06 10:07:16.802433"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 36"], ["content", "Article 43 content"], ["publish_on", "2016-05-07 10:07:16.791906"], ["created_at", "2016-05-06 10:07:16.803999"], ["updated_at", "2016-05-06 10:07:16.803999"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 37"], ["content", "Article 44 content"], ["publish_on", "2016-05-07 10:07:16.791906"], ["created_at", "2016-05-06 10:07:16.805535"], ["updated_at", "2016-05-06 10:07:16.805535"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 38"], ["content", "Article 45 content"], ["publish_on", "2016-05-07 10:07:16.791906"], ["created_at", "2016-05-06 10:07:16.806850"], ["updated_at", "2016-05-06 10:07:16.806850"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 39"], ["content", "Article 46 content"], ["publish_on", "2016-05-07 10:07:16.791906"], ["created_at", "2016-05-06 10:07:16.808171"], ["updated_at", "2016-05-06 10:07:16.808171"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 40"], ["content", "Article 47 content"], ["publish_on", "2016-05-06 10:06:16.809071"], ["created_at", "2016-05-06 10:07:16.809595"], ["updated_at", "2016-05-06 10:07:16.809595"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 41"], ["content", "Article 48 content"], ["publish_on", "2016-05-06 10:06:16.809071"], ["created_at", "2016-05-06 10:07:16.811007"], ["updated_at", "2016-05-06 10:07:16.811007"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 42"], ["content", "Article 49 content"], ["publish_on", "2016-05-06 10:06:16.809071"], ["created_at", "2016-05-06 10:07:16.812582"], ["updated_at", "2016-05-06 10:07:16.812582"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 43"], ["content", "Article 50 content"], ["publish_on", "2016-05-06 10:06:16.809071"], ["created_at", "2016-05-06 10:07:16.813976"], ["updated_at", "2016-05-06 10:07:16.813976"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 44"], ["content", "Article 51 content"], ["publish_on", "2016-05-06 10:06:16.809071"], ["created_at", "2016-05-06 10:07:16.815372"], ["updated_at", "2016-05-06 10:07:16.815372"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 45"], ["content", "Article 52 content"], ["publish_on", "2016-05-06 10:06:16.809071"], ["created_at", "2016-05-06 10:07:16.816793"], ["updated_at", "2016-05-06 10:07:16.816793"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 46"], ["content", "Article 53 content"], ["publish_on", "2016-05-06 10:06:16.809071"], ["created_at", "2016-05-06 10:07:16.818083"], ["updated_at", "2016-05-06 10:07:16.818083"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 47"], ["content", "Article 54 content"], ["publish_on", "2016-05-06 10:06:16.809071"], ["created_at", "2016-05-06 10:07:16.819379"], ["updated_at", "2016-05-06 10:07:16.819379"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 48"], ["content", "Article 55 content"], ["publish_on", "2016-05-06 10:06:16.809071"], ["created_at", "2016-05-06 10:07:16.820695"], ["updated_at", "2016-05-06 10:07:16.820695"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 49"], ["content", "Article 56 content"], ["publish_on", "2016-05-06 10:06:16.809071"], ["created_at", "2016-05-06 10:07:16.822699"], ["updated_at", "2016-05-06 10:07:16.822699"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "articles" SET "publish_on" = ?, "updated_at" = ? WHERE "articles"."id" = ?  [["publish_on", "2016-05-08 10:07:16.824971"], ["updated_at", "2016-05-06 10:07:16.825502"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "articles" SET "publish_on" = ?, "published_at" = ?, "updated_at" = ? WHERE "articles"."id" = ?[0m  [["publish_on", nil], ["published_at", "2016-05-04 10:07:16.826859"], ["updated_at", "2016-05-06 10:07:16.827510"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------
MagazCore::ArticleTest: test_two_articles_with_same_handle_and_different_shops
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Article 50"], ["content", "Article 57 content"], ["created_at", "2016-05-06 10:07:16.833143"], ["updated_at", "2016-05-06 10:07:16.833143"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 51"], ["content", "Article 58 content"], ["published_at", "2016-05-06 10:06:16.834651"], ["created_at", "2016-05-06 10:07:16.835407"], ["updated_at", "2016-05-06 10:07:16.835407"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 52"], ["content", "Article 59 content"], ["published_at", "2016-05-06 10:06:16.834651"], ["created_at", "2016-05-06 10:07:16.837156"], ["updated_at", "2016-05-06 10:07:16.837156"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 53"], ["content", "Article 60 content"], ["published_at", "2016-05-06 10:06:16.834651"], ["created_at", "2016-05-06 10:07:16.838619"], ["updated_at", "2016-05-06 10:07:16.838619"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 54"], ["content", "Article 61 content"], ["published_at", "2016-05-06 10:06:16.834651"], ["created_at", "2016-05-06 10:07:16.840050"], ["updated_at", "2016-05-06 10:07:16.840050"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 55"], ["content", "Article 62 content"], ["published_at", "2016-05-06 10:06:16.834651"], ["created_at", "2016-05-06 10:07:16.841427"], ["updated_at", "2016-05-06 10:07:16.841427"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 56"], ["content", "Article 63 content"], ["published_at", "2016-05-06 10:06:16.834651"], ["created_at", "2016-05-06 10:07:16.842787"], ["updated_at", "2016-05-06 10:07:16.842787"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 57"], ["content", "Article 64 content"], ["published_at", "2016-05-06 10:06:16.834651"], ["created_at", "2016-05-06 10:07:16.844109"], ["updated_at", "2016-05-06 10:07:16.844109"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 58"], ["content", "Article 65 content"], ["published_at", "2016-05-06 10:06:16.834651"], ["created_at", "2016-05-06 10:07:16.845424"], ["updated_at", "2016-05-06 10:07:16.845424"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 59"], ["content", "Article 66 content"], ["published_at", "2016-05-06 10:06:16.834651"], ["created_at", "2016-05-06 10:07:16.846712"], ["updated_at", "2016-05-06 10:07:16.846712"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 60"], ["content", "Article 67 content"], ["published_at", "2016-05-06 10:06:16.834651"], ["created_at", "2016-05-06 10:07:16.847947"], ["updated_at", "2016-05-06 10:07:16.847947"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 61"], ["content", "Article 68 content"], ["publish_on", "2016-05-07 10:07:16.848728"], ["created_at", "2016-05-06 10:07:16.849254"], ["updated_at", "2016-05-06 10:07:16.849254"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 62"], ["content", "Article 69 content"], ["publish_on", "2016-05-07 10:07:16.848728"], ["created_at", "2016-05-06 10:07:16.850644"], ["updated_at", "2016-05-06 10:07:16.850644"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 63"], ["content", "Article 70 content"], ["publish_on", "2016-05-07 10:07:16.848728"], ["created_at", "2016-05-06 10:07:16.851974"], ["updated_at", "2016-05-06 10:07:16.851974"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 64"], ["content", "Article 71 content"], ["publish_on", "2016-05-07 10:07:16.848728"], ["created_at", "2016-05-06 10:07:16.853292"], ["updated_at", "2016-05-06 10:07:16.853292"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 65"], ["content", "Article 72 content"], ["publish_on", "2016-05-07 10:07:16.848728"], ["created_at", "2016-05-06 10:07:16.854610"], ["updated_at", "2016-05-06 10:07:16.854610"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 66"], ["content", "Article 73 content"], ["publish_on", "2016-05-07 10:07:16.848728"], ["created_at", "2016-05-06 10:07:16.855951"], ["updated_at", "2016-05-06 10:07:16.855951"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 67"], ["content", "Article 74 content"], ["publish_on", "2016-05-07 10:07:16.848728"], ["created_at", "2016-05-06 10:07:16.857333"], ["updated_at", "2016-05-06 10:07:16.857333"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 68"], ["content", "Article 75 content"], ["publish_on", "2016-05-07 10:07:16.848728"], ["created_at", "2016-05-06 10:07:16.858685"], ["updated_at", "2016-05-06 10:07:16.858685"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 69"], ["content", "Article 76 content"], ["publish_on", "2016-05-07 10:07:16.848728"], ["created_at", "2016-05-06 10:07:16.860088"], ["updated_at", "2016-05-06 10:07:16.860088"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 70"], ["content", "Article 77 content"], ["publish_on", "2016-05-07 10:07:16.848728"], ["created_at", "2016-05-06 10:07:16.861476"], ["updated_at", "2016-05-06 10:07:16.861476"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 71"], ["content", "Article 78 content"], ["publish_on", "2016-05-06 10:06:16.862370"], ["created_at", "2016-05-06 10:07:16.862865"], ["updated_at", "2016-05-06 10:07:16.862865"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 72"], ["content", "Article 79 content"], ["publish_on", "2016-05-06 10:06:16.862370"], ["created_at", "2016-05-06 10:07:16.864265"], ["updated_at", "2016-05-06 10:07:16.864265"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 73"], ["content", "Article 80 content"], ["publish_on", "2016-05-06 10:06:16.862370"], ["created_at", "2016-05-06 10:07:16.865600"], ["updated_at", "2016-05-06 10:07:16.865600"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 74"], ["content", "Article 81 content"], ["publish_on", "2016-05-06 10:06:16.862370"], ["created_at", "2016-05-06 10:07:16.867699"], ["updated_at", "2016-05-06 10:07:16.867699"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 75"], ["content", "Article 82 content"], ["publish_on", "2016-05-06 10:06:16.862370"], ["created_at", "2016-05-06 10:07:16.869968"], ["updated_at", "2016-05-06 10:07:16.869968"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 76"], ["content", "Article 83 content"], ["publish_on", "2016-05-06 10:06:16.862370"], ["created_at", "2016-05-06 10:07:16.872175"], ["updated_at", "2016-05-06 10:07:16.872175"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 77"], ["content", "Article 84 content"], ["publish_on", "2016-05-06 10:06:16.862370"], ["created_at", "2016-05-06 10:07:16.874078"], ["updated_at", "2016-05-06 10:07:16.874078"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 78"], ["content", "Article 85 content"], ["publish_on", "2016-05-06 10:06:16.862370"], ["created_at", "2016-05-06 10:07:16.876123"], ["updated_at", "2016-05-06 10:07:16.876123"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 79"], ["content", "Article 86 content"], ["publish_on", "2016-05-06 10:06:16.862370"], ["created_at", "2016-05-06 10:07:16.878988"], ["updated_at", "2016-05-06 10:07:16.878988"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 80"], ["content", "Article 87 content"], ["publish_on", "2016-05-06 10:06:16.862370"], ["created_at", "2016-05-06 10:07:16.881002"], ["updated_at", "2016-05-06 10:07:16.881002"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-06 10:07:16.883803"], ["updated_at", "2016-05-06 10:07:16.883803"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop2' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop2"], ["subdomain", "shop2"], ["created_at", "2016-05-06 10:07:16.886028"], ["updated_at", "2016-05-06 10:07:16.886028"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "blog"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:16.887635"], ["updated_at", "2016-05-06 10:07:16.887635"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "blog"], ["shop_id", 2], ["created_at", "2016-05-06 10:07:16.888884"], ["updated_at", "2016-05-06 10:07:16.888884"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "article-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "handle", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "article"], ["content", "Article 88 content"], ["handle", "article-handle"], ["blog_id", 1], ["slug", "article-handle"], ["created_at", "2016-05-06 10:07:16.891046"], ["updated_at", "2016-05-06 10:07:16.891046"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 2 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "article-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "handle", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "article"], ["handle", "article-handle"], ["blog_id", 2], ["slug", "article-handle"], ["created_at", "2016-05-06 10:07:16.894082"], ["updated_at", "2016-05-06 10:07:16.894082"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------
MagazCore::ArticleTest: test_two_articles_with_same_handle_and_same_shop
------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Article 81"], ["content", "Article 89 content"], ["created_at", "2016-05-06 10:07:16.898459"], ["updated_at", "2016-05-06 10:07:16.898459"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 82"], ["content", "Article 90 content"], ["published_at", "2016-05-06 10:06:16.899696"], ["created_at", "2016-05-06 10:07:16.900277"], ["updated_at", "2016-05-06 10:07:16.900277"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 83"], ["content", "Article 91 content"], ["published_at", "2016-05-06 10:06:16.899696"], ["created_at", "2016-05-06 10:07:16.901751"], ["updated_at", "2016-05-06 10:07:16.901751"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 84"], ["content", "Article 92 content"], ["published_at", "2016-05-06 10:06:16.899696"], ["created_at", "2016-05-06 10:07:16.903041"], ["updated_at", "2016-05-06 10:07:16.903041"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 85"], ["content", "Article 93 content"], ["published_at", "2016-05-06 10:06:16.899696"], ["created_at", "2016-05-06 10:07:16.904295"], ["updated_at", "2016-05-06 10:07:16.904295"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 86"], ["content", "Article 94 content"], ["published_at", "2016-05-06 10:06:16.899696"], ["created_at", "2016-05-06 10:07:16.905551"], ["updated_at", "2016-05-06 10:07:16.905551"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 87"], ["content", "Article 95 content"], ["published_at", "2016-05-06 10:06:16.899696"], ["created_at", "2016-05-06 10:07:16.907208"], ["updated_at", "2016-05-06 10:07:16.907208"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 88"], ["content", "Article 96 content"], ["published_at", "2016-05-06 10:06:16.899696"], ["created_at", "2016-05-06 10:07:16.909174"], ["updated_at", "2016-05-06 10:07:16.909174"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 89"], ["content", "Article 97 content"], ["published_at", "2016-05-06 10:06:16.899696"], ["created_at", "2016-05-06 10:07:16.910544"], ["updated_at", "2016-05-06 10:07:16.910544"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 90"], ["content", "Article 98 content"], ["published_at", "2016-05-06 10:06:16.899696"], ["created_at", "2016-05-06 10:07:16.912195"], ["updated_at", "2016-05-06 10:07:16.912195"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 91"], ["content", "Article 99 content"], ["published_at", "2016-05-06 10:06:16.899696"], ["created_at", "2016-05-06 10:07:16.913980"], ["updated_at", "2016-05-06 10:07:16.913980"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 92"], ["content", "Article 100 content"], ["publish_on", "2016-05-07 10:07:16.915118"], ["created_at", "2016-05-06 10:07:16.915906"], ["updated_at", "2016-05-06 10:07:16.915906"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 93"], ["content", "Article 101 content"], ["publish_on", "2016-05-07 10:07:16.915118"], ["created_at", "2016-05-06 10:07:16.917831"], ["updated_at", "2016-05-06 10:07:16.917831"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 94"], ["content", "Article 102 content"], ["publish_on", "2016-05-07 10:07:16.915118"], ["created_at", "2016-05-06 10:07:16.919428"], ["updated_at", "2016-05-06 10:07:16.919428"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 95"], ["content", "Article 103 content"], ["publish_on", "2016-05-07 10:07:16.915118"], ["created_at", "2016-05-06 10:07:16.921010"], ["updated_at", "2016-05-06 10:07:16.921010"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 96"], ["content", "Article 104 content"], ["publish_on", "2016-05-07 10:07:16.915118"], ["created_at", "2016-05-06 10:07:16.922416"], ["updated_at", "2016-05-06 10:07:16.922416"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 97"], ["content", "Article 105 content"], ["publish_on", "2016-05-07 10:07:16.915118"], ["created_at", "2016-05-06 10:07:16.923761"], ["updated_at", "2016-05-06 10:07:16.923761"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 98"], ["content", "Article 106 content"], ["publish_on", "2016-05-07 10:07:16.915118"], ["created_at", "2016-05-06 10:07:16.925080"], ["updated_at", "2016-05-06 10:07:16.925080"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 99"], ["content", "Article 107 content"], ["publish_on", "2016-05-07 10:07:16.915118"], ["created_at", "2016-05-06 10:07:16.926464"], ["updated_at", "2016-05-06 10:07:16.926464"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 100"], ["content", "Article 108 content"], ["publish_on", "2016-05-07 10:07:16.915118"], ["created_at", "2016-05-06 10:07:16.927815"], ["updated_at", "2016-05-06 10:07:16.927815"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 101"], ["content", "Article 109 content"], ["publish_on", "2016-05-07 10:07:16.915118"], ["created_at", "2016-05-06 10:07:16.929140"], ["updated_at", "2016-05-06 10:07:16.929140"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 102"], ["content", "Article 110 content"], ["publish_on", "2016-05-06 10:06:16.930018"], ["created_at", "2016-05-06 10:07:16.930523"], ["updated_at", "2016-05-06 10:07:16.930523"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 103"], ["content", "Article 111 content"], ["publish_on", "2016-05-06 10:06:16.930018"], ["created_at", "2016-05-06 10:07:16.931919"], ["updated_at", "2016-05-06 10:07:16.931919"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 104"], ["content", "Article 112 content"], ["publish_on", "2016-05-06 10:06:16.930018"], ["created_at", "2016-05-06 10:07:16.933304"], ["updated_at", "2016-05-06 10:07:16.933304"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 105"], ["content", "Article 113 content"], ["publish_on", "2016-05-06 10:06:16.930018"], ["created_at", "2016-05-06 10:07:16.934915"], ["updated_at", "2016-05-06 10:07:16.934915"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 106"], ["content", "Article 114 content"], ["publish_on", "2016-05-06 10:06:16.930018"], ["created_at", "2016-05-06 10:07:16.936314"], ["updated_at", "2016-05-06 10:07:16.936314"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 107"], ["content", "Article 115 content"], ["publish_on", "2016-05-06 10:06:16.930018"], ["created_at", "2016-05-06 10:07:16.937720"], ["updated_at", "2016-05-06 10:07:16.937720"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 108"], ["content", "Article 116 content"], ["publish_on", "2016-05-06 10:06:16.930018"], ["created_at", "2016-05-06 10:07:16.939118"], ["updated_at", "2016-05-06 10:07:16.939118"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 109"], ["content", "Article 117 content"], ["publish_on", "2016-05-06 10:06:16.930018"], ["created_at", "2016-05-06 10:07:16.940441"], ["updated_at", "2016-05-06 10:07:16.940441"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 110"], ["content", "Article 118 content"], ["publish_on", "2016-05-06 10:06:16.930018"], ["created_at", "2016-05-06 10:07:16.941803"], ["updated_at", "2016-05-06 10:07:16.941803"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 111"], ["content", "Article 119 content"], ["publish_on", "2016-05-06 10:06:16.930018"], ["created_at", "2016-05-06 10:07:16.943519"], ["updated_at", "2016-05-06 10:07:16.943519"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-06 10:07:16.947853"], ["updated_at", "2016-05-06 10:07:16.947853"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "created_at", "updated_at") VALUES (?, ?, ?)  [["title", "blog1"], ["created_at", "2016-05-06 10:07:16.949882"], ["updated_at", "2016-05-06 10:07:16.949882"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "article-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "handle", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "article1"], ["content", "Article 120 content"], ["handle", "article-handle"], ["blog_id", 1], ["slug", "article-handle"], ["created_at", "2016-05-06 10:07:16.953065"], ["updated_at", "2016-05-06 10:07:16.953065"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "article-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "handle", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "article2"], ["handle", "article-handle"], ["blog_id", 1], ["slug", "article-handle-8c35ff8b-043f-4708-9ccc-24032c6c8648"], ["created_at", "2016-05-06 10:07:16.956022"], ["updated_at", "2016-05-06 10:07:16.956022"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (9.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
MagazCore::ArticleTest: test_visibility_scopes
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Article 112"], ["content", "Article 121 content"], ["created_at", "2016-05-06 10:07:16.969256"], ["updated_at", "2016-05-06 10:07:16.969256"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 113"], ["content", "Article 122 content"], ["published_at", "2016-05-06 10:06:16.970850"], ["created_at", "2016-05-06 10:07:16.971657"], ["updated_at", "2016-05-06 10:07:16.971657"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 114"], ["content", "Article 123 content"], ["published_at", "2016-05-06 10:06:16.970850"], ["created_at", "2016-05-06 10:07:16.973683"], ["updated_at", "2016-05-06 10:07:16.973683"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 115"], ["content", "Article 124 content"], ["published_at", "2016-05-06 10:06:16.970850"], ["created_at", "2016-05-06 10:07:16.975500"], ["updated_at", "2016-05-06 10:07:16.975500"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 116"], ["content", "Article 125 content"], ["published_at", "2016-05-06 10:06:16.970850"], ["created_at", "2016-05-06 10:07:16.977327"], ["updated_at", "2016-05-06 10:07:16.977327"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 117"], ["content", "Article 126 content"], ["published_at", "2016-05-06 10:06:16.970850"], ["created_at", "2016-05-06 10:07:16.978882"], ["updated_at", "2016-05-06 10:07:16.978882"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 118"], ["content", "Article 127 content"], ["published_at", "2016-05-06 10:06:16.970850"], ["created_at", "2016-05-06 10:07:16.980358"], ["updated_at", "2016-05-06 10:07:16.980358"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 119"], ["content", "Article 128 content"], ["published_at", "2016-05-06 10:06:16.970850"], ["created_at", "2016-05-06 10:07:16.981961"], ["updated_at", "2016-05-06 10:07:16.981961"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 120"], ["content", "Article 129 content"], ["published_at", "2016-05-06 10:06:16.970850"], ["created_at", "2016-05-06 10:07:16.983269"], ["updated_at", "2016-05-06 10:07:16.983269"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 121"], ["content", "Article 130 content"], ["published_at", "2016-05-06 10:06:16.970850"], ["created_at", "2016-05-06 10:07:16.984615"], ["updated_at", "2016-05-06 10:07:16.984615"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 122"], ["content", "Article 131 content"], ["published_at", "2016-05-06 10:06:16.970850"], ["created_at", "2016-05-06 10:07:16.985903"], ["updated_at", "2016-05-06 10:07:16.985903"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 123"], ["content", "Article 132 content"], ["publish_on", "2016-05-07 10:07:16.986755"], ["created_at", "2016-05-06 10:07:16.987358"], ["updated_at", "2016-05-06 10:07:16.987358"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 124"], ["content", "Article 133 content"], ["publish_on", "2016-05-07 10:07:16.986755"], ["created_at", "2016-05-06 10:07:16.989145"], ["updated_at", "2016-05-06 10:07:16.989145"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 125"], ["content", "Article 134 content"], ["publish_on", "2016-05-07 10:07:16.986755"], ["created_at", "2016-05-06 10:07:16.991001"], ["updated_at", "2016-05-06 10:07:16.991001"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 126"], ["content", "Article 135 content"], ["publish_on", "2016-05-07 10:07:16.986755"], ["created_at", "2016-05-06 10:07:16.993201"], ["updated_at", "2016-05-06 10:07:16.993201"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 127"], ["content", "Article 136 content"], ["publish_on", "2016-05-07 10:07:16.986755"], ["created_at", "2016-05-06 10:07:16.995070"], ["updated_at", "2016-05-06 10:07:16.995070"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 128"], ["content", "Article 137 content"], ["publish_on", "2016-05-07 10:07:16.986755"], ["created_at", "2016-05-06 10:07:16.996793"], ["updated_at", "2016-05-06 10:07:16.996793"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 129"], ["content", "Article 138 content"], ["publish_on", "2016-05-07 10:07:16.986755"], ["created_at", "2016-05-06 10:07:16.998439"], ["updated_at", "2016-05-06 10:07:16.998439"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 130"], ["content", "Article 139 content"], ["publish_on", "2016-05-07 10:07:16.986755"], ["created_at", "2016-05-06 10:07:17.000065"], ["updated_at", "2016-05-06 10:07:17.000065"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 131"], ["content", "Article 140 content"], ["publish_on", "2016-05-07 10:07:16.986755"], ["created_at", "2016-05-06 10:07:17.001577"], ["updated_at", "2016-05-06 10:07:17.001577"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 132"], ["content", "Article 141 content"], ["publish_on", "2016-05-07 10:07:16.986755"], ["created_at", "2016-05-06 10:07:17.003175"], ["updated_at", "2016-05-06 10:07:17.003175"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 133"], ["content", "Article 142 content"], ["publish_on", "2016-05-06 10:06:17.004460"], ["created_at", "2016-05-06 10:07:17.005132"], ["updated_at", "2016-05-06 10:07:17.005132"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 134"], ["content", "Article 143 content"], ["publish_on", "2016-05-06 10:06:17.004460"], ["created_at", "2016-05-06 10:07:17.006706"], ["updated_at", "2016-05-06 10:07:17.006706"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 135"], ["content", "Article 144 content"], ["publish_on", "2016-05-06 10:06:17.004460"], ["created_at", "2016-05-06 10:07:17.008153"], ["updated_at", "2016-05-06 10:07:17.008153"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 136"], ["content", "Article 145 content"], ["publish_on", "2016-05-06 10:06:17.004460"], ["created_at", "2016-05-06 10:07:17.009652"], ["updated_at", "2016-05-06 10:07:17.009652"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 137"], ["content", "Article 146 content"], ["publish_on", "2016-05-06 10:06:17.004460"], ["created_at", "2016-05-06 10:07:17.011396"], ["updated_at", "2016-05-06 10:07:17.011396"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 138"], ["content", "Article 147 content"], ["publish_on", "2016-05-06 10:06:17.004460"], ["created_at", "2016-05-06 10:07:17.013715"], ["updated_at", "2016-05-06 10:07:17.013715"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 139"], ["content", "Article 148 content"], ["publish_on", "2016-05-06 10:06:17.004460"], ["created_at", "2016-05-06 10:07:17.015286"], ["updated_at", "2016-05-06 10:07:17.015286"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 140"], ["content", "Article 149 content"], ["publish_on", "2016-05-06 10:06:17.004460"], ["created_at", "2016-05-06 10:07:17.016738"], ["updated_at", "2016-05-06 10:07:17.016738"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 141"], ["content", "Article 150 content"], ["publish_on", "2016-05-06 10:06:17.004460"], ["created_at", "2016-05-06 10:07:17.018183"], ["updated_at", "2016-05-06 10:07:17.018183"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 142"], ["content", "Article 151 content"], ["publish_on", "2016-05-06 10:06:17.004460"], ["created_at", "2016-05-06 10:07:17.019695"], ["updated_at", "2016-05-06 10:07:17.019695"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Load (0.2ms)[0m  [1mSELECT "articles".* FROM "articles" WHERE "articles"."publish_on" IS NULL AND ("articles"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-06 10:07:17.020691')[0m
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT "articles".* FROM "articles" WHERE (publish_on >= '2016-05-06 10:07:17.021468') AND "articles"."published_at" IS NULL
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT "articles".* FROM "articles" WHERE (publish_on <= '2016-05-06 10:07:17.022038') AND "articles"."published_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
MagazCore::ArticleTest: test_visibility_scopes_and_methods
----------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Article 143"], ["content", "Article 152 content"], ["created_at", "2016-05-06 10:07:17.025328"], ["updated_at", "2016-05-06 10:07:17.025328"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 144"], ["content", "Article 153 content"], ["published_at", "2016-05-06 10:06:17.026550"], ["created_at", "2016-05-06 10:07:17.027212"], ["updated_at", "2016-05-06 10:07:17.027212"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 145"], ["content", "Article 154 content"], ["published_at", "2016-05-06 10:06:17.026550"], ["created_at", "2016-05-06 10:07:17.028937"], ["updated_at", "2016-05-06 10:07:17.028937"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 146"], ["content", "Article 155 content"], ["published_at", "2016-05-06 10:06:17.026550"], ["created_at", "2016-05-06 10:07:17.030487"], ["updated_at", "2016-05-06 10:07:17.030487"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 147"], ["content", "Article 156 content"], ["published_at", "2016-05-06 10:06:17.026550"], ["created_at", "2016-05-06 10:07:17.032115"], ["updated_at", "2016-05-06 10:07:17.032115"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 148"], ["content", "Article 157 content"], ["published_at", "2016-05-06 10:06:17.026550"], ["created_at", "2016-05-06 10:07:17.034101"], ["updated_at", "2016-05-06 10:07:17.034101"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 149"], ["content", "Article 158 content"], ["published_at", "2016-05-06 10:06:17.026550"], ["created_at", "2016-05-06 10:07:17.035848"], ["updated_at", "2016-05-06 10:07:17.035848"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 150"], ["content", "Article 159 content"], ["published_at", "2016-05-06 10:06:17.026550"], ["created_at", "2016-05-06 10:07:17.037522"], ["updated_at", "2016-05-06 10:07:17.037522"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 151"], ["content", "Article 160 content"], ["published_at", "2016-05-06 10:06:17.026550"], ["created_at", "2016-05-06 10:07:17.038999"], ["updated_at", "2016-05-06 10:07:17.038999"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 152"], ["content", "Article 161 content"], ["published_at", "2016-05-06 10:06:17.026550"], ["created_at", "2016-05-06 10:07:17.040547"], ["updated_at", "2016-05-06 10:07:17.040547"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 153"], ["content", "Article 162 content"], ["published_at", "2016-05-06 10:06:17.026550"], ["created_at", "2016-05-06 10:07:17.042060"], ["updated_at", "2016-05-06 10:07:17.042060"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 154"], ["content", "Article 163 content"], ["publish_on", "2016-05-07 10:07:17.043044"], ["created_at", "2016-05-06 10:07:17.043704"], ["updated_at", "2016-05-06 10:07:17.043704"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 155"], ["content", "Article 164 content"], ["publish_on", "2016-05-07 10:07:17.043044"], ["created_at", "2016-05-06 10:07:17.045342"], ["updated_at", "2016-05-06 10:07:17.045342"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 156"], ["content", "Article 165 content"], ["publish_on", "2016-05-07 10:07:17.043044"], ["created_at", "2016-05-06 10:07:17.046866"], ["updated_at", "2016-05-06 10:07:17.046866"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 157"], ["content", "Article 166 content"], ["publish_on", "2016-05-07 10:07:17.043044"], ["created_at", "2016-05-06 10:07:17.048377"], ["updated_at", "2016-05-06 10:07:17.048377"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 158"], ["content", "Article 167 content"], ["publish_on", "2016-05-07 10:07:17.043044"], ["created_at", "2016-05-06 10:07:17.049832"], ["updated_at", "2016-05-06 10:07:17.049832"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 159"], ["content", "Article 168 content"], ["publish_on", "2016-05-07 10:07:17.043044"], ["created_at", "2016-05-06 10:07:17.051239"], ["updated_at", "2016-05-06 10:07:17.051239"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 160"], ["content", "Article 169 content"], ["publish_on", "2016-05-07 10:07:17.043044"], ["created_at", "2016-05-06 10:07:17.052646"], ["updated_at", "2016-05-06 10:07:17.052646"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 161"], ["content", "Article 170 content"], ["publish_on", "2016-05-07 10:07:17.043044"], ["created_at", "2016-05-06 10:07:17.054021"], ["updated_at", "2016-05-06 10:07:17.054021"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 162"], ["content", "Article 171 content"], ["publish_on", "2016-05-07 10:07:17.043044"], ["created_at", "2016-05-06 10:07:17.055425"], ["updated_at", "2016-05-06 10:07:17.055425"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 163"], ["content", "Article 172 content"], ["publish_on", "2016-05-07 10:07:17.043044"], ["created_at", "2016-05-06 10:07:17.056781"], ["updated_at", "2016-05-06 10:07:17.056781"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 164"], ["content", "Article 173 content"], ["publish_on", "2016-05-06 10:06:17.057679"], ["created_at", "2016-05-06 10:07:17.058209"], ["updated_at", "2016-05-06 10:07:17.058209"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 165"], ["content", "Article 174 content"], ["publish_on", "2016-05-06 10:06:17.057679"], ["created_at", "2016-05-06 10:07:17.059712"], ["updated_at", "2016-05-06 10:07:17.059712"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 166"], ["content", "Article 175 content"], ["publish_on", "2016-05-06 10:06:17.057679"], ["created_at", "2016-05-06 10:07:17.061199"], ["updated_at", "2016-05-06 10:07:17.061199"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 167"], ["content", "Article 176 content"], ["publish_on", "2016-05-06 10:06:17.057679"], ["created_at", "2016-05-06 10:07:17.062678"], ["updated_at", "2016-05-06 10:07:17.062678"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 168"], ["content", "Article 177 content"], ["publish_on", "2016-05-06 10:06:17.057679"], ["created_at", "2016-05-06 10:07:17.064098"], ["updated_at", "2016-05-06 10:07:17.064098"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 169"], ["content", "Article 178 content"], ["publish_on", "2016-05-06 10:06:17.057679"], ["created_at", "2016-05-06 10:07:17.065511"], ["updated_at", "2016-05-06 10:07:17.065511"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 170"], ["content", "Article 179 content"], ["publish_on", "2016-05-06 10:06:17.057679"], ["created_at", "2016-05-06 10:07:17.066911"], ["updated_at", "2016-05-06 10:07:17.066911"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 171"], ["content", "Article 180 content"], ["publish_on", "2016-05-06 10:06:17.057679"], ["created_at", "2016-05-06 10:07:17.068268"], ["updated_at", "2016-05-06 10:07:17.068268"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 172"], ["content", "Article 181 content"], ["publish_on", "2016-05-06 10:06:17.057679"], ["created_at", "2016-05-06 10:07:17.069663"], ["updated_at", "2016-05-06 10:07:17.069663"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 173"], ["content", "Article 182 content"], ["publish_on", "2016-05-06 10:06:17.057679"], ["created_at", "2016-05-06 10:07:17.071006"], ["updated_at", "2016-05-06 10:07:17.071006"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT "articles".* FROM "articles" WHERE "articles"."publish_on" IS NULL AND ("articles"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-06 10:07:17.071962')[0m
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT "articles".* FROM "articles" WHERE (publish_on >= '2016-05-06 10:07:17.073128') AND "articles"."published_at" IS NULL
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT "articles".* FROM "articles" WHERE (publish_on <= '2016-05-06 10:07:17.073733') AND "articles"."published_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
MagazCore::ArticleTest: test_worker_created
-------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "articles" ("title", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Article 174"], ["content", "Article 183 content"], ["created_at", "2016-05-06 10:07:17.078344"], ["updated_at", "2016-05-06 10:07:17.078344"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 175"], ["content", "Article 184 content"], ["published_at", "2016-05-06 10:06:17.080476"], ["created_at", "2016-05-06 10:07:17.081347"], ["updated_at", "2016-05-06 10:07:17.081347"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 176"], ["content", "Article 185 content"], ["published_at", "2016-05-06 10:06:17.080476"], ["created_at", "2016-05-06 10:07:17.083514"], ["updated_at", "2016-05-06 10:07:17.083514"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 177"], ["content", "Article 186 content"], ["published_at", "2016-05-06 10:06:17.080476"], ["created_at", "2016-05-06 10:07:17.085499"], ["updated_at", "2016-05-06 10:07:17.085499"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 178"], ["content", "Article 187 content"], ["published_at", "2016-05-06 10:06:17.080476"], ["created_at", "2016-05-06 10:07:17.087771"], ["updated_at", "2016-05-06 10:07:17.087771"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 179"], ["content", "Article 188 content"], ["published_at", "2016-05-06 10:06:17.080476"], ["created_at", "2016-05-06 10:07:17.089798"], ["updated_at", "2016-05-06 10:07:17.089798"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 180"], ["content", "Article 189 content"], ["published_at", "2016-05-06 10:06:17.080476"], ["created_at", "2016-05-06 10:07:17.091647"], ["updated_at", "2016-05-06 10:07:17.091647"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 181"], ["content", "Article 190 content"], ["published_at", "2016-05-06 10:06:17.080476"], ["created_at", "2016-05-06 10:07:17.093216"], ["updated_at", "2016-05-06 10:07:17.093216"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 182"], ["content", "Article 191 content"], ["published_at", "2016-05-06 10:06:17.080476"], ["created_at", "2016-05-06 10:07:17.094694"], ["updated_at", "2016-05-06 10:07:17.094694"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 183"], ["content", "Article 192 content"], ["published_at", "2016-05-06 10:06:17.080476"], ["created_at", "2016-05-06 10:07:17.096177"], ["updated_at", "2016-05-06 10:07:17.096177"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 184"], ["content", "Article 193 content"], ["published_at", "2016-05-06 10:06:17.080476"], ["created_at", "2016-05-06 10:07:17.097461"], ["updated_at", "2016-05-06 10:07:17.097461"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 185"], ["content", "Article 194 content"], ["publish_on", "2016-05-07 10:07:17.098247"], ["created_at", "2016-05-06 10:07:17.098787"], ["updated_at", "2016-05-06 10:07:17.098787"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 186"], ["content", "Article 195 content"], ["publish_on", "2016-05-07 10:07:17.098247"], ["created_at", "2016-05-06 10:07:17.100180"], ["updated_at", "2016-05-06 10:07:17.100180"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 187"], ["content", "Article 196 content"], ["publish_on", "2016-05-07 10:07:17.098247"], ["created_at", "2016-05-06 10:07:17.101530"], ["updated_at", "2016-05-06 10:07:17.101530"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 188"], ["content", "Article 197 content"], ["publish_on", "2016-05-07 10:07:17.098247"], ["created_at", "2016-05-06 10:07:17.102889"], ["updated_at", "2016-05-06 10:07:17.102889"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 189"], ["content", "Article 198 content"], ["publish_on", "2016-05-07 10:07:17.098247"], ["created_at", "2016-05-06 10:07:17.104231"], ["updated_at", "2016-05-06 10:07:17.104231"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 190"], ["content", "Article 199 content"], ["publish_on", "2016-05-07 10:07:17.098247"], ["created_at", "2016-05-06 10:07:17.105566"], ["updated_at", "2016-05-06 10:07:17.105566"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 191"], ["content", "Article 200 content"], ["publish_on", "2016-05-07 10:07:17.098247"], ["created_at", "2016-05-06 10:07:17.106894"], ["updated_at", "2016-05-06 10:07:17.106894"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 192"], ["content", "Article 201 content"], ["publish_on", "2016-05-07 10:07:17.098247"], ["created_at", "2016-05-06 10:07:17.108230"], ["updated_at", "2016-05-06 10:07:17.108230"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 193"], ["content", "Article 202 content"], ["publish_on", "2016-05-07 10:07:17.098247"], ["created_at", "2016-05-06 10:07:17.109543"], ["updated_at", "2016-05-06 10:07:17.109543"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 194"], ["content", "Article 203 content"], ["publish_on", "2016-05-07 10:07:17.098247"], ["created_at", "2016-05-06 10:07:17.110927"], ["updated_at", "2016-05-06 10:07:17.110927"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 195"], ["content", "Article 204 content"], ["publish_on", "2016-05-06 10:06:17.111846"], ["created_at", "2016-05-06 10:07:17.112366"], ["updated_at", "2016-05-06 10:07:17.112366"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 196"], ["content", "Article 205 content"], ["publish_on", "2016-05-06 10:06:17.111846"], ["created_at", "2016-05-06 10:07:17.114350"], ["updated_at", "2016-05-06 10:07:17.114350"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 197"], ["content", "Article 206 content"], ["publish_on", "2016-05-06 10:06:17.111846"], ["created_at", "2016-05-06 10:07:17.115752"], ["updated_at", "2016-05-06 10:07:17.115752"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 198"], ["content", "Article 207 content"], ["publish_on", "2016-05-06 10:06:17.111846"], ["created_at", "2016-05-06 10:07:17.117149"], ["updated_at", "2016-05-06 10:07:17.117149"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 199"], ["content", "Article 208 content"], ["publish_on", "2016-05-06 10:06:17.111846"], ["created_at", "2016-05-06 10:07:17.118499"], ["updated_at", "2016-05-06 10:07:17.118499"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 200"], ["content", "Article 209 content"], ["publish_on", "2016-05-06 10:06:17.111846"], ["created_at", "2016-05-06 10:07:17.119842"], ["updated_at", "2016-05-06 10:07:17.119842"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 201"], ["content", "Article 210 content"], ["publish_on", "2016-05-06 10:06:17.111846"], ["created_at", "2016-05-06 10:07:17.121180"], ["updated_at", "2016-05-06 10:07:17.121180"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 202"], ["content", "Article 211 content"], ["publish_on", "2016-05-06 10:06:17.111846"], ["created_at", "2016-05-06 10:07:17.122505"], ["updated_at", "2016-05-06 10:07:17.122505"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 203"], ["content", "Article 212 content"], ["publish_on", "2016-05-06 10:06:17.111846"], ["created_at", "2016-05-06 10:07:17.124419"], ["updated_at", "2016-05-06 10:07:17.124419"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 204"], ["content", "Article 213 content"], ["publish_on", "2016-05-06 10:06:17.111846"], ["created_at", "2016-05-06 10:07:17.126404"], ["updated_at", "2016-05-06 10:07:17.126404"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "articles" SET "publish_on" = ?, "updated_at" = ? WHERE "articles"."id" = ?  [["publish_on", "2016-05-08 10:07:17.127838"], ["updated_at", "2016-05-06 10:07:17.128493"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::ChangeCustomerTest: test_should_not_update_customer_with_blank_params
---------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.135419"], ["updated_at", "2016-05-06 10:07:17.135419"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 8 "], ["last_name", "Last Name 8"], ["email", "customer8@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 9 "], ["last_name", "Last Name 9"], ["email", "customer9@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::ChangeCustomerTest: test_should_not_update_customer_with_existing_email
-----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.147383"], ["updated_at", "2016-05-06 10:07:17.147383"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 10 "], ["last_name", "Last Name 10"], ["email", "customer10@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 11 "], ["last_name", "Last Name 11"], ["email", "customer11@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.1ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?  [["shop_id", 1], ["email", "customer11@gmail.com"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.0ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.0ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?[0m  [["shop_id", 1], ["email", "customer11@gmail.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.1ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::ChangeCustomerTest: test_should_update_customer_with_some_blank_params
----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.159231"], ["updated_at", "2016-05-06 10:07:17.159231"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 12 "], ["last_name", "Last Name 12"], ["email", "customer12@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 13 "], ["last_name", "Last Name 13"], ["email", "customer13@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "customers" SET "first_name" = ?, "last_name" = ? WHERE "customers"."id" = ?[0m  [["first_name", "Changed first name"], ["last_name", ""], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::ChangeCustomerTest: test_should_update_customer_with_valid_params
-----------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.168954"], ["updated_at", "2016-05-06 10:07:17.168954"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 14 "], ["last_name", "Last Name 14"], ["email", "customer14@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 15 "], ["last_name", "Last Name 15"], ["email", "customer15@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.0ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."email" = ?[0m  [["shop_id", 1], ["email", "Changedtest@test.com"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "customers" SET "first_name" = ?, "last_name" = ?, "email" = ? WHERE "customers"."id" = ?[0m  [["first_name", "Changed first name"], ["last_name", "CHanged last name"], ["email", "Changedtest@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.0ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------
MagazCore::AdminServices::File::ChangeFileTest: test_should_not_update_file_with_blank_params
---------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:17.180413"], ["updated_at", "2016-05-06 10:07:17.180413"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "files" ("name", "shop_id", "file", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "File 3"], ["shop_id", 1], ["file", "test.txt"], ["created_at", "2016-05-06 10:07:17.184539"], ["updated_at", "2016-05-06 10:07:17.184539"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::File::ChangeFileTest: test_should_update_file_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:17.198073"], ["updated_at", "2016-05-06 10:07:17.198073"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "files" ("name", "shop_id", "file", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "File 4"], ["shop_id", 1], ["file", "test.txt"], ["created_at", "2016-05-06 10:07:17.202361"], ["updated_at", "2016-05-06 10:07:17.202361"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::File Load (0.0ms)[0m  SELECT  "files".* FROM "files" WHERE "files"."shop_id" = ? AND "files"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::File Load (0.1ms)[0m  SELECT  "files".* FROM "files" WHERE "files"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "files" SET "file" = ?, "name" = ?, "updated_at" = ? WHERE "files"."id" = ?[0m  [["file", "tapir.jpg"], ["name", "New name"], ["updated_at", "2016-05-06 10:07:17.206929"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------
MagazCore::AdminServices::LinkList::DeleteLinkListTest: test_should_delete_link_list_with_valid_id
--------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:17.212934"], ["updated_at", "2016-05-06 10:07:17.212934"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)  [["name", "List 6"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)[0m  [["name", "Link 3"], ["link_list_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.1ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Link Load (0.1ms)[0m  [1mSELECT "links".* FROM "links" WHERE "links"."link_list_id" = ?[0m  [["link_list_id", 1]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "links" WHERE "links"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "link_lists" WHERE "link_lists"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "link_lists"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::LinkList::DeleteLinkListTest: test_should_delete_links_with_link_list
-----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:17.226216"], ["updated_at", "2016-05-06 10:07:17.226216"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 7"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)  [["name", "Link 4"], ["link_list_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "links"
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Link Load (0.0ms)[0m  [1mSELECT "links".* FROM "links" WHERE "links"."link_list_id" = ?[0m  [["link_list_id", 1]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "links" WHERE "links"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "link_lists" WHERE "link_lists"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "links"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::LinkList::DeleteLinkListTest: test_should_not_delete_link_list_with_blank_id
------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:17.237302"], ["updated_at", "2016-05-06 10:07:17.237302"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 8"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)  [["name", "Link 5"], ["link_list_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::DeleteCustomerTest: test_should_delete_customer_with_valid_id
-------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.246850"], ["updated_at", "2016-05-06 10:07:17.246850"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 16 "], ["last_name", "Last Name 16"], ["email", "customer16@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 17 "], ["last_name", "Last Name 17"], ["email", "customer17@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.0ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "customers" WHERE "customers"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Customer::DeleteCustomerTest: test_should_not_delete_customer_with_valid_blank_id
-----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.258799"], ["updated_at", "2016-05-06 10:07:17.258799"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 18 "], ["last_name", "Last Name 18"], ["email", "customer18@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 19 "], ["last_name", "Last Name 19"], ["email", "customer19@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::ChangeLinkTest: test_should_not_update_link_with_existing_name
----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.271531"], ["updated_at", "2016-05-06 10:07:17.271531"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 9"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)  [["name", "Link 6"], ["link_list_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)[0m  [["name", "Link 7"], ["link_list_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::LinkList Load (0.1ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Link Load (0.0ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1[0m  [["link_list_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Link 7"]]
  [1m[36mMagazCore::LinkList Load (0.1ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Link Load (0.1ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1[0m  [["link_list_id", 1], ["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Link Load (0.0ms)[0m  SELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1  [["link_list_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 1], ["name", "Link 7"]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Link Load (0.0ms)[0m  SELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1  [["link_list_id", 1], ["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Link Load (0.0ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1[0m  [["link_list_id", 1], ["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Link Load (0.0ms)[0m  SELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1  [["link_list_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::ChangeLinkTest: test_should_update_link_with_some_blank_params
----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.296132"], ["updated_at", "2016-05-06 10:07:17.296132"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)  [["name", "List 10"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)[0m  [["name", "Link 8"], ["link_list_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)  [["name", "Link 9"], ["link_list_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Link Load (0.0ms)[0m  SELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1  [["link_list_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 1], ["name", "Changed name"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Link Load (0.0ms)[0m  SELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1  [["link_list_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "links" SET "name" = ?, "link_type" = ?, "position" = ? WHERE "links"."id" = ?  [["name", "Changed name"], ["link_type", ""], ["position", 123], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Link::ChangeLinkTest: test_should_update_link_with_valid_params
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.309050"], ["updated_at", "2016-05-06 10:07:17.309050"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 11"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)  [["name", "Link 10"], ["link_list_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("name", "link_list_id") VALUES (?, ?)[0m  [["name", "Link 11"], ["link_list_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Link Load (0.0ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1[0m  [["link_list_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Test name"]]
  [1m[36mMagazCore::LinkList Load (0.1ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Link Load (0.0ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."link_list_id" = ? AND "links"."id" = ? LIMIT 1[0m  [["link_list_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "links" SET "name" = ?, "link_type" = ?, "position" = ? WHERE "links"."id" = ?[0m  [["name", "Test name"], ["link_type", "Test type"], ["position", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Link Load (0.0ms)[0m  [1mSELECT  "links".* FROM "links" WHERE "links"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Link Load (0.1ms)[0m  SELECT  "links".* FROM "links" WHERE "links"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::AddBlogTest: test_should_create_blog_with_valid_params
--------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.325998"], ["updated_at", "2016-05-06 10:07:17.325998"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "some-handle"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 27"], ["shop_id", 1], ["handle", "some handle"], ["slug", "some-handle"], ["created_at", "2016-05-06 10:07:17.329759"], ["updated_at", "2016-05-06 10:07:17.329759"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "Test title"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "test-handle"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "blogs" ("shop_id", "title", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["title", "Test title"], ["page_title", "Test page_title"], ["meta_description", "Test meta_description"], ["handle", "Test handle"], ["slug", "test-handle"], ["created_at", "2016-05-06 10:07:17.338393"], ["updated_at", "2016-05-06 10:07:17.338393"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::AddBlogTest: test_should_not_create_blog_with_blank_params
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.344486"], ["updated_at", "2016-05-06 10:07:17.344486"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", "some-handle"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Blog 28"], ["shop_id", 1], ["handle", "some handle"], ["slug", "some-handle"], ["created_at", "2016-05-06 10:07:17.348958"], ["updated_at", "2016-05-06 10:07:17.348958"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", ""]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", ""]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::AddBlogTest: test_should_not_create_blog_with_existing_handle
---------------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.360310"], ["updated_at", "2016-05-06 10:07:17.360310"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", "some-handle"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "Blog 29"], ["shop_id", 1], ["handle", "some handle"], ["slug", "some-handle"], ["created_at", "2016-05-06 10:07:17.363002"], ["updated_at", "2016-05-06 10:07:17.363002"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?[0m  [["shop_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?  [["shop_id", 1], ["handle", "some handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "Test title"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?[0m  [["shop_id", 1], ["handle", "some handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::AddBlogTest: test_should_not_create_blog_with_same_params
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.372247"], ["updated_at", "2016-05-06 10:07:17.372247"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", "some-handle"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["title", "Blog 30"], ["shop_id", 1], ["handle", "some handle"], ["slug", "some-handle"], ["created_at", "2016-05-06 10:07:17.374948"], ["updated_at", "2016-05-06 10:07:17.374948"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?[0m  [["shop_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", "test-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("shop_id", "title", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["title", "Test title"], ["page_title", "Test page_title"], ["meta_description", "Test meta_description"], ["handle", "Test handle"], ["slug", "test-handle"], ["created_at", "2016-05-06 10:07:17.380187"], ["updated_at", "2016-05-06 10:07:17.380187"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "Test title"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?[0m  [["shop_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::AddPageTest: test_should_create_page_with_valid_params
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.389937"], ["updated_at", "2016-05-06 10:07:17.389937"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 197"], ["content", "Content 199"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.391965"], ["updated_at", "2016-05-06 10:07:17.391965"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", "test-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["title", "Test title"], ["content", "Test content"], ["page_title", "Test page_title"], ["meta_description", "Test meta_description"], ["handle", "Test handle"], ["slug", "test-handle"], ["created_at", "2016-05-06 10:07:17.399767"], ["updated_at", "2016-05-06 10:07:17.399767"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Page Load (0.0ms)[0m  SELECT  "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::AddPageTest: test_should_not_create_page_with_blank_params
------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.404893"], ["updated_at", "2016-05-06 10:07:17.404893"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Title 198"], ["content", "Content 200"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.406802"], ["updated_at", "2016-05-06 10:07:17.406802"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", ""]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", ""]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Page::AddPageTest: test_should_not_create_page_with_same_params
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.427918"], ["updated_at", "2016-05-06 10:07:17.427918"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pages" ("title", "content", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Title 199"], ["content", "Content 201"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.430686"], ["updated_at", "2016-05-06 10:07:17.430686"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Page Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", "test-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["title", "Test title"], ["content", "Test content"], ["page_title", "Test page_title"], ["meta_description", "Test meta_description"], ["handle", "Test handle"], ["slug", "test-handle"], ["created_at", "2016-05-06 10:07:17.436205"], ["updated_at", "2016-05-06 10:07:17.436205"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", "Test title"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::AddShippingCountryTest: test_should_create_shipping_country_with_valid_params
------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example47' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example47"], ["subdomain", "example47"], ["created_at", "2016-05-06 10:07:17.446308"], ["updated_at", "2016-05-06 10:07:17.446308"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "28"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?  [["shop_id", 1], ["name", "AF"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shipping_countries" ("shop_id", "tax", "name") VALUES (?, ?, ?)  [["shop_id", 1], ["tax", "1488"], ["name", "AF"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ShippingCountry Load (0.0ms)[0m  SELECT  "shipping_countries".* FROM "shipping_countries" WHERE "shipping_countries"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::AddShippingCountryTest: test_should_not_create_existing_shipping_country
-------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example48' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example48"], ["subdomain", "example48"], ["created_at", "2016-05-06 10:07:17.455733"], ["updated_at", "2016-05-06 10:07:17.455733"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "29"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?  [["shop_id", 1], ["name", "UA"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?[0m  [["shop_id", 1], ["name", "UA"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::AddShippingCountryTest: test_should_not_create_shipping_country_with_blank_params
----------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example49' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example49"], ["subdomain", "example49"], ["created_at", "2016-05-06 10:07:17.463216"], ["updated_at", "2016-05-06 10:07:17.463216"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "30"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?[0m  [["shop_id", 1], ["name", ""]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?  [["shop_id", 1], ["name", ""]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::AddShippingCountryTest: test_should_not_create_shipping_country_with_invalid_name
----------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example50' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example50"], ["subdomain", "example50"], ["created_at", "2016-05-06 10:07:17.484520"], ["updated_at", "2016-05-06 10:07:17.484520"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "31"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?  [["shop_id", 1], ["name", "AX"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?[0m  [["shop_id", 1], ["name", "AX"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingCountry::AddShippingCountryTest: test_should_not_create_shipping_country_with_invalid_tax
---------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example51' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example51"], ["subdomain", "example51"], ["created_at", "2016-05-06 10:07:17.494407"], ["updated_at", "2016-05-06 10:07:17.494407"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "32"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_countries"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?[0m  [["shop_id", 1], ["name", "AF"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shipping_countries" WHERE "shipping_countries"."shop_id" = ? AND "shipping_countries"."name" = ?  [["shop_id", 1], ["name", "AF"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_countries"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::ChangeCollectionTest: test_should_not_update_collection_with_existing_name
----------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.506752"], ["updated_at", "2016-05-06 10:07:17.506752"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 248"], ["description", "Collection 250 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.509504"], ["updated_at", "2016-05-06 10:07:17.509504"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 249"], ["description", "Collection 251 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.511955"], ["updated_at", "2016-05-06 10:07:17.511955"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Load (0.2ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?  [["shop_id", 1], ["name", "Collection 249"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Collection Load (0.1ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."handle" = ?[0m  [["shop_id", 1], ["handle", "Changed handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?[0m  [["shop_id", 1], ["name", "Collection 249"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."handle" = ?  [["shop_id", 1], ["handle", "Changed handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::ChangeCollectionTest: test_should_update_collection_with_some_blank_params
----------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.530674"], ["updated_at", "2016-05-06 10:07:17.530674"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 250"], ["description", "Collection 252 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.532704"], ["updated_at", "2016-05-06 10:07:17.532704"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 251"], ["description", "Collection 253 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.534287"], ["updated_at", "2016-05-06 10:07:17.534287"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "2"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Collection Exists (0.1ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" != ?) AND "collections"."slug" = ? LIMIT 1  [["id", 2], ["slug", ""]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "collections" SET "page_title" = ?, "handle" = ?, "meta_description" = ?, "description" = ?, "slug" = ?, "updated_at" = ? WHERE "collections"."id" = ?[0m  [["page_title", ""], ["handle", ""], ["meta_description", ""], ["description", ""], ["slug", ""], ["updated_at", "2016-05-06 10:07:17.541285"], ["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Collection::ChangeCollectionTest: test_should_update_collection_with_valid_params
-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.546951"], ["updated_at", "2016-05-06 10:07:17.546951"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Collection 252"], ["description", "Collection 254 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.549765"], ["updated_at", "2016-05-06 10:07:17.549765"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Collection 253"], ["description", "Collection 255 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.552766"], ["updated_at", "2016-05-06 10:07:17.552766"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?[0m  [["shop_id", 1], ["name", "Changed name"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."handle" = ?  [["shop_id", 1], ["handle", "Changed handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" != ?) AND "collections"."slug" = ? LIMIT 1[0m  [["id", 1], ["slug", "changed-handle"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "collections" SET "name" = ?, "page_title" = ?, "handle" = ?, "meta_description" = ?, "description" = ?, "slug" = ?, "updated_at" = ? WHERE "collections"."id" = ?  [["name", "Changed name"], ["page_title", "Changed page_title"], ["handle", "Changed handle"], ["meta_description", "Changed meta_description"], ["description", "Test description"], ["slug", "changed-handle"], ["updated_at", "2016-05-06 10:07:17.560050"], ["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."slug" = ?  ORDER BY "collections"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Load (0.0ms)[0m  SELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Collection Load (0.0ms)[0m  [1mSELECT  "collections".* FROM "collections" WHERE "collections"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Checkout::ChangeOrderTest: test_should_not_update_order_with_valid_params
---------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.567548"], ["updated_at", "2016-05-06 10:07:17.567548"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 20 "], ["last_name", "Last Name 20"], ["email", "customer20@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 1], ["created_at", "2016-05-06 10:07:17.571503"], ["updated_at", "2016-05-06 10:07:17.571503"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_id", 1], ["status", "open"], ["created_at", "2016-05-06 10:07:17.573063"], ["updated_at", "2016-05-06 10:07:17.573063"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Checkout Load (0.1ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Checkout Load (0.2ms)[0m  SELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Checkout Load (0.0ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Checkout Load (0.0ms)[0m  SELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Checkout Load (0.0ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Checkout::ChangeOrderTest: test_should_update_order_with_valid_params
-----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.583218"], ["updated_at", "2016-05-06 10:07:17.583218"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 21 "], ["last_name", "Last Name 21"], ["email", "customer21@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 1], ["created_at", "2016-05-06 10:07:17.587630"], ["updated_at", "2016-05-06 10:07:17.587630"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_id", 1], ["status", "open"], ["created_at", "2016-05-06 10:07:17.589061"], ["updated_at", "2016-05-06 10:07:17.589061"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Checkout Load (0.0ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "checkouts" SET "status" = ?, "updated_at" = ? WHERE "checkouts"."id" = ?[0m  [["status", "open"], ["updated_at", "2016-05-06 10:07:17.590530"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Checkout Load (0.0ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Checkout Load (0.0ms)[0m  SELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::EmailTemplate::ChangeEmailTemplateTest: test_should_not_update_email_template_with_blank_params
-------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.596089"], ["updated_at", "2016-05-06 10:07:17.596089"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "email_templates" ("name", "title", "body", "template_type", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["name", "Order Notification"], ["title", "New order"], ["body", "You have a new order"], ["template_type", "new_order_notification"], ["description", "some description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.598655"], ["updated_at", "2016-05-06 10:07:17.598655"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::EmailTemplate::ChangeEmailTemplateTest: test_should_update_email_template_with_valid_params
---------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.609080"], ["updated_at", "2016-05-06 10:07:17.609080"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "email_templates" ("name", "title", "body", "template_type", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Order Notification"], ["title", "New order"], ["body", "You have a new order"], ["template_type", "new_order_notification"], ["description", "some description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.610993"], ["updated_at", "2016-05-06 10:07:17.610993"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::EmailTemplate Load (0.2ms)[0m  [1mSELECT  "email_templates".* FROM "email_templates" WHERE "email_templates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "email_templates" SET "title" = ?, "body" = ?, "updated_at" = ? WHERE "email_templates"."id" = ?[0m  [["title", "Changed title"], ["body", "Changed body"], ["updated_at", "2016-05-06 10:07:17.614278"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::EmailTemplate Load (0.0ms)[0m  [1mSELECT  "email_templates".* FROM "email_templates" WHERE "email_templates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::EmailTemplate Load (0.0ms)[0m  SELECT  "email_templates".* FROM "email_templates" WHERE "email_templates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::EmailTemplate::ChangeEmailTemplateTest: test_should_update_update_email_with_some_blank_params
------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.619937"], ["updated_at", "2016-05-06 10:07:17.619937"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "email_templates" ("name", "title", "body", "template_type", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["name", "Order Notification"], ["title", "New order"], ["body", "You have a new order"], ["template_type", "new_order_notification"], ["description", "some description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.622691"], ["updated_at", "2016-05-06 10:07:17.622691"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::EmailTemplate Load (0.0ms)[0m  SELECT  "email_templates".* FROM "email_templates" WHERE "email_templates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "email_templates" SET "title" = ?, "body" = ?, "updated_at" = ? WHERE "email_templates"."id" = ?  [["title", ""], ["body", ""], ["updated_at", "2016-05-06 10:07:17.625039"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ProductImage::AddProductImageTest: test_should_add_image_with_valid_params
----------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:17.630842"], ["updated_at", "2016-05-06 10:07:17.630842"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 16' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 16"], ["description", "Example 16 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.633864"], ["updated_at", "2016-05-06 10:07:17.633864"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "product_images"
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "product_images" ("product_id", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["product_id", 1], ["image", "tapir.jpg"], ["created_at", "2016-05-06 10:07:17.642803"], ["updated_at", "2016-05-06 10:07:17.642803"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ProductImage Load (0.1ms)[0m  SELECT  "product_images".* FROM "product_images" WHERE "product_images"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "product_images"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ProductImage::AddProductImageTest: test_should_not_add_image_without_image
----------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:17.649237"], ["updated_at", "2016-05-06 10:07:17.649237"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 17' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 17"], ["description", "Example 17 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.652248"], ["updated_at", "2016-05-06 10:07:17.652248"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "product_images"
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "product_images"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ProductImage::AddProductImageTest: test_should_not_create_image_with_wrong_extension
--------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:17.663227"], ["updated_at", "2016-05-06 10:07:17.663227"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 18' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 18"], ["description", "Example 18 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.667247"], ["updated_at", "2016-05-06 10:07:17.667247"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "product_images"
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "product_images"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangePaymentSettingsTest: test_should_update_authorization_settings_to_nil_with_wrong_value
----------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.682479"], ["updated_at", "2016-05-06 10:07:17.682479"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Shop::ChangePaymentSettingsTest: test_should_update_shop_with_valid_params
----------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.690158"], ["updated_at", "2016-05-06 10:07:17.690158"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."subdomain" = 'shop_name' AND "shops"."id" != 1) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "shops" SET "authorization_settings" = ?, "updated_at" = ? WHERE "shops"."id" = ?[0m  [["authorization_settings", "authorize_and_charge"], ["updated_at", "2016-05-06 10:07:17.692709"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------
MagazCore::AdminServices::DeleteArticleTest: test_should_delete_article_with_valid_id
-------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.696902"], ["updated_at", "2016-05-06 10:07:17.696902"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 31"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.698608"], ["updated_at", "2016-05-06 10:07:17.698608"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 205"], ["content", "Article 214 content"], ["blog_id", 1], ["created_at", "2016-05-06 10:07:17.700224"], ["updated_at", "2016-05-06 10:07:17.700224"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 206"], ["content", "Article 215 content"], ["blog_id", 1], ["created_at", "2016-05-06 10:07:17.701611"], ["updated_at", "2016-05-06 10:07:17.701611"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?  [["blog_id", 1]]
  [1m[36mMagazCore::Article Load (0.1ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."slug" = ?  ORDER BY "articles"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "articles" WHERE "articles"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Article Load (0.0ms)[0m  SELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?  [["blog_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::DeleteArticleTest: test_should_not_delete_article_with_valid_blank_id
-----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.710837"], ["updated_at", "2016-05-06 10:07:17.710837"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 32"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.712708"], ["updated_at", "2016-05-06 10:07:17.712708"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "blog_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "Article 207"], ["content", "Article 216 content"], ["blog_id", 1], ["created_at", "2016-05-06 10:07:17.714385"], ["updated_at", "2016-05-06 10:07:17.714385"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "blog_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "Article 208"], ["content", "Article 217 content"], ["blog_id", 1], ["created_at", "2016-05-06 10:07:17.716041"], ["updated_at", "2016-05-06 10:07:17.716041"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?  [["blog_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?[0m  [["blog_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------
MagazCore::Shop::SubdomainOwnerTest: test_assigns_subdomain
-----------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'uniq-name' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
MagazCore::Shop::SubdomainOwnerTest: test_subdomain_format
----------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------
MagazCore::Shop::SubdomainOwnerTest: test_subdomain_format_-_characters_stripped
--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------
MagazCore::Shop::SubdomainOwnerTest: test_subdomain_uniqueness
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------
MagazCore::Shop::SubdomainOwnerTest: test_subdomain_uniqueness_-_subdomain_name_is_generated_if_needed
------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::LinkList::AddLinkListTest: test_should_create_link_list_with_valid_params
---------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.730713"], ["updated_at", "2016-05-06 10:07:17.730713"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", "Test name"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::LinkList Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1[0m  [["slug", "test-handle"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)  [["shop_id", 1], ["name", "Test name"], ["handle", "Test handle"], ["slug", "test-handle"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::LinkList::AddLinkListTest: test_should_not_create_link_list_with_blank_params
-------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.744064"], ["updated_at", "2016-05-06 10:07:17.744064"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", ""]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", ""]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::LinkList::AddLinkListTest: test_should_not_create_link_list_with_same_params
------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.757554"], ["updated_at", "2016-05-06 10:07:17.757554"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "Test name"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LinkList Exists (0.1ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1  [["slug", "test-handle"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Test name"], ["handle", "Test handle"], ["slug", "test-handle"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", "Test name"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "Test name"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::ChangeWebhookTest: test_should_create_webhook_with_valid_params
--------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example52' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example52"], ["subdomain", "example52"], ["created_at", "2016-05-06 10:07:17.776144"], ["updated_at", "2016-05-06 10:07:17.776144"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.778699"], ["updated_at", "2016-05-06 10:07:17.778699"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "webhooks"
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Webhook Load (0.1ms)[0m  SELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."shop_id" = ? AND "webhooks"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "webhooks" SET "topic" = ?, "address" = ?, "format" = ?, "metafield_namespaces" = ?, "fields" = ?, "updated_at" = ? WHERE "webhooks"."id" = ?  [["topic", "create_product_event"], ["address", "https://www.examplee.com"], ["format", "JSON"], ["metafield_namespaces", nil], ["fields", nil], ["updated_at", "2016-05-06 10:07:17.784492"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Webhook Load (0.0ms)[0m  SELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Webhook Load (0.0ms)[0m  [1mSELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::ChangeWebhookTest: test_should_not_create_webhook_with_blank_params
------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example53' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example53"], ["subdomain", "example53"], ["created_at", "2016-05-06 10:07:17.788945"], ["updated_at", "2016-05-06 10:07:17.788945"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.790731"], ["updated_at", "2016-05-06 10:07:17.790731"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::ChangeWebhookTest: test_should_not_create_webhook_with_invalid_address
---------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example54' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example54"], ["subdomain", "example54"], ["created_at", "2016-05-06 10:07:17.800028"], ["updated_at", "2016-05-06 10:07:17.800028"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.802656"], ["updated_at", "2016-05-06 10:07:17.802656"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "webhooks"[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Webhook Load (0.1ms)[0m  [1mSELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."shop_id" = ? AND "webhooks"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Webhook Load (0.1ms)[0m  [1mSELECT  "webhooks".* FROM "webhooks" WHERE "webhooks"."shop_id" = ? AND "webhooks"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::DeleteBlogTest: test_should_delete_blog_with_valid_id
-------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.816045"], ["updated_at", "2016-05-06 10:07:17.816045"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 33"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.818266"], ["updated_at", "2016-05-06 10:07:17.818266"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 34"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.820293"], ["updated_at", "2016-05-06 10:07:17.820293"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."slug" = ?  ORDER BY "blogs"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "blogs" WHERE "blogs"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------
MagazCore::AdminServices::Blog::DeleteBlogTest: test_should_not_delete_blog_with_blank_id
-----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:17.832031"], ["updated_at", "2016-05-06 10:07:17.832031"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 35"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.834610"], ["updated_at", "2016-05-06 10:07:17.834610"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 36"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.836688"], ["updated_at", "2016-05-06 10:07:17.836688"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ProductImage::ChangeProductImageTest: test_should_not_update_image_with_wrong_extension
-----------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:17.845621"], ["updated_at", "2016-05-06 10:07:17.845621"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 19' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 19"], ["description", "Example 19 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.848518"], ["updated_at", "2016-05-06 10:07:17.848518"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "product_images" ("product_id", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 1], ["image", "tapir.jpg"], ["created_at", "2016-05-06 10:07:17.864516"], ["updated_at", "2016-05-06 10:07:17.864516"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "product_images"[0m
  [1m[35mMagazCore::Product Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Product Load (0.1ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ProductImage Load (0.0ms)[0m  SELECT  "product_images".* FROM "product_images" WHERE "product_images"."product_id" = ? AND "product_images"."id" = ? LIMIT 1  [["product_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Load (0.1ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ProductImage Load (0.0ms)[0m  [1mSELECT  "product_images".* FROM "product_images" WHERE "product_images"."product_id" = ? AND "product_images"."id" = ? LIMIT 1[0m  [["product_id", 1], ["id", 1]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ProductImage Load (0.0ms)[0m  SELECT  "product_images".* FROM "product_images" WHERE "product_images"."product_id" = ? AND "product_images"."id" = ? LIMIT 1  [["product_id", 1], ["id", 1]]
  [1m[36mMagazCore::ProductImage Load (0.0ms)[0m  [1mSELECT  "product_images".* FROM "product_images" WHERE "product_images"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ProductImage::ChangeProductImageTest: test_should_not_update_image_without_image
----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:17.882876"], ["updated_at", "2016-05-06 10:07:17.882876"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 20' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 20"], ["description", "Example 20 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.886304"], ["updated_at", "2016-05-06 10:07:17.886304"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "product_images" ("product_id", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 1], ["image", "tapir.jpg"], ["created_at", "2016-05-06 10:07:17.892760"], ["updated_at", "2016-05-06 10:07:17.892760"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "product_images"[0m
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::ProductImage Load (0.0ms)[0m  SELECT  "product_images".* FROM "product_images" WHERE "product_images"."product_id" = ? AND "product_images"."id" = ? LIMIT 1  [["product_id", 1], ["id", 1]]
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ProductImage Load (0.0ms)[0m  [1mSELECT  "product_images".* FROM "product_images" WHERE "product_images"."product_id" = ? AND "product_images"."id" = ? LIMIT 1[0m  [["product_id", 1], ["id", 1]]
  [1m[35mMagazCore::ProductImage Load (0.0ms)[0m  SELECT  "product_images".* FROM "product_images" WHERE "product_images"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ProductImage::ChangeProductImageTest: test_should_update_image_with_valid_params
----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop-name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop name"], ["subdomain", "shop-name"], ["created_at", "2016-05-06 10:07:17.903276"], ["updated_at", "2016-05-06 10:07:17.903276"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 21' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 21"], ["description", "Example 21 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.905733"], ["updated_at", "2016-05-06 10:07:17.905733"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "product_images" ("product_id", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["product_id", 1], ["image", "tapir.jpg"], ["created_at", "2016-05-06 10:07:17.912771"], ["updated_at", "2016-05-06 10:07:17.912771"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "product_images"
  [1m[36mMagazCore::Product Load (0.0ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."slug" = ?  ORDER BY "products"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::Product Load (0.0ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ProductImage Load (0.0ms)[0m  [1mSELECT  "product_images".* FROM "product_images" WHERE "product_images"."product_id" = ? AND "product_images"."id" = ? LIMIT 1[0m  [["product_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::ProductImage Load (0.1ms)[0m  [1mSELECT  "product_images".* FROM "product_images" WHERE "product_images"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "product_images" SET "image" = ?, "updated_at" = ? WHERE "product_images"."id" = ?  [["image", "sell_bg_berlin.jpg"], ["updated_at", "2016-05-06 10:07:17.921026"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ProductImage Load (0.0ms)[0m  SELECT  "product_images".* FROM "product_images" WHERE "product_images"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------
MagazCore::StoreServices::ShoppingCartTest: test_add_product_and_item_count
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example55' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example55"], ["subdomain", "example55"], ["created_at", "2016-05-06 10:07:17.928111"], ["updated_at", "2016-05-06 10:07:17.928111"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 22 "], ["last_name", "Last Name 22"], ["email", "customer22@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["customer_id", 1], ["created_at", "2016-05-06 10:07:17.932395"], ["updated_at", "2016-05-06 10:07:17.932395"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 22' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 22"], ["description", "Example 22 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.934438"], ["updated_at", "2016-05-06 10:07:17.934438"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.1ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" IS NULL LIMIT 1  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("shop_id") VALUES (?)  [["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Checkout Load (0.1ms)[0m  SELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."customer_id" = ? AND "checkouts"."status" IS NULL AND "checkouts"."id" IS NULL LIMIT 1  [["customer_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 2], ["created_at", "2016-05-06 10:07:17.943169"], ["updated_at", "2016-05-06 10:07:17.943169"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 23' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example 23"], ["description", "Example 23 description"], ["created_at", "2016-05-06 10:07:17.945823"], ["updated_at", "2016-05-06 10:07:17.945823"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 24' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example 24"], ["description", "Example 24 description"], ["created_at", "2016-05-06 10:07:17.947847"], ["updated_at", "2016-05-06 10:07:17.947847"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."checkout_id" = ?  [["checkout_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "line_items" ("name", "description", "created_at", "updated_at", "product_id", "quantity", "checkout_id") VALUES (?, ?, ?, ?, ?, ?, ?)  [["name", "Example 23"], ["description", "Example 23 description"], ["created_at", "2016-05-06 10:07:17.945823"], ["updated_at", "2016-05-06 10:07:17.945823"], ["product_id", 2], ["quantity", 1], ["checkout_id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "line_items" ("name", "description", "created_at", "updated_at", "product_id", "quantity", "checkout_id") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Example 24"], ["description", "Example 24 description"], ["created_at", "2016-05-06 10:07:17.947847"], ["updated_at", "2016-05-06 10:07:17.947847"], ["product_id", 3], ["quantity", 1], ["checkout_id", 2]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------
MagazCore::StoreServices::ShoppingCartTest: test_initialization_with_existing_stuff
-----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example56' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example56"], ["subdomain", "example56"], ["created_at", "2016-05-06 10:07:17.961694"], ["updated_at", "2016-05-06 10:07:17.961694"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)  [["first_name", "First Name 23 "], ["last_name", "Last Name 23"], ["email", "customer23@gmail.com"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["customer_id", 1], ["created_at", "2016-05-06 10:07:17.966688"], ["updated_at", "2016-05-06 10:07:17.966688"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 25' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 25"], ["description", "Example 25 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.969606"], ["updated_at", "2016-05-06 10:07:17.969606"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Customer Load (0.0ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Checkout Load (0.1ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."customer_id" = ? AND "checkouts"."status" IS NULL AND "checkouts"."id" = ? LIMIT 1[0m  [["customer_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------
MagazCore::StoreServices::ShoppingCartTest: test_initialization_with_missing_stuff
----------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example57' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example57"], ["subdomain", "example57"], ["created_at", "2016-05-06 10:07:17.977003"], ["updated_at", "2016-05-06 10:07:17.977003"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("first_name", "last_name", "email", "shop_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "First Name 24 "], ["last_name", "Last Name 24"], ["email", "customer24@gmail.com"], ["shop_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 1], ["created_at", "2016-05-06 10:07:17.980644"], ["updated_at", "2016-05-06 10:07:17.980644"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 26' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 26"], ["description", "Example 26 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:17.982762"], ["updated_at", "2016-05-06 10:07:17.982762"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Checkout Load (0.0ms)[0m  SELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."customer_id" = ? AND "checkouts"."status" IS NULL AND "checkouts"."id" = ? LIMIT 1  [["customer_id", 1], ["id", 0]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["customer_id", 1], ["created_at", "2016-05-06 10:07:17.985971"], ["updated_at", "2016-05-06 10:07:17.985971"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Customer Load (0.0ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."shop_id" = ? AND "customers"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 0]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("shop_id") VALUES (?)[0m  [["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Checkout Load (0.0ms)[0m  [1mSELECT  "checkouts".* FROM "checkouts" WHERE "checkouts"."customer_id" = ? AND "checkouts"."status" IS NULL AND "checkouts"."id" = ? LIMIT 1[0m  [["customer_id", 2], ["id", 0]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "checkouts" ("customer_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["customer_id", 2], ["created_at", "2016-05-06 10:07:17.989895"], ["updated_at", "2016-05-06 10:07:17.989895"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::AddShippingRateTest: test_shoul_add_shipping_rate_with_some_blank_params
----------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:17.994407"], ["updated_at", "2016-05-06 10:07:17.994407"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "33"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "shipping_rates" ("name", "criteria", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["name", "Test name"], ["criteria", "weight"], ["shipping_price", 5.0], ["shipping_country_id", 1], ["created_at", "2016-05-06 10:07:18.007991"], ["updated_at", "2016-05-06 10:07:18.007991"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::ShippingRate Load (0.1ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35mMagazCore::ShippingRate Load (0.0ms)[0m  SELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::ShippingRate Load (0.0ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::AddShippingRateTest: test_should_add_shipping_rate_with_valid_params
------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:18.015239"], ["updated_at", "2016-05-06 10:07:18.015239"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "34"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "shipping_rates" ("name", "price_from", "price_to", "weight_from", "weight_to", "criteria", "shipping_price", "shipping_country_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Test name"], ["price_from", 15.7], ["price_to", 20.5], ["weight_from", 3.1], ["weight_to", 5.5], ["criteria", "weight"], ["shipping_price", 5.0], ["shipping_country_id", 1], ["created_at", "2016-05-06 10:07:18.019926"], ["updated_at", "2016-05-06 10:07:18.019926"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::ShippingRate Load (0.0ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36mMagazCore::ShippingRate Load (0.0ms)[0m  [1mSELECT  "shipping_rates".* FROM "shipping_rates" WHERE "shipping_rates"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::AddShippingRateTest: test_should_not_add_shipping_rate_with_blank_params
----------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:18.024990"], ["updated_at", "2016-05-06 10:07:18.024990"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "35"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::AddShippingRateTest: test_should_not_add_shipping_rate_with_wrong_comparison
--------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:18.036027"], ["updated_at", "2016-05-06 10:07:18.036027"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "36"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::AddShippingRateTest: test_should_not_add_shipping_rate_with_wrong_criteria
------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:18.041986"], ["updated_at", "2016-05-06 10:07:18.041986"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)[0m  [["name", "UA"], ["tax", "37"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ShippingRate::AddShippingRateTest: test_should_not_add_shipping_rate_with_wrong_weight
----------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'new-shop' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "New shop"], ["subdomain", "new-shop"], ["created_at", "2016-05-06 10:07:18.048728"], ["updated_at", "2016-05-06 10:07:18.048728"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "38"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shipping_rates"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shipping_rates"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------
MagazCore::ThemeServices::ResolverTest: test_find_all_-_returns_empty_array
---------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme12"], ["created_at", "2016-05-06 10:07:18.107997"], ["updated_at", "2016-05-06 10:07:18.107997"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.109174"], ["updated_at", "2016-05-06 10:07:18.109174"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.110104"], ["updated_at", "2016-05-06 10:07:18.110104"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.110840"], ["updated_at", "2016-05-06 10:07:18.110840"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.111596"], ["updated_at", "2016-05-06 10:07:18.111596"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.112343"], ["updated_at", "2016-05-06 10:07:18.112343"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.113068"], ["updated_at", "2016-05-06 10:07:18.113068"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.113800"], ["updated_at", "2016-05-06 10:07:18.113800"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.114494"], ["updated_at", "2016-05-06 10:07:18.114494"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.115199"], ["updated_at", "2016-05-06 10:07:18.115199"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.115903"], ["updated_at", "2016-05-06 10:07:18.115903"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.116588"], ["updated_at", "2016-05-06 10:07:18.116588"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.117283"], ["updated_at", "2016-05-06 10:07:18.117283"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.118015"], ["updated_at", "2016-05-06 10:07:18.118015"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.118710"], ["updated_at", "2016-05-06 10:07:18.118710"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.119406"], ["updated_at", "2016-05-06 10:07:18.119406"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.120411"], ["updated_at", "2016-05-06 10:07:18.120411"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.121530"], ["updated_at", "2016-05-06 10:07:18.121530"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.122571"], ["updated_at", "2016-05-06 10:07:18.122571"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.123646"], ["updated_at", "2016-05-06 10:07:18.123646"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.124674"], ["updated_at", "2016-05-06 10:07:18.124674"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.125677"], ["updated_at", "2016-05-06 10:07:18.125677"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.126679"], ["updated_at", "2016-05-06 10:07:18.126679"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.127699"], ["updated_at", "2016-05-06 10:07:18.127699"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.128705"], ["updated_at", "2016-05-06 10:07:18.128705"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.129692"], ["updated_at", "2016-05-06 10:07:18.129692"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.130649"], ["updated_at", "2016-05-06 10:07:18.130649"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.131522"], ["updated_at", "2016-05-06 10:07:18.131522"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.132359"], ["updated_at", "2016-05-06 10:07:18.132359"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.133168"], ["updated_at", "2016-05-06 10:07:18.133168"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.134007"], ["updated_at", "2016-05-06 10:07:18.134007"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.134764"], ["updated_at", "2016-05-06 10:07:18.134764"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.135481"], ["updated_at", "2016-05-06 10:07:18.135481"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.136173"], ["updated_at", "2016-05-06 10:07:18.136173"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.136894"], ["updated_at", "2016-05-06 10:07:18.136894"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.137593"], ["updated_at", "2016-05-06 10:07:18.137593"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.138292"], ["updated_at", "2016-05-06 10:07:18.138292"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.138965"], ["updated_at", "2016-05-06 10:07:18.138965"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.139643"], ["updated_at", "2016-05-06 10:07:18.139643"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.140301"], ["updated_at", "2016-05-06 10:07:18.140301"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.140956"], ["updated_at", "2016-05-06 10:07:18.140956"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.141612"], ["updated_at", "2016-05-06 10:07:18.141612"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.142273"], ["updated_at", "2016-05-06 10:07:18.142273"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.142929"], ["updated_at", "2016-05-06 10:07:18.142929"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.143581"], ["updated_at", "2016-05-06 10:07:18.143581"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.144280"], ["updated_at", "2016-05-06 10:07:18.144280"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.144928"], ["updated_at", "2016-05-06 10:07:18.144928"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.145602"], ["updated_at", "2016-05-06 10:07:18.145602"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.146259"], ["updated_at", "2016-05-06 10:07:18.146259"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.146913"], ["updated_at", "2016-05-06 10:07:18.146913"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.147569"], ["updated_at", "2016-05-06 10:07:18.147569"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "assets" ("key", "theme_id", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["key", "prefix/template.liquid"], ["theme_id", 1], ["value", "<%= 'Hi from theme template asset!' %>"], ["created_at", "2016-05-06 10:07:18.153816"], ["updated_at", "2016-05-06 10:07:18.153816"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Asset Load (0.1ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ? AND "assets"."key" = ?  [["theme_id", 1], ["key", "noprefix/notemplate.liquid"]]
  [1m[36mMagazCore::Asset Load (0.0ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ? AND "assets"."key" = ?[0m  [["theme_id", 1], ["key", "noprefix/notemplate.liquid"]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------
MagazCore::ThemeServices::ResolverTest: test_find_all_-_returns_template,_when_it_is_exist
------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme13"], ["created_at", "2016-05-06 10:07:18.205657"], ["updated_at", "2016-05-06 10:07:18.205657"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.206953"], ["updated_at", "2016-05-06 10:07:18.206953"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.207849"], ["updated_at", "2016-05-06 10:07:18.207849"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.208637"], ["updated_at", "2016-05-06 10:07:18.208637"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.209418"], ["updated_at", "2016-05-06 10:07:18.209418"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.210197"], ["updated_at", "2016-05-06 10:07:18.210197"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.210940"], ["updated_at", "2016-05-06 10:07:18.210940"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.211598"], ["updated_at", "2016-05-06 10:07:18.211598"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.212312"], ["updated_at", "2016-05-06 10:07:18.212312"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.212972"], ["updated_at", "2016-05-06 10:07:18.212972"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.213627"], ["updated_at", "2016-05-06 10:07:18.213627"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.214285"], ["updated_at", "2016-05-06 10:07:18.214285"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.214940"], ["updated_at", "2016-05-06 10:07:18.214940"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.215601"], ["updated_at", "2016-05-06 10:07:18.215601"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.216254"], ["updated_at", "2016-05-06 10:07:18.216254"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.217343"], ["updated_at", "2016-05-06 10:07:18.217343"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.218550"], ["updated_at", "2016-05-06 10:07:18.218550"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.219675"], ["updated_at", "2016-05-06 10:07:18.219675"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.220508"], ["updated_at", "2016-05-06 10:07:18.220508"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.221297"], ["updated_at", "2016-05-06 10:07:18.221297"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.222238"], ["updated_at", "2016-05-06 10:07:18.222238"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.223092"], ["updated_at", "2016-05-06 10:07:18.223092"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.224056"], ["updated_at", "2016-05-06 10:07:18.224056"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.225012"], ["updated_at", "2016-05-06 10:07:18.225012"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.225968"], ["updated_at", "2016-05-06 10:07:18.225968"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.226927"], ["updated_at", "2016-05-06 10:07:18.226927"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.227795"], ["updated_at", "2016-05-06 10:07:18.227795"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.228604"], ["updated_at", "2016-05-06 10:07:18.228604"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.229391"], ["updated_at", "2016-05-06 10:07:18.229391"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.230165"], ["updated_at", "2016-05-06 10:07:18.230165"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.230975"], ["updated_at", "2016-05-06 10:07:18.230975"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.231767"], ["updated_at", "2016-05-06 10:07:18.231767"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.232468"], ["updated_at", "2016-05-06 10:07:18.232468"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.233169"], ["updated_at", "2016-05-06 10:07:18.233169"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.233857"], ["updated_at", "2016-05-06 10:07:18.233857"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.234516"], ["updated_at", "2016-05-06 10:07:18.234516"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.235168"], ["updated_at", "2016-05-06 10:07:18.235168"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.235826"], ["updated_at", "2016-05-06 10:07:18.235826"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.236483"], ["updated_at", "2016-05-06 10:07:18.236483"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.237170"], ["updated_at", "2016-05-06 10:07:18.237170"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.237824"], ["updated_at", "2016-05-06 10:07:18.237824"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.238478"], ["updated_at", "2016-05-06 10:07:18.238478"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.239132"], ["updated_at", "2016-05-06 10:07:18.239132"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.239793"], ["updated_at", "2016-05-06 10:07:18.239793"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.240452"], ["updated_at", "2016-05-06 10:07:18.240452"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.241154"], ["updated_at", "2016-05-06 10:07:18.241154"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.241818"], ["updated_at", "2016-05-06 10:07:18.241818"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.242487"], ["updated_at", "2016-05-06 10:07:18.242487"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.243143"], ["updated_at", "2016-05-06 10:07:18.243143"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.243804"], ["updated_at", "2016-05-06 10:07:18.243804"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.244461"], ["updated_at", "2016-05-06 10:07:18.244461"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "assets" ("key", "theme_id", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["key", "prefix/template.liquid"], ["theme_id", 1], ["value", "<%= 'Hi from theme template asset!' %>"], ["created_at", "2016-05-06 10:07:18.250499"], ["updated_at", "2016-05-06 10:07:18.250499"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Asset Load (0.0ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ? AND "assets"."key" = ?  [["theme_id", 1], ["key", "prefix/template.liquid"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MagazCore::ThemeServices::ResolverTest: test_initialize
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme14"], ["created_at", "2016-05-06 10:07:18.308721"], ["updated_at", "2016-05-06 10:07:18.308721"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.309752"], ["updated_at", "2016-05-06 10:07:18.309752"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.310618"], ["updated_at", "2016-05-06 10:07:18.310618"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.311360"], ["updated_at", "2016-05-06 10:07:18.311360"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.312352"], ["updated_at", "2016-05-06 10:07:18.312352"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.313141"], ["updated_at", "2016-05-06 10:07:18.313141"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.313925"], ["updated_at", "2016-05-06 10:07:18.313925"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.314627"], ["updated_at", "2016-05-06 10:07:18.314627"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.315329"], ["updated_at", "2016-05-06 10:07:18.315329"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.316052"], ["updated_at", "2016-05-06 10:07:18.316052"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.316879"], ["updated_at", "2016-05-06 10:07:18.316879"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.317620"], ["updated_at", "2016-05-06 10:07:18.317620"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.318366"], ["updated_at", "2016-05-06 10:07:18.318366"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.319103"], ["updated_at", "2016-05-06 10:07:18.319103"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.319855"], ["updated_at", "2016-05-06 10:07:18.319855"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.320912"], ["updated_at", "2016-05-06 10:07:18.320912"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.322081"], ["updated_at", "2016-05-06 10:07:18.322081"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.323248"], ["updated_at", "2016-05-06 10:07:18.323248"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.324379"], ["updated_at", "2016-05-06 10:07:18.324379"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.325450"], ["updated_at", "2016-05-06 10:07:18.325450"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.326462"], ["updated_at", "2016-05-06 10:07:18.326462"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.327620"], ["updated_at", "2016-05-06 10:07:18.327620"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.328691"], ["updated_at", "2016-05-06 10:07:18.328691"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.329828"], ["updated_at", "2016-05-06 10:07:18.329828"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.330964"], ["updated_at", "2016-05-06 10:07:18.330964"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.331860"], ["updated_at", "2016-05-06 10:07:18.331860"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.332902"], ["updated_at", "2016-05-06 10:07:18.332902"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.333768"], ["updated_at", "2016-05-06 10:07:18.333768"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.334595"], ["updated_at", "2016-05-06 10:07:18.334595"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.335425"], ["updated_at", "2016-05-06 10:07:18.335425"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.336215"], ["updated_at", "2016-05-06 10:07:18.336215"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.336977"], ["updated_at", "2016-05-06 10:07:18.336977"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.337816"], ["updated_at", "2016-05-06 10:07:18.337816"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.338580"], ["updated_at", "2016-05-06 10:07:18.338580"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.339314"], ["updated_at", "2016-05-06 10:07:18.339314"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.340041"], ["updated_at", "2016-05-06 10:07:18.340041"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.340917"], ["updated_at", "2016-05-06 10:07:18.340917"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.341634"], ["updated_at", "2016-05-06 10:07:18.341634"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.342395"], ["updated_at", "2016-05-06 10:07:18.342395"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.343105"], ["updated_at", "2016-05-06 10:07:18.343105"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.343866"], ["updated_at", "2016-05-06 10:07:18.343866"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.344583"], ["updated_at", "2016-05-06 10:07:18.344583"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.345294"], ["updated_at", "2016-05-06 10:07:18.345294"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.346022"], ["updated_at", "2016-05-06 10:07:18.346022"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.346811"], ["updated_at", "2016-05-06 10:07:18.346811"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.347724"], ["updated_at", "2016-05-06 10:07:18.347724"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.348470"], ["updated_at", "2016-05-06 10:07:18.348470"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.349162"], ["updated_at", "2016-05-06 10:07:18.349162"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.349937"], ["updated_at", "2016-05-06 10:07:18.349937"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.350671"], ["updated_at", "2016-05-06 10:07:18.350671"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.351449"], ["updated_at", "2016-05-06 10:07:18.351449"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["key", "prefix/template.liquid"], ["theme_id", 1], ["value", "<%= 'Hi from theme template asset!' %>"], ["created_at", "2016-05-06 10:07:18.358090"], ["updated_at", "2016-05-06 10:07:18.358090"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::EventWebhookRunnerTest: test_should_not_throw_error_and_schedule_2_webhooks
--------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example58' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example58"], ["subdomain", "example58"], ["created_at", "2016-05-06 10:07:18.362914"], ["updated_at", "2016-05-06 10:07:18.362914"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example33.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example33.com"], ["first_name", "First Name 33 "], ["last_name", "Last Name 33"], ["password_salt", "$2a$10$3Txj82SHSoJN1N8ffIDwPe"], ["password_digest", "$2a$10$3Txj82SHSoJN1N8ffIDwPeTeAM6zp6QeARnYLSctznFYCVWmri7IK"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:18.502030"], ["updated_at", "2016-05-06 10:07:18.502030"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:18.504574"], ["updated_at", "2016-05-06 10:07:18.504574"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:18.506001"], ["updated_at", "2016-05-06 10:07:18.506001"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:18.507663"], ["updated_at", "2016-05-06 10:07:18.507663"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "webhooks" SET "topic" = ?, "updated_at" = ? WHERE "webhooks"."id" = ?[0m  [["topic", "create_product_event"], ["updated_at", "2016-05-06 10:07:18.508824"], ["id", 3]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 27' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 27"], ["description", "Example 27 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:18.511082"], ["updated_at", "2016-05-06 10:07:18.511082"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("message", "verb", "arguments", "shop_id", "subject_id", "subject_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["message", "User created a product: "], ["verb", "create"], ["arguments", "Product_Name"], ["shop_id", 1], ["subject_id", 1], ["subject_type", "MagazCore::Product"], ["created_at", "2016-05-06 10:07:18.515509"], ["updated_at", "2016-05-06 10:07:18.515509"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Webhook Load (0.2ms)[0m  SELECT "webhooks".* FROM "webhooks" WHERE "webhooks"."shop_id" = ? AND "webhooks"."topic" = ?  [["shop_id", 1], ["topic", "update_product_event"]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------
MagazCore::AdminServices::Webhook::EventWebhookRunnerTest: test_should_schedule_webhook
---------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example59' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example59"], ["subdomain", "example59"], ["created_at", "2016-05-06 10:07:18.525470"], ["updated_at", "2016-05-06 10:07:18.525470"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example34.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example34.com"], ["first_name", "First Name 34 "], ["last_name", "Last Name 34"], ["password_salt", "$2a$10$3RGm/D5oW97gu7pwHZUL8e"], ["password_digest", "$2a$10$3RGm/D5oW97gu7pwHZUL8eEm8hmagXYDrUyp.zQq9BESEpEMNjQmG"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:18.672078"], ["updated_at", "2016-05-06 10:07:18.672078"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:18.674134"], ["updated_at", "2016-05-06 10:07:18.674134"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:18.675632"], ["updated_at", "2016-05-06 10:07:18.675632"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "webhooks" ("address", "format", "topic", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "https://www.google.com.ua/"], ["format", "XML"], ["topic", "update_product_event"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:18.677009"], ["updated_at", "2016-05-06 10:07:18.677009"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "webhooks" SET "topic" = ?, "updated_at" = ? WHERE "webhooks"."id" = ?[0m  [["topic", "create_product_event"], ["updated_at", "2016-05-06 10:07:18.678365"], ["id", 3]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 28' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 28"], ["description", "Example 28 description"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:18.680614"], ["updated_at", "2016-05-06 10:07:18.680614"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "events" ("message", "verb", "arguments", "shop_id", "subject_id", "subject_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["message", "User created a product: "], ["verb", "create"], ["arguments", "Product_Name"], ["shop_id", 1], ["subject_id", 1], ["subject_type", "MagazCore::Product"], ["created_at", "2016-05-06 10:07:18.682629"], ["updated_at", "2016-05-06 10:07:18.682629"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ChangeLinkListTest: test_should_not_update_link_list_with_existing_handle
---------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:18.690551"], ["updated_at", "2016-05-06 10:07:18.690551"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 12"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LinkList Exists (0.0ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1  [["slug", "existing-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id", "handle", "slug") VALUES (?, ?, ?, ?)[0m  [["name", "List 13"], ["shop_id", 1], ["handle", "existing handle"], ["slug", "existing-handle"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "New name"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?  [["shop_id", 1], ["handle", "existing handle"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", "New name"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?[0m  [["shop_id", 1], ["handle", "existing handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------
MagazCore::AdminServices::ChangeLinkListTest: test_should_not_update_link_list_with_existing_name
-------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:18.714084"], ["updated_at", "2016-05-06 10:07:18.714084"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)  [["name", "List 14"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::LinkList Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1[0m  [["slug", "existing-handle"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "link_lists" ("name", "shop_id", "handle", "slug") VALUES (?, ?, ?, ?)  [["name", "List 15"], ["shop_id", 1], ["handle", "existing handle"], ["slug", "existing-handle"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.1ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", "List 15"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?[0m  [["shop_id", 1], ["handle", "Changed handle"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "List 15"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?  [["shop_id", 1], ["handle", "Changed handle"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------
MagazCore::AdminServices::ChangeLinkListTest: test_should_update_link_list_with_blank_handle
--------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:18.741352"], ["updated_at", "2016-05-06 10:07:18.741352"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)[0m  [["name", "List 16"], ["shop_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LinkList Exists (0.0ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1  [["slug", "existing-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "link_lists" ("name", "shop_id", "handle", "slug") VALUES (?, ?, ?, ?)[0m  [["name", "List 17"], ["shop_id", 1], ["handle", "existing handle"], ["slug", "existing-handle"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "Changed name"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["shop_id", 1], ["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1[0m  [["shop_id", 1], ["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LinkList Exists (0.1ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" != ?) AND "link_lists"."slug" = ? LIMIT 1  [["id", 1], ["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "link_lists" SET "name" = ?, "handle" = ?, "slug" = ? WHERE "link_lists"."id" = ?[0m  [["name", "Changed name"], ["handle", ""], ["slug", ""], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------
MagazCore::AdminServices::ChangeLinkListTest: test_should_update_link_list_with_valid_params
--------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:18.757514"], ["updated_at", "2016-05-06 10:07:18.757514"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "link_lists" ("name", "shop_id") VALUES (?, ?)  [["name", "List 18"], ["shop_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::LinkList Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1[0m  [["slug", "existing-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "link_lists" ("name", "shop_id", "handle", "slug") VALUES (?, ?, ?, ?)  [["name", "List 19"], ["shop_id", 1], ["handle", "existing handle"], ["slug", "existing-handle"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", "Test name"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."handle" = ?[0m  [["shop_id", 1], ["handle", "Test handle"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["shop_id", 1], ["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."id" = ? LIMIT 1  [["shop_id", 1], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::LinkList Exists (0.0ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" != ?) AND "link_lists"."slug" = ? LIMIT 1  [["id", 1], ["slug", "test-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "link_lists" SET "name" = ?, "handle" = ?, "slug" = ? WHERE "link_lists"."id" = ?[0m  [["name", "Test name"], ["handle", "Test handle"], ["slug", "test-handle"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::LinkList Load (0.1ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::AddArticleTest: test_should_create_article_with_valid_params
-----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:18.777158"], ["updated_at", "2016-05-06 10:07:18.777158"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 37"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:18.780225"], ["updated_at", "2016-05-06 10:07:18.780225"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "Test title"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "Test handle"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "test-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "page_title", "handle", "meta_description", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Test title"], ["content", "Test text"], ["page_title", "Test page_title"], ["handle", "Test handle"], ["meta_description", "Test meta_description"], ["blog_id", 1], ["slug", "test-handle"], ["created_at", "2016-05-06 10:07:18.786346"], ["updated_at", "2016-05-06 10:07:18.786346"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Article Load (0.0ms)[0m  [1mSELECT  "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?  [["blog_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::AddArticleTest: test_should_not_create_article_with_blank_params
---------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:18.791462"], ["updated_at", "2016-05-06 10:07:18.791462"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 38"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:18.793373"], ["updated_at", "2016-05-06 10:07:18.793373"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?  [["blog_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::AddArticleTest: test_should_not_create_article_with_existing_handle
------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:18.800523"], ["updated_at", "2016-05-06 10:07:18.800523"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Blog 39"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:18.802582"], ["updated_at", "2016-05-06 10:07:18.802582"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "Test title"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "Test handle"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", "test-handle"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "page_title", "handle", "meta_description", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Test title"], ["content", "Test text"], ["page_title", "Test page_title"], ["handle", "Test handle"], ["meta_description", "Test meta_description"], ["blog_id", 1], ["slug", "test-handle"], ["created_at", "2016-05-06 10:07:18.806542"], ["updated_at", "2016-05-06 10:07:18.806542"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 1], ["title", "Second title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 1], ["handle", "Test handle"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 1], ["title", "Second title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 1], ["handle", "Test handle"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?[0m  [["blog_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Article::AddArticleTest: test_should_not_create_article_with_same_params
--------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:18.814226"], ["updated_at", "2016-05-06 10:07:18.814226"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "blogs" ("title", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "Blog 40"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:18.816699"], ["updated_at", "2016-05-06 10:07:18.816699"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 1], ["title", "Test title"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?  [["blog_id", 1], ["handle", "Test handle"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", "test-handle"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "page_title", "handle", "meta_description", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["title", "Test title"], ["content", "Test text"], ["page_title", "Test page_title"], ["handle", "Test handle"], ["meta_description", "Test meta_description"], ["blog_id", 1], ["slug", "test-handle"], ["created_at", "2016-05-06 10:07:18.820845"], ["updated_at", "2016-05-06 10:07:18.820845"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "Test title"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "Test handle"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "Test title"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."handle" = ?[0m  [["blog_id", 1], ["handle", "Test handle"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ?  [["blog_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
MagazCore::ShippingCountryTest: test_should_return_country_info
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example60' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example60"], ["subdomain", "example60"], ["created_at", "2016-05-06 10:07:18.828751"], ["updated_at", "2016-05-06 10:07:18.828751"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shipping_countries" ("name", "tax", "shop_id") VALUES (?, ?, ?)  [["name", "UA"], ["tax", "39"], ["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------
MagazCore::StoreServices::CreateTest: test_create_shop_with_valid_params
------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme15"], ["created_at", "2016-05-06 10:07:18.884353"], ["updated_at", "2016-05-06 10:07:18.884353"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.885439"], ["updated_at", "2016-05-06 10:07:18.885439"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.886320"], ["updated_at", "2016-05-06 10:07:18.886320"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.887089"], ["updated_at", "2016-05-06 10:07:18.887089"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.887875"], ["updated_at", "2016-05-06 10:07:18.887875"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.888678"], ["updated_at", "2016-05-06 10:07:18.888678"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.889464"], ["updated_at", "2016-05-06 10:07:18.889464"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.890620"], ["updated_at", "2016-05-06 10:07:18.890620"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.891450"], ["updated_at", "2016-05-06 10:07:18.891450"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.892287"], ["updated_at", "2016-05-06 10:07:18.892287"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.893102"], ["updated_at", "2016-05-06 10:07:18.893102"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.893949"], ["updated_at", "2016-05-06 10:07:18.893949"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.894772"], ["updated_at", "2016-05-06 10:07:18.894772"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.895616"], ["updated_at", "2016-05-06 10:07:18.895616"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.896801"], ["updated_at", "2016-05-06 10:07:18.896801"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.898070"], ["updated_at", "2016-05-06 10:07:18.898070"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.899283"], ["updated_at", "2016-05-06 10:07:18.899283"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.900507"], ["updated_at", "2016-05-06 10:07:18.900507"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.901659"], ["updated_at", "2016-05-06 10:07:18.901659"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.902812"], ["updated_at", "2016-05-06 10:07:18.902812"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.903980"], ["updated_at", "2016-05-06 10:07:18.903980"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.905183"], ["updated_at", "2016-05-06 10:07:18.905183"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.906347"], ["updated_at", "2016-05-06 10:07:18.906347"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.907398"], ["updated_at", "2016-05-06 10:07:18.907398"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.908356"], ["updated_at", "2016-05-06 10:07:18.908356"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.909334"], ["updated_at", "2016-05-06 10:07:18.909334"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.910312"], ["updated_at", "2016-05-06 10:07:18.910312"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.911237"], ["updated_at", "2016-05-06 10:07:18.911237"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.912089"], ["updated_at", "2016-05-06 10:07:18.912089"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.912950"], ["updated_at", "2016-05-06 10:07:18.912950"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.913856"], ["updated_at", "2016-05-06 10:07:18.913856"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.914718"], ["updated_at", "2016-05-06 10:07:18.914718"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.915568"], ["updated_at", "2016-05-06 10:07:18.915568"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.916596"], ["updated_at", "2016-05-06 10:07:18.916596"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.917437"], ["updated_at", "2016-05-06 10:07:18.917437"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.918282"], ["updated_at", "2016-05-06 10:07:18.918282"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.919122"], ["updated_at", "2016-05-06 10:07:18.919122"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.919951"], ["updated_at", "2016-05-06 10:07:18.919951"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.920759"], ["updated_at", "2016-05-06 10:07:18.920759"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.921587"], ["updated_at", "2016-05-06 10:07:18.921587"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.922433"], ["updated_at", "2016-05-06 10:07:18.922433"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.923270"], ["updated_at", "2016-05-06 10:07:18.923270"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.924115"], ["updated_at", "2016-05-06 10:07:18.924115"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.924948"], ["updated_at", "2016-05-06 10:07:18.924948"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.925781"], ["updated_at", "2016-05-06 10:07:18.925781"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.926662"], ["updated_at", "2016-05-06 10:07:18.926662"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.927588"], ["updated_at", "2016-05-06 10:07:18.927588"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.928445"], ["updated_at", "2016-05-06 10:07:18.928445"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.929423"], ["updated_at", "2016-05-06 10:07:18.929423"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.930256"], ["updated_at", "2016-05-06 10:07:18.930256"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:18.931053"], ["updated_at", "2016-05-06 10:07:18.931053"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?[0m  [["name", "example42"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example42' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "example42"], ["subdomain", "example42"], ["created_at", "2016-05-06 10:07:18.943177"], ["updated_at", "2016-05-06 10:07:18.943177"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1  [["shop_id", 1], ["email", "email@mail.com"]]
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'email@mail.com' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("shop_id", "first_name", "last_name", "email", "permissions", "account_owner", "password_salt", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["first_name", "First"], ["last_name", "Last"], ["email", "email@mail.com"], ["permissions", nil], ["account_owner", "t"], ["password_salt", "$2a$10$2.qcPOme23aeSW4Nqhjbcu"], ["password_digest", "$2a$10$2.qcPOme23aeSW4NqhjbcuBZwyoLhwCyk5l6lJxBAocrfLwvlxdfK"], ["created_at", "2016-05-06 10:07:19.015101"], ["updated_at", "2016-05-06 10:07:19.015101"]]
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL  ORDER BY "themes"."id" ASC LIMIT 1[0m
  [1m[35mMagazCore::Theme Load (0.1ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL  ORDER BY "themes"."id" ASC LIMIT 1
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Theme Load (0.0ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Asset Load (0.2ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?  [["theme_id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme15"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.053096"], ["updated_at", "2016-05-06 10:07:19.053096"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-06 10:07:18.885439"], ["updated_at", "2016-05-06 10:07:18.885439"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-06 10:07:18.886320"], ["updated_at", "2016-05-06 10:07:18.886320"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-06 10:07:18.887089"], ["updated_at", "2016-05-06 10:07:18.887089"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-06 10:07:18.887875"], ["updated_at", "2016-05-06 10:07:18.887875"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-06 10:07:18.888678"], ["updated_at", "2016-05-06 10:07:18.888678"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-06 10:07:18.889464"], ["updated_at", "2016-05-06 10:07:18.889464"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-06 10:07:18.890620"], ["updated_at", "2016-05-06 10:07:18.890620"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-06 10:07:18.891450"], ["updated_at", "2016-05-06 10:07:18.891450"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-06 10:07:18.892287"], ["updated_at", "2016-05-06 10:07:18.892287"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-06 10:07:18.893102"], ["updated_at", "2016-05-06 10:07:18.893102"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-06 10:07:18.893949"], ["updated_at", "2016-05-06 10:07:18.893949"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-06 10:07:18.894772"], ["updated_at", "2016-05-06 10:07:18.894772"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-06 10:07:18.895616"], ["updated_at", "2016-05-06 10:07:18.895616"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-06 10:07:18.896801"], ["updated_at", "2016-05-06 10:07:18.896801"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-06 10:07:18.898070"], ["updated_at", "2016-05-06 10:07:18.898070"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-06 10:07:18.899283"], ["updated_at", "2016-05-06 10:07:18.899283"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-06 10:07:18.900507"], ["updated_at", "2016-05-06 10:07:18.900507"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-06 10:07:18.901659"], ["updated_at", "2016-05-06 10:07:18.901659"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-06 10:07:18.902812"], ["updated_at", "2016-05-06 10:07:18.902812"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-06 10:07:18.903980"], ["updated_at", "2016-05-06 10:07:18.903980"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-06 10:07:18.905183"], ["updated_at", "2016-05-06 10:07:18.905183"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-06 10:07:18.906347"], ["updated_at", "2016-05-06 10:07:18.906347"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-06 10:07:18.907398"], ["updated_at", "2016-05-06 10:07:18.907398"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-06 10:07:18.908356"], ["updated_at", "2016-05-06 10:07:18.908356"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-06 10:07:18.909334"], ["updated_at", "2016-05-06 10:07:18.909334"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-06 10:07:18.910312"], ["updated_at", "2016-05-06 10:07:18.910312"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-06 10:07:18.911237"], ["updated_at", "2016-05-06 10:07:18.911237"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-06 10:07:18.912089"], ["updated_at", "2016-05-06 10:07:18.912089"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-06 10:07:18.912950"], ["updated_at", "2016-05-06 10:07:18.912950"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-06 10:07:18.913856"], ["updated_at", "2016-05-06 10:07:18.913856"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-06 10:07:18.914718"], ["updated_at", "2016-05-06 10:07:18.914718"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-06 10:07:18.915568"], ["updated_at", "2016-05-06 10:07:18.915568"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-06 10:07:18.916596"], ["updated_at", "2016-05-06 10:07:18.916596"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-06 10:07:18.917437"], ["updated_at", "2016-05-06 10:07:18.917437"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-06 10:07:18.918282"], ["updated_at", "2016-05-06 10:07:18.918282"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-06 10:07:18.919122"], ["updated_at", "2016-05-06 10:07:18.919122"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-06 10:07:18.919951"], ["updated_at", "2016-05-06 10:07:18.919951"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-06 10:07:18.920759"], ["updated_at", "2016-05-06 10:07:18.920759"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-06 10:07:18.921587"], ["updated_at", "2016-05-06 10:07:18.921587"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-06 10:07:18.922433"], ["updated_at", "2016-05-06 10:07:18.922433"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-06 10:07:18.923270"], ["updated_at", "2016-05-06 10:07:18.923270"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-06 10:07:18.924115"], ["updated_at", "2016-05-06 10:07:18.924115"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-06 10:07:18.924948"], ["updated_at", "2016-05-06 10:07:18.924948"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-06 10:07:18.925781"], ["updated_at", "2016-05-06 10:07:18.925781"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-06 10:07:18.926662"], ["updated_at", "2016-05-06 10:07:18.926662"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-06 10:07:18.927588"], ["updated_at", "2016-05-06 10:07:18.927588"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-06 10:07:18.928445"], ["updated_at", "2016-05-06 10:07:18.928445"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-06 10:07:18.929423"], ["updated_at", "2016-05-06 10:07:18.929423"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-06 10:07:18.930256"], ["updated_at", "2016-05-06 10:07:18.930256"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-06 10:07:18.931053"], ["updated_at", "2016-05-06 10:07:18.931053"], ["theme_id", 2]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "News"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "blogs" ("shop_id", "title", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["title", "News"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-06 10:07:19.095145"], ["updated_at", "2016-05-06 10:07:19.095145"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "First Post"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "page_title", "handle", "meta_description", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "First Post"], ["content", "This is your store’s blog. You can use it to talk about new product launches, experiences, tips or other news you want your customers to read about."], ["page_title", ""], ["handle", ""], ["meta_description", ""], ["blog_id", 1], ["slug", ""], ["created_at", "2016-05-06 10:07:19.099221"], ["updated_at", "2016-05-06 10:07:19.099221"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?  [["shop_id", 1], ["name", "Frontpage"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("shop_id", "name", "description", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Frontpage"], ["description", "Frontpage content"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-06 10:07:19.103648"], ["updated_at", "2016-05-06 10:07:19.103648"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", "About us"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Exists (0.0ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["title", "About us"], ["content", "The About Us page of your shop is vital because it’s where users go when first trying to determine a level of trust."], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-06 10:07:19.107129"], ["updated_at", "2016-05-06 10:07:19.107129"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", "Welcome"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Exists (0.0ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["title", "Welcome"], ["content", "You made it! Congratulations on starting your own online store!"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", "-b11c0eb2-4bd3-4681-a50e-d74104395c41"], ["created_at", "2016-05-06 10:07:19.110231"], ["updated_at", "2016-05-06 10:07:19.110231"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "Main Menu"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Exists (0.0ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Main Menu"], ["handle", ""], ["slug", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Home"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 1], ["name", "Home"], ["link_type", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Blog"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 1], ["name", "Blog"], ["link_type", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "Footer"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Exists (0.0ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Footer"], ["handle", ""], ["slug", "-764443c3-6a88-4dae-8495-67dbb9218716"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 2], ["name", "Search"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 2], ["name", "Search"], ["link_type", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 2], ["name", "About"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 2], ["name", "About"], ["link_type", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "abandoned_checkout_notification"], ["name", "Abandoned Checkout Notification"], ["title", "Complete your Purchase"], ["body", "Your shopping cart has been reserved and is waiting for your return!"], ["description", "Sent to a potential customer who has abandoned their checkout"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.128312"], ["updated_at", "2016-05-06 10:07:19.128312"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "contact_buyer"], ["name", "Contact Buyer"], ["title", "Order with some stuff"], ["body", "Dear moran"], ["description", "Used as a default template for Email Buyer emails"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.129781"], ["updated_at", "2016-05-06 10:07:19.129781"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "fulfillment_request"], ["name", "Fulfillment Request"], ["title", "Order Fulfillment Request"], ["body", "Please fulfill order"], ["description", "Sent to custom fulfillment provider when storeowner fulfills order items"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.131096"], ["updated_at", "2016-05-06 10:07:19.131096"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "gift_card_notification"], ["name", "Your gift card is ready!"], ["title", "New order"], ["body", "Here is your gift card"], ["description", "Sent to the customer when a gift card is created"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.132550"], ["updated_at", "2016-05-06 10:07:19.132550"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "new_order_notification"], ["name", "New Order Notification"], ["title", "Order placed"], ["body", "You have a new order"], ["description", "Sent to all subscribers of Order Confirmation Notifications"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.133843"], ["updated_at", "2016-05-06 10:07:19.133843"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "new_order_notification_mobile"], ["name", "New Order Notification (mobile)"], ["title", "Order"], ["body", "You have a new order"], ["description", "Sent to all subscribers of Order Confirmation Notifications for mobile"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.135152"], ["updated_at", "2016-05-06 10:07:19.135152"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "order_cancelled"], ["name", "Order Cancelled"], ["title", "Order cancelled"], ["body", "Your order was cancelled at your request, because we did not have enough stock to fulfill your order."], ["description", "Sent to the customer when an order is cancelled"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.136459"], ["updated_at", "2016-05-06 10:07:19.136459"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "order_confirmation"], ["name", "Order Confirmation"], ["title", "Order confirmation"], ["body", "This email is to confirm your recent order."], ["description", "Sent to the customer when an order is created"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.137756"], ["updated_at", "2016-05-06 10:07:19.137756"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "refund_notification"], ["name", "Refund Notification"], ["title", "Refund Notification"], ["body", "You have a new order"], ["description", "Sent to the customer when their order is refunded"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.139420"], ["updated_at", "2016-05-06 10:07:19.139420"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "shipping_confirmation"], ["name", "Shipping confirmation"], ["title", "Shipping confirmation"], ["body", "Shop has refunded your order"], ["description", "Sent to the customer when an order is shipped"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.140844"], ["updated_at", "2016-05-06 10:07:19.140844"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "shipping_update"], ["name", "Shipping update"], ["title", "Shipping update"], ["body", "The following shipped items from order have been updated with new shipping information:"], ["description", "Sent to the customer when an order's shipping information is updated"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.142229"], ["updated_at", "2016-05-06 10:07:19.142229"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."shop_id" = ? AND "themes"."role" = ?  ORDER BY "themes"."id" ASC LIMIT 1  [["shop_id", 1], ["role", "main"]]
  [1m[36mMagazCore::Theme Load (0.0ms)[0m  [1mSELECT "themes".* FROM "themes" WHERE "themes"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."shop_id" = ? AND "themes"."role" = ?  ORDER BY "themes"."id" ASC LIMIT 1  [["shop_id", 1], ["role", "main"]]
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."shop_id" = ?  ORDER BY "themes"."id" ASC LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------
MagazCore::StoreServices::CreateTest: test_default_content_created
------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme16"], ["created_at", "2016-05-06 10:07:19.198386"], ["updated_at", "2016-05-06 10:07:19.198386"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.200062"], ["updated_at", "2016-05-06 10:07:19.200062"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.200877"], ["updated_at", "2016-05-06 10:07:19.200877"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.201760"], ["updated_at", "2016-05-06 10:07:19.201760"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.202429"], ["updated_at", "2016-05-06 10:07:19.202429"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.203267"], ["updated_at", "2016-05-06 10:07:19.203267"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.204024"], ["updated_at", "2016-05-06 10:07:19.204024"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.204687"], ["updated_at", "2016-05-06 10:07:19.204687"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.205445"], ["updated_at", "2016-05-06 10:07:19.205445"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.206108"], ["updated_at", "2016-05-06 10:07:19.206108"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.206880"], ["updated_at", "2016-05-06 10:07:19.206880"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.207662"], ["updated_at", "2016-05-06 10:07:19.207662"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.208321"], ["updated_at", "2016-05-06 10:07:19.208321"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.209146"], ["updated_at", "2016-05-06 10:07:19.209146"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.209805"], ["updated_at", "2016-05-06 10:07:19.209805"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.210838"], ["updated_at", "2016-05-06 10:07:19.210838"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.212149"], ["updated_at", "2016-05-06 10:07:19.212149"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.213163"], ["updated_at", "2016-05-06 10:07:19.213163"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.214390"], ["updated_at", "2016-05-06 10:07:19.214390"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.215385"], ["updated_at", "2016-05-06 10:07:19.215385"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.216505"], ["updated_at", "2016-05-06 10:07:19.216505"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.217627"], ["updated_at", "2016-05-06 10:07:19.217627"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.218582"], ["updated_at", "2016-05-06 10:07:19.218582"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.219731"], ["updated_at", "2016-05-06 10:07:19.219731"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.220690"], ["updated_at", "2016-05-06 10:07:19.220690"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.221714"], ["updated_at", "2016-05-06 10:07:19.221714"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.222635"], ["updated_at", "2016-05-06 10:07:19.222635"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.223420"], ["updated_at", "2016-05-06 10:07:19.223420"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.225573"], ["updated_at", "2016-05-06 10:07:19.225573"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.226381"], ["updated_at", "2016-05-06 10:07:19.226381"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.227148"], ["updated_at", "2016-05-06 10:07:19.227148"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.227870"], ["updated_at", "2016-05-06 10:07:19.227870"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.228541"], ["updated_at", "2016-05-06 10:07:19.228541"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.229271"], ["updated_at", "2016-05-06 10:07:19.229271"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.229940"], ["updated_at", "2016-05-06 10:07:19.229940"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.230682"], ["updated_at", "2016-05-06 10:07:19.230682"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.231456"], ["updated_at", "2016-05-06 10:07:19.231456"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.232212"], ["updated_at", "2016-05-06 10:07:19.232212"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.233025"], ["updated_at", "2016-05-06 10:07:19.233025"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.233849"], ["updated_at", "2016-05-06 10:07:19.233849"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.234662"], ["updated_at", "2016-05-06 10:07:19.234662"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.235374"], ["updated_at", "2016-05-06 10:07:19.235374"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.236155"], ["updated_at", "2016-05-06 10:07:19.236155"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.236864"], ["updated_at", "2016-05-06 10:07:19.236864"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.237638"], ["updated_at", "2016-05-06 10:07:19.237638"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.238429"], ["updated_at", "2016-05-06 10:07:19.238429"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.239157"], ["updated_at", "2016-05-06 10:07:19.239157"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.239902"], ["updated_at", "2016-05-06 10:07:19.239902"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.240644"], ["updated_at", "2016-05-06 10:07:19.240644"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.241310"], ["updated_at", "2016-05-06 10:07:19.241310"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.242037"], ["updated_at", "2016-05-06 10:07:19.242037"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?  [["name", "example42"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example42' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "example42"], ["subdomain", "example42"], ["created_at", "2016-05-06 10:07:19.250402"], ["updated_at", "2016-05-06 10:07:19.250402"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1[0m  [["shop_id", 1], ["email", "email@mail.com"]]
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'email@mail.com' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("shop_id", "first_name", "last_name", "email", "permissions", "account_owner", "password_salt", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["first_name", "First"], ["last_name", "Last"], ["email", "email@mail.com"], ["permissions", nil], ["account_owner", "t"], ["password_salt", "$2a$10$8sSLCM.DFS7lBgBrKDfE5O"], ["password_digest", "$2a$10$8sSLCM.DFS7lBgBrKDfE5O0uypgk9qctimmY90m.h6XQ8SlgjaVRS"], ["created_at", "2016-05-06 10:07:19.320756"], ["updated_at", "2016-05-06 10:07:19.320756"]]
  [1m[35mMagazCore::Theme Load (0.3ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL  ORDER BY "themes"."id" ASC LIMIT 1
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL  ORDER BY "themes"."id" ASC LIMIT 1[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Theme Load (0.0ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Asset Load (0.2ms)[0m  [1mSELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?[0m  [["theme_id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Theme16"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.360137"], ["updated_at", "2016-05-06 10:07:19.360137"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-06 10:07:19.200062"], ["updated_at", "2016-05-06 10:07:19.200062"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-06 10:07:19.200877"], ["updated_at", "2016-05-06 10:07:19.200877"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-06 10:07:19.201760"], ["updated_at", "2016-05-06 10:07:19.201760"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-06 10:07:19.202429"], ["updated_at", "2016-05-06 10:07:19.202429"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-06 10:07:19.203267"], ["updated_at", "2016-05-06 10:07:19.203267"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-06 10:07:19.204024"], ["updated_at", "2016-05-06 10:07:19.204024"], ["theme_id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["created_at", "2016-05-06 10:07:19.204687"], ["updated_at", "2016-05-06 10:07:19.204687"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["created_at", "2016-05-06 10:07:19.205445"], ["updated_at", "2016-05-06 10:07:19.205445"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["created_at", "2016-05-06 10:07:19.206108"], ["updated_at", "2016-05-06 10:07:19.206108"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["created_at", "2016-05-06 10:07:19.206880"], ["updated_at", "2016-05-06 10:07:19.206880"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["created_at", "2016-05-06 10:07:19.207662"], ["updated_at", "2016-05-06 10:07:19.207662"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["created_at", "2016-05-06 10:07:19.208321"], ["updated_at", "2016-05-06 10:07:19.208321"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["created_at", "2016-05-06 10:07:19.209146"], ["updated_at", "2016-05-06 10:07:19.209146"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-06 10:07:19.209805"], ["updated_at", "2016-05-06 10:07:19.209805"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-06 10:07:19.210838"], ["updated_at", "2016-05-06 10:07:19.210838"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-06 10:07:19.212149"], ["updated_at", "2016-05-06 10:07:19.212149"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-06 10:07:19.213163"], ["updated_at", "2016-05-06 10:07:19.213163"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-06 10:07:19.214390"], ["updated_at", "2016-05-06 10:07:19.214390"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-06 10:07:19.215385"], ["updated_at", "2016-05-06 10:07:19.215385"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-06 10:07:19.216505"], ["updated_at", "2016-05-06 10:07:19.216505"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-06 10:07:19.217627"], ["updated_at", "2016-05-06 10:07:19.217627"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-06 10:07:19.218582"], ["updated_at", "2016-05-06 10:07:19.218582"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-06 10:07:19.219731"], ["updated_at", "2016-05-06 10:07:19.219731"], ["theme_id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-06 10:07:19.220690"], ["updated_at", "2016-05-06 10:07:19.220690"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-06 10:07:19.221714"], ["updated_at", "2016-05-06 10:07:19.221714"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-06 10:07:19.222635"], ["updated_at", "2016-05-06 10:07:19.222635"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-06 10:07:19.223420"], ["updated_at", "2016-05-06 10:07:19.223420"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-06 10:07:19.225573"], ["updated_at", "2016-05-06 10:07:19.225573"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-06 10:07:19.226381"], ["updated_at", "2016-05-06 10:07:19.226381"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-06 10:07:19.227148"], ["updated_at", "2016-05-06 10:07:19.227148"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-06 10:07:19.227870"], ["updated_at", "2016-05-06 10:07:19.227870"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["created_at", "2016-05-06 10:07:19.228541"], ["updated_at", "2016-05-06 10:07:19.228541"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["created_at", "2016-05-06 10:07:19.229271"], ["updated_at", "2016-05-06 10:07:19.229271"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["created_at", "2016-05-06 10:07:19.229940"], ["updated_at", "2016-05-06 10:07:19.229940"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["created_at", "2016-05-06 10:07:19.230682"], ["updated_at", "2016-05-06 10:07:19.230682"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["created_at", "2016-05-06 10:07:19.231456"], ["updated_at", "2016-05-06 10:07:19.231456"], ["theme_id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-06 10:07:19.232212"], ["updated_at", "2016-05-06 10:07:19.232212"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-06 10:07:19.233025"], ["updated_at", "2016-05-06 10:07:19.233025"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-06 10:07:19.233849"], ["updated_at", "2016-05-06 10:07:19.233849"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-06 10:07:19.234662"], ["updated_at", "2016-05-06 10:07:19.234662"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-06 10:07:19.235374"], ["updated_at", "2016-05-06 10:07:19.235374"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-06 10:07:19.236155"], ["updated_at", "2016-05-06 10:07:19.236155"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-06 10:07:19.236864"], ["updated_at", "2016-05-06 10:07:19.236864"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-06 10:07:19.237638"], ["updated_at", "2016-05-06 10:07:19.237638"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["created_at", "2016-05-06 10:07:19.238429"], ["updated_at", "2016-05-06 10:07:19.238429"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-06 10:07:19.239157"], ["updated_at", "2016-05-06 10:07:19.239157"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-06 10:07:19.239902"], ["updated_at", "2016-05-06 10:07:19.239902"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["created_at", "2016-05-06 10:07:19.240644"], ["updated_at", "2016-05-06 10:07:19.240644"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["created_at", "2016-05-06 10:07:19.241310"], ["updated_at", "2016-05-06 10:07:19.241310"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["created_at", "2016-05-06 10:07:19.242037"], ["updated_at", "2016-05-06 10:07:19.242037"], ["theme_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?[0m  [["shop_id", 1], ["title", "News"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Blog Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "blogs" ("shop_id", "title", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["title", "News"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-06 10:07:19.402438"], ["updated_at", "2016-05-06 10:07:19.402438"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?[0m  [["blog_id", 1], ["title", "First Post"]]
  [1m[35mMagazCore::Blog Load (0.0ms)[0m  SELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Article Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "articles" ("title", "content", "page_title", "handle", "meta_description", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["title", "First Post"], ["content", "This is your store’s blog. You can use it to talk about new product launches, experiences, tips or other news you want your customers to read about."], ["page_title", ""], ["handle", ""], ["meta_description", ""], ["blog_id", 1], ["slug", ""], ["created_at", "2016-05-06 10:07:19.405529"], ["updated_at", "2016-05-06 10:07:19.405529"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?[0m  [["shop_id", 1], ["name", "Frontpage"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Collection Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "collections" ("shop_id", "name", "description", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["name", "Frontpage"], ["description", "Frontpage content"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-06 10:07:19.413928"], ["updated_at", "2016-05-06 10:07:19.413928"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "About us"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["title", "About us"], ["content", "The About Us page of your shop is vital because it’s where users go when first trying to determine a level of trust."], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-06 10:07:19.417102"], ["updated_at", "2016-05-06 10:07:19.417102"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?[0m  [["shop_id", 1], ["title", "Welcome"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Page Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["title", "Welcome"], ["content", "You made it! Congratulations on starting your own online store!"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", "-70d7950b-200f-4020-811d-a5b3d04cabd2"], ["created_at", "2016-05-06 10:07:19.419948"], ["updated_at", "2016-05-06 10:07:19.419948"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", "Main Menu"]]
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)  [["shop_id", 1], ["name", "Main Menu"], ["handle", ""], ["slug", ""]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 1], ["name", "Home"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)  [["link_list_id", 1], ["name", "Home"], ["link_type", ""]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 1], ["name", "Blog"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "1"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)  [["link_list_id", 1], ["name", "Blog"], ["link_type", ""]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?[0m  [["shop_id", 1], ["name", "Footer"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::LinkList Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1[0m  [["slug", ""]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)  [["shop_id", 1], ["name", "Footer"], ["handle", ""], ["slug", "-3b46326f-ab7e-4af4-a47a-22304c06bbb9"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 2], ["name", "Search"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)  [["link_list_id", 2], ["name", "Search"], ["link_type", ""]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?[0m  [["link_list_id", 2], ["name", "About"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1  [["slug", "2"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)  [["link_list_id", 2], ["name", "About"], ["link_type", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "abandoned_checkout_notification"], ["name", "Abandoned Checkout Notification"], ["title", "Complete your Purchase"], ["body", "Your shopping cart has been reserved and is waiting for your return!"], ["description", "Sent to a potential customer who has abandoned their checkout"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.435159"], ["updated_at", "2016-05-06 10:07:19.435159"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "contact_buyer"], ["name", "Contact Buyer"], ["title", "Order with some stuff"], ["body", "Dear moran"], ["description", "Used as a default template for Email Buyer emails"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.436384"], ["updated_at", "2016-05-06 10:07:19.436384"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "fulfillment_request"], ["name", "Fulfillment Request"], ["title", "Order Fulfillment Request"], ["body", "Please fulfill order"], ["description", "Sent to custom fulfillment provider when storeowner fulfills order items"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.437514"], ["updated_at", "2016-05-06 10:07:19.437514"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "gift_card_notification"], ["name", "Your gift card is ready!"], ["title", "New order"], ["body", "Here is your gift card"], ["description", "Sent to the customer when a gift card is created"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.438637"], ["updated_at", "2016-05-06 10:07:19.438637"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "new_order_notification"], ["name", "New Order Notification"], ["title", "Order placed"], ["body", "You have a new order"], ["description", "Sent to all subscribers of Order Confirmation Notifications"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.439763"], ["updated_at", "2016-05-06 10:07:19.439763"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "new_order_notification_mobile"], ["name", "New Order Notification (mobile)"], ["title", "Order"], ["body", "You have a new order"], ["description", "Sent to all subscribers of Order Confirmation Notifications for mobile"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.440923"], ["updated_at", "2016-05-06 10:07:19.440923"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "order_cancelled"], ["name", "Order Cancelled"], ["title", "Order cancelled"], ["body", "Your order was cancelled at your request, because we did not have enough stock to fulfill your order."], ["description", "Sent to the customer when an order is cancelled"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.442048"], ["updated_at", "2016-05-06 10:07:19.442048"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "order_confirmation"], ["name", "Order Confirmation"], ["title", "Order confirmation"], ["body", "This email is to confirm your recent order."], ["description", "Sent to the customer when an order is created"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.443172"], ["updated_at", "2016-05-06 10:07:19.443172"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "refund_notification"], ["name", "Refund Notification"], ["title", "Refund Notification"], ["body", "You have a new order"], ["description", "Sent to the customer when their order is refunded"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.444296"], ["updated_at", "2016-05-06 10:07:19.444296"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "shipping_confirmation"], ["name", "Shipping confirmation"], ["title", "Shipping confirmation"], ["body", "Shop has refunded your order"], ["description", "Sent to the customer when an order is shipped"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.445525"], ["updated_at", "2016-05-06 10:07:19.445525"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "shipping_update"], ["name", "Shipping update"], ["title", "Shipping update"], ["body", "The following shipped items from order have been updated with new shipping information:"], ["description", "Sent to the customer when an order's shipping information is updated"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:19.446907"], ["updated_at", "2016-05-06 10:07:19.446907"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::EmailTemplate Load (0.1ms)[0m  [1mSELECT "email_templates".* FROM "email_templates" WHERE "email_templates"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35mMagazCore::Collection Load (0.1ms)[0m  SELECT "collections".* FROM "collections" WHERE "collections"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Blog Load (0.1ms)[0m  [1mSELECT "blogs".* FROM "blogs" WHERE "blogs"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35mMagazCore::Article Load (0.1ms)[0m  SELECT "articles".* FROM "articles" INNER JOIN "blogs" ON "articles"."blog_id" = "blogs"."id" WHERE "blogs"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Page Load (0.1ms)[0m  [1mSELECT "pages".* FROM "pages" WHERE "pages"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35mMagazCore::LinkList Load (0.1ms)[0m  SELECT "link_lists".* FROM "link_lists" WHERE "link_lists"."shop_id" = ?  [["shop_id", 1]]
  [1m[36mMagazCore::Link Load (0.1ms)[0m  [1mSELECT "links".* FROM "links" INNER JOIN "link_lists" ON "links"."link_list_id" = "link_lists"."id" WHERE "link_lists"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------
MagazCore::StoreServices::CreateTest: test_fail_shop_creation_when_no_default_theme_in_system
---------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme17"], ["created_at", "2016-05-06 10:07:19.503638"], ["updated_at", "2016-05-06 10:07:19.503638"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.504702"], ["updated_at", "2016-05-06 10:07:19.504702"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.505452"], ["updated_at", "2016-05-06 10:07:19.505452"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.506149"], ["updated_at", "2016-05-06 10:07:19.506149"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.506807"], ["updated_at", "2016-05-06 10:07:19.506807"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.507489"], ["updated_at", "2016-05-06 10:07:19.507489"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.508179"], ["updated_at", "2016-05-06 10:07:19.508179"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.508826"], ["updated_at", "2016-05-06 10:07:19.508826"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.509508"], ["updated_at", "2016-05-06 10:07:19.509508"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.510160"], ["updated_at", "2016-05-06 10:07:19.510160"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.510856"], ["updated_at", "2016-05-06 10:07:19.510856"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.511542"], ["updated_at", "2016-05-06 10:07:19.511542"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.512187"], ["updated_at", "2016-05-06 10:07:19.512187"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.512862"], ["updated_at", "2016-05-06 10:07:19.512862"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.513509"], ["updated_at", "2016-05-06 10:07:19.513509"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.514182"], ["updated_at", "2016-05-06 10:07:19.514182"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.514912"], ["updated_at", "2016-05-06 10:07:19.514912"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.515969"], ["updated_at", "2016-05-06 10:07:19.515969"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.517143"], ["updated_at", "2016-05-06 10:07:19.517143"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.518186"], ["updated_at", "2016-05-06 10:07:19.518186"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.519173"], ["updated_at", "2016-05-06 10:07:19.519173"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.520181"], ["updated_at", "2016-05-06 10:07:19.520181"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.521114"], ["updated_at", "2016-05-06 10:07:19.521114"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.522093"], ["updated_at", "2016-05-06 10:07:19.522093"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.523065"], ["updated_at", "2016-05-06 10:07:19.523065"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.523997"], ["updated_at", "2016-05-06 10:07:19.523997"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.524987"], ["updated_at", "2016-05-06 10:07:19.524987"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.525912"], ["updated_at", "2016-05-06 10:07:19.525912"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.526713"], ["updated_at", "2016-05-06 10:07:19.526713"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.527518"], ["updated_at", "2016-05-06 10:07:19.527518"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.528280"], ["updated_at", "2016-05-06 10:07:19.528280"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.529103"], ["updated_at", "2016-05-06 10:07:19.529103"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.529883"], ["updated_at", "2016-05-06 10:07:19.529883"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.530567"], ["updated_at", "2016-05-06 10:07:19.530567"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.531301"], ["updated_at", "2016-05-06 10:07:19.531301"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.531956"], ["updated_at", "2016-05-06 10:07:19.531956"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.532641"], ["updated_at", "2016-05-06 10:07:19.532641"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.533340"], ["updated_at", "2016-05-06 10:07:19.533340"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.533987"], ["updated_at", "2016-05-06 10:07:19.533987"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.534674"], ["updated_at", "2016-05-06 10:07:19.534674"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.535332"], ["updated_at", "2016-05-06 10:07:19.535332"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.536040"], ["updated_at", "2016-05-06 10:07:19.536040"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.536781"], ["updated_at", "2016-05-06 10:07:19.536781"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.537434"], ["updated_at", "2016-05-06 10:07:19.537434"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.538167"], ["updated_at", "2016-05-06 10:07:19.538167"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.538862"], ["updated_at", "2016-05-06 10:07:19.538862"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.539624"], ["updated_at", "2016-05-06 10:07:19.539624"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.540353"], ["updated_at", "2016-05-06 10:07:19.540353"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.540992"], ["updated_at", "2016-05-06 10:07:19.540992"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.541717"], ["updated_at", "2016-05-06 10:07:19.541717"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.542352"], ["updated_at", "2016-05-06 10:07:19.542352"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "themes" WHERE "themes"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?  [["name", "example42"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example42' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "example42"], ["subdomain", "example42"], ["created_at", "2016-05-06 10:07:19.550834"], ["updated_at", "2016-05-06 10:07:19.550834"]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1[0m  [["shop_id", 1], ["email", "email@mail.com"]]
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'email@mail.com' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("shop_id", "first_name", "last_name", "email", "permissions", "account_owner", "password_salt", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["first_name", "First"], ["last_name", "Last"], ["email", "email@mail.com"], ["permissions", nil], ["account_owner", "t"], ["password_salt", "$2a$10$E7nOzD6u0x1fzMbv8z8MmO"], ["password_digest", "$2a$10$E7nOzD6u0x1fzMbv8z8MmOO8HHMjz8hV7hgMpeiecRbKgvh89k.a."], ["created_at", "2016-05-06 10:07:19.618787"], ["updated_at", "2016-05-06 10:07:19.618787"]]
  [1m[35mMagazCore::Theme Load (0.1ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL  ORDER BY "themes"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------
MagazCore::StoreServices::CreateTest: test_fail_shop_creation_when_no_shop_params
---------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme18"], ["created_at", "2016-05-06 10:07:19.667412"], ["updated_at", "2016-05-06 10:07:19.667412"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.668845"], ["updated_at", "2016-05-06 10:07:19.668845"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.669685"], ["updated_at", "2016-05-06 10:07:19.669685"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.670427"], ["updated_at", "2016-05-06 10:07:19.670427"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.671113"], ["updated_at", "2016-05-06 10:07:19.671113"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.671797"], ["updated_at", "2016-05-06 10:07:19.671797"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.672481"], ["updated_at", "2016-05-06 10:07:19.672481"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.673132"], ["updated_at", "2016-05-06 10:07:19.673132"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.673817"], ["updated_at", "2016-05-06 10:07:19.673817"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.674470"], ["updated_at", "2016-05-06 10:07:19.674470"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.675153"], ["updated_at", "2016-05-06 10:07:19.675153"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.675839"], ["updated_at", "2016-05-06 10:07:19.675839"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.676489"], ["updated_at", "2016-05-06 10:07:19.676489"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.677169"], ["updated_at", "2016-05-06 10:07:19.677169"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.677850"], ["updated_at", "2016-05-06 10:07:19.677850"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.678497"], ["updated_at", "2016-05-06 10:07:19.678497"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.679173"], ["updated_at", "2016-05-06 10:07:19.679173"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.680145"], ["updated_at", "2016-05-06 10:07:19.680145"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.681195"], ["updated_at", "2016-05-06 10:07:19.681195"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.682284"], ["updated_at", "2016-05-06 10:07:19.682284"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.683278"], ["updated_at", "2016-05-06 10:07:19.683278"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.684307"], ["updated_at", "2016-05-06 10:07:19.684307"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.685247"], ["updated_at", "2016-05-06 10:07:19.685247"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.686222"], ["updated_at", "2016-05-06 10:07:19.686222"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.687209"], ["updated_at", "2016-05-06 10:07:19.687209"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.688145"], ["updated_at", "2016-05-06 10:07:19.688145"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.689122"], ["updated_at", "2016-05-06 10:07:19.689122"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.690073"], ["updated_at", "2016-05-06 10:07:19.690073"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.690914"], ["updated_at", "2016-05-06 10:07:19.690914"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.691720"], ["updated_at", "2016-05-06 10:07:19.691720"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.692495"], ["updated_at", "2016-05-06 10:07:19.692495"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.693302"], ["updated_at", "2016-05-06 10:07:19.693302"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.694075"], ["updated_at", "2016-05-06 10:07:19.694075"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.694786"], ["updated_at", "2016-05-06 10:07:19.694786"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.695470"], ["updated_at", "2016-05-06 10:07:19.695470"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.696123"], ["updated_at", "2016-05-06 10:07:19.696123"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.696802"], ["updated_at", "2016-05-06 10:07:19.696802"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.697457"], ["updated_at", "2016-05-06 10:07:19.697457"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.698155"], ["updated_at", "2016-05-06 10:07:19.698155"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.698837"], ["updated_at", "2016-05-06 10:07:19.698837"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.699489"], ["updated_at", "2016-05-06 10:07:19.699489"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.700184"], ["updated_at", "2016-05-06 10:07:19.700184"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.700867"], ["updated_at", "2016-05-06 10:07:19.700867"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.701513"], ["updated_at", "2016-05-06 10:07:19.701513"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.702197"], ["updated_at", "2016-05-06 10:07:19.702197"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.702889"], ["updated_at", "2016-05-06 10:07:19.702889"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.703568"], ["updated_at", "2016-05-06 10:07:19.703568"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.704256"], ["updated_at", "2016-05-06 10:07:19.704256"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.704908"], ["updated_at", "2016-05-06 10:07:19.704908"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.705595"], ["updated_at", "2016-05-06 10:07:19.705595"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.706249"], ["updated_at", "2016-05-06 10:07:19.706249"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?[0m  [["name", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?  [["name", ""]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------
MagazCore::StoreServices::CreateTest: test_fail_shop_creation_when_no_user_params
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Theme19"], ["created_at", "2016-05-06 10:07:19.799690"], ["updated_at", "2016-05-06 10:07:19.799690"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.800987"], ["updated_at", "2016-05-06 10:07:19.800987"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.802046"], ["updated_at", "2016-05-06 10:07:19.802046"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.802842"], ["updated_at", "2016-05-06 10:07:19.802842"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.803632"], ["updated_at", "2016-05-06 10:07:19.803632"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.804422"], ["updated_at", "2016-05-06 10:07:19.804422"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.805207"], ["updated_at", "2016-05-06 10:07:19.805207"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.805977"], ["updated_at", "2016-05-06 10:07:19.805977"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.806648"], ["updated_at", "2016-05-06 10:07:19.806648"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.807311"], ["updated_at", "2016-05-06 10:07:19.807311"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.807983"], ["updated_at", "2016-05-06 10:07:19.807983"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.808649"], ["updated_at", "2016-05-06 10:07:19.808649"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.809310"], ["updated_at", "2016-05-06 10:07:19.809310"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.809980"], ["updated_at", "2016-05-06 10:07:19.809980"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.810650"], ["updated_at", "2016-05-06 10:07:19.810650"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.811431"], ["updated_at", "2016-05-06 10:07:19.811431"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.812127"], ["updated_at", "2016-05-06 10:07:19.812127"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.812816"], ["updated_at", "2016-05-06 10:07:19.812816"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.813498"], ["updated_at", "2016-05-06 10:07:19.813498"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.814177"], ["updated_at", "2016-05-06 10:07:19.814177"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.814859"], ["updated_at", "2016-05-06 10:07:19.814859"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.815530"], ["updated_at", "2016-05-06 10:07:19.815530"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.816193"], ["updated_at", "2016-05-06 10:07:19.816193"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.816853"], ["updated_at", "2016-05-06 10:07:19.816853"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.817515"], ["updated_at", "2016-05-06 10:07:19.817515"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.818169"], ["updated_at", "2016-05-06 10:07:19.818169"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.818826"], ["updated_at", "2016-05-06 10:07:19.818826"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.819486"], ["updated_at", "2016-05-06 10:07:19.819486"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.820144"], ["updated_at", "2016-05-06 10:07:19.820144"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.820804"], ["updated_at", "2016-05-06 10:07:19.820804"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.821467"], ["updated_at", "2016-05-06 10:07:19.821467"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.822128"], ["updated_at", "2016-05-06 10:07:19.822128"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.822794"], ["updated_at", "2016-05-06 10:07:19.822794"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.823461"], ["updated_at", "2016-05-06 10:07:19.823461"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.824121"], ["updated_at", "2016-05-06 10:07:19.824121"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.824782"], ["updated_at", "2016-05-06 10:07:19.824782"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.825444"], ["updated_at", "2016-05-06 10:07:19.825444"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.826103"], ["updated_at", "2016-05-06 10:07:19.826103"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.826767"], ["updated_at", "2016-05-06 10:07:19.826767"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.827429"], ["updated_at", "2016-05-06 10:07:19.827429"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.828088"], ["updated_at", "2016-05-06 10:07:19.828088"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.828748"], ["updated_at", "2016-05-06 10:07:19.828748"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.829410"], ["updated_at", "2016-05-06 10:07:19.829410"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.830073"], ["updated_at", "2016-05-06 10:07:19.830073"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.830732"], ["updated_at", "2016-05-06 10:07:19.830732"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.831437"], ["updated_at", "2016-05-06 10:07:19.831437"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.832117"], ["updated_at", "2016-05-06 10:07:19.832117"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.832787"], ["updated_at", "2016-05-06 10:07:19.832787"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.833450"], ["updated_at", "2016-05-06 10:07:19.833450"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.834111"], ["updated_at", "2016-05-06 10:07:19.834111"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.834779"], ["updated_at", "2016-05-06 10:07:19.834779"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?  [["name", "example42"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?[0m  [["name", "example42"]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------
MagazCore::StoreServices::CreateTest: test_shop_and_user_should_have_association
--------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "themes" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Theme20"], ["created_at", "2016-05-06 10:07:19.892170"], ["updated_at", "2016-05-06 10:07:19.892170"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.893179"], ["updated_at", "2016-05-06 10:07:19.893179"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.894015"], ["updated_at", "2016-05-06 10:07:19.894015"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.894776"], ["updated_at", "2016-05-06 10:07:19.894776"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.896063"], ["updated_at", "2016-05-06 10:07:19.896063"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.897099"], ["updated_at", "2016-05-06 10:07:19.897099"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.898108"], ["updated_at", "2016-05-06 10:07:19.898108"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.899121"], ["updated_at", "2016-05-06 10:07:19.899121"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.900111"], ["updated_at", "2016-05-06 10:07:19.900111"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.901097"], ["updated_at", "2016-05-06 10:07:19.901097"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.902058"], ["updated_at", "2016-05-06 10:07:19.902058"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.903004"], ["updated_at", "2016-05-06 10:07:19.903004"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.904094"], ["updated_at", "2016-05-06 10:07:19.904094"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.905155"], ["updated_at", "2016-05-06 10:07:19.905155"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.906163"], ["updated_at", "2016-05-06 10:07:19.906163"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.907154"], ["updated_at", "2016-05-06 10:07:19.907154"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.908122"], ["updated_at", "2016-05-06 10:07:19.908122"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.909062"], ["updated_at", "2016-05-06 10:07:19.909062"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.910001"], ["updated_at", "2016-05-06 10:07:19.910001"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.910939"], ["updated_at", "2016-05-06 10:07:19.910939"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.911873"], ["updated_at", "2016-05-06 10:07:19.911873"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.912813"], ["updated_at", "2016-05-06 10:07:19.912813"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.913761"], ["updated_at", "2016-05-06 10:07:19.913761"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.914556"], ["updated_at", "2016-05-06 10:07:19.914556"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.915329"], ["updated_at", "2016-05-06 10:07:19.915329"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.916100"], ["updated_at", "2016-05-06 10:07:19.916100"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.916869"], ["updated_at", "2016-05-06 10:07:19.916869"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.917640"], ["updated_at", "2016-05-06 10:07:19.917640"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.918329"], ["updated_at", "2016-05-06 10:07:19.918329"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.918986"], ["updated_at", "2016-05-06 10:07:19.918986"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.919639"], ["updated_at", "2016-05-06 10:07:19.919639"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.920292"], ["updated_at", "2016-05-06 10:07:19.920292"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.920947"], ["updated_at", "2016-05-06 10:07:19.920947"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.921605"], ["updated_at", "2016-05-06 10:07:19.921605"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.922255"], ["updated_at", "2016-05-06 10:07:19.922255"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.922906"], ["updated_at", "2016-05-06 10:07:19.922906"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.923555"], ["updated_at", "2016-05-06 10:07:19.923555"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.924214"], ["updated_at", "2016-05-06 10:07:19.924214"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.924868"], ["updated_at", "2016-05-06 10:07:19.924868"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.925528"], ["updated_at", "2016-05-06 10:07:19.925528"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.926178"], ["updated_at", "2016-05-06 10:07:19.926178"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.926828"], ["updated_at", "2016-05-06 10:07:19.926828"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.927481"], ["updated_at", "2016-05-06 10:07:19.927481"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.928134"], ["updated_at", "2016-05-06 10:07:19.928134"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.928787"], ["updated_at", "2016-05-06 10:07:19.928787"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.929483"], ["updated_at", "2016-05-06 10:07:19.929483"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.930135"], ["updated_at", "2016-05-06 10:07:19.930135"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.930789"], ["updated_at", "2016-05-06 10:07:19.930789"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.931441"], ["updated_at", "2016-05-06 10:07:19.931441"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.932113"], ["updated_at", "2016-05-06 10:07:19.932113"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "theme_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["theme_id", 1], ["created_at", "2016-05-06 10:07:19.932764"], ["updated_at", "2016-05-06 10:07:19.932764"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "shops" WHERE "shops"."name" = ?[0m  [["name", "example42"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'example42' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "example42"], ["subdomain", "example42"], ["created_at", "2016-05-06 10:07:19.940155"], ["updated_at", "2016-05-06 10:07:19.940155"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1  [["shop_id", 1], ["email", "email@mail.com"]]
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'email@mail.com' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("shop_id", "first_name", "last_name", "email", "permissions", "account_owner", "password_salt", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["shop_id", 1], ["first_name", "First"], ["last_name", "Last"], ["email", "email@mail.com"], ["permissions", nil], ["account_owner", "t"], ["password_salt", "$2a$10$bWrp7NKlQH.imqeTjgpXqu"], ["password_digest", "$2a$10$bWrp7NKlQH.imqeTjgpXquK5Sb.ckSxv47usg6KYp7GxWpaZtQGSi"], ["created_at", "2016-05-06 10:07:20.011311"], ["updated_at", "2016-05-06 10:07:20.011311"]]
  [1m[36mMagazCore::Theme Load (0.1ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL  ORDER BY "themes"."id" ASC LIMIT 1[0m
  [1m[35mMagazCore::Theme Load (0.1ms)[0m  SELECT  "themes".* FROM "themes" WHERE "themes"."source_theme_id" IS NULL  ORDER BY "themes"."id" ASC LIMIT 1
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::Theme Load (0.0ms)[0m  [1mSELECT  "themes".* FROM "themes" WHERE "themes"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Asset Load (0.2ms)[0m  SELECT "assets".* FROM "assets" WHERE "assets"."theme_id" = ?  [["theme_id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "themes" ("name", "source_theme_id", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Theme20"], ["source_theme_id", 1], ["shop_id", 1], ["created_at", "2016-05-06 10:07:20.041716"], ["updated_at", "2016-05-06 10:07:20.041716"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/ajaxify.js"], ["created_at", "2016-05-06 10:07:19.893179"], ["updated_at", "2016-05-06 10:07:19.893179"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/ajaxify.scss.liquid"], ["created_at", "2016-05-06 10:07:19.894015"], ["updated_at", "2016-05-06 10:07:19.894015"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/checkout.css.liquid"], ["created_at", "2016-05-06 10:07:19.894776"], ["updated_at", "2016-05-06 10:07:19.894776"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/handlebars.min.js"], ["created_at", "2016-05-06 10:07:19.896063"], ["updated_at", "2016-05-06 10:07:19.896063"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "assets/shop.js.liquid"], ["created_at", "2016-05-06 10:07:19.897099"], ["updated_at", "2016-05-06 10:07:19.897099"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "assets/timber.scss.liquid"], ["created_at", "2016-05-06 10:07:19.898108"], ["updated_at", "2016-05-06 10:07:19.898108"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "bower.json"], ["created_at", "2016-05-06 10:07:19.899121"], ["updated_at", "2016-05-06 10:07:19.899121"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config/settings.html"], ["created_at", "2016-05-06 10:07:19.900111"], ["updated_at", "2016-05-06 10:07:19.900111"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "config/settings_data.json"], ["created_at", "2016-05-06 10:07:19.901097"], ["updated_at", "2016-05-06 10:07:19.901097"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "config-sample.yml"], ["created_at", "2016-05-06 10:07:19.902058"], ["updated_at", "2016-05-06 10:07:19.902058"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "layout/theme.liquid"], ["created_at", "2016-05-06 10:07:19.903004"], ["updated_at", "2016-05-06 10:07:19.903004"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "LICENSE"], ["created_at", "2016-05-06 10:07:19.904094"], ["updated_at", "2016-05-06 10:07:19.904094"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "README.md"], ["created_at", "2016-05-06 10:07:19.905155"], ["updated_at", "2016-05-06 10:07:19.905155"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/ajax-cart-template.liquid"], ["created_at", "2016-05-06 10:07:19.906163"], ["updated_at", "2016-05-06 10:07:19.906163"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/breadcrumb.liquid"], ["created_at", "2016-05-06 10:07:19.907154"], ["updated_at", "2016-05-06 10:07:19.907154"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/collection-grid-item.liquid"], ["created_at", "2016-05-06 10:07:19.908122"], ["updated_at", "2016-05-06 10:07:19.908122"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/collection-tags.liquid"], ["created_at", "2016-05-06 10:07:19.909062"], ["updated_at", "2016-05-06 10:07:19.909062"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/comment.liquid"], ["created_at", "2016-05-06 10:07:19.910001"], ["updated_at", "2016-05-06 10:07:19.910001"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/fb-open-graph-tags.liquid"], ["created_at", "2016-05-06 10:07:19.910939"], ["updated_at", "2016-05-06 10:07:19.910939"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/footer.liquid"], ["created_at", "2016-05-06 10:07:19.911873"], ["updated_at", "2016-05-06 10:07:19.911873"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/form-errors-custom.liquid"], ["created_at", "2016-05-06 10:07:19.912813"], ["updated_at", "2016-05-06 10:07:19.912813"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/newsletter-form.liquid"], ["created_at", "2016-05-06 10:07:19.913761"], ["updated_at", "2016-05-06 10:07:19.913761"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/pagination-custom.liquid"], ["created_at", "2016-05-06 10:07:19.914556"], ["updated_at", "2016-05-06 10:07:19.914556"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/product-grid-item.liquid"], ["created_at", "2016-05-06 10:07:19.915329"], ["updated_at", "2016-05-06 10:07:19.915329"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/product-list-item.liquid"], ["created_at", "2016-05-06 10:07:19.916100"], ["updated_at", "2016-05-06 10:07:19.916100"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-bar.liquid"], ["created_at", "2016-05-06 10:07:19.916869"], ["updated_at", "2016-05-06 10:07:19.916869"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/search-result-grid.liquid"], ["created_at", "2016-05-06 10:07:19.917640"], ["updated_at", "2016-05-06 10:07:19.917640"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/search-result.liquid"], ["created_at", "2016-05-06 10:07:19.918329"], ["updated_at", "2016-05-06 10:07:19.918329"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/site-nav.liquid"], ["created_at", "2016-05-06 10:07:19.918986"], ["updated_at", "2016-05-06 10:07:19.918986"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "snippets/tags-article.liquid"], ["created_at", "2016-05-06 10:07:19.919639"], ["updated_at", "2016-05-06 10:07:19.919639"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "snippets/twitter-card.liquid"], ["created_at", "2016-05-06 10:07:19.920292"], ["updated_at", "2016-05-06 10:07:19.920292"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/404.liquid"], ["created_at", "2016-05-06 10:07:19.920947"], ["updated_at", "2016-05-06 10:07:19.920947"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/article.liquid"], ["created_at", "2016-05-06 10:07:19.921605"], ["updated_at", "2016-05-06 10:07:19.921605"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/blog.liquid"], ["created_at", "2016-05-06 10:07:19.922255"], ["updated_at", "2016-05-06 10:07:19.922255"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/cart.liquid"], ["created_at", "2016-05-06 10:07:19.922906"], ["updated_at", "2016-05-06 10:07:19.922906"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/collection.liquid"], ["created_at", "2016-05-06 10:07:19.923555"], ["updated_at", "2016-05-06 10:07:19.923555"], ["theme_id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/collection.list.liquid"], ["created_at", "2016-05-06 10:07:19.924214"], ["updated_at", "2016-05-06 10:07:19.924214"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/account.liquid"], ["created_at", "2016-05-06 10:07:19.924868"], ["updated_at", "2016-05-06 10:07:19.924868"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/activate_account.liquid"], ["created_at", "2016-05-06 10:07:19.925528"], ["updated_at", "2016-05-06 10:07:19.925528"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/addresses.liquid"], ["created_at", "2016-05-06 10:07:19.926178"], ["updated_at", "2016-05-06 10:07:19.926178"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/login.liquid"], ["created_at", "2016-05-06 10:07:19.926828"], ["updated_at", "2016-05-06 10:07:19.926828"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/order.liquid"], ["created_at", "2016-05-06 10:07:19.927481"], ["updated_at", "2016-05-06 10:07:19.927481"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/customers/register.liquid"], ["created_at", "2016-05-06 10:07:19.928134"], ["updated_at", "2016-05-06 10:07:19.928134"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/customers/reset_password.liquid"], ["created_at", "2016-05-06 10:07:19.928787"], ["updated_at", "2016-05-06 10:07:19.928787"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/index.liquid"], ["created_at", "2016-05-06 10:07:19.929483"], ["updated_at", "2016-05-06 10:07:19.929483"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/list-collections.liquid"], ["created_at", "2016-05-06 10:07:19.930135"], ["updated_at", "2016-05-06 10:07:19.930135"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/page.contact.liquid"], ["created_at", "2016-05-06 10:07:19.930789"], ["updated_at", "2016-05-06 10:07:19.930789"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/page.liquid"], ["created_at", "2016-05-06 10:07:19.931441"], ["updated_at", "2016-05-06 10:07:19.931441"], ["theme_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)  [["key", "templates/product.liquid"], ["created_at", "2016-05-06 10:07:19.932113"], ["updated_at", "2016-05-06 10:07:19.932113"], ["theme_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "assets" ("key", "created_at", "updated_at", "theme_id") VALUES (?, ?, ?, ?)[0m  [["key", "templates/search.liquid"], ["created_at", "2016-05-06 10:07:19.932764"], ["updated_at", "2016-05-06 10:07:19.932764"], ["theme_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "blogs" WHERE "blogs"."shop_id" = ? AND "blogs"."title" = ?  [["shop_id", 1], ["title", "News"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Blog Exists (0.0ms)[0m  SELECT  1 AS one FROM "blogs" WHERE "blogs"."shop_id" = 1 AND ("blogs"."id" IS NOT NULL) AND "blogs"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "blogs" ("shop_id", "title", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["title", "News"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-06 10:07:20.075072"], ["updated_at", "2016-05-06 10:07:20.075072"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "articles" WHERE "articles"."blog_id" = ? AND "articles"."title" = ?  [["blog_id", 1], ["title", "First Post"]]
  [1m[36mMagazCore::Blog Load (0.0ms)[0m  [1mSELECT  "blogs".* FROM "blogs" WHERE "blogs"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Article Exists (0.0ms)[0m  SELECT  1 AS one FROM "articles" WHERE "articles"."blog_id" = 1 AND ("articles"."id" IS NOT NULL) AND "articles"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "articles" ("title", "content", "page_title", "handle", "meta_description", "blog_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "First Post"], ["content", "This is your store’s blog. You can use it to talk about new product launches, experiences, tips or other news you want your customers to read about."], ["page_title", ""], ["handle", ""], ["meta_description", ""], ["blog_id", 1], ["slug", ""], ["created_at", "2016-05-06 10:07:20.077830"], ["updated_at", "2016-05-06 10:07:20.077830"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "collections" WHERE "collections"."shop_id" = ? AND "collections"."name" = ?  [["shop_id", 1], ["name", "Frontpage"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Collection Exists (0.0ms)[0m  SELECT  1 AS one FROM "collections" WHERE "collections"."shop_id" = 1 AND ("collections"."id" IS NOT NULL) AND "collections"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "collections" ("shop_id", "name", "description", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Frontpage"], ["description", "Frontpage content"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-06 10:07:20.080857"], ["updated_at", "2016-05-06 10:07:20.080857"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", "About us"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Exists (0.0ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["title", "About us"], ["content", "The About Us page of your shop is vital because it’s where users go when first trying to determine a level of trust."], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", ""], ["created_at", "2016-05-06 10:07:20.083839"], ["updated_at", "2016-05-06 10:07:20.083839"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "pages" WHERE "pages"."shop_id" = ? AND "pages"."title" = ?  [["shop_id", 1], ["title", "Welcome"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::Page Exists (0.0ms)[0m  SELECT  1 AS one FROM "pages" WHERE "pages"."shop_id" = 1 AND ("pages"."id" IS NOT NULL) AND "pages"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "pages" ("shop_id", "title", "content", "page_title", "meta_description", "handle", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["shop_id", 1], ["title", "Welcome"], ["content", "You made it! Congratulations on starting your own online store!"], ["page_title", ""], ["meta_description", ""], ["handle", ""], ["slug", "-c319677e-b195-411d-af17-c244cd93e3b8"], ["created_at", "2016-05-06 10:07:20.086657"], ["updated_at", "2016-05-06 10:07:20.086657"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "Main Menu"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Exists (0.0ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Main Menu"], ["handle", ""], ["slug", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Home"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 1], ["name", "Home"], ["link_type", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 1], ["name", "Blog"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "1"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 1], ["name", "Blog"], ["link_type", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "link_lists" WHERE "link_lists"."shop_id" = ? AND "link_lists"."name" = ?  [["shop_id", 1], ["name", "Footer"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::LinkList Exists (0.0ms)[0m  SELECT  1 AS one FROM "link_lists" WHERE "link_lists"."shop_id" = 1 AND ("link_lists"."id" IS NOT NULL) AND "link_lists"."slug" = ? LIMIT 1  [["slug", ""]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "link_lists" ("shop_id", "name", "handle", "slug") VALUES (?, ?, ?, ?)[0m  [["shop_id", 1], ["name", "Footer"], ["handle", ""], ["slug", "-7b669d7c-4dc3-4409-ae0b-14737ebf3b77"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 2], ["name", "Search"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 2], ["name", "Search"], ["link_type", ""]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "links" WHERE "links"."link_list_id" = ? AND "links"."name" = ?  [["link_list_id", 2], ["name", "About"]]
  [1m[36mMagazCore::LinkList Load (0.0ms)[0m  [1mSELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."slug" = ?  ORDER BY "link_lists"."id" ASC LIMIT 1[0m  [["slug", "2"]]
  [1m[35mMagazCore::LinkList Load (0.0ms)[0m  SELECT  "link_lists".* FROM "link_lists" WHERE "link_lists"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "links" ("link_list_id", "name", "link_type") VALUES (?, ?, ?)[0m  [["link_list_id", 2], ["name", "About"], ["link_type", ""]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "abandoned_checkout_notification"], ["name", "Abandoned Checkout Notification"], ["title", "Complete your Purchase"], ["body", "Your shopping cart has been reserved and is waiting for your return!"], ["description", "Sent to a potential customer who has abandoned their checkout"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:20.101693"], ["updated_at", "2016-05-06 10:07:20.101693"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "contact_buyer"], ["name", "Contact Buyer"], ["title", "Order with some stuff"], ["body", "Dear moran"], ["description", "Used as a default template for Email Buyer emails"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:20.103072"], ["updated_at", "2016-05-06 10:07:20.103072"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "fulfillment_request"], ["name", "Fulfillment Request"], ["title", "Order Fulfillment Request"], ["body", "Please fulfill order"], ["description", "Sent to custom fulfillment provider when storeowner fulfills order items"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:20.104377"], ["updated_at", "2016-05-06 10:07:20.104377"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "gift_card_notification"], ["name", "Your gift card is ready!"], ["title", "New order"], ["body", "Here is your gift card"], ["description", "Sent to the customer when a gift card is created"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:20.105622"], ["updated_at", "2016-05-06 10:07:20.105622"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "new_order_notification"], ["name", "New Order Notification"], ["title", "Order placed"], ["body", "You have a new order"], ["description", "Sent to all subscribers of Order Confirmation Notifications"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:20.106843"], ["updated_at", "2016-05-06 10:07:20.106843"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "new_order_notification_mobile"], ["name", "New Order Notification (mobile)"], ["title", "Order"], ["body", "You have a new order"], ["description", "Sent to all subscribers of Order Confirmation Notifications for mobile"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:20.108056"], ["updated_at", "2016-05-06 10:07:20.108056"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "order_cancelled"], ["name", "Order Cancelled"], ["title", "Order cancelled"], ["body", "Your order was cancelled at your request, because we did not have enough stock to fulfill your order."], ["description", "Sent to the customer when an order is cancelled"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:20.109237"], ["updated_at", "2016-05-06 10:07:20.109237"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "order_confirmation"], ["name", "Order Confirmation"], ["title", "Order confirmation"], ["body", "This email is to confirm your recent order."], ["description", "Sent to the customer when an order is created"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:20.110415"], ["updated_at", "2016-05-06 10:07:20.110415"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "refund_notification"], ["name", "Refund Notification"], ["title", "Refund Notification"], ["body", "You have a new order"], ["description", "Sent to the customer when their order is refunded"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:20.111600"], ["updated_at", "2016-05-06 10:07:20.111600"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["template_type", "shipping_confirmation"], ["name", "Shipping confirmation"], ["title", "Shipping confirmation"], ["body", "Shop has refunded your order"], ["description", "Sent to the customer when an order is shipped"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:20.112768"], ["updated_at", "2016-05-06 10:07:20.112768"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "email_templates" ("template_type", "name", "title", "body", "description", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["template_type", "shipping_update"], ["name", "Shipping update"], ["title", "Shipping update"], ["body", "The following shipped items from order have been updated with new shipping information:"], ["description", "Sent to the customer when an order's shipping information is updated"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:20.113953"], ["updated_at", "2016-05-06 10:07:20.113953"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Load (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."shop_id" = ?[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
MagazCore::ProductTest: test_associations
-----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 29' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example 29"], ["description", "Example 29 description"], ["created_at", "2016-05-06 10:07:20.121472"], ["updated_at", "2016-05-06 10:07:20.121472"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 30' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 30"], ["description", "Example 30 description"], ["published_at", "2016-05-06 10:06:20.122624"], ["created_at", "2016-05-06 10:07:20.123760"], ["updated_at", "2016-05-06 10:07:20.123760"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 31' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 31"], ["description", "Example 31 description"], ["published_at", "2016-05-06 10:06:20.122624"], ["created_at", "2016-05-06 10:07:20.126096"], ["updated_at", "2016-05-06 10:07:20.126096"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 32' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 32"], ["description", "Example 32 description"], ["published_at", "2016-05-06 10:06:20.122624"], ["created_at", "2016-05-06 10:07:20.128515"], ["updated_at", "2016-05-06 10:07:20.128515"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 33' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 33"], ["description", "Example 33 description"], ["published_at", "2016-05-06 10:06:20.122624"], ["created_at", "2016-05-06 10:07:20.130726"], ["updated_at", "2016-05-06 10:07:20.130726"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 34' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 34"], ["description", "Example 34 description"], ["published_at", "2016-05-06 10:06:20.122624"], ["created_at", "2016-05-06 10:07:20.132824"], ["updated_at", "2016-05-06 10:07:20.132824"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 35' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 35"], ["description", "Example 35 description"], ["published_at", "2016-05-06 10:06:20.122624"], ["created_at", "2016-05-06 10:07:20.134657"], ["updated_at", "2016-05-06 10:07:20.134657"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 36' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 36"], ["description", "Example 36 description"], ["published_at", "2016-05-06 10:06:20.122624"], ["created_at", "2016-05-06 10:07:20.136558"], ["updated_at", "2016-05-06 10:07:20.136558"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 37' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 37"], ["description", "Example 37 description"], ["published_at", "2016-05-06 10:06:20.122624"], ["created_at", "2016-05-06 10:07:20.138569"], ["updated_at", "2016-05-06 10:07:20.138569"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 38' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 38"], ["description", "Example 38 description"], ["published_at", "2016-05-06 10:06:20.122624"], ["created_at", "2016-05-06 10:07:20.140412"], ["updated_at", "2016-05-06 10:07:20.140412"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 39' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 39"], ["description", "Example 39 description"], ["published_at", "2016-05-06 10:06:20.122624"], ["created_at", "2016-05-06 10:07:20.142161"], ["updated_at", "2016-05-06 10:07:20.142161"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 40' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 40"], ["description", "Example 40 description"], ["publish_on", "2016-05-07 10:07:20.143018"], ["created_at", "2016-05-06 10:07:20.143992"], ["updated_at", "2016-05-06 10:07:20.143992"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 41' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 41"], ["description", "Example 41 description"], ["publish_on", "2016-05-07 10:07:20.143018"], ["created_at", "2016-05-06 10:07:20.145825"], ["updated_at", "2016-05-06 10:07:20.145825"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 42' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 42"], ["description", "Example 42 description"], ["publish_on", "2016-05-07 10:07:20.143018"], ["created_at", "2016-05-06 10:07:20.147547"], ["updated_at", "2016-05-06 10:07:20.147547"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 43' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 43"], ["description", "Example 43 description"], ["publish_on", "2016-05-07 10:07:20.143018"], ["created_at", "2016-05-06 10:07:20.149273"], ["updated_at", "2016-05-06 10:07:20.149273"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 44' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 44"], ["description", "Example 44 description"], ["publish_on", "2016-05-07 10:07:20.143018"], ["created_at", "2016-05-06 10:07:20.150981"], ["updated_at", "2016-05-06 10:07:20.150981"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 45' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 45"], ["description", "Example 45 description"], ["publish_on", "2016-05-07 10:07:20.143018"], ["created_at", "2016-05-06 10:07:20.152676"], ["updated_at", "2016-05-06 10:07:20.152676"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 46' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 46"], ["description", "Example 46 description"], ["publish_on", "2016-05-07 10:07:20.143018"], ["created_at", "2016-05-06 10:07:20.154476"], ["updated_at", "2016-05-06 10:07:20.154476"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 47' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 47"], ["description", "Example 47 description"], ["publish_on", "2016-05-07 10:07:20.143018"], ["created_at", "2016-05-06 10:07:20.157077"], ["updated_at", "2016-05-06 10:07:20.157077"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 48' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 48"], ["description", "Example 48 description"], ["publish_on", "2016-05-07 10:07:20.143018"], ["created_at", "2016-05-06 10:07:20.159672"], ["updated_at", "2016-05-06 10:07:20.159672"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 49' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 49"], ["description", "Example 49 description"], ["publish_on", "2016-05-07 10:07:20.143018"], ["created_at", "2016-05-06 10:07:20.162119"], ["updated_at", "2016-05-06 10:07:20.162119"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 50' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 50"], ["description", "Example 50 description"], ["publish_on", "2016-05-06 10:06:20.163376"], ["created_at", "2016-05-06 10:07:20.164617"], ["updated_at", "2016-05-06 10:07:20.164617"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 51' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 51"], ["description", "Example 51 description"], ["publish_on", "2016-05-06 10:06:20.163376"], ["created_at", "2016-05-06 10:07:20.167425"], ["updated_at", "2016-05-06 10:07:20.167425"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 52' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 52"], ["description", "Example 52 description"], ["publish_on", "2016-05-06 10:06:20.163376"], ["created_at", "2016-05-06 10:07:20.170170"], ["updated_at", "2016-05-06 10:07:20.170170"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 53' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 53"], ["description", "Example 53 description"], ["publish_on", "2016-05-06 10:06:20.163376"], ["created_at", "2016-05-06 10:07:20.172639"], ["updated_at", "2016-05-06 10:07:20.172639"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 54' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 54"], ["description", "Example 54 description"], ["publish_on", "2016-05-06 10:06:20.163376"], ["created_at", "2016-05-06 10:07:20.175079"], ["updated_at", "2016-05-06 10:07:20.175079"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 55' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 55"], ["description", "Example 55 description"], ["publish_on", "2016-05-06 10:06:20.163376"], ["created_at", "2016-05-06 10:07:20.177259"], ["updated_at", "2016-05-06 10:07:20.177259"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 56' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 56"], ["description", "Example 56 description"], ["publish_on", "2016-05-06 10:06:20.163376"], ["created_at", "2016-05-06 10:07:20.179279"], ["updated_at", "2016-05-06 10:07:20.179279"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 57' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 57"], ["description", "Example 57 description"], ["publish_on", "2016-05-06 10:06:20.163376"], ["created_at", "2016-05-06 10:07:20.181103"], ["updated_at", "2016-05-06 10:07:20.181103"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 58' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 58"], ["description", "Example 58 description"], ["publish_on", "2016-05-06 10:06:20.163376"], ["created_at", "2016-05-06 10:07:20.182905"], ["updated_at", "2016-05-06 10:07:20.182905"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 59' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 59"], ["description", "Example 59 description"], ["publish_on", "2016-05-06 10:06:20.163376"], ["created_at", "2016-05-06 10:07:20.184828"], ["updated_at", "2016-05-06 10:07:20.184828"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------
MagazCore::ProductTest: test_basic_visibility_functionality
-----------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 60' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example 60"], ["description", "Example 60 description"], ["created_at", "2016-05-06 10:07:20.189699"], ["updated_at", "2016-05-06 10:07:20.189699"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 61' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 61"], ["description", "Example 61 description"], ["published_at", "2016-05-06 10:06:20.190763"], ["created_at", "2016-05-06 10:07:20.191686"], ["updated_at", "2016-05-06 10:07:20.191686"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 62' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 62"], ["description", "Example 62 description"], ["published_at", "2016-05-06 10:06:20.190763"], ["created_at", "2016-05-06 10:07:20.193507"], ["updated_at", "2016-05-06 10:07:20.193507"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 63' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 63"], ["description", "Example 63 description"], ["published_at", "2016-05-06 10:06:20.190763"], ["created_at", "2016-05-06 10:07:20.195149"], ["updated_at", "2016-05-06 10:07:20.195149"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 64' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 64"], ["description", "Example 64 description"], ["published_at", "2016-05-06 10:06:20.190763"], ["created_at", "2016-05-06 10:07:20.196783"], ["updated_at", "2016-05-06 10:07:20.196783"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 65' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 65"], ["description", "Example 65 description"], ["published_at", "2016-05-06 10:06:20.190763"], ["created_at", "2016-05-06 10:07:20.199084"], ["updated_at", "2016-05-06 10:07:20.199084"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 66' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 66"], ["description", "Example 66 description"], ["published_at", "2016-05-06 10:06:20.190763"], ["created_at", "2016-05-06 10:07:20.201577"], ["updated_at", "2016-05-06 10:07:20.201577"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 67' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 67"], ["description", "Example 67 description"], ["published_at", "2016-05-06 10:06:20.190763"], ["created_at", "2016-05-06 10:07:20.203897"], ["updated_at", "2016-05-06 10:07:20.203897"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 68' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 68"], ["description", "Example 68 description"], ["published_at", "2016-05-06 10:06:20.190763"], ["created_at", "2016-05-06 10:07:20.206212"], ["updated_at", "2016-05-06 10:07:20.206212"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 69' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 69"], ["description", "Example 69 description"], ["published_at", "2016-05-06 10:06:20.190763"], ["created_at", "2016-05-06 10:07:20.208456"], ["updated_at", "2016-05-06 10:07:20.208456"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 70' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 70"], ["description", "Example 70 description"], ["published_at", "2016-05-06 10:06:20.190763"], ["created_at", "2016-05-06 10:07:20.210358"], ["updated_at", "2016-05-06 10:07:20.210358"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 71' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 71"], ["description", "Example 71 description"], ["publish_on", "2016-05-07 10:07:20.211298"], ["created_at", "2016-05-06 10:07:20.212310"], ["updated_at", "2016-05-06 10:07:20.212310"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 72' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 72"], ["description", "Example 72 description"], ["publish_on", "2016-05-07 10:07:20.211298"], ["created_at", "2016-05-06 10:07:20.214073"], ["updated_at", "2016-05-06 10:07:20.214073"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 73' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 73"], ["description", "Example 73 description"], ["publish_on", "2016-05-07 10:07:20.211298"], ["created_at", "2016-05-06 10:07:20.215786"], ["updated_at", "2016-05-06 10:07:20.215786"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 74' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 74"], ["description", "Example 74 description"], ["publish_on", "2016-05-07 10:07:20.211298"], ["created_at", "2016-05-06 10:07:20.217500"], ["updated_at", "2016-05-06 10:07:20.217500"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 75' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 75"], ["description", "Example 75 description"], ["publish_on", "2016-05-07 10:07:20.211298"], ["created_at", "2016-05-06 10:07:20.219212"], ["updated_at", "2016-05-06 10:07:20.219212"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 76' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 76"], ["description", "Example 76 description"], ["publish_on", "2016-05-07 10:07:20.211298"], ["created_at", "2016-05-06 10:07:20.220926"], ["updated_at", "2016-05-06 10:07:20.220926"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 77' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 77"], ["description", "Example 77 description"], ["publish_on", "2016-05-07 10:07:20.211298"], ["created_at", "2016-05-06 10:07:20.222711"], ["updated_at", "2016-05-06 10:07:20.222711"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 78' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 78"], ["description", "Example 78 description"], ["publish_on", "2016-05-07 10:07:20.211298"], ["created_at", "2016-05-06 10:07:20.225341"], ["updated_at", "2016-05-06 10:07:20.225341"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 79' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 79"], ["description", "Example 79 description"], ["publish_on", "2016-05-07 10:07:20.211298"], ["created_at", "2016-05-06 10:07:20.227600"], ["updated_at", "2016-05-06 10:07:20.227600"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 80' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 80"], ["description", "Example 80 description"], ["publish_on", "2016-05-07 10:07:20.211298"], ["created_at", "2016-05-06 10:07:20.229522"], ["updated_at", "2016-05-06 10:07:20.229522"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 81' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 81"], ["description", "Example 81 description"], ["publish_on", "2016-05-06 10:06:20.230457"], ["created_at", "2016-05-06 10:07:20.231390"], ["updated_at", "2016-05-06 10:07:20.231390"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 82' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 82"], ["description", "Example 82 description"], ["publish_on", "2016-05-06 10:06:20.230457"], ["created_at", "2016-05-06 10:07:20.233642"], ["updated_at", "2016-05-06 10:07:20.233642"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 83' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 83"], ["description", "Example 83 description"], ["publish_on", "2016-05-06 10:06:20.230457"], ["created_at", "2016-05-06 10:07:20.235872"], ["updated_at", "2016-05-06 10:07:20.235872"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 84' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 84"], ["description", "Example 84 description"], ["publish_on", "2016-05-06 10:06:20.230457"], ["created_at", "2016-05-06 10:07:20.237836"], ["updated_at", "2016-05-06 10:07:20.237836"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 85' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 85"], ["description", "Example 85 description"], ["publish_on", "2016-05-06 10:06:20.230457"], ["created_at", "2016-05-06 10:07:20.239669"], ["updated_at", "2016-05-06 10:07:20.239669"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 86' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 86"], ["description", "Example 86 description"], ["publish_on", "2016-05-06 10:06:20.230457"], ["created_at", "2016-05-06 10:07:20.241457"], ["updated_at", "2016-05-06 10:07:20.241457"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 87' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 87"], ["description", "Example 87 description"], ["publish_on", "2016-05-06 10:06:20.230457"], ["created_at", "2016-05-06 10:07:20.243208"], ["updated_at", "2016-05-06 10:07:20.243208"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 88' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 88"], ["description", "Example 88 description"], ["publish_on", "2016-05-06 10:06:20.230457"], ["created_at", "2016-05-06 10:07:20.244967"], ["updated_at", "2016-05-06 10:07:20.244967"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 89' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 89"], ["description", "Example 89 description"], ["publish_on", "2016-05-06 10:06:20.230457"], ["created_at", "2016-05-06 10:07:20.246710"], ["updated_at", "2016-05-06 10:07:20.246710"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 90' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 90"], ["description", "Example 90 description"], ["publish_on", "2016-05-06 10:06:20.230457"], ["created_at", "2016-05-06 10:07:20.248450"], ["updated_at", "2016-05-06 10:07:20.248450"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 60' AND "products"."id" != 1 AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 60' AND "products"."id" != 1 AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 60' AND "products"."id" != 1 AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "products" SET "publish_on" = ?, "updated_at" = ? WHERE "products"."id" = ?  [["publish_on", "2016-05-08 10:07:20.251001"], ["updated_at", "2016-05-06 10:07:20.251781"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 60' AND "products"."id" != 1 AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 60' AND "products"."id" != 1 AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "products" SET "publish_on" = ?, "published_at" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["publish_on", nil], ["published_at", "2016-05-04 10:07:20.253155"], ["updated_at", "2016-05-06 10:07:20.253931"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 60' AND "products"."id" != 1 AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------
MagazCore::ProductTest: test_two_products_with_same_handle_and_different_shops
------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 91' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example 91"], ["description", "Example 91 description"], ["created_at", "2016-05-06 10:07:20.259166"], ["updated_at", "2016-05-06 10:07:20.259166"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 92' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 92"], ["description", "Example 92 description"], ["published_at", "2016-05-06 10:06:20.260231"], ["created_at", "2016-05-06 10:07:20.261161"], ["updated_at", "2016-05-06 10:07:20.261161"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 93' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 93"], ["description", "Example 93 description"], ["published_at", "2016-05-06 10:06:20.260231"], ["created_at", "2016-05-06 10:07:20.263006"], ["updated_at", "2016-05-06 10:07:20.263006"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 94' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 94"], ["description", "Example 94 description"], ["published_at", "2016-05-06 10:06:20.260231"], ["created_at", "2016-05-06 10:07:20.264775"], ["updated_at", "2016-05-06 10:07:20.264775"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 95' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 95"], ["description", "Example 95 description"], ["published_at", "2016-05-06 10:06:20.260231"], ["created_at", "2016-05-06 10:07:20.266658"], ["updated_at", "2016-05-06 10:07:20.266658"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 96' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 96"], ["description", "Example 96 description"], ["published_at", "2016-05-06 10:06:20.260231"], ["created_at", "2016-05-06 10:07:20.268400"], ["updated_at", "2016-05-06 10:07:20.268400"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 97' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 97"], ["description", "Example 97 description"], ["published_at", "2016-05-06 10:06:20.260231"], ["created_at", "2016-05-06 10:07:20.270034"], ["updated_at", "2016-05-06 10:07:20.270034"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 98' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 98"], ["description", "Example 98 description"], ["published_at", "2016-05-06 10:06:20.260231"], ["created_at", "2016-05-06 10:07:20.271659"], ["updated_at", "2016-05-06 10:07:20.271659"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 99' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 99"], ["description", "Example 99 description"], ["published_at", "2016-05-06 10:06:20.260231"], ["created_at", "2016-05-06 10:07:20.273277"], ["updated_at", "2016-05-06 10:07:20.273277"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 100' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 100"], ["description", "Example 100 description"], ["published_at", "2016-05-06 10:06:20.260231"], ["created_at", "2016-05-06 10:07:20.274902"], ["updated_at", "2016-05-06 10:07:20.274902"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 101' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 101"], ["description", "Example 101 description"], ["published_at", "2016-05-06 10:06:20.260231"], ["created_at", "2016-05-06 10:07:20.276520"], ["updated_at", "2016-05-06 10:07:20.276520"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 102' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 102"], ["description", "Example 102 description"], ["publish_on", "2016-05-07 10:07:20.277324"], ["created_at", "2016-05-06 10:07:20.278229"], ["updated_at", "2016-05-06 10:07:20.278229"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 103' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 103"], ["description", "Example 103 description"], ["publish_on", "2016-05-07 10:07:20.277324"], ["created_at", "2016-05-06 10:07:20.279997"], ["updated_at", "2016-05-06 10:07:20.279997"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 104' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 104"], ["description", "Example 104 description"], ["publish_on", "2016-05-07 10:07:20.277324"], ["created_at", "2016-05-06 10:07:20.281711"], ["updated_at", "2016-05-06 10:07:20.281711"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 105' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 105"], ["description", "Example 105 description"], ["publish_on", "2016-05-07 10:07:20.277324"], ["created_at", "2016-05-06 10:07:20.283463"], ["updated_at", "2016-05-06 10:07:20.283463"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 106' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 106"], ["description", "Example 106 description"], ["publish_on", "2016-05-07 10:07:20.277324"], ["created_at", "2016-05-06 10:07:20.285161"], ["updated_at", "2016-05-06 10:07:20.285161"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 107' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 107"], ["description", "Example 107 description"], ["publish_on", "2016-05-07 10:07:20.277324"], ["created_at", "2016-05-06 10:07:20.286876"], ["updated_at", "2016-05-06 10:07:20.286876"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 108' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 108"], ["description", "Example 108 description"], ["publish_on", "2016-05-07 10:07:20.277324"], ["created_at", "2016-05-06 10:07:20.288575"], ["updated_at", "2016-05-06 10:07:20.288575"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 109' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 109"], ["description", "Example 109 description"], ["publish_on", "2016-05-07 10:07:20.277324"], ["created_at", "2016-05-06 10:07:20.290273"], ["updated_at", "2016-05-06 10:07:20.290273"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 110' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 110"], ["description", "Example 110 description"], ["publish_on", "2016-05-07 10:07:20.277324"], ["created_at", "2016-05-06 10:07:20.292023"], ["updated_at", "2016-05-06 10:07:20.292023"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 111' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 111"], ["description", "Example 111 description"], ["publish_on", "2016-05-07 10:07:20.277324"], ["created_at", "2016-05-06 10:07:20.294327"], ["updated_at", "2016-05-06 10:07:20.294327"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 112' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 112"], ["description", "Example 112 description"], ["publish_on", "2016-05-06 10:06:20.295686"], ["created_at", "2016-05-06 10:07:20.296996"], ["updated_at", "2016-05-06 10:07:20.296996"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 113' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 113"], ["description", "Example 113 description"], ["publish_on", "2016-05-06 10:06:20.295686"], ["created_at", "2016-05-06 10:07:20.299459"], ["updated_at", "2016-05-06 10:07:20.299459"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 114' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 114"], ["description", "Example 114 description"], ["publish_on", "2016-05-06 10:06:20.295686"], ["created_at", "2016-05-06 10:07:20.302809"], ["updated_at", "2016-05-06 10:07:20.302809"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 115' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 115"], ["description", "Example 115 description"], ["publish_on", "2016-05-06 10:06:20.295686"], ["created_at", "2016-05-06 10:07:20.305499"], ["updated_at", "2016-05-06 10:07:20.305499"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 116' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 116"], ["description", "Example 116 description"], ["publish_on", "2016-05-06 10:06:20.295686"], ["created_at", "2016-05-06 10:07:20.307796"], ["updated_at", "2016-05-06 10:07:20.307796"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 117' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 117"], ["description", "Example 117 description"], ["publish_on", "2016-05-06 10:06:20.295686"], ["created_at", "2016-05-06 10:07:20.309845"], ["updated_at", "2016-05-06 10:07:20.309845"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 118' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 118"], ["description", "Example 118 description"], ["publish_on", "2016-05-06 10:06:20.295686"], ["created_at", "2016-05-06 10:07:20.311730"], ["updated_at", "2016-05-06 10:07:20.311730"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 119' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 119"], ["description", "Example 119 description"], ["publish_on", "2016-05-06 10:06:20.295686"], ["created_at", "2016-05-06 10:07:20.313464"], ["updated_at", "2016-05-06 10:07:20.313464"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 120' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 120"], ["description", "Example 120 description"], ["publish_on", "2016-05-06 10:06:20.295686"], ["created_at", "2016-05-06 10:07:20.315188"], ["updated_at", "2016-05-06 10:07:20.315188"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 121' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 121"], ["description", "Example 121 description"], ["publish_on", "2016-05-06 10:06:20.295686"], ["created_at", "2016-05-06 10:07:20.316961"], ["updated_at", "2016-05-06 10:07:20.316961"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-06 10:07:20.319008"], ["updated_at", "2016-05-06 10:07:20.319008"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop2' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop2"], ["subdomain", "shop2"], ["created_at", "2016-05-06 10:07:20.320892"], ["updated_at", "2016-05-06 10:07:20.320892"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 1 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1[0m  [["slug", "product-handle"]]
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'product' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "product"], ["description", "Example 122 description"], ["handle", "product-handle"], ["shop_id", 1], ["slug", "product-handle"], ["created_at", "2016-05-06 10:07:20.323605"], ["updated_at", "2016-05-06 10:07:20.323605"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 2 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1  [["slug", "product-handle"]]
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'product' AND "products"."shop_id" = 2) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["name", "product"], ["handle", "product-handle"], ["shop_id", 2], ["slug", "product-handle"], ["created_at", "2016-05-06 10:07:20.326938"], ["updated_at", "2016-05-06 10:07:20.326938"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------
MagazCore::ProductTest: test_two_products_with_same_handle_and_same_shop
------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 122' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example 122"], ["description", "Example 123 description"], ["created_at", "2016-05-06 10:07:20.331757"], ["updated_at", "2016-05-06 10:07:20.331757"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 123' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 123"], ["description", "Example 124 description"], ["published_at", "2016-05-06 10:06:20.332863"], ["created_at", "2016-05-06 10:07:20.333810"], ["updated_at", "2016-05-06 10:07:20.333810"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 124' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 124"], ["description", "Example 125 description"], ["published_at", "2016-05-06 10:06:20.332863"], ["created_at", "2016-05-06 10:07:20.335617"], ["updated_at", "2016-05-06 10:07:20.335617"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 125' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 125"], ["description", "Example 126 description"], ["published_at", "2016-05-06 10:06:20.332863"], ["created_at", "2016-05-06 10:07:20.337234"], ["updated_at", "2016-05-06 10:07:20.337234"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 126' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 126"], ["description", "Example 127 description"], ["published_at", "2016-05-06 10:06:20.332863"], ["created_at", "2016-05-06 10:07:20.338849"], ["updated_at", "2016-05-06 10:07:20.338849"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 127' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 127"], ["description", "Example 128 description"], ["published_at", "2016-05-06 10:06:20.332863"], ["created_at", "2016-05-06 10:07:20.340913"], ["updated_at", "2016-05-06 10:07:20.340913"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 128' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 128"], ["description", "Example 129 description"], ["published_at", "2016-05-06 10:06:20.332863"], ["created_at", "2016-05-06 10:07:20.342658"], ["updated_at", "2016-05-06 10:07:20.342658"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 129' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 129"], ["description", "Example 130 description"], ["published_at", "2016-05-06 10:06:20.332863"], ["created_at", "2016-05-06 10:07:20.344367"], ["updated_at", "2016-05-06 10:07:20.344367"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 130' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 130"], ["description", "Example 131 description"], ["published_at", "2016-05-06 10:06:20.332863"], ["created_at", "2016-05-06 10:07:20.346009"], ["updated_at", "2016-05-06 10:07:20.346009"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 131' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 131"], ["description", "Example 132 description"], ["published_at", "2016-05-06 10:06:20.332863"], ["created_at", "2016-05-06 10:07:20.347643"], ["updated_at", "2016-05-06 10:07:20.347643"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 132' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 132"], ["description", "Example 133 description"], ["published_at", "2016-05-06 10:06:20.332863"], ["created_at", "2016-05-06 10:07:20.349286"], ["updated_at", "2016-05-06 10:07:20.349286"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 133' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 133"], ["description", "Example 134 description"], ["publish_on", "2016-05-07 10:07:20.350136"], ["created_at", "2016-05-06 10:07:20.351043"], ["updated_at", "2016-05-06 10:07:20.351043"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 134' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 134"], ["description", "Example 135 description"], ["publish_on", "2016-05-07 10:07:20.350136"], ["created_at", "2016-05-06 10:07:20.352951"], ["updated_at", "2016-05-06 10:07:20.352951"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 135' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 135"], ["description", "Example 136 description"], ["publish_on", "2016-05-07 10:07:20.350136"], ["created_at", "2016-05-06 10:07:20.354764"], ["updated_at", "2016-05-06 10:07:20.354764"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 136' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 136"], ["description", "Example 137 description"], ["publish_on", "2016-05-07 10:07:20.350136"], ["created_at", "2016-05-06 10:07:20.356804"], ["updated_at", "2016-05-06 10:07:20.356804"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 137' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 137"], ["description", "Example 138 description"], ["publish_on", "2016-05-07 10:07:20.350136"], ["created_at", "2016-05-06 10:07:20.358502"], ["updated_at", "2016-05-06 10:07:20.358502"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 138' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 138"], ["description", "Example 139 description"], ["publish_on", "2016-05-07 10:07:20.350136"], ["created_at", "2016-05-06 10:07:20.360204"], ["updated_at", "2016-05-06 10:07:20.360204"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 139' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 139"], ["description", "Example 140 description"], ["publish_on", "2016-05-07 10:07:20.350136"], ["created_at", "2016-05-06 10:07:20.361921"], ["updated_at", "2016-05-06 10:07:20.361921"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 140' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 140"], ["description", "Example 141 description"], ["publish_on", "2016-05-07 10:07:20.350136"], ["created_at", "2016-05-06 10:07:20.363609"], ["updated_at", "2016-05-06 10:07:20.363609"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 141' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 141"], ["description", "Example 142 description"], ["publish_on", "2016-05-07 10:07:20.350136"], ["created_at", "2016-05-06 10:07:20.365372"], ["updated_at", "2016-05-06 10:07:20.365372"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 142' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 142"], ["description", "Example 143 description"], ["publish_on", "2016-05-07 10:07:20.350136"], ["created_at", "2016-05-06 10:07:20.367373"], ["updated_at", "2016-05-06 10:07:20.367373"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 143' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 143"], ["description", "Example 144 description"], ["publish_on", "2016-05-06 10:06:20.368330"], ["created_at", "2016-05-06 10:07:20.369249"], ["updated_at", "2016-05-06 10:07:20.369249"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 144' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 144"], ["description", "Example 145 description"], ["publish_on", "2016-05-06 10:06:20.368330"], ["created_at", "2016-05-06 10:07:20.371014"], ["updated_at", "2016-05-06 10:07:20.371014"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 145' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 145"], ["description", "Example 146 description"], ["publish_on", "2016-05-06 10:06:20.368330"], ["created_at", "2016-05-06 10:07:20.373171"], ["updated_at", "2016-05-06 10:07:20.373171"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 146' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 146"], ["description", "Example 147 description"], ["publish_on", "2016-05-06 10:06:20.368330"], ["created_at", "2016-05-06 10:07:20.375160"], ["updated_at", "2016-05-06 10:07:20.375160"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 147' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 147"], ["description", "Example 148 description"], ["publish_on", "2016-05-06 10:06:20.368330"], ["created_at", "2016-05-06 10:07:20.376879"], ["updated_at", "2016-05-06 10:07:20.376879"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 148' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 148"], ["description", "Example 149 description"], ["publish_on", "2016-05-06 10:06:20.368330"], ["created_at", "2016-05-06 10:07:20.378611"], ["updated_at", "2016-05-06 10:07:20.378611"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 149' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 149"], ["description", "Example 150 description"], ["publish_on", "2016-05-06 10:06:20.368330"], ["created_at", "2016-05-06 10:07:20.380309"], ["updated_at", "2016-05-06 10:07:20.380309"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 150' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 150"], ["description", "Example 151 description"], ["publish_on", "2016-05-06 10:06:20.368330"], ["created_at", "2016-05-06 10:07:20.382006"], ["updated_at", "2016-05-06 10:07:20.382006"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 151' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 151"], ["description", "Example 152 description"], ["publish_on", "2016-05-06 10:06:20.368330"], ["created_at", "2016-05-06 10:07:20.383921"], ["updated_at", "2016-05-06 10:07:20.383921"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 152' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 152"], ["description", "Example 153 description"], ["publish_on", "2016-05-06 10:06:20.368330"], ["created_at", "2016-05-06 10:07:20.385958"], ["updated_at", "2016-05-06 10:07:20.385958"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop1' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop1"], ["subdomain", "shop1"], ["created_at", "2016-05-06 10:07:20.388174"], ["updated_at", "2016-05-06 10:07:20.388174"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 1 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1[0m  [["slug", "product-handle"]]
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'product1' AND "products"."shop_id" = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "product1"], ["description", "Example 154 description"], ["handle", "product-handle"], ["shop_id", 1], ["slug", "product-handle"], ["created_at", "2016-05-06 10:07:20.390944"], ["updated_at", "2016-05-06 10:07:20.390944"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.0ms)[0m  SELECT  1 AS one FROM "products" WHERE "products"."shop_id" = 1 AND ("products"."id" IS NOT NULL) AND "products"."slug" = ? LIMIT 1  [["slug", "product-handle"]]
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'product2' AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "handle", "shop_id", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["name", "product2"], ["handle", "product-handle"], ["shop_id", 1], ["slug", "product-handle-a0d5d469-2c57-4de8-b0b9-557e4b88d131"], ["created_at", "2016-05-06 10:07:20.393650"], ["updated_at", "2016-05-06 10:07:20.393650"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'product2' AND "products"."id" != 33 AND "products"."shop_id" = 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------
MagazCore::ProductTest: test_validation
---------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.2ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 153' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example 153"], ["description", "Example 155 description"], ["created_at", "2016-05-06 10:07:20.400123"], ["updated_at", "2016-05-06 10:07:20.400123"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 154' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 154"], ["description", "Example 156 description"], ["published_at", "2016-05-06 10:06:20.401561"], ["created_at", "2016-05-06 10:07:20.402818"], ["updated_at", "2016-05-06 10:07:20.402818"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 155' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 155"], ["description", "Example 157 description"], ["published_at", "2016-05-06 10:06:20.401561"], ["created_at", "2016-05-06 10:07:20.405335"], ["updated_at", "2016-05-06 10:07:20.405335"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 156' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 156"], ["description", "Example 158 description"], ["published_at", "2016-05-06 10:06:20.401561"], ["created_at", "2016-05-06 10:07:20.407783"], ["updated_at", "2016-05-06 10:07:20.407783"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 157' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 157"], ["description", "Example 159 description"], ["published_at", "2016-05-06 10:06:20.401561"], ["created_at", "2016-05-06 10:07:20.409748"], ["updated_at", "2016-05-06 10:07:20.409748"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 158' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 158"], ["description", "Example 160 description"], ["published_at", "2016-05-06 10:06:20.401561"], ["created_at", "2016-05-06 10:07:20.411658"], ["updated_at", "2016-05-06 10:07:20.411658"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 159' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 159"], ["description", "Example 161 description"], ["published_at", "2016-05-06 10:06:20.401561"], ["created_at", "2016-05-06 10:07:20.413281"], ["updated_at", "2016-05-06 10:07:20.413281"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 160' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 160"], ["description", "Example 162 description"], ["published_at", "2016-05-06 10:06:20.401561"], ["created_at", "2016-05-06 10:07:20.414900"], ["updated_at", "2016-05-06 10:07:20.414900"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 161' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 161"], ["description", "Example 163 description"], ["published_at", "2016-05-06 10:06:20.401561"], ["created_at", "2016-05-06 10:07:20.416527"], ["updated_at", "2016-05-06 10:07:20.416527"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 162' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 162"], ["description", "Example 164 description"], ["published_at", "2016-05-06 10:06:20.401561"], ["created_at", "2016-05-06 10:07:20.418149"], ["updated_at", "2016-05-06 10:07:20.418149"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 163' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 163"], ["description", "Example 165 description"], ["published_at", "2016-05-06 10:06:20.401561"], ["created_at", "2016-05-06 10:07:20.419755"], ["updated_at", "2016-05-06 10:07:20.419755"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 164' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 164"], ["description", "Example 166 description"], ["publish_on", "2016-05-07 10:07:20.420559"], ["created_at", "2016-05-06 10:07:20.421459"], ["updated_at", "2016-05-06 10:07:20.421459"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 165' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 165"], ["description", "Example 167 description"], ["publish_on", "2016-05-07 10:07:20.420559"], ["created_at", "2016-05-06 10:07:20.423223"], ["updated_at", "2016-05-06 10:07:20.423223"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 166' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 166"], ["description", "Example 168 description"], ["publish_on", "2016-05-07 10:07:20.420559"], ["created_at", "2016-05-06 10:07:20.424934"], ["updated_at", "2016-05-06 10:07:20.424934"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 167' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 167"], ["description", "Example 169 description"], ["publish_on", "2016-05-07 10:07:20.420559"], ["created_at", "2016-05-06 10:07:20.426636"], ["updated_at", "2016-05-06 10:07:20.426636"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 168' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 168"], ["description", "Example 170 description"], ["publish_on", "2016-05-07 10:07:20.420559"], ["created_at", "2016-05-06 10:07:20.428340"], ["updated_at", "2016-05-06 10:07:20.428340"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 169' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 169"], ["description", "Example 171 description"], ["publish_on", "2016-05-07 10:07:20.420559"], ["created_at", "2016-05-06 10:07:20.430043"], ["updated_at", "2016-05-06 10:07:20.430043"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 170' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 170"], ["description", "Example 172 description"], ["publish_on", "2016-05-07 10:07:20.420559"], ["created_at", "2016-05-06 10:07:20.431758"], ["updated_at", "2016-05-06 10:07:20.431758"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 171' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 171"], ["description", "Example 173 description"], ["publish_on", "2016-05-07 10:07:20.420559"], ["created_at", "2016-05-06 10:07:20.433577"], ["updated_at", "2016-05-06 10:07:20.433577"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 172' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 172"], ["description", "Example 174 description"], ["publish_on", "2016-05-07 10:07:20.420559"], ["created_at", "2016-05-06 10:07:20.435601"], ["updated_at", "2016-05-06 10:07:20.435601"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 173' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 173"], ["description", "Example 175 description"], ["publish_on", "2016-05-07 10:07:20.420559"], ["created_at", "2016-05-06 10:07:20.437381"], ["updated_at", "2016-05-06 10:07:20.437381"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 174' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 174"], ["description", "Example 176 description"], ["publish_on", "2016-05-06 10:06:20.438291"], ["created_at", "2016-05-06 10:07:20.439161"], ["updated_at", "2016-05-06 10:07:20.439161"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 175' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 175"], ["description", "Example 177 description"], ["publish_on", "2016-05-06 10:06:20.438291"], ["created_at", "2016-05-06 10:07:20.440859"], ["updated_at", "2016-05-06 10:07:20.440859"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 176' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 176"], ["description", "Example 178 description"], ["publish_on", "2016-05-06 10:06:20.438291"], ["created_at", "2016-05-06 10:07:20.442585"], ["updated_at", "2016-05-06 10:07:20.442585"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 177' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 177"], ["description", "Example 179 description"], ["publish_on", "2016-05-06 10:06:20.438291"], ["created_at", "2016-05-06 10:07:20.444356"], ["updated_at", "2016-05-06 10:07:20.444356"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 178' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 178"], ["description", "Example 180 description"], ["publish_on", "2016-05-06 10:06:20.438291"], ["created_at", "2016-05-06 10:07:20.446271"], ["updated_at", "2016-05-06 10:07:20.446271"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 179' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 179"], ["description", "Example 181 description"], ["publish_on", "2016-05-06 10:06:20.438291"], ["created_at", "2016-05-06 10:07:20.447959"], ["updated_at", "2016-05-06 10:07:20.447959"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 180' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 180"], ["description", "Example 182 description"], ["publish_on", "2016-05-06 10:06:20.438291"], ["created_at", "2016-05-06 10:07:20.449670"], ["updated_at", "2016-05-06 10:07:20.449670"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 181' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 181"], ["description", "Example 183 description"], ["publish_on", "2016-05-06 10:06:20.438291"], ["created_at", "2016-05-06 10:07:20.451701"], ["updated_at", "2016-05-06 10:07:20.451701"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 182' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 182"], ["description", "Example 184 description"], ["publish_on", "2016-05-06 10:06:20.438291"], ["created_at", "2016-05-06 10:07:20.453616"], ["updated_at", "2016-05-06 10:07:20.453616"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 183' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 183"], ["description", "Example 185 description"], ["publish_on", "2016-05-06 10:06:20.438291"], ["created_at", "2016-05-06 10:07:20.455392"], ["updated_at", "2016-05-06 10:07:20.455392"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
MagazCore::ProductTest: test_visibility_scopes
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.2ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 184' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example 184"], ["description", "Example 186 description"], ["created_at", "2016-05-06 10:07:20.469739"], ["updated_at", "2016-05-06 10:07:20.469739"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 185' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 185"], ["description", "Example 187 description"], ["published_at", "2016-05-06 10:06:20.471227"], ["created_at", "2016-05-06 10:07:20.472671"], ["updated_at", "2016-05-06 10:07:20.472671"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 186' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 186"], ["description", "Example 188 description"], ["published_at", "2016-05-06 10:06:20.471227"], ["created_at", "2016-05-06 10:07:20.475305"], ["updated_at", "2016-05-06 10:07:20.475305"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 187' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 187"], ["description", "Example 189 description"], ["published_at", "2016-05-06 10:06:20.471227"], ["created_at", "2016-05-06 10:07:20.477378"], ["updated_at", "2016-05-06 10:07:20.477378"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 188' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 188"], ["description", "Example 190 description"], ["published_at", "2016-05-06 10:06:20.471227"], ["created_at", "2016-05-06 10:07:20.479331"], ["updated_at", "2016-05-06 10:07:20.479331"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 189' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 189"], ["description", "Example 191 description"], ["published_at", "2016-05-06 10:06:20.471227"], ["created_at", "2016-05-06 10:07:20.481063"], ["updated_at", "2016-05-06 10:07:20.481063"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 190' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 190"], ["description", "Example 192 description"], ["published_at", "2016-05-06 10:06:20.471227"], ["created_at", "2016-05-06 10:07:20.483042"], ["updated_at", "2016-05-06 10:07:20.483042"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 191' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 191"], ["description", "Example 193 description"], ["published_at", "2016-05-06 10:06:20.471227"], ["created_at", "2016-05-06 10:07:20.484871"], ["updated_at", "2016-05-06 10:07:20.484871"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 192' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 192"], ["description", "Example 194 description"], ["published_at", "2016-05-06 10:06:20.471227"], ["created_at", "2016-05-06 10:07:20.486627"], ["updated_at", "2016-05-06 10:07:20.486627"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 193' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 193"], ["description", "Example 195 description"], ["published_at", "2016-05-06 10:06:20.471227"], ["created_at", "2016-05-06 10:07:20.488342"], ["updated_at", "2016-05-06 10:07:20.488342"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 194' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 194"], ["description", "Example 196 description"], ["published_at", "2016-05-06 10:06:20.471227"], ["created_at", "2016-05-06 10:07:20.490026"], ["updated_at", "2016-05-06 10:07:20.490026"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 195' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 195"], ["description", "Example 197 description"], ["publish_on", "2016-05-07 10:07:20.490856"], ["created_at", "2016-05-06 10:07:20.491802"], ["updated_at", "2016-05-06 10:07:20.491802"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 196' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 196"], ["description", "Example 198 description"], ["publish_on", "2016-05-07 10:07:20.490856"], ["created_at", "2016-05-06 10:07:20.493650"], ["updated_at", "2016-05-06 10:07:20.493650"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 197' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 197"], ["description", "Example 199 description"], ["publish_on", "2016-05-07 10:07:20.490856"], ["created_at", "2016-05-06 10:07:20.495454"], ["updated_at", "2016-05-06 10:07:20.495454"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 198' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 198"], ["description", "Example 200 description"], ["publish_on", "2016-05-07 10:07:20.490856"], ["created_at", "2016-05-06 10:07:20.497223"], ["updated_at", "2016-05-06 10:07:20.497223"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 199' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 199"], ["description", "Example 201 description"], ["publish_on", "2016-05-07 10:07:20.490856"], ["created_at", "2016-05-06 10:07:20.499025"], ["updated_at", "2016-05-06 10:07:20.499025"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 200' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 200"], ["description", "Example 202 description"], ["publish_on", "2016-05-07 10:07:20.490856"], ["created_at", "2016-05-06 10:07:20.500782"], ["updated_at", "2016-05-06 10:07:20.500782"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 201' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 201"], ["description", "Example 203 description"], ["publish_on", "2016-05-07 10:07:20.490856"], ["created_at", "2016-05-06 10:07:20.503311"], ["updated_at", "2016-05-06 10:07:20.503311"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 202' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 202"], ["description", "Example 204 description"], ["publish_on", "2016-05-07 10:07:20.490856"], ["created_at", "2016-05-06 10:07:20.506284"], ["updated_at", "2016-05-06 10:07:20.506284"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 203' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 203"], ["description", "Example 205 description"], ["publish_on", "2016-05-07 10:07:20.490856"], ["created_at", "2016-05-06 10:07:20.508849"], ["updated_at", "2016-05-06 10:07:20.508849"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 204' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 204"], ["description", "Example 206 description"], ["publish_on", "2016-05-07 10:07:20.490856"], ["created_at", "2016-05-06 10:07:20.511420"], ["updated_at", "2016-05-06 10:07:20.511420"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 205' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 205"], ["description", "Example 207 description"], ["publish_on", "2016-05-06 10:06:20.512697"], ["created_at", "2016-05-06 10:07:20.513739"], ["updated_at", "2016-05-06 10:07:20.513739"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 206' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 206"], ["description", "Example 208 description"], ["publish_on", "2016-05-06 10:06:20.512697"], ["created_at", "2016-05-06 10:07:20.515829"], ["updated_at", "2016-05-06 10:07:20.515829"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 207' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 207"], ["description", "Example 209 description"], ["publish_on", "2016-05-06 10:06:20.512697"], ["created_at", "2016-05-06 10:07:20.518155"], ["updated_at", "2016-05-06 10:07:20.518155"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 208' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 208"], ["description", "Example 210 description"], ["publish_on", "2016-05-06 10:06:20.512697"], ["created_at", "2016-05-06 10:07:20.520453"], ["updated_at", "2016-05-06 10:07:20.520453"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 209' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 209"], ["description", "Example 211 description"], ["publish_on", "2016-05-06 10:06:20.512697"], ["created_at", "2016-05-06 10:07:20.522491"], ["updated_at", "2016-05-06 10:07:20.522491"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 210' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 210"], ["description", "Example 212 description"], ["publish_on", "2016-05-06 10:06:20.512697"], ["created_at", "2016-05-06 10:07:20.524286"], ["updated_at", "2016-05-06 10:07:20.524286"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 211' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 211"], ["description", "Example 213 description"], ["publish_on", "2016-05-06 10:06:20.512697"], ["created_at", "2016-05-06 10:07:20.526095"], ["updated_at", "2016-05-06 10:07:20.526095"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 212' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 212"], ["description", "Example 214 description"], ["publish_on", "2016-05-06 10:06:20.512697"], ["created_at", "2016-05-06 10:07:20.527874"], ["updated_at", "2016-05-06 10:07:20.527874"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 213' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 213"], ["description", "Example 215 description"], ["publish_on", "2016-05-06 10:06:20.512697"], ["created_at", "2016-05-06 10:07:20.529672"], ["updated_at", "2016-05-06 10:07:20.529672"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 214' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 214"], ["description", "Example 216 description"], ["publish_on", "2016-05-06 10:06:20.512697"], ["created_at", "2016-05-06 10:07:20.531695"], ["updated_at", "2016-05-06 10:07:20.531695"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Load (0.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."publish_on" IS NULL AND ("products"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-06 10:07:20.532815')[0m
  [1m[35mMagazCore::Product Load (0.1ms)[0m  SELECT "products".* FROM "products" WHERE (publish_on >= '2016-05-06 10:07:20.533617') AND "products"."published_at" IS NULL
  [1m[36mMagazCore::Product Load (0.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE (publish_on <= '2016-05-06 10:07:20.534319') AND "products"."published_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
MagazCore::ProductTest: test_visibility_scopes_and_methods
----------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 215' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Example 215"], ["description", "Example 217 description"], ["created_at", "2016-05-06 10:07:20.539033"], ["updated_at", "2016-05-06 10:07:20.539033"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 216' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 216"], ["description", "Example 218 description"], ["published_at", "2016-05-06 10:06:20.540336"], ["created_at", "2016-05-06 10:07:20.541438"], ["updated_at", "2016-05-06 10:07:20.541438"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 217' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 217"], ["description", "Example 219 description"], ["published_at", "2016-05-06 10:06:20.540336"], ["created_at", "2016-05-06 10:07:20.543516"], ["updated_at", "2016-05-06 10:07:20.543516"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 218' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 218"], ["description", "Example 220 description"], ["published_at", "2016-05-06 10:06:20.540336"], ["created_at", "2016-05-06 10:07:20.545448"], ["updated_at", "2016-05-06 10:07:20.545448"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 219' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 219"], ["description", "Example 221 description"], ["published_at", "2016-05-06 10:06:20.540336"], ["created_at", "2016-05-06 10:07:20.547709"], ["updated_at", "2016-05-06 10:07:20.547709"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 220' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 220"], ["description", "Example 222 description"], ["published_at", "2016-05-06 10:06:20.540336"], ["created_at", "2016-05-06 10:07:20.549759"], ["updated_at", "2016-05-06 10:07:20.549759"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 221' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 221"], ["description", "Example 223 description"], ["published_at", "2016-05-06 10:06:20.540336"], ["created_at", "2016-05-06 10:07:20.551754"], ["updated_at", "2016-05-06 10:07:20.551754"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 222' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 222"], ["description", "Example 224 description"], ["published_at", "2016-05-06 10:06:20.540336"], ["created_at", "2016-05-06 10:07:20.553640"], ["updated_at", "2016-05-06 10:07:20.553640"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 223' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 223"], ["description", "Example 225 description"], ["published_at", "2016-05-06 10:06:20.540336"], ["created_at", "2016-05-06 10:07:20.555519"], ["updated_at", "2016-05-06 10:07:20.555519"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 224' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 224"], ["description", "Example 226 description"], ["published_at", "2016-05-06 10:06:20.540336"], ["created_at", "2016-05-06 10:07:20.557470"], ["updated_at", "2016-05-06 10:07:20.557470"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 225' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 225"], ["description", "Example 227 description"], ["published_at", "2016-05-06 10:06:20.540336"], ["created_at", "2016-05-06 10:07:20.559379"], ["updated_at", "2016-05-06 10:07:20.559379"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 226' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 226"], ["description", "Example 228 description"], ["publish_on", "2016-05-07 10:07:20.560387"], ["created_at", "2016-05-06 10:07:20.561488"], ["updated_at", "2016-05-06 10:07:20.561488"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 227' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 227"], ["description", "Example 229 description"], ["publish_on", "2016-05-07 10:07:20.560387"], ["created_at", "2016-05-06 10:07:20.563531"], ["updated_at", "2016-05-06 10:07:20.563531"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 228' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 228"], ["description", "Example 230 description"], ["publish_on", "2016-05-07 10:07:20.560387"], ["created_at", "2016-05-06 10:07:20.565544"], ["updated_at", "2016-05-06 10:07:20.565544"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 229' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 229"], ["description", "Example 231 description"], ["publish_on", "2016-05-07 10:07:20.560387"], ["created_at", "2016-05-06 10:07:20.567586"], ["updated_at", "2016-05-06 10:07:20.567586"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 230' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 230"], ["description", "Example 232 description"], ["publish_on", "2016-05-07 10:07:20.560387"], ["created_at", "2016-05-06 10:07:20.569698"], ["updated_at", "2016-05-06 10:07:20.569698"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 231' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 231"], ["description", "Example 233 description"], ["publish_on", "2016-05-07 10:07:20.560387"], ["created_at", "2016-05-06 10:07:20.571814"], ["updated_at", "2016-05-06 10:07:20.571814"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 232' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 232"], ["description", "Example 234 description"], ["publish_on", "2016-05-07 10:07:20.560387"], ["created_at", "2016-05-06 10:07:20.575058"], ["updated_at", "2016-05-06 10:07:20.575058"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 233' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 233"], ["description", "Example 235 description"], ["publish_on", "2016-05-07 10:07:20.560387"], ["created_at", "2016-05-06 10:07:20.577974"], ["updated_at", "2016-05-06 10:07:20.577974"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 234' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 234"], ["description", "Example 236 description"], ["publish_on", "2016-05-07 10:07:20.560387"], ["created_at", "2016-05-06 10:07:20.580916"], ["updated_at", "2016-05-06 10:07:20.580916"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 235' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 235"], ["description", "Example 237 description"], ["publish_on", "2016-05-07 10:07:20.560387"], ["created_at", "2016-05-06 10:07:20.583900"], ["updated_at", "2016-05-06 10:07:20.583900"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 236' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 236"], ["description", "Example 238 description"], ["publish_on", "2016-05-06 10:06:20.585205"], ["created_at", "2016-05-06 10:07:20.586810"], ["updated_at", "2016-05-06 10:07:20.586810"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 237' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 237"], ["description", "Example 239 description"], ["publish_on", "2016-05-06 10:06:20.585205"], ["created_at", "2016-05-06 10:07:20.589843"], ["updated_at", "2016-05-06 10:07:20.589843"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 238' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 238"], ["description", "Example 240 description"], ["publish_on", "2016-05-06 10:06:20.585205"], ["created_at", "2016-05-06 10:07:20.591943"], ["updated_at", "2016-05-06 10:07:20.591943"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 239' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 239"], ["description", "Example 241 description"], ["publish_on", "2016-05-06 10:06:20.585205"], ["created_at", "2016-05-06 10:07:20.594044"], ["updated_at", "2016-05-06 10:07:20.594044"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 240' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 240"], ["description", "Example 242 description"], ["publish_on", "2016-05-06 10:06:20.585205"], ["created_at", "2016-05-06 10:07:20.596083"], ["updated_at", "2016-05-06 10:07:20.596083"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 241' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 241"], ["description", "Example 243 description"], ["publish_on", "2016-05-06 10:06:20.585205"], ["created_at", "2016-05-06 10:07:20.598150"], ["updated_at", "2016-05-06 10:07:20.598150"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 242' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 242"], ["description", "Example 244 description"], ["publish_on", "2016-05-06 10:06:20.585205"], ["created_at", "2016-05-06 10:07:20.600563"], ["updated_at", "2016-05-06 10:07:20.600563"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 243' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 243"], ["description", "Example 245 description"], ["publish_on", "2016-05-06 10:06:20.585205"], ["created_at", "2016-05-06 10:07:20.602681"], ["updated_at", "2016-05-06 10:07:20.602681"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 244' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 244"], ["description", "Example 246 description"], ["publish_on", "2016-05-06 10:06:20.585205"], ["created_at", "2016-05-06 10:07:20.604724"], ["updated_at", "2016-05-06 10:07:20.604724"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Product Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 245' AND "products"."shop_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "Example 245"], ["description", "Example 247 description"], ["publish_on", "2016-05-06 10:06:20.585205"], ["created_at", "2016-05-06 10:07:20.606528"], ["updated_at", "2016-05-06 10:07:20.606528"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Load (0.1ms)[0m  SELECT "products".* FROM "products" WHERE "products"."publish_on" IS NULL AND ("products"."published_at" BETWEEN '1970-01-01 00:00:00.000000' AND '2016-05-06 10:07:20.607500')
  [1m[36mMagazCore::Product Load (0.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE (publish_on >= '2016-05-06 10:07:20.608489') AND "products"."published_at" IS NULL[0m
  [1m[35mMagazCore::Product Load (0.1ms)[0m  SELECT "products".* FROM "products" WHERE (publish_on <= '2016-05-06 10:07:20.609078') AND "products"."published_at" IS NULL
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
MagazCore::ProductTest: test_worker_created
-------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 246' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "description", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Example 246"], ["description", "Example 248 description"], ["created_at", "2016-05-06 10:07:20.613663"], ["updated_at", "2016-05-06 10:07:20.613663"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 247' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 247"], ["description", "Example 249 description"], ["published_at", "2016-05-06 10:06:20.614767"], ["created_at", "2016-05-06 10:07:20.615720"], ["updated_at", "2016-05-06 10:07:20.615720"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 248' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 248"], ["description", "Example 250 description"], ["published_at", "2016-05-06 10:06:20.614767"], ["created_at", "2016-05-06 10:07:20.617780"], ["updated_at", "2016-05-06 10:07:20.617780"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 249' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 249"], ["description", "Example 251 description"], ["published_at", "2016-05-06 10:06:20.614767"], ["created_at", "2016-05-06 10:07:20.619791"], ["updated_at", "2016-05-06 10:07:20.619791"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 250' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 250"], ["description", "Example 252 description"], ["published_at", "2016-05-06 10:06:20.614767"], ["created_at", "2016-05-06 10:07:20.622168"], ["updated_at", "2016-05-06 10:07:20.622168"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 251' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 251"], ["description", "Example 253 description"], ["published_at", "2016-05-06 10:06:20.614767"], ["created_at", "2016-05-06 10:07:20.624755"], ["updated_at", "2016-05-06 10:07:20.624755"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 252' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 252"], ["description", "Example 254 description"], ["published_at", "2016-05-06 10:06:20.614767"], ["created_at", "2016-05-06 10:07:20.627221"], ["updated_at", "2016-05-06 10:07:20.627221"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 253' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 253"], ["description", "Example 255 description"], ["published_at", "2016-05-06 10:06:20.614767"], ["created_at", "2016-05-06 10:07:20.629645"], ["updated_at", "2016-05-06 10:07:20.629645"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 254' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 254"], ["description", "Example 256 description"], ["published_at", "2016-05-06 10:06:20.614767"], ["created_at", "2016-05-06 10:07:20.631981"], ["updated_at", "2016-05-06 10:07:20.631981"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 255' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 255"], ["description", "Example 257 description"], ["published_at", "2016-05-06 10:06:20.614767"], ["created_at", "2016-05-06 10:07:20.633989"], ["updated_at", "2016-05-06 10:07:20.633989"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 256' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "published_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 256"], ["description", "Example 258 description"], ["published_at", "2016-05-06 10:06:20.614767"], ["created_at", "2016-05-06 10:07:20.635932"], ["updated_at", "2016-05-06 10:07:20.635932"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 257' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 257"], ["description", "Example 259 description"], ["publish_on", "2016-05-07 10:07:20.636778"], ["created_at", "2016-05-06 10:07:20.637732"], ["updated_at", "2016-05-06 10:07:20.637732"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 258' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 258"], ["description", "Example 260 description"], ["publish_on", "2016-05-07 10:07:20.636778"], ["created_at", "2016-05-06 10:07:20.639542"], ["updated_at", "2016-05-06 10:07:20.639542"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 259' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 259"], ["description", "Example 261 description"], ["publish_on", "2016-05-07 10:07:20.636778"], ["created_at", "2016-05-06 10:07:20.641344"], ["updated_at", "2016-05-06 10:07:20.641344"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 260' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 260"], ["description", "Example 262 description"], ["publish_on", "2016-05-07 10:07:20.636778"], ["created_at", "2016-05-06 10:07:20.643161"], ["updated_at", "2016-05-06 10:07:20.643161"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 261' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 261"], ["description", "Example 263 description"], ["publish_on", "2016-05-07 10:07:20.636778"], ["created_at", "2016-05-06 10:07:20.644920"], ["updated_at", "2016-05-06 10:07:20.644920"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 262' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 262"], ["description", "Example 264 description"], ["publish_on", "2016-05-07 10:07:20.636778"], ["created_at", "2016-05-06 10:07:20.646762"], ["updated_at", "2016-05-06 10:07:20.646762"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 263' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 263"], ["description", "Example 265 description"], ["publish_on", "2016-05-07 10:07:20.636778"], ["created_at", "2016-05-06 10:07:20.648982"], ["updated_at", "2016-05-06 10:07:20.648982"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 264' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 264"], ["description", "Example 266 description"], ["publish_on", "2016-05-07 10:07:20.636778"], ["created_at", "2016-05-06 10:07:20.651167"], ["updated_at", "2016-05-06 10:07:20.651167"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 265' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 265"], ["description", "Example 267 description"], ["publish_on", "2016-05-07 10:07:20.636778"], ["created_at", "2016-05-06 10:07:20.653637"], ["updated_at", "2016-05-06 10:07:20.653637"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 266' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 266"], ["description", "Example 268 description"], ["publish_on", "2016-05-07 10:07:20.636778"], ["created_at", "2016-05-06 10:07:20.655663"], ["updated_at", "2016-05-06 10:07:20.655663"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 267' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 267"], ["description", "Example 269 description"], ["publish_on", "2016-05-06 10:06:20.656655"], ["created_at", "2016-05-06 10:07:20.657607"], ["updated_at", "2016-05-06 10:07:20.657607"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 268' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 268"], ["description", "Example 270 description"], ["publish_on", "2016-05-06 10:06:20.656655"], ["created_at", "2016-05-06 10:07:20.659469"], ["updated_at", "2016-05-06 10:07:20.659469"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 269' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 269"], ["description", "Example 271 description"], ["publish_on", "2016-05-06 10:06:20.656655"], ["created_at", "2016-05-06 10:07:20.661397"], ["updated_at", "2016-05-06 10:07:20.661397"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 270' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 270"], ["description", "Example 272 description"], ["publish_on", "2016-05-06 10:06:20.656655"], ["created_at", "2016-05-06 10:07:20.663248"], ["updated_at", "2016-05-06 10:07:20.663248"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 271' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 271"], ["description", "Example 273 description"], ["publish_on", "2016-05-06 10:06:20.656655"], ["created_at", "2016-05-06 10:07:20.665111"], ["updated_at", "2016-05-06 10:07:20.665111"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 272' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 272"], ["description", "Example 274 description"], ["publish_on", "2016-05-06 10:06:20.656655"], ["created_at", "2016-05-06 10:07:20.667000"], ["updated_at", "2016-05-06 10:07:20.667000"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 273' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 273"], ["description", "Example 275 description"], ["publish_on", "2016-05-06 10:06:20.656655"], ["created_at", "2016-05-06 10:07:20.668800"], ["updated_at", "2016-05-06 10:07:20.668800"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 274' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 274"], ["description", "Example 276 description"], ["publish_on", "2016-05-06 10:06:20.656655"], ["created_at", "2016-05-06 10:07:20.670574"], ["updated_at", "2016-05-06 10:07:20.670574"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 275' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 275"], ["description", "Example 277 description"], ["publish_on", "2016-05-06 10:06:20.656655"], ["created_at", "2016-05-06 10:07:20.672381"], ["updated_at", "2016-05-06 10:07:20.672381"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 276' AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("name", "description", "publish_on", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Example 276"], ["description", "Example 278 description"], ["publish_on", "2016-05-06 10:06:20.656655"], ["created_at", "2016-05-06 10:07:20.674252"], ["updated_at", "2016-05-06 10:07:20.674252"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Product Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Example 246' AND "products"."id" != 1 AND "products"."shop_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "products" SET "publish_on" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["publish_on", "2016-05-08 10:07:20.675452"], ["updated_at", "2016-05-06 10:07:20.676379"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Invite::CreateInviteTest: test_should_create_user_and_send_invite_with_valid_params
-------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::Shop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:20.684316"], ["updated_at", "2016-05-06 10:07:20.684316"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mMagazCore::User Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example35.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "staff_user@example35.com"], ["first_name", "First Name 35 "], ["last_name", "Last Name 35"], ["password_salt", "$2a$10$GNDb2eonl2wuXYLQNroH1e"], ["password_digest", "$2a$10$GNDb2eonl2wuXYLQNroH1ezZitsNu40fIJWoleLeKUBWqj4FjDXqq"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:20.821867"], ["updated_at", "2016-05-06 10:07:20.821867"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35mMagazCore::Shop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mMagazCore::User Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1[0m  [["shop_id", 1], ["email", "some@email.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'some@email.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("email", "shop_id", "invite_token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["email", "some@email.com"], ["shop_id", 1], ["invite_token", "0ae2341241fe3306c711764566ffb9bc51e78263"], ["created_at", "2016-05-06 10:07:20.831377"], ["updated_at", "2016-05-06 10:07:20.831377"]]
  [1m[36mMagazCore::Shop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered /Users/espozito89/projects/magaz/gems/magaz_core/app/views/magaz_core/user_mailer/invite_new_user.html.erb within layouts/mailer (2.6ms)
  Rendered /Users/espozito89/projects/magaz/gems/magaz_core/app/views/layouts/mailer.html.erb (3.1ms)

MagazCore::UserMailer#invite_new_user: processed outbound mail in 232.8ms

Sent mail to some@email.com (15.3ms)
Date: Fri, 06 May 2016 13:07:21 +0300
From: magazmailer@gmail.com
To: some@email.com
Message-ID: <572c6cd9172a4_169c3fdc0a03fa18729f1@Dmitrys-MacBook-Pro.local.mail>
Subject: translation missing:
 en.magaz_core.user_mailer.invite_new_user.subject
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<html>
  <body>
    <!DOCTYPE html>
<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
  </head>
  <body>
    <h1> <span class="translation_missing" title="translation missing: en.magaz_core.user_mailer.invite_new_user.text">Text</span></h1>
    <p> <a href="I&#39;m generated by proc"><span class="translation_missing" title="translation missing: en.magaz_core.user_mailer.invite_new_user.link">Link</span></a> </p>
  </body>
</html>
  </body>
</html>

  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Invite::CreateInviteTest: test_should_not_create_user_and_send_invite_with_blank_params
-----------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:21.103503"], ["updated_at", "2016-05-06 10:07:21.103503"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example36.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example36.com"], ["first_name", "First Name 36 "], ["last_name", "Last Name 36"], ["password_salt", "$2a$10$nt.FhvIm9upl9Bk/n7Q04e"], ["password_digest", "$2a$10$nt.FhvIm9upl9Bk/n7Q04euuWNxwFAAgiC7bwkpaNqsnM14u7JK0m"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:21.245705"], ["updated_at", "2016-05-06 10:07:21.245705"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------
MagazCore::AdminServices::Invite::CreateInviteTest: test_should_not_create_user_and_send_invite_with_existing_email
-------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::Shop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."subdomain" = 'shop_name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "shops" ("name", "subdomain", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "shop_name"], ["subdomain", "shop_name"], ["created_at", "2016-05-06 10:07:21.257791"], ["updated_at", "2016-05-06 10:07:21.257791"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mMagazCore::User Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'staff_user@example37.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "first_name", "last_name", "password_salt", "password_digest", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["email", "staff_user@example37.com"], ["first_name", "First Name 37 "], ["last_name", "Last Name 37"], ["password_salt", "$2a$10$eTbQ1XzaMMVr2fsYe4W0uu"], ["password_digest", "$2a$10$eTbQ1XzaMMVr2fsYe4W0uuAUejcgNDuWBtOtZ7efIdfG.Nbd6XCJu"], ["shop_id", 1], ["created_at", "2016-05-06 10:07:21.403153"], ["updated_at", "2016-05-06 10:07:21.403153"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1  [["shop_id", 1], ["email", "staff_user@example37.com"]]
  [1m[36mMagazCore::Shop Load (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mMagazCore::User Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."shop_id" = ? AND "users"."email" = ? LIMIT 1  [["shop_id", 1], ["email", "staff_user@example37.com"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
